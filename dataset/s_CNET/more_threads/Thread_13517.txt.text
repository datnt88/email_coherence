i have been trying for the last 2 weeks to get a vpn server going behind a router (linksys wrt100). the router is connected to a cable modem which is fed by comcast. i have signed up with no-ip.org to deal with the dynamic ip issue, and i can indeed ping my domain from anywhere and it resolved correctly to the ip i have from comcast. behind the router i have a win 2003 server r2, which is configured as a remote access server. indeed, i can use my laptop connected to the router via wifi to initiate and set up a vpn connection to the server. so, the server should be ok. as soon as i try this from outside, i can't get it to work. my vista laptop tells me that it found the domain and then that it is verifying user name and password. after a couple of minutes i get a message that the connection could not be established. no error numbers. given the fact that i can do that behind the router, it looks like the requests are not reaching the server. comcast told me that they are not blocking any ports, so the problem seems to be the router. i have followed all description on how to set this up (put the server in dmz, enable vpn passthrough, forward ports, etc., but no luck. anybody out there who has seen this and could provide some input? thanks.
also, testing this is a nightmare. to change the settings on any of the devices i have to physically be there, but for testing i have to go outside of my network, which essentially requires me to drive to some place that has wifi. and then back if i need to change something on a device, and then out again to test it.... does anybody know of a better way to test this? finally, is there a log file somewhere on my laptop or the server that i could inspect for more clues about this problem? thanks. thanks
depends what you mean by vpn. if you are building something like a ipsec tunnel between your remote pc and your server and then are using that network to access resources it should work. if you are just tring to use remote desktop from a remote location it may or may not work. some of these applications will not tolerate the nat of the addresses and some isp block some of the mircosoft networking ports. mostly to prevent accidental sharing of drives by stupid people. the best way to do this is to buy a router that has vpn support in and build your tunnels between the router and the remote client. the router handles the issues and your remote pc appears to be on the inside network. to a point you can test by faking the wan port. since your router's wan port is etherent you can just directly plug your remote pc into with a cable. you of course will have to use all static ip address on both your router wan and remote pc. if you cannot just use ip to test you will have to use the host table for name resolution since your router will be disconnected from the internet. this is only good for the most basic testing but that appears to be at the state you are at. you can also run wireshark on the remote and server to see what it going on. it takes quite a bit of skill to understand this tool but most people can tell if they are getting no packets at all.
thanks. ill check out wireshark. my goal is to set up a server that a few people can share to exchange files and information. i envision a bit down the road to use a file server and perhaps an application server. but in order for the people to connect securely, they would have to sign into a domain server and to set up a vpn connection to that server. by the way, a friend of mine has set this up and it works for him (also with comcast). i have tried to duplicate his setup, and the only differences really are the hardware the server runs on, and the router. we have tried together to figure out why his setup works and mine doesn't, but we have not found anything obvious. in essence, that takes out the cable company and the cable modem (works on another setup), as well as my laptop and the server itself (can setup vpn connection behind the router) as culprits. i was hoping that someone here might have had similar problems with the wrt100 and can shed some light on it.

its a toss-up. 
upgrading the processor may require a new motherboard and power supply. 
adding ram would be less expensive and may improve performance. 
if your not looking at gaming, and if your not trying to run memory intensive programs(autocad and such), i would look at other factors. 
256mb of ram in most systems is going to perform quite well. 
(i run a computer lab at a major university, and have 20 of the systems described) cleaning up the drive , ensuring that there is plenty of virtual memory available, removing spy-ware and of course having a good viruscan program and autoscheduling of updates(all) should help. 
as for the fan, if it connects to the motherboard, it may be drawing to much current, or it may be faulty. 
i would try another fan, and if the same results, have the power supply checked. 

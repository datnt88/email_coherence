<s> Noah, I have incorporated the resolution to issue 221.  </s>
<s> In doing so I have modified your proposed text as follows: Original: "Except in the special case of intermediaries (see below), envelopes transmitted by SOAP senders MUST NOT contain PIs.  </s>
<s> Receivers (including intermediaries) receiving an envelope with a PI SHOULD fault with a XXXX fault.  </s>
<s> However, in the case where performance considerations make it impractical for an intermediary to detect PIs in a message to be relayed, such intermediaries MAY leave the PIs unchanged in the relayed message."  </s>
<s> New: "SOAP messages sent by initial SOAP senders MUST NOT contain processing instruction information items.  </s>
<s> SOAP receivers receiving a SOAP message containing a processing instruction information item SHOULD generate a SOAP fault with the Value of Code set to "env:Sender".  </s>
<s> However, in the case where performance considerations make it impractical for an intermediary to detect processing instruction information items in a message to be relayed, such intermediaries MAY leave the processing instruction information items unchanged in the relayed message."  </s>
<s> The main changes were associated with use of terminology from section 1.4: (i) envelope- message to make sure people don't think they can prefix the envelope with a PIII since that is not 'in' the envelope (ii) use of 'initial SOAP sender' instead of 'SOAP sender but not intermediaries' (iii) expansion of PI to processing instruction information item.  </s>
<s> (iv) reference to sender fault made consistent with the rest of the spec.  </s>
<s> I hope you agree that the changes do not affect the semantics or general spirit of the issue resolution.  </s>
<s> Please let me know if you disapprove.  </s>
<s> Regards, Marc.  </s>
<s> Marc Hadley marc.hadley@sun.com  </s>
<s> XML Technology Center, Sun Microsystems.  </s>
<s> I still find it bizarre, though, that an intermediary must not insert a PI but may relay one.  </s>
<s> This seems a little inconsistent to me.  </s>
<s> Why? I think the notion is that adding content is something that you do very explicitly, so doing it wrong is just an error and is never excused.  </s>
<s> The reason for allowing wiggle room at all is the thinking that relaying someone else's content is something that you sometimes want to do in a sort of black-box highly optimized manner.  </s>
<s> Think of a hardware or microcode implementation that makes sure the role attributes don't match the intermediary, then just cut-through streams the header until the end-tag is matched.  </s>
<s> (Perhaps an over-simple example, but I think the spirit is right.)  </s>
<s> There's no reason in the world that such an intermediary should be granted license to _insert_ erroneous content.  </s>
<s> So, I think the approach taken at the F2F is at least plausible, if not necessarily ideal.  </s>
<s> SOAP messages MUST not contain XML Processing instructions.  </s>
<s> Accordingly, initial SOAP senders MUST NOT include processing instructions in a SOAP message, and SOAP intermediaries MUST NOT insert into a SOAP message new headers containing processing instructions.  </s>
<s> An ultimate SOAP recevier that receives a message containing one or more Processing Instructions MUST fault with a SENDER fault.  </s>
<s> A SOAP intermediary receiving a message containing one or more Processing Instructions SHOULD fault with a sender fault, but in situations where performance considerations make such fault detection impractical at the intermediary, the intermediary MAY instead retain the received Processing Instructions in the relayed message.  </s>
<s> If the intermediary chooses not to fault, it MUST retain all the Processing Instructions in the relayed message (the intention being that a downstream intermediary or ultimate receiver will eventually detect the error and fault).  </s>
<s> The last sentence is an innovation, but I think it makes sense.  </s>
<s> Does the above help?  </s>
<s> Noah Mendelsohn Voice: 1-617-693-4036 One Rogers Street Cambridge, MA 02142  </s>
<s> [Adding Henrik back.]  </s>
<s> Ok, makes sense.  </s>
<s> Re. your new last sentence, I like the spirit, but wouldn't an implication be that intermediairies can no longer remove headers targeted to them, when they contain PIs?  </s>
<s> Isn't this in contradiction with the processing model?  </s>
<s> Jean-Jacques.  </s>
<s> I still find it bizarre, though, that an intermediary must not insert a PI but may relay one.  </s>
<s> This seems a little inconsistent to me.  </s>

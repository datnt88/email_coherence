<s> -----Forwarded Message----- From: Dave Reynolds der@hplb.hpl.hp.com Subject: Jena semantic tests Date: 25 Jul 2003 17:05:37 +0100 Following on from Jeremy's posting concerning ARP and the current set of working group tests.  </s>
<s> On the approved entailment tests 20030725, Jena passes 37, declines to implement 5 and fails 1 due to the recent changes in WG decision.  </s>
<s> The latter will be fixed.  </s>
<s> Details below.  </s>
<s> Dave  </s>
<s> Summary: Of the 43 tests: 37 pass OK 1 fail (xml:lang on Literals) and will fix 2 fail and might fix 3 fail and do not intend to fix Of the passes there is one test that needed correction to the downloaded files.  </s>
<s> ** Invalid test: rdfs-subClassOf-a-Property/Manifest.rdf#test001 is defined in the manifest but the data file is not included in the approved_20030725.zip  </s>
<s> file.  </s>
<s> However, downloading the files separately from the respository then this one passes.  </s>
<s> ** Failures - will not fix:  </s>
<s> PositiveEntailmentTest rdfms-seq-representation/Manifest.rdf#test004 - FAIL  </s>
<s> PositiveEntailmentTest rdfms-seq-representation/Manifest.rdf#test002 - FAIL  </s>
<s> These two tests assert that the empty document entails various properties  </s>
<s> of _1.  </s>
<s> By my reading of the specs this is not correct, only mentioned  </s>
<s> container membership properties should result in such entailments and  </s>
<s> there are no such mentions in the empty document.  </s>
<s> If I'm wrong and these tests are correct then we will not implement them anyway, this is too alien to users to be acceptable.  </s>
<s> PositiveEntailmentTest xmlsch-02/Manifest.rdf#whitespace-facet-3 - FAIL  </s>
<s> This tests bNode introduction - that a typed literal entails a graph with a bNode of type rdf:Literal.  </s>
<s> We have deliberately omitted the bNode introduction rules from the reasoner config on the grounds that this is not the way an RDF API should do it - users can query the nodes themselves for type information and creating virtual triples for this would be wrong from an API perspective.  </s>
<s> ** Failures - could fix: NegativeEntailmentTest xmlsch-02/Manifest.rdf#whitespace-facet-2 - FAIL NegativeEntailmentTest xmlsch-02/Manifest.rdf#whitespace-facet-1 - FAIL These test non-mutual entailment of a valid literal with an invalid literal that differs only by whitespace.  </s>
<s> Unfortunately our XSD handling library is happy with the whitespace and doesn't treat " 3 " as an invalid int.  </s>
<s> This could be fixed if that is indeed how XSD is supposed to work, though the current behaviour seems more useful in practice.  </s>
<s> ** Failure - will fix: PositiveEntailmentTest datatypes/Manifest.rdf#language-and-xml-literal - FAIL This is the xml:lang on xml:Literals issue.  </s>
<s> To be fixed.  </s>
<s> ** Pass:  </s>
<s> rdfms-seq-representation/Manifest.rdf#test003 - OK datatypes/Manifest.rdf#semantic-equivalence-between-datatypes - OK datatypes/Manifest.rdf#language-ignored-for-numeric-types-3 - OK datatypes/Manifest.rdf#range-clash - OK datatypes/Manifest.rdf#test010 - OK datatypes/Manifest.rdf#test008 - OK tex-01/Manifest.rdf#language-tag-case-1 - OK datatypes/Manifest.rdf#language-ignored-for-numeric-types-2 - OK datatypes/Manifest.rdf#semantic-equivalence-within-type-1 - OK tex-01/Manifest.rdf#language-tag-case-2 - OK rdfs-subPropertyOf-semantics/Manifest.rdf#test001 - OK datatypes/Manifest.rdf#non-well-formed-literal-1 - OK datatypes/Manifest.rdf#language-ignored-for-numeric-types-1 - OK rdfs-no-cycles-in-subClassOf/Manifest.rdf#test001 - OK datatypes/Manifest.rdf#semantic-equivalence-within-type-2 - OK rdfs-no-cycles-in-subPropertyOf/Manifest.rdf#test001 - OK rdf-charmod-uris/Manifest.rdf#test003 - OK rdfs-subClassOf-a-Property/Manifest.rdf#test001 - OK rdfs-domain-and-range/Manifest.rdf#intensionality-domain - OK statement-entailment/Manifest.rdf#test003 - OK datatypes/Manifest.rdf#non-well-formed-literal-2 - OK rdfms-xmllang/Manifest.rdf#test007a - OK statement-entailment/Manifest.rdf#test004 - OK horst-01/Manifest.rdf#subClassOf-intensional - OK rdfs-container-membership-superProperty/Manifest.rdf#test001 - OK rdfs-domain-and-range/Manifest.rdf#intensionality-range - OK datatypes/Manifest.rdf#test009 - OK statement-entailment/Manifest.rdf#test001 - OK rdf-charmod-uris/Manifest.rdf#test004 - OK rdfms-xmllang/Manifest.rdf#test007b - OK horst-01/Manifest.rdf#subPropertyOf-intensional - OK xmlsch-02/Manifest.rdf#whitespace-facet-4 - OK rdfms-xmllang/Manifest.rdf#test007c - OK statement-entailment/Manifest.rdf#test002 - OK Dave  </s>
<s> That's my understanding too.  </s>
<s> I haven't double-checked the text.  </s>
<s> I recommend changing the test.  </s>
<s> Hmm... I wonder what that means for queries ala find all ?V such that myDoc dc:author ?V. ?V rdf:type rdfs:Literal.  </s>
<s> Seems like something to watch during CR... er... hmm... we're leaning toward not doing a CR. hmm...  </s>
<s> Would somebody please turn that into a question of clarification for the XML Schema folks?  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> FAIL  </s>
<s> FAIL  </s>
<s> properties  </s>
<s> I was looking in the table of the "RDFS axiomatic triples" at and found that rdf:_1 rdf:type rdfs:ContainerMembershipProperty . is an RDFS axiomatic triple (following from the empty KB) so test002 - OK  </s>
<s> Given this, rdfs12 is applicable http://www.agfa.com/w3c/euler/rdfs-rules#rdfs12 .  </s>
<s> {[ iw:Variable "?X"] = http://www.w3.org/1999/02/22-rdf-syntax-ns#_1 .  </s>
<s> [ iw:Variable "?X"] a rdfs:ContainerMembershipProperty} = { http://www.w3.org/1999/02/22-rdf-syntax-ns#_1 a rdfs:ContainerMembershipProperty}} = { http://www.w3.org/1999/02/22-rdf-syntax-ns#_1 http://www.w3.org/2000/01/rdf-schema#member }. so test004 is also OK (at least we get those results) [oops... have to run, ] Jos De Roo, AGFA http://www.agfa.com/w3c/jdroo/  </s>
<s> Hmmm xmlsch-02 was raised by XML Schema folks to check that we had understood where the whitespace handling happens.  </s>
<s> It appears that the Xerces implementors (who Dave defers to) do it different from in the spec.  </s>
<s> (Probably more usefully)  </s>
<s> Jeremy  </s>
<s> No.  </s>
<s> From the semantics doc:  </s>
<s> The subset of rdfV consisting of the first 3 items in the above list, {rdf:type rdf:Property rdf:XMLLiteral} is called the core RDF vocabulary, crdfV.  </s>
<s> An rdfs-interpretation of V is an rdf-interpretation I of V union crdfV union rdfsV which satisfies the following semantic conditions and all the triples in the subsequent table, called the RDFS axiomatic triples, which contain only names from V union crdfV union rdfsV.  </s>
<s> rdf:_1 is not a member of V, crdfV or rdfsV, so the entailment does not hold - which is cool, cos it keeps things finite.  </s>
<s> Brian  </s>
<s> I think we've had that in a comment from them.  </s>
<s> They pointed out, as I understand it, that whitespace processing occurs before the lexical form is determined, thus "3" is a member of the lexical space of decimal, but  </s>
<s> 3 " is not.  </s>
<s> is legal because the spaces are discarded as part of determining the lexical form.  </s>
<s> The RDFCore WG agreed that it required the exact lexical form when it approved the xmlsch-02 test case.  </s>
<s> I suggest this fits the be precise what you produce and forgiving in what you consume model.  </s>
<s> When generating RDF/XMl, make sure you don't include the white space, to produce a correct document.  </s>
<s> But when processing incoming RDF/XML, you can be a bit more forgiving.  </s>
<s> Brian  </s>
<s> rdfms-seq-representation/Manifest.rdf#test004 -  </s>
<s> rdfms-seq-representation/Manifest.rdf#test002 -  </s>
<s> mentioned  </s>
<s> and  </s>
<s> wow  </s>
<s> From the semantics doc:  </s>
<s> I must admit that I haven't read it like that ;-) OK, so lets add a triple to the premis graph or some such.  </s>
<s> Jos De Roo, AGFA http://www.agfa.com/w3c/jdroo/  </s>
<s> and turn the original test into a negative entailment ...  </s>
<s> 3 " is not.  </s>
<s> This is also mentioned in the syntax document... Note (Informative): In XML Schema (part 1)[XML-SCHEMA1], white space normalization occurs during validation according to the value of the whiteSpace facet.  </s>
<s> The syntax mapping used in this document occurs after this, so the whiteSpace facet has no further effect.  </s>
<s> -- http://www.w3.org/2001/sw/RDFCore/TR/WD-rdf-syntax-grammar-20030117/ -- section 6.1.9 #g Graham Klyne PGP: 0FAA 69FF C083 000B A2E9 A131 01B9 1C7A DBCA CB5E  </s>

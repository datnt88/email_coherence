<s> Hello, We are currently experiencing troubles in dynamically creating XML  </s>
<s> files with explicit reference to PUBLIC and SYSTEM ids for DocumentType.  </s>
<s> DOM2 explicitly doesn't support editing DocumentType nodes [1], publicId and systemId are readonly attributes.  </s>
<s> What is the deep reason why they are read-only ?  </s>
<s> We hacked setPublicId(DOMString &amp; value) and setSystemId(DOMString &amp; value) and couldn't find drawbacks.  </s>
<s> Any hint/comment on the subject are welcome.  </s>
<s> [1] : Oliver Fleig Olivier Dameron olivier.dameron@chu-rennes.fr  </s>
<s> The DocumentType was defined as being set only at document creation time  </s>
<s> because there was a concern that some DOM implementations might want to select different subclasses based on the kind of document being processed.  </s>
<s> (The requirement that createDocument() also create the Document Element, which may never be replaced thereafter, partly arose from the same concern... though there was a well-formedness issue as well.)  </s>
<s> For example: A DOM implementation might want to recognize HTML documents and automatically create an HTMLDocument rather than a core Document.  </s>
<s> We recognize that this isn't an ideal sequence for those of you writing parsers, which may need to stack up a series of doctypes and PIs and comments before you have enough information to call createDocument.  </s>
<s> DOM  </s>
<s> Level 3 may introduce alternative approaches to document creation which relax this.  </s>
<s> And DOM Level 3's Content Model work may introduce the ability  </s>
<s> to alter or replace the DocumentType on an existing document.  </s>
<s> But this is all work-in-progress and wasn't ready for standardization in DOM Level 2.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> Even though, how come the created document cannot refer to a DTD with PUBLIC and SYSTEM identifiers ?  </s>
<s> I saw DOM3 enabled working within DTD, but we are more interested in specifying an external DTD and in designating it with public and system ids.  </s>
<s> Are we the only one willing to perform such a weird task ?  </s>
<s> Olivier Dameron olivier.dameron@chu-rennes.fr  </s>
<s> At least implementations using standards I'm most familiar with.  </s>
<s> But ... if "HTML Documents" were only recognized using metadata, never the document preface (DTD etc), then it'd be ideal.  </s>
<s> Perhaps there's some relevant parser that works that way.  </s>
<s> Actually, as I've commented before, that applies well to the DTD-related changes which WERE made by DOM Level 2! This could easily have been changed in later L2 drafts; the work-in-progress stopped earlier than you imply.  </s>
<s> - Dave  </s>
<s> I'm not sure I'm following your question.  </s>
<s> Fields for those values were also added in DOM Level 2; see the parameters to createDocumentType and the readonly publicId/systemId attributes of the DocumentType object.  </s>
<s> The only constraint is that -- at this time -- the DocumentType object must be created first, then passed in to createDocument().  </s>
<s> At least, that's true if you're using the standard DOM APIs.  </s>
<s> Some parsers do bypass this, when building their own DOM implementations, and use custom APIs for the purpose.  </s>
<s> There are a few other places where "magic" information is currently needed, such as the default values for attributes.  </s>
<s> DOM Level 3 expects to close (most of?) those holes.  </s>
<s> The Level 3 content-model API should support this... though it may be hard to tell since the chapter is still evolving and will need more descriptive text.  </s>
<s> If there's a specific use case you think we might have missed, let us know, but the simple external subset case you've just described is _definitely_ already on our list.  </s>
<s> Joe Kesselman / IBM Research  </s>

<s> Hello, thanks to the help I received I figured out my readonly question, but now I'm having a little difficulty with the Attr node.  </s>
<s> The documentation on Attr says that on setting the value attribute of Attr, a Text node has to be created.  </s>
<s> Do I have to update the value attribute and create a Text node with the same contents as the value attribute ?  </s>
<s> Thanks, Mark Hellegers  </s>
<s> Don't confuse IDL attributes with implementation fields.  </s>
<s> An IDL attribute  </s>
<s> is just a value you can read or set.  </s>
<s> Where it's stored is a completely  </s>
<s> separate issue, and is up to the implementation.  </s>
<s> The DOM API says that the Attr node's value is always equal to the  </s>
<s> concatenation of the values of its Text descendents, and that when you set  </s>
<s> this node's value that's taken as a request to replace those descendents  </s>
<s> with a single Text node containing the new value.  </s>
<s> I don't think we actually  </s>
<s> said whether it will be a new Text node, or whether one of the existing  </s>
<s> Text children of the Attr (if any) will be reused by having the new value  </s>
<s> assigned to it.  </s>
<s> I believe either is acceptable.  </s>
<s> So setting this value changes the Attr's children, and changes the Attr's node value because that value is derived from the children.  </s>
<s> Whether this involves changing a value field inside the Attr is an implementation issue.  </s>
<s> Some implementations may want to cache the Attr's node value rather than doing the concatenation each time it's called for.  </s>
<s> An implementation which does so must deal with updating that cache when the Attr's children are changed, either by manipulating them directly or by setting the Attr node's value... but that's all invisible to the DOM user.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> I'm sorry, but I can't find where it is stated that the Attr node's value is constructed that way.  </s>
<s> Now I read it again, I can see that the value is not primarily the value of nodeValue, but it is not made really clear what it is.  </s>
<s> Thanks, Mark Hellegers  </s>
<s> In a previous message, you mentioned that you are implementing the DOM specification.  </s>
<s> The first question you have to ask yourself is why.  </s>
<s> Is there a specific reason that one of the existing implementations is not appropriate or could not be customized to fit your application?  </s>
<s> If not, then the easiest path is to adopt one of the many existing implementations.  </s>
<s> If there is a clear reason that you must do your own implementation, then you can learn a lot by referencing the existing implementations.  </s>
<s> Many are  </s>
<s> open-source and you can benefit from the experience of the many users of those implementations.  </s>
<s> I'd download a couple to have as ready references whenever you have an implementation issue.  </s>
<s> When after looking at the existing references and the recommendation and things still are unclear, then ask here.  </s>
<s> The DOM recommendation is totally about outward appearances, not implementation details.  </s>
<s> All it says is that setting .nodeValue,  </s>
<s> .value and  </s>
<s> manipulating the childNodes should all appear to do the same thing.  </s>
<s> However nothing forces you to create a child node until someone asks for one.  </s>
<s> If you are doing an implementation, you may benefit from the DOM test suite work (http://www.w3.org/DOM/Test) or earlier work done with testing of C++ implementations at http://xmlconf.sourceforge.net  </s>
<s> From: Mark Hellegers [mailto:M.H.Hellegers@stud.tue.nl]  </s>
<s> Sent: Thursday, February 14, 2002 2:06 PM Subject: Re: Attr nodes  </s>
<s> think we actually said whether it will be a new Text node,  </s>
<s> one of the existing Text children of the Attr (if any) will  </s>
<s> by having the new value assigned to it.  </s>
<s> I believe either is  </s>
<s> How would he know if an implementation was correct?  </s>
<s> Well then the outward appearance to me is that the description of the Attr node's children is vague.  </s>
<s> Perhaps if I understood XML well it might make sense but I don't and after looking over the section on Attribute Types in the XML spec: http://www.w3.org/TR/2000/REC-xml-20001006#attdecls, nothing really jumps out at me.  </s>
<s> It would be nice if you could spice up the description of structurual requirements for Attr.  </s>
<s> Mike  </s>

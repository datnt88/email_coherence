<s> They're a pain.  </s>
<s> They're also ill-specified.  </s>
<s> Section 4.2 has a definition of ctext that differs from RFC 822, which also allows \ escapes of ( and ).  </s>
<s> Also I'm unclear on which has precedence in HTTP, a comment or a blank line in the header.  </s>
<s> In other words, how do I parse this: GET / HTTP/1.0 Accept: text/basic (this comment will include a blank [blank line] line) Accept: text/html [blank line] where "[blank line]" is what it says.  </s>
<s> Does the blank line in the comment terminate the request, leaving an ill-formed comment, or does the blank line outside the comment terminate the request?  </s>
<s> If the former, the server actually has to parse comments on the fly so as to locate the blank line that actually terminates the request.  </s>
<s> Do any existing servers do that?  </s>
<s> I doubt it.  </s>
<s> Dave Kristol  </s>
<s> Pain yes, ill-specified no.  </s>
<s> Yep. When I wrote the initial specification of headers and comments, I decided that allowing \ to mean escape would break too many existing parsers.  </s>
<s> This is still my opinion, though if a consensus says otherwise I will change the draft.  </s>
<s> Meaning what?  </s>
<s> Only an *empty line* ends the headers of a message, and an empty line is not allowed in a comment.  </s>
<s> A line containing space or HTAB is not an empty line.  </s>
<s> ....Roy T. Fielding Department of ICS, University of California, Irvine USA p.s.: Conference Hell is upon us all -- I am just now getting through the mail amassed during the IETF trip, and am now about to embark on a two-week trip through California, Oregon and Washington (WebWorld and ICSE-17).  </s>
<s> Henrik is in Denmark as well, so don't be surprised if mail goes unanswered for a while.  </s>
<s> I must've been asleep when this topic first came up.  </s>
<s> Of what possible use are comments in HTTP headers?  </s>
<s> I'd like to understand why big parser changes are going to be needed for something that *seems* to be of no value to the client or the server.  </s>
<s> Chuck Shotton cshotton@biap.com http://www.biap.com/  </s>
<s> cshotton@oac.hsc.uth.tmc.edu "I am NOT here."  </s>
<s> They are commonly used in User-Agent and From fields.  </s>
<s> ....Roy T. Fielding Department of ICS, University of California, Irvine USA  </s>
<s> I suppose some of the value is in making the specification agree more with MIME and USENET so that shared code and cross-protocol gateways work more transparently.  </s>
<s> I really doubt we _need_ the full glory of RFC822 comments most of the time.  </s>
<s> Albert Lunde Albert-Lunde@nwu.edu  </s>
<s> Usenet doesn't allow the full glory of 822 either.  </s>
<s> In general, Usenet doesn't allow comments except in a particular format for From lines, and *sort of* single-word unknown timezones.  </s>
<s> I'd drop comment support unless you use a really limited subset of what 822 allows.  </s>
<s> Doing this still allows you to re-use all that wonderful existing 822-parsing code, but makes it easier on those writing from scratch.  </s>
<s> /r$  </s>
<s> I'd like to second this.  </s>
<s> While there do seem to be a few instances where comments in HTTP headers make sense, HTTP is generally a machine-readable protocol only and general purpose human-readable comments serve little purpose in the protocol at large.  </s>
<s> Forcing the widespread implementation of a syntactic feature of limited value is burdensome at best, especially on custom parser authors as Rich points out.  </s>
<s> And frankly, there are several of those because of the legal implications of reusing the "common" code base in commercial apps.  </s>
<s> Many HTTP authors simply cannot afford to risk reusing existing code and expect to retain copyright and ownership.  </s>
<s> If comments are necessary in name-related fields (user, server, agent), then perhaps the syntax should be specified only for those fields.  </s>
<s> Random appearances of comments throughout the header seem to be of little utility and present some difficult recoding problems at first glance (at least for my cheesey little HTTP parser!) Chuck Shotton cshotton@biap.com http://www.biap.com/  </s>
<s> cshotton@oac.hsc.uth.tmc.edu "I am NOT here."  </s>

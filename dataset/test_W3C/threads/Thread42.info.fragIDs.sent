<s> Hi, I've noticed the following behavior on HTML Tidy with ASP server side scripting.  </s>
<s> The following construct: % If (Request.Cookies("NumVisits")  0) then % You last accessed this web page at %= LastAccessTime % on %= LastAccessDate % gets translated to % If (Request.Cookies("NumVisits") &amp;gt.  </s>
<s> 0) then % You last accessed ---- Breaks the script!  </s>
<s> this web page at %= LastAccessTime % on %= LastAccessDate %  </s>
<s> when the &amp; conversion settings are passed to Tidy.  </s>
<s> Future enhancement request: bypass conversions inside of ASP % % delimiters.  </s>
<s> This would probably apply to other server  </s>
<s> side scripting languages as well such as Cold Fusion CFML, and others.  </s>
<s> Regards, Darren Forcier Allaire Corporation.  </s>
<s> From: Darren Forcier dforcier@allaire.com  </s>
<s> I suggest a different approach: upgrade tidy to know about processing instructions, and allow the passing of the open and close delimiters in the config file.  </s>
<s> For XML and XHTML, the delimiters are ?  </s>
<s> and ?  </s>
<s> For RCS SGML (i.e., the default), the delimiters are ?  </s>
<s> and For HTML, there are no delimiters For HTML as allowed by some servers for server-side include, the delimiters are !-- # and -- For ASP and JSP, the delimiters are % and %  </s>
<s> Processing instructions are a good thing: they allow embedded messages targeted at distinct processing-phases.  </s>
<s> Server-side includes are just processing instructions: they don't use ?  </s>
<s> and ?  </s>
<s> because HTML is a delivery format and has (until XHTML) rather shied away from document construction issues.  </s>
<s> But the delimiter issue is secondary to the functionality.  </s>
<s> Rick Jelliffe  </s>
<s> For backward compatibility, maybe yes.  </s>
<s> But the Right Thing (TM) for the future would probably be for server implementors to stuff their processing instructions inside XML CDATA.  </s>
<s> This eliminates the need for parsers like tidy and others to know the gritty details about all kind of processing pragmas.  </s>
<s> Steinar Kj?rnsr?d steinar@infostream.no  </s>
<s> InfoStream AS  </s>
<s> From: Steinar Kj?rnsr?d steinar@infostream.no  </s>
<s> I don't see why that is the right thing at all.  </s>
<s> A CDATA section just alters the delimiter recognition rules.  </s>
<s> With server-side includes and ASP and JSP we have a kind of tag introduced which looks, smells and tastes like a PI.  </s>
<s> Why have two parsers (one for HTML/XML markup and one for % % markup)?  </s>
<s> Rick Jelliffe  </s>
<s> But they are not valid XML PIs, which cause otherwise well formed XML/XHTML pages to be rejected by XML parsers/validators.  </s>
<s> We already have different types of parsers in different flavors.  </s>
<s> Stuffing proprietary PIs inside legal XML constructs would impose only small modifications and minimal overhead on parsers for those proprietary PIs.  </s>
<s> The nice thing however, is that these XML/HTML files may be procesessed by XML parsers as well.  </s>
<s> I see that as a great benefit, others may not.  </s>
<s> Please direct further replies to me directly, as this thread is off tpoic for the tidy list!  </s>
<s> Steinar Kj?rnsr?d steinar@infostream.no  </s>
<s> InfoStream AS  </s>
<s> I like Rick's suggestion.  </s>
<s> Tidy has always been a practical tool.  </s>
<s> This suggestion looks pretty straight forward and would be helpful.  </s>
<s> Especially considering the recent posts by folks having trouble on this issue.  </s>
<s> Rick, are  </s>
<s> you volunteering to code up this enhancement?  </s>
<s> Eric  </s>
<s> From: Eric Blossom eric@neomorphic.com  </s>
<s> are  </s>
<s> I'll check with my boss.  </s>
<s> Rick P.S. I have made a C interface header for DOM (level 1 XML) at It is just a big C struct, but I think it is useful to allow implementation-independent access to DOM data.  </s>
<s> If anyone is wondering how DOM might fit in with their all-C applications, it might be interesting.  </s>
<s> The big issue for C is that the DOM API uses 16 bit chars: there might be scope for a Son-of-DOM API for C programs that uses char, to prevent spurious conversions.  </s>
<s> I thought the issue that DOM uses objects and C is not an OOPL would be more important than it was; the problem for C is that IDL to C mappings programs all are written to generate networking stubs and that the CORBA IDL-to-C mapping does not include conventions for creating or releasing objects: DOM seems to assume that this will happen using the OOPLs normal create and release mechanism, but C of course does not have them; so there will always be scope for variant DOM APIs in C. Which is why I made the headers, to make it easy for programmers to use a common API for DOM in C, if they want.  </s>
<s> P.P.S. On the issue of writing parsers for XML and HTML, people may be interested in XXX "eXperimental Xml leXer" at a different parser architecture, the "notation processor", based on figuring out what a generic tokenizer routine for SGML/XML/HTML is, highly parameterized to cope with every kind of token: it is a state machine where every state is the same and the transition carries all the specifics.  </s>
<s> The advantage of this approach might be that the same lexer can be used to also parse other embedded notations: PI contents, JavaScript, CSS, DTDs, etc. Basing the parse on that kind of tokenizer may then allow the rest of well-formedness checking to be performed by a regular expression checker: again implemented using a generic routine that also can perform the XML content model and attribute validation: I am looking at whether it can reduce code size and complexity a real lot.  </s>
<s> There is discussion material at "XXX Notation Processors" Models on other Targets" http://www.ascc.net/xml/en/utf-8/OtherValid.html  </s>

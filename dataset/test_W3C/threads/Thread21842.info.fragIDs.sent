<s> Graham - CWM proposed builtins used in rule antecedents or in queries are typically succeeding when the object unifies with the result of the predicate operating on the subject argument (list).  </s>
<s> For example, the query (1 1) math:sum _:X.  </s>
<s> succeeds and the proof is (1 1) math:sum [iw:Variable "_:X_2"; = 2].  </s>
<s> Also (1 1) math:sum _:X.  </s>
<s> (1 _:X) math:product _:X.  </s>
<s> succeeds, but (1 1) math:sum _:X.  </s>
<s> (1 _:X) math:difference _:X.  </s>
<s> doesn't succeed.  </s>
<s> A more elaborate query is at and it's proof is # Generated with http://www.agfa.com/w3c/euler/#R3629 on 30 Oct 2003 22:58:38 GMT ).  </s>
<s> http://www.w3.org/2000/10/swap/log#conjunction = @prefix iw: http://www.ksl.stanford.edu/software/IW/spec/iw# .  </s>
<s> @prefix xsd: http://www.w3.org/2001/XMLSchema# .  </s>
<s> @prefix math: http://www.w3.org/2000/10/swap/math# .  </s>
<s> @prefix rdfs: http://www.w3.org/2000/01/rdf-schema# .  </s>
<s> @prefix log: http://www.w3.org/2000/10/swap/log# .  </s>
<s> @prefix : http://www.agfa.com/w3c/euler/builtins# .  </s>
<s> @prefix rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# .  </s>
<s> @prefix str: http://www.w3.org/2000/10/swap/string# .  </s>
<s> ("a" "b" "c") str:concatenation [iw:Variable "_:X_1"; = "abc"].  </s>
<s> ("a" "b" "c") str:concatenation "abc".  </s>
<s> "xyz" str:equalIgnoringCase "XYZ".  </s>
<s> "xyz" str:notEqualIgnoringCase "ABC".  </s>
<s> "xyz" str:greaterThan "abc".  </s>
<s> "abc" str:notGreaterThan "xyz".  </s>
<s> "abc" str:lessThan "xyz".  </s>
<s> "xyz" str:notLessThan "abc".  </s>
<s> "xyz" str:notLessThan "xyz".  </s>
<s> "abc" str:startsWith "ab".  </s>
<s> "abc" str:endsWith "bc".  </s>
<s> "abc" str:endsWith [iw:Variable "_:X_1"; = "abc"].  </s>
<s> "abcXYZ" str:contains "cX".  </s>
<s> "abcXYZ" str:containsIgnoringCase "Cx".  </s>
<s> (1.2 2.3 3.5) math:sum [iw:Variable "_:Y_1"; = 7.0].  </s>
<s> (7.0 1) math:difference [iw:Variable "_:Z_1"; = 6.0].  </s>
<s> (1 2 3) math:product [iw:Variable "_:U_1"; = 6].  </s>
<s> (6 3) math:quotient [iw:Variable "_:V_1"; = 2.0].  </s>
<s> (7 3) math:quotient [iw:Variable "_:A_1"; = 2.3333333333333335].  </s>
<s> (7 3) math:integerQuotient [iw:Variable "_:B_1"; = 2].  </s>
<s> (6.0 2.0) math:remainder [iw:Variable "_:W_1"; = 0.0].  </s>
<s> (7 3) math:remainder [iw:Variable "_:C_1"; = 1].  </s>
<s> -5 math:negation [iw:Variable "_:I_1"; = 5].  </s>
<s> -5.1 math:absoluteValue [iw:Variable "_:D_1"; = 5.1].  </s>
<s> -5.7 math:rounded [iw:Variable "_:E_1"; = -6].  </s>
<s> (2 10) math:exponentiation [iw:Variable "_:J_1"; = 1024].  </s>
<s> (1 2) math:atan2 [iw:Variable "_:T1_1"; = 0.4636476090008061].  </s>
<s> 2 math:cos [iw:Variable "_:T2_1"; = -0.4161468365471424].  </s>
<s> 0.5 math:cosh [iw:Variable "_:T3_1"; = 1.0471975511965979].  </s>
<s> 2 math:degrees [iw:Variable "_:T4_1"; = 114.59155902616465].  </s>
<s> 2 math:sin [iw:Variable "_:T5_1"; = 0.9092974268256817].  </s>
<s> 0.5 math:sinh [iw:Variable "_:T6_1"; = 0.5235987755982989].  </s>
<s> 2 math:tan [iw:Variable "_:T7_1"; = -2.185039863261519].  </s>
<s> 0.5 math:tanh [iw:Variable "_:T8_1"; = 0.4636476090008061].  </s>
<s> ("a" ("b" "c") "d") math:memberCount [iw:Variable "_:K_1"; = 3].  </s>
<s> [iw:Variable "_:U_1"; = 6] math:greaterThan [iw:Variable "_:V_1"; = 2.0].  </s>
<s> [iw:Variable "_:V_1"; = 2.0] math:notGreaterThan [iw:Variable "_:U_1"; = 6].  </s>
<s> [iw:Variable "_:V_1"; = 2.0] math:lessThan [iw:Variable "_:U_1"; = 6].  </s>
<s> [iw:Variable "_:U_1"; = 6] math:notLessThan [iw:Variable "_:V_1"; = 2.0].  </s>
<s> [iw:Variable "_:U_1"; = 6] math:equalTo [iw:Variable "_:U_1"; = 6].  </s>
<s> [iw:Variable "_:V_1"; = 2.0] math:notEqualTo [iw:Variable "_:U_1"; = 6].  </s>
<s> :x log:equalTo :x. :x log:notEqualTo :y. :b log:includes :e. :b log:notIncludes :x. # Proof found for http://www.agfa.com/w3c/euler/builtins.n3 in 47 steps (671 steps/sec) using 3 engines For the easter test case, the dates are indeed calculated.  </s>
<s> The query here for instance could be i.e. _:A :hasEasterOnDay _:B; :hasEasterOnMonth _:C.  </s>
<s> and the according proof, given is then # Generated with http://www.agfa.com/w3c/euler/#R3629 on 30 Oct 2003 23:03:03 GMT ).  </s>
<s> http://www.w3.org/2000/10/swap/log#conjunction = @prefix str: http://www.w3.org/2000/10/swap/string# .  </s>
<s> @prefix xsd: http://www.w3.org/2001/XMLSchema# .  </s>
<s> @prefix : http://www.agfa.com/w3c/euler/easter# .  </s>
<s> @prefix log: http://www.w3.org/2000/10/swap/log# .  </s>
<s> @prefix rdfs: http://www.w3.org/2000/01/rdf-schema# .  </s>
<s> @prefix math: http://www.w3.org/2000/10/swap/math# .  </s>
<s> @prefix owl: http://www.w3.org/2002/07/owl# .  </s>
<s> @prefix iw: http://www.ksl.stanford.edu/software/IW/spec/iw# .  </s>
<s> @prefix rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# .  </s>
<s> http://www.agfa.com/w3c/euler/easter#easter1 .  </s>
<s> [iw:Variable "?Y"; = 2003] a :Year.  </s>
<s> (2003 19) math:remainder [iw:Variable "?J"; = 8].  </s>
<s> (2003 100) math:integerQuotient [iw:Variable "?K"; = 20].  </s>
<s> (2003 100) math:remainder [iw:Variable "?H"; = 3].  </s>
<s> (20 4) math:integerQuotient [iw:Variable "?M"; = 5].  </s>
<s> (20 4) math:remainder [iw:Variable "?N"; = 0].  </s>
<s> (28 25) math:integerQuotient [iw:Variable "?P"; = 1].  </s>
<s> (20 3) math:integerQuotient [iw:Variable "?Q"; = 6].  </s>
<s> (176 30) math:remainder [iw:Variable "?R"; = 26].  </s>
<s> (3 4) math:integerQuotient [iw:Variable "?S"; = 0].  </s>
<s> (3 4) math:remainder [iw:Variable "?U"; = 3].  </s>
<s> (3 7) math:remainder [iw:Variable "?V"; = 3].  </s>
<s> (360 451) math:integerQuotient [iw:Variable "?W"; = 0].  </s>
<s> (143 31) math:integerQuotient [iw:Variable "?X"; = 4].  </s>
<s> (143 31) math:remainder [iw:Variable "?Z"; = 19].  </s>
<s> (19 1) math:sum [iw:Variable "?DAY"; = 20]} = {[iw:Variable "_:A_2"; = 2003] :hasEasterOnDay [iw:Variable "_:B_2"; = 20]}.  </s>
<s> http://www.agfa.com/w3c/euler/easter#easter1 .  </s>
<s> [iw:Variable "?Y"; = 2003] a :Year.  </s>
<s> (2003 19) math:remainder [iw:Variable "?J"; = 8].  </s>
<s> (2003 100) math:integerQuotient [iw:Variable "?K"; = 20].  </s>
<s> (2003 100) math:remainder [iw:Variable "?H"; = 3].  </s>
<s> (20 4) math:integerQuotient [iw:Variable "?M"; = 5].  </s>
<s> (20 4) math:remainder [iw:Variable "?N"; = 0].  </s>
<s> (28 25) math:integerQuotient [iw:Variable "?P"; = 1].  </s>
<s> (20 3) math:integerQuotient [iw:Variable "?Q"; = 6].  </s>
<s> (176 30) math:remainder [iw:Variable "?R"; = 26].  </s>
<s> (3 4) math:integerQuotient [iw:Variable "?S"; = 0].  </s>
<s> (3 4) math:remainder [iw:Variable "?U"; = 3].  </s>
<s> (3 7) math:remainder [iw:Variable "?V"; = 3].  </s>
<s> (360 451) math:integerQuotient [iw:Variable "?W"; = 0].  </s>
<s> (143 31) math:integerQuotient [iw:Variable "?X"; = 4].  </s>
<s> (143 31) math:remainder [iw:Variable "?Z"; = 19].  </s>
<s> (19 1) math:sum [iw:Variable "?DAY"; = 20]} = {[iw:Variable "_:A_2"; = 2003] :hasEasterOnMonth [iw:Variable "_:C_2"; = 4]}.  </s>
<s> http://www.agfa.com/w3c/euler/easter#easter1 .  </s>
<s> [iw:Variable "?Y"; = 2004] a :Year.  </s>
<s> (2004 19) math:remainder [iw:Variable "?J"; = 9].  </s>
<s> (2004 100) math:integerQuotient [iw:Variable "?K"; = 20].  </s>
<s> (2004 100) math:remainder [iw:Variable "?H"; = 4].  </s>
<s> (20 4) math:integerQuotient [iw:Variable "?M"; = 5].  </s>
<s> (20 4) math:remainder [iw:Variable "?N"; = 0].  </s>
<s> (28 25) math:integerQuotient [iw:Variable "?P"; = 1].  </s>
<s> (20 3) math:integerQuotient [iw:Variable "?Q"; = 6].  </s>
<s> (195 30) math:remainder [iw:Variable "?R"; = 15].  </s>
<s> (4 4) math:integerQuotient [iw:Variable "?S"; = 1].  </s>
<s> (4 4) math:remainder [iw:Variable "?U"; = 0].  </s>
<s> (19 7) math:remainder [iw:Variable "?V"; = 5].  </s>
<s> (284 451) math:integerQuotient [iw:Variable "?W"; = 0].  </s>
<s> (134 31) math:integerQuotient [iw:Variable "?X"; = 4].  </s>
<s> (134 31) math:remainder [iw:Variable "?Z"; = 10].  </s>
<s> (10 1) math:sum [iw:Variable "?DAY"; = 11]} = {[iw:Variable "_:A_2"; = 2004] :hasEasterOnDay [iw:Variable "_:B_2"; = 11]}.  </s>
<s> http://www.agfa.com/w3c/euler/easter#easter1 .  </s>
<s> [iw:Variable "?Y"; = 2004] a :Year.  </s>
<s> (2004 19) math:remainder [iw:Variable "?J"; = 9].  </s>
<s> (2004 100) math:integerQuotient [iw:Variable "?K"; = 20].  </s>
<s> (2004 100) math:remainder [iw:Variable "?H"; = 4].  </s>
<s> (20 4) math:integerQuotient [iw:Variable "?M"; = 5].  </s>
<s> (20 4) math:remainder [iw:Variable "?N"; = 0].  </s>
<s> (28 25) math:integerQuotient [iw:Variable "?P"; = 1].  </s>
<s> (20 3) math:integerQuotient [iw:Variable "?Q"; = 6].  </s>
<s> (195 30) math:remainder [iw:Variable "?R"; = 15].  </s>
<s> (4 4) math:integerQuotient [iw:Variable "?S"; = 1].  </s>
<s> (4 4) math:remainder [iw:Variable "?U"; = 0].  </s>
<s> (19 7) math:remainder [iw:Variable "?V"; = 5].  </s>
<s> (284 451) math:integerQuotient [iw:Variable "?W"; = 0].  </s>
<s> (134 31) math:integerQuotient [iw:Variable "?X"; = 4].  </s>
<s> (134 31) math:remainder [iw:Variable "?Z"; = 10].  </s>
<s> (10 1) math:sum [iw:Variable "?DAY"; = 11]} = {[iw:Variable "_:A_2"; = 2004] :hasEasterOnMonth [iw:Variable "_:C_2"; = 4]}.  </s>
<s> # Proof found for http://www.agfa.com/w3c/euler/easterC.n3 in 1013 steps (624 steps/sec) using 1 engine so next year, Easter should be on April 11 (well, at least I hope so :-)) Jos De Roo, AGFA http://www.agfa.com/w3c/jdroo/  </s>
<s> Graham Klyne g cc: Subject: How does Euler handle CWM builtins?  </s>
<s> 2003-10-30 06:13 PM Jos, I'm doing a mini-survey of RDF inference techniques, with particular reference to how datatype-related inferences are handled in different systems.  </s>
<s> Mostly it seems fairly crude.  </s>
<s> I notice that Euler seems to have some support for CWM builtins, but how do you use them?  </s>
<s> (As defined for use with CWM, I think they can only be used in forward chaining mode -- though clearly they could be adapted).  </s>
<s> I'm wondering what you do.  </s>
<s> Judging by: it appears that you must process the builtin's in the antecedent of a rule.  </s>
<s> Can you actually calculate the day of Easter here, or just confirm that a given day is correct or not?  </s>
<s> If the former, how do you process builtins in the antecedent of a rule?  </s>
<s> (Hmmm... could be left-to-right, as one would if interpreting a Prolog clause?) #g Graham Klyne  </s>
<s> Jos, thanks for this.  </s>
<s> I think I'm getting the picture ... let's see if I get it right: Built-in functions in a rule antecedent are treated as terms to be unified  </s>
<s> with the knowledge base, just like any others, except that there is special  </s>
<s> code to handle the particular features of the built-in properties.  </s>
<s> I judge  </s>
<s> that you take the terms in the antecedent of a rule in the order they are given, and unify them one at a time in a new context created for the purpose, adding new variable-to-value bindings as you go.  </s>
<s> I am guessing that ordering is important because unification of terms that appear later in the antecedent may depend on bindings created by unification of preceding terms.  </s>
<s> Am I on the right track?  </s>
<s> It's not so clear whether you allow for some built-in properties that there  </s>
<s> may be multiple possible unification patterns; e.g. in the simple case: (2 3) math:product _:Y would be satisfied by binding _:Y to 6.  </s>
<s> But in special cases, other variable-binding patterns might be allowed, such as: (1 _:X) math:product _:Y. is recognized as a fact by unifying _:X with _:Y, because the built-in knows that 1*x == x, forall x. Similarly: (0 _:X) math:product _:Y.  </s>
<s> can be allowed by binding _:Y to zero and leaving _:X unbound.  </s>
<s> In summary, reverting to a Prolog-ish notation, I would imagine the following cases are supportable for math:product (using ?  </s>
<s> in the signature  </s>
<s> to indicate unbound variables): math:product(1,?x,?y) :- x = y .  </s>
<s> math:product(?x,1,?y)  </s>
<s> :- x = y .  </s>
<s> math:product(0,?x,?y) :- ?y  </s>
<s> = 0 .  </s>
<s> math:product(?x,0,?y)  </s>
<s> :- ?y  </s>
<s> = 0 .  </s>
<s> math:product(x,y,?z) :- z = x*y .  </s>
<s> math:product(?x,y,z) :- x = z/y .  </s>
<s> math:product(x,?y,z) :- y = z/x .  </s>
<s> Looking at your examples and test cases, it looks as if you may allow only  </s>
<s> more restricted patterns, in which the object must be fully bound and a new  </s>
<s> binding is created for the subject.  </s>
<s> This would seem to be consistent with  </s>
<s> the way CWM defines these properties.  </s>
<s> #g  </s>
<s> Graham Klyne  </s>
<s> unified  </s>
<s> special  </s>
<s> judge  </s>
<s> Yes Graham and w.r.t. ordering, we anticipate already the day when clause and antecedent reordering will be fully automatic which will also give a real and tremendous performance boost.  </s>
<s> (a while back I did some manual owl-rules reordering and went from 60 min to 6 min test case manifest execution time)  </s>
<s> there  </s>
<s> signature  </s>
<s> We don't (yet) handle such cases, but they could be done...  </s>
<s> only  </s>
<s> new  </s>
<s> with  </s>
<s> That's right Graham and the future will learn us more ;-) Jos De Roo, AGFA http://www.agfa.com/w3c/jdroo/  </s>

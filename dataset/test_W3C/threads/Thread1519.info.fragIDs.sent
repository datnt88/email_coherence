<s> HI, its getting complicated!  </s>
<s> First of all many thanks to everyone anwsering my questions so far!  </s>
<s> It helped me a lot.  </s>
<s> So next question: Scenario: Suppose a development environment where the development codeline is kept in a workspace.  </s>
<s> Within this Workspace there is a VCR /DEV/a.c the checked-in property points to version V1.  </s>
<s> Now there is a checkout of the checked-in  </s>
<s> version of /DEV/a.c  </s>
<s> into a working-resource WR1.  </s>
<s> In my understanding of  </s>
<s> DeltaV the checked-in property of the VCR is not changed by this action.  </s>
<s> Now  </s>
<s> another checkout of the checked-in version into a working-resource WR2 is  </s>
<s> done (i.e. two developer working parallel on the same source).  </s>
<s> Rigth so far?  </s>
<s> If not, is there a way in DeltaV to get done the behavior described below?  </s>
<s> Now WR1 is checked in.  </s>
<s> WR1 disappears the version history (VH) of /DEV/a.c  </s>
<s> contains a new version V2 that is a descendant of V1.  </s>
<s> In my understanding  </s>
<s> the checked-in property of the VCR is set to V2 during this checkin.  </s>
<s> Still right?  </s>
<s> Now WR2 is checked in.  </s>
<s> Checkin fork is forbidden.  </s>
<s> Because there is a descendent to V1 allready and the checkin fork is forbidden.  </s>
<s> So a merge must be forced (how?).  </s>
<s> After that done the checked-in property of the VCR points  </s>
<s> to the merged version of V2 and the checked in version of WR2.  </s>
<s> Right?  </s>
<s> Background:  </s>
<s> I have a development codeline.  </s>
<s> A file to edit is a VCR.  </s>
<s> I want the possibility of two (or more) developers working parallel with this file.  </s>
<s> But I want them to do a merge of their work at the second checkin (the checkin of the first developer causes no problems).  </s>
<s> And I want the VCR point to the most current checked-in version of its VH automatically.  </s>
<s> Is this  </s>
<s> achieveable?  </s>
<s> I think it must be, since this is what can be done using Perforce.  </s>
<s> Regards, Daniel  </s>
<s> Ok, so there are two distinct resources, a version-controlled resource at /DAV/a.c and a version resource at some server-generated URL, let's say, /versions/vh1/r23 The checked-in property of the version-controlled resource has a value that is the URL of the version.  </s>
<s> This means, "the version-controlled resource is checked-in (i.e. `immutable`) and it has identical (i.e. a true copy of) content and dead properties as the version whose URL is in the DAV:checked-in property" Note that the version-controlled resource may have different live properties to the version resource.  </s>
<s> Just to be pedantic, a version is not checked-in (or checked-out for that matter), but applying CHECKOUT to a version creates a new working resource with the same content and dead properties as the version.  </s>
<s> Correct, the version-controlled resource is unaffected by the creation of the working resource.  </s>
<s> It remains a checked-in version-controlled resource.  </s>
<s> Sure (assuming liberal fork control) you can create more working resources by applying CHECKOUT to the version resource.  </s>
<s> Correct.  </s>
<s> In my understanding the checked-in property of the VCR is set to V2 during this checkin.  </s>
<s> Still right?  </s>
<s> Nope (we were doing so well up to this point :-) The version-controlled resource is not updated since there is no tie between the working resource created by checking out the version, and the version-controlled resource.  </s>
<s> So in this scenario, the version-controlled resource would still have the same content and dead properties as the version V1. If you did want to update the version-controlled resource there are two ways to do this.  </s>
<s> (1) Rather than check-out the version to create a working resource you could have just checked-out the version-controlled resource 'in-place'.  </s>
<s> You would then modify the version-controlled resource (PUT, PROPPATCH, etc.) and check-in the version-controlled resource to create a new version.  </s>
<s> However, modifying the resource in-place obviously means that other clients would see your work in progress.  </s>
<s> In the trivial case this is state that you didn't want to version because it was incomplete; but more seriously it could be a state that is inconsistent because there is no way to modify the properties and content simultaneously (imagine a "FOOBAR:last-modified-by" property).  </s>
<s> So the alternative way is... (2) send CHECKOUT to the version-controlled resource _with_ a DAV:apply-to-version flag.  </s>
<s> Now you have a (hidden) working resource that is coupled to the version-controlled resource, as evidenced by it's DAV:auto-update property.  </s>
<s> Since the working resource is effectively hidden from other clients, you can modify the content and properties, numerous times, and finally CHECKIN the working resource.  </s>
<s> This check-in will create the new version, delete the working resource, *and* update the version-controlled resource identified by the DAV:auto-update property.  </s>
<s> So now, hopefully, you see that you can't get into this mess g .  </s>
<s> So you would have the DAV:checkin-fork property set to DAV:forbidden for each version to force the second checking to fail, and force a merge.  </s>
<s> Again, by checking out the version 'through' the version-controlled resource, i.e. by using DAV:apply-to-version/ you can get the DAV:auto-update behaviour described above.  </s>
<s> Regards, Tim  </s>
<s> From: Kirmse, Daniel [mailto:daniel.kirmse@sap.com]  </s>
<s> Suppose a development environment where the development codeline is kept in a workspace.  </s>
<s> Within this Workspace there is a VCR /DEV/a.c the checked-in property points to version V1.  </s>
<s> Now there is a checkout of the checked-in version of /DEV/a.c  </s>
<s> into a working-resource WR1.  </s>
<s> I will assume this CHECKOUT was done by applying a CHECKOUT to /DEV/a.c, with the DAV:apply-to-version flag.  </s>
<s> (As Tim points out, this has slightly different behavior from explicitly applying the CHECKOUT to a version resource).  </s>
<s> In my understanding of DeltaV the checked-in property of the VCR is not changed by this action.  </s>
<s> Correct.  </s>
<s> Now another checkout of the checked-in version into a working-resource WR2 is done (i.e. two developer working parallel on the same source).  </s>
<s> Rigth so far?  </s>
<s> Yes.  </s>
<s> Again, I will assume that this was a CHECKOUT of /DEV/a.c with the DAV:apply-to-version flag.  </s>
<s> Now WR1 is checked in.  </s>
<s> WR1 disappears the version history (VH) of /DEV/a.c  </s>
<s> contains a new version V2 that is a descendant of V1.  </s>
<s> In my understanding  </s>
<s> the checked-in property of the VCR is set to V2 during this checkin.  </s>
<s> Still right?  </s>
<s> Yes, if WR1 resulted from checking out /DEV/a.c with the DAV:apply-to-version flag.  </s>
<s> Now WR2 is checked in.  </s>
<s> Checkin fork is forbidden.  </s>
<s> Because there is a descendent to V1 allready and the checkin fork is forbidden.  </s>
<s> Actually, there is no need to have Checkin-fork to be forbidden (although it doesn't hurt to have it set to be that).  </s>
<s> The DAV:no-overwrite-by-auto-update postcondition of CHECKIN will force the CHECKIN to fail.  </s>
<s> So a merge must be forced (how?).  </s>
<s> I'm not sure if you are asking "how is it forced" or "how do you do the merge"?  </s>
<s> It is forced, because every time you try to CHECKIN, it will fail with the postcondition identified above.  </s>
<s> The client does the merge by downloading the current content of /DEV/a.c,  </s>
<s> merging that into the content of WR2, and then adding the DAV:checked-in version to the DAV:predecessor set of WR2.  </s>
<s> Then the CHECKIN will succeed, because the DAV:overwrite-by-auto-update condition is no longer true.  </s>
<s> After that done the checked-in property of the VCR points to the merged version of V2 and the checked in version of WR2.  </s>
<s> Right?  </s>
<s> Actually, the checked-in property of the VCR points to the version that resulted from checking in WR2, where the content of WR2 is the merge of the previous state of WR2 with the state of the checked-in version of /DEV/a.c.  </s>
<s> Background: I have a development codeline.  </s>
<s> A file to edit is a VCR.  </s>
<s> I want the possibility of two (or more) developers working parallel with this file.  </s>
<s> But I want them to do a merge of their work at the second checkin (the checkin of the first developer causes no problems).  </s>
<s> And I want the VCR point to the most current checked-in version of its VH automatically.  </s>
<s> Is this achieveable?  </s>
<s> I think it must be, since this is what can be done using Perforce.  </s>
<s> Yes, it is.  </s>
<s> Just have the developers client apply CHECKOUT with DAV:apply-to-version to a version-controlled resource.  </s>
<s> Cheers, Geoff  </s>
<s> Hi, i've got this (at least I think so ;o) ).  </s>
<s> Now we advance a step further: Suppose this situation:  </s>
<s> VCR1 | | VH1 | | VCR2 | CIN V2-+------+ | V1 | +--------+-CIN V2 |  </s>
<s> +--------+- V2 -+------+  </s>
<s> The checked-in (CIN) versions of VCR1 and VCR2 are located in the very same VH and they are even the same version.  </s>
<s> Now same problem to checkouts on the same version via the VCR's.  </s>
<s> To be precise there is a checkout on VCR1 with DAV:apply-to-version flag which creates WR1 with DAV:auto-update = VCR1.  </s>
<s> And there is a checkout on VCR2 with DAV:apply-to-version flag which creates WR2 with DAV:auto-update = VCR2.  </s>
<s> Performing a checkin on both WR's would cause no failed checkin but produces this situation:  </s>
<s> +--------+ V3 V4 +------+ Am I right with this?  </s>
<s> Please let me be!  </s>
<s> Otherwise I should give up trying to understand this (at least for this week) !  </s>
<s> ;o) P.S.: Obviously there MUST NOT be any DAV:checkin-fork forbidden property at V2. Regards, Daniel  </s>
<s> Right on!  </s>
<s> Your description is correct.  </s>
<s> Regards, Tim "Kirmse, Daniel" daniel.kirmse@sap.com  </s>
<s> Sent by: ietf-dav-versioning-request@w3.org 2001-12-14 11:39 AM Subject: RE: Parallel Development Hi, i've got this (at least I think so ;o) ).  </s>
<s> Now we advance a step further: Suppose this situation:  </s>
<s> VCR1 | | VH1 | | VCR2 | CIN V2-+------+ | V1 | +--------+-CIN V2 |  </s>
<s> +--------+- V2 -+------+ The checked-in (CIN) versions of VCR1 and VCR2 are located in the very same VH and they are even the same version.  </s>
<s> Now same problem to checkouts on the same version via the VCR's.  </s>
<s> To be precise there is a checkout on VCR1 with DAV:apply-to-version flag which creates WR1 with DAV:auto-update = VCR1.  </s>
<s> And there is a checkout on VCR2 with DAV:apply-to-version flag which creates WR2 with DAV:auto-update = VCR2.  </s>
<s> Performing a checkin on both WR's would cause no failed checkin but produces this situation:  </s>
<s> +--------+ V3 V4 +------+ Am I right with this?  </s>
<s> Please let me be!  </s>
<s> Otherwise I should give up trying to understand this (at least for this week) !  </s>
<s> ;o) P.S.: Obviously there MUST NOT be any DAV:checkin-fork forbidden property at V2. Regards, Daniel  </s>

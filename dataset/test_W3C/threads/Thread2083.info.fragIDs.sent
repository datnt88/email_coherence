<s> I am now updating my list of features for known, supported HTTP servers, and many are adding or will soon add the ability to select actions based on various request headers.  </s>
<s> An obvious kind of action many folks like to see would be to change the virtual root based on part or all of the full URI, if such information was available.  </s>
<s> The last iteration of this discussion had Roy saying he didn't feel it was needed unless clients built it in first, and the host name was only needed for "vanity domains".  </s>
<s> A few people responded with arguments that knowing the full URI had other benefits, many of which I believe to be significant.  </s>
<s> Roy didn't respond to those (unless I missed his response in the archive),  </s>
<s> no one objected to Chuck's statement that it was a simple addition and let's get on with it, but Full-URI didn't appear in the -00 rev of the spec.  </s>
<s> I'd like to make those arguments again and lobby for the simple inclusion of this optional header.  </s>
<s> The few words it will take in the spec will help prevent something that almost all of us would probably want: a reduction in broken URL links.  </s>
<s> Here are two scenarios that weren't addressed earlier.  </s>
<s> Both involve the possibility of broken links, something that I think we in the HTTP WG should do our part in preventing.  </s>
<s> Scenario 1) The departments at www.bigstate.edu  </s>
<s> differentiate their Web hierarchies with the top-level directory names like /cs and /math.  </s>
<s> Professors have their own directories under the respective top-levels.  </s>
<s> Many people have URLs that point into professors hierarchies, not just at the top level for the department.  </s>
<s> The computer science department decides to move their hieararchy to their own machine with a different IP address and its own domain name, cs.bigstate.edu.  </s>
<s> Unless they want all the links to break, they must put forwarding pointers at every place in the old hierarchy where someone might have make a bookmark.  </s>
<s> With a Full-URI header and a smart server, the server could catch all items pointing to the top-level /cs directory and do something smart (redirect to cs.bigstate.edu  </s>
<s> and strip off the /cs) or an adequate thing (give a recorded message pointing to the root of cs.bigstate.edu).  </s>
<s> Scenario 2) A company starts a Web site on its own host system, www.tinyco.com.  </s>
<s> It becomes financially unfeasable to keep its Internet connection, and wants to move its Web pages to a Web service provider, www.websrus.com,  </s>
<s> who will put it under its current hierarchy.  </s>
<s> This will prevent all the published links to various parts of www.tinyco.com from breaking.  </s>
<s> However, the Web provider uses the current practice of having a top-level directory with an identifying name for each customer, such as /tinyco.  </s>
<s> If www.tinyco.com  </s>
<s> simply redirects its domain name to the new provider's IP address, all the links will break because they don't have the required /tinyco lead-in directory name.  </s>
<s> On the other hand, if the www.websrus.com  </s>
<s> server could see the incoming "www.tinyco.com", it could slap on the proper root directory name before processing the request and the requests would be fulfilled.  </s>
<s> Note that some of the HTTP servers that are supporting different actions based on headers are also supporting server-side includes.  </s>
<s> Thus, the Web administrator could not only redirect a whole hierarchy to its proper new home, he/she could add a header that says something like: The location of the page br has moved to a new home: br Thus, I propose the following be added to the spec: Section 5.4: No change needs to be made to the introductory paragraph since it already says that the headers "allow the client to pass additional information about the request" and are "optional".  </s>
<s> Add "| Full-URI" on the line after "| From".  </s>
<s> New Section 5.4.6:  </s>
<s> The Full-URI header field can be used to indicate the URI requested by the user.  </s>
<s> The inclusion of this field can aid HTTP server software receiving the request to respond in a manner that gives the user what they probably intended to get, or at least give the server information about the URI for logging and later analysis.  </s>
<s> From-URI = "From-URI" ":" URI-string The URI-string is the URI specified by the user after any encoding was applied by the client software.  </s>
<s> Although it is not required, user agents should always include this field with requests in order to aid server software that has been enabled to read the field.  </s>
<s> An example is: From-URI: http://www.bigstate.edu/cs/stein/cs-108-syllabus  </s>
<s> I'm open to additions to this.  </s>
<s> I couldn't think of any security implications, but I'm open to those as well.  </s>
<s> --Paul Hoffman --Proper Publishing  </s>
<s> Yes, you missed it.  </s>
<s> Of course not.  </s>
<s> What was under discussion was a feature to add to HTTP/1.1.  </s>
<s> Note, however, that there was no consensus on the name or the contents  </s>
<s> of the header.  </s>
<s> I'd like to strongly encourage everyone to pore through the HTTP/1.0 specification FIRST and send in their comments (if any) before getting into a discussion about 1.1 features.  </s>
<s> Sometime this week, Henrik and I will produce a draft for HTTP/1.1 which will be a basis for discussion at the IETF meeting and (hopefully) will allow us to focus some of the discussions on this mailing list.  </s>
<s> It will include an Orig-URI: request header.  </s>
<s> ....Roy T. Fielding Department of ICS, University of California, Irvine USA  </s>
<s> Ah.  </s>
<s> Thanks for the pointer!  </s>
<s> It seems the threading on the mail archive is a bit funky.  </s>
<s> The "next in thread" link from your message (0089) leads to Chuck's message (0072), which I got to from somewhere else.  </s>
<s> Unfortuantely, neither of the back-pointing links in 0072 points to 0089, so I never saw your message.  </s>
<s> Folks traversing the archives by thread, beware.  </s>
<s> --Paul Hoffman --Proper Publishing  </s>

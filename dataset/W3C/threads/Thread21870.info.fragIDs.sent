<s> Hi All, As promised at WWW9, I did a read-through of draft-ietf-ohto-ccpp-exchange-00.  </s>
<s> Here are some comments, text from the draft is quoted with "##".  </s>
<s> ## In this document we describe the CC/PP exchange protocol based on ## the HTTP Extension Framework[1].  </s>
<s> Note that the HTTP Extension Framework is bit controversial in the IETF: it is an open question if this should be used for (IETF or outside standards level) HTTP extensions in stead of just defining additional headers.  </s>
<s> I don't think there will be strong objections to you using HTTP-ext, but if you don't use it this will also be considered OK. Switching to my personal opinion: I believe that use of HTTP-ext might slow deployment: at least you should verify whether prospective cc/pp implementers are happy with doing the work of implementing (the necessary subset of) http-ext too.  </s>
<s> ##2. Basic requirements for CC/PP exchange protocol The basic requirements look really good, it is nice to have such a statement in the draft.  </s>
<s> ## The absoluteURI in the Profile header field addresses an entity of a ## CC/PP description which exists in the World Wide Web.  </s>
<s> As I indicated before at WWW9, I believe that some text on how to dereference these URIs would strengthen the protocol and make it more extensible.  </s>
<s> Below I will outline the protocol requirements I would like to see: [Here I use 'the client' for an entity which dereferences an URI to obtain a CC/PP description] 1.  </s>
<s> When an URI is dereferenced to obtain a CC/PP description 1.1 If the URI is not a http: scheme URI, this spec does not prescribe anything about the mechanism to dereference it.  </s>
<s> Baseline client implementations of this spec need not be able to reference non-http URIs.  </s>
<s> 1.2 if the URI is a http: URI, then  </s>
<s> 1.2.1 a conforming client should dereference it using a GET request in HTTP/1.0, HTTP/1.1, or a successor version of HTTP 1.2.2 if HTTP/1.0 is used, the client MUST include a Host: header in the request according to the requirements for Host: in the HTTP/1.1 specification 1.2.3 the client SHOULD include an Accept request-header with a single MIME type: Accept: [CC/PP description MIME type, to be defined] in its HTTP request, or the equivalent in a successor version of HTTP.  </s>
<s> This allows the server holding the CC/PP description to perform HTTP content negotiation on the request, so that alternative representations of the CC/PP description can be returned to end users with regular user agents, or future clients that implement a superset of this protocol.  </s>
<s> 1.2.4 The response can be cached according to the normal rules that apply to HTTP/1.x responses 1.2.4.1  </s>
<s> The response can be re-used from a cache when it is still fresh in the sense of HTTP/1.1 or a successor version of that protocol, any MAY be re-used when stale if an appropriate warning about staleness in returned (see section ....).  </s>
<s> 1.2.4.2 If the response does not specify a freshness lifetime or other restrictions on caching, the client MAY use a heuristic to compute a freshness lifetime for the response, but this lifetime MUST NOT exceed 24 hours.  </s>
<s> [compare to section 13.2.4 of RFC 2616] Also, to ease the life of implementers of CC/PP profile caching systems, you might thinks about enumerating a subset of the HTTP/1.1 Cache-Control directives in this specification, with the comment that CC/PP repositories SHOULD NOT count on clients understanding any directives beyond these one.  </s>
<s> (see also draft-moore-using-http-00)  </s>
<s> ## The generation method of the profile-diff-name is as follows: ## 1.  </s>
<s> The MD5 algorithm is applied to the CC/PP description which is ## the value of the corresponding Profile-Diff header field.  </s>
<s> ## 2. The Base64 algorithm is applied to the output of step1.  </s>
<s> ## 3. Insert the profile-diff-number at the head of the output of ## step2.  </s>
<s> A am a bit concerned about this MD5-attaching mechanism.  </s>
<s> Its purpose seems to be to make life a bit easier for servers that want to send Vary, but this comes at the cost of implementation complexity and extra bytes on the wire for everybody.  </s>
<s> As an alternative, I suggest you specify: profile-diff-name = profile-diff-number [ "-" profile-diff-digest ] so that the digest can be left out if wanted.  </s>
<s> Also, if you are serious about making Vary more useful, you should also specify a 'preferred http-ext namespace number' (for example 50),  </s>
<s> which all user agents should use, if possible, when extending the request with a Profile http-ext header.  </s>
<s> If user agents always generate these numbers semi-randomly.  </s>
<s> then two xx-Profile: yyy headers on two different requests but with the same yyy will seldom match because they have a different xx number.  </s>
<s> But aside from that, unless there are strong indications that header length restrictions are really a problem, I'd rather see the whole profile-diff header system disappear, with all information in these headers put directly into the Profile header.  </s>
<s> ## The warn-code assignes three digits.  </s>
<s> The "1xx" indicates the status  </s>
<s> ## of the CC/PP description(e.g. it is fresh or stale).  </s>
<s> The "2xx"  </s>
<s> ## indicates the type of the content adaptation applied to the ## message(e.g. content selection, content transformation, or content ## generation).  </s>
<s> This decomposition into 1xx and 2xx is nice, but you are not very  </s>
<s> extensible in adding new warn codes yet, as the spec now is silent on how clients should interpret new warn codes unknown to them.  </s>
<s> There should be at least two classes (orthogonal to your 1xx and 2xx distinction now, so I guess you should add an extra number to the current codes): say a 1[12]xx class for 'serious -- if you get a code  </s>
<s> in this class and don't understand it, inform the end user', and a 2[12]xx 'non-serious -- if you get a code in this class and don't understand it, ignore it and keep silent'.  </s>
<s> That is all I have, I hope it is useful.  </s>
<s> Koen.  </s>
<s> Hi Koen,  </s>
<s> I didn't really appreciate what you meant before, but now I see your text it looks very reasonable.  </s>
<s> Broadly, I agree, but probably for different reasons.  </s>
<s> Did you see the proposal I made to not try and carry profile structuring information as part of the protocol?  </s>
<s> Interesting point... isn't this something that might be addressed more generally in HTTP extensions?  </s>
<s> (I'm tempted to say that Vary: might be made extension-aware, but that's too tall an order.)  </s>
<s> #g  </s>
<s> Graham Klyne (GK@ACM.ORG)  </s>
<s> Koen: Thank you very much for your comments.  </s>
<s> I know the controvercy.  </s>
<s> I believe that HTTP Extension Framework provides the better way of extending HTTP/1.1 but I also admit there may be concerns about deployment.  </s>
<s> (HTTP Extension Framework has been implemented in Jigsaw Web server though.  </s>
<s> http://www.w3.org/Jigsaw )  </s>
<s> Right.  </s>
<s> I suppose mostly the dereferencing would be done by HTTP.  </s>
<s> In Section 6. Example in the spec, I use HTTP for dereferencing.  </s>
<s> Actually, I thought that how to dereference the URI is beyond the scope of this protocol but I think I should try to explain it more.  </s>
<s> Those are valuable comments.  </s>
<s> Thanks.  </s>
<s> That would be a good idea.  </s>
<s> Right.  </s>
<s> I should have mentioned that.  </s>
<s> Actually, the first version of cc/pp exchange protocol spec has similar notations.  </s>
<s> Excerpted from http://www.w3.org/TR/1999/NOTE-CCPPexchange-19990129 "The header prefix might be generated dynamically when the name space prefix is conflicted by another extension.  </s>
<s> However the name space prefix should have a "preferred" name because of the cache efficiency.  </s>
<s> "  </s>
<s> I admit that's simpler.  </s>
<s> If you have further concerns, please make me know.  </s>
<s> It makes sense to me a lot.  </s>
<s> Thanks again for your thoughtful and valuable comments.  </s>
<s> It is definitely useful.  </s>
<s> Best Regards, -- Taka  </s>
<s> Hi Graham,  </s>
<s> Yes, and that would work for me too.  </s>
<s> [Koen:]  </s>
<s> Yes, other protocols using http-ext might also want to define a preferred number for themselves, so this could be generalised.  </s>
<s> The http-ext RFC is published now though, and I don't expect to see revisions to it appear in the near future, so the point is a bit academic.  </s>
<s> Koen.  </s>

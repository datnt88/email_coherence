<s> Thank's to Henry Thompson, I was pointed to a severe misunderstanding of character references in XML, on my side.  </s>
<s> My initial believe was, that character references are resolved before the lexer gets to see them.  </s>
<s> Thus they really would be treated as if they were entered directly.  </s>
<s> Henry pointed out to me that, at least if following the SGML philosophy, that's not the case.  </s>
<s> Also the SGML handbook confirms his point (357:10) "a numeric character reference is always treated as data in the context in which the replacement occurs."  </s>
<s> However, I would like to see clarifications of that issue.  </s>
<s> (Mostly for the sake of others that will have to deal with it.) I don't want to get into a religious war, but to me it is more natural to treat char refs as if they would be entered directly.  </s>
<s> Thus the lexer never would see them.  </s>
<s> It all started when I thought that would be changed to before being handed to the lexer.  </s>
<s> Thus the parser would immediately resolve the reference to the parameter entity %zz; which in turn would have to be defined already at this point.  </s>
<s> Best regards, Norbert H. Mikula = SGML, DSSSL, Intra- &amp; Internet, AI, Java = mailto:nmikula@edu.uni-klu.ac.at = http://www.edu.uni-klu.ac.at/~nmikula  </s>
<s> At the risk of repeating myself, I think it's something the ERB/WG needs to address.  </s>
<s> The draft has the noble aim of being self-contained and unambiguous in no more than 20 pages.  </s>
<s> It's unclear whether this can be easily resolved in a short description.  </s>
<s> My inclination (which may conflict with the philosophy of the draft) is to take the SGML interpretation as our guide (assuming this is not in conflict with other parts of XML).  </s>
<s> Then we can either: - refer the developer to ISO:8879 and/or the Handbook.  </s>
<s> Some members of the WG don't like this since it breaks the ideal of a single document.  </s>
<s> - transcribe (subject to copyright, etc.) the verbatim parts of ISO:8879 that describe how to interpret references.  </s>
<s> This will almost certainly break the 20 page rule unless it's compressed.  </s>
<s> I suspect that if we are going to do something different from SGML we shall run into severe difficulties: - XML may no longer be a 'subset'/'dialect' of SGML - people will look to SGML for guidance and assume that XML 'does the same' - there will be complex situations that are legal XML but which we may not have anticipated.  </s>
<s> The nested entities is one such, and Norbert's examples are another.  </s>
<s> I don't think we have any option but to follow SGML, and for the sake of Norbert, other xml-dev'ers and myself we really need this clearing up soon.  </s>
<s> (I am still struggling to get a valid parser that can be bolted into my system  </s>
<s> P. Peter Murray-Rust, domestic net connection Virtual School of Molecular Sciences  </s>
<s> I wasn't saying that we shouldn't follow SGML.  </s>
<s> The point I was trying to make was that there are certain issues, char refs is just one of them, that are potentially ambigous.  </s>
<s> Util we go public at WWW6 we can resolve these problems quietely and quickly.  </s>
<s> After WWW6 we will spend the rest of our lifes answering e-mails with requests for clarifications ;-) IMHO the problem is that most of us, when they read the XML standard, automatically (subconsciously) fill in the gaps by what is known from previous SGML experience.  </s>
<s> (And I bet many of these things have been learned with blood and tears....) Discussions about certain issues have shown me that, even after "A decade of SGML" people disagree on many things.  </s>
<s> (If you want to see what a real fight is then just to talk about RE/RS when having lunch with a few experts in the community ;-) ) If we want XML to be selfcontained and not an appendix to ISO 8879 we need to address these items in a concise but *explicit* way.  </s>
<s> I see my role in the XML-WG as somebody that is supposed to point out these points of potential misunderstanding.  </s>
<s> Since I have implemented an XML parser that tries to follow the spec.  </s>
<s> by the word I know where the gaps are and I have always tried to point them out to the XML-WG and the ERB.  </s>
<s> Best regards, Norbert H. Mikula = SGML, DSSSL, Intra- &amp; Internet, AI, Java = mailto:nmikula@edu.uni-klu.ac.at = http://www.edu.uni-klu.ac.at/~nmikula  </s>

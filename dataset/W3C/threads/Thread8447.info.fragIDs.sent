<s> 2.2: Suggest changing "The manifest includes..." to "The manifest must support..." so as to permit other types of manifest.  </s>
<s> 3.1.2:  </s>
<s> Assumes the manifest of locators model.  </s>
<s> Perhaps simply changing "XML-signatures apply ..." to "XML-signatures may apply..." would give the flexibility needed to accodate other models.  </s>
<s> 3.1.2.1, 3.1.2.2, 3.1.2.3: I don't understand why these points are at the  </s>
<s> fourth level.  </s>
<s> Seems to me they should be move up one level in the outline.  </s>
<s> 3.1.3  </s>
<s> &amp; 3.3.1:  </s>
<s> Suggest replacing "negotiation" with "calculation".  </s>
<s> I believe  </s>
<s> this refers to Diffie-Hellman and I think calculation is more accurate than  </s>
<s> negotiation.  </s>
<s> Might even want to change 3.1.3  </s>
<s> to be "...calculation of keying  </s>
<s> material such as Diffie-Hellman agreement."  </s>
<s> 3.2.1:  </s>
<s> Suggest simply replacing "document" with "element" and dropping the  </s>
<s> boxed  </s>
<s> comment.  </s>
<s> 3.2.2:  </s>
<s> Suggest replacing "required" with "mandatory to implement".  </s>
<s> 3.3.3:  </s>
<s> I think behaviour in this case is application dependent.  </s>
<s> It would be  </s>
<s> good for applications to at least notice conflicts and be able to report  </s>
<s> them.  </s>
<s> Boxed comment at the end of 3.4: I don't see that packaging is that  </s>
<s> dependent on  </s>
<s> trust/semantic definitions.  </s>
<s> Since there are fragment and package WGs, why  </s>
<s> isn't  </s>
<s> coordination with them adequate?  </s>
<s> Donald Donald E. Eastlake, 3rd 17 Skyline Drive, Hawthorne, NY 10532 USA home: 65 Shindegan Hill Road, RR#1, Carmel, NY 10512 USA  </s>
<s> [Comments to an email from Don, that hasn't yet made it to the list.]  </s>
<s> Manifests that don't use URIs?  </s>
<s> If so, what would be the example?  </s>
<s> What other models are we speaking of?  </s>
<s> fourth  </s>
<s> level.  </s>
<s> S  </s>
<s> Ok, they've been promoted.  </s>
<s> believe  </s>
<s> keying  </s>
<s> Done. Richard if you object, say so.  </s>
<s> boxed  </s>
<s> Now reads, "An XML-signature must be a well-balanced XML region (as defined by XML-Fragment) that begins and ends with a signature element.  </s>
<s> [Charter]"  </s>
<s> ok.  </s>
<s> be  </s>
<s> them.  </s>
<s> Are you agreeing with the comment?  </s>
<s> Could you restate the requirement or  </s>
<s> comment?  </s>
<s> dependent on  </s>
<s> isn't  </s>
<s> (At 4.2.  </s>
<s> Package might start next year, and Boyer doesn't think the fragment work is sufficient, so I'm flagging these as particularly salient dependencies.  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> [Comments to an email from Don, that hasn't yet made it to the list.]  </s>
<s> Manifests that don't use URIs?  </s>
<s> If so, what would be the example?  </s>
<s> John The examples are forthcoming in the scenarios document.  </s>
<s> For one, the IMPP example in the copy of the woefully incomplete scenarios document you  </s>
<s> have already.  </s>
<s> /John  </s>
<s> What other models are we speaking of?  </s>
<s> John For example, having the signature directly sign the data by enveloping the data inside of the manifest.  </s>
<s> /John  </s>
<s> boxed  </s>
<s> Now reads, "An XML-signature must be a well-balanced XML region (as defined by XML-Fragment) that begins and ends with a signature element.  </s>
<s> [Charter]" John Fragments are still in working draft.  </s>
<s> Who knows, a fragment may change at some point in the future to include non-continuous regions /John  </s>
<s> dependent on  </s>
<s> isn't  </s>
<s> (At 4.2.  </s>
<s> Package might start next year, and Boyer doesn't think the fragment work is sufficient, so I'm flagging these as particularly salient dependencies.  </s>
<s> John I think that fragments are almost sufficient except they can't specify non-continuous regions.  </s>
<s> If they could, then the construction of a fragment would completely satisfy all of my concerns since they already capture the ancestor element information like tags, attributes and element depth.  </s>
<s> Deep in one of Richard's prior posts, it is suggested that the exclusion technique (which is what I really want) could be done as c14n parameters.  </s>
<s> I'd like this only if it were mandatory to implement so that all XML DSig compliant applications could understand the signatures I have to create every day.  </s>
<s> Another possibility is that someone mentioned to me that the recent overhaul of XPointer includes the ability to specify non-continuous regions of the XML resource.  </s>
<s> If this could be combined with fragments, then it would also be sufficient to solve the problems I raised previously about ancestor information and element order being captured in the signature.  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> Joseph, Comments follow...  </s>
<s> Agreed to some extent.  </s>
<s> Negotiation tends to imply some form of handshake (multiple exchanges) during establishement of the key.  </s>
<s> However, I think that  </s>
<s> "agreement" or "exchange" would be more accurate.  </s>
<s> The method that is used to  </s>
<s> establish the key is not necessarily based upon mathematics.  </s>
<s> Why not simply "An XML-signature must be a well-formed XML element"  </s>
<s> Richard D. Brown  </s>
<s> Joseph, john,  </s>
<s> This is an option that I have promoted since Boston meeting.  </s>
<s> Interesting enough, it looks pretty much like an RDF second basic abbreviation syntax.  </s>
<s> Before Simplification After Simplification ATTENTION: JUST FOR ILLUSTRATIVE PURPOSES... Establishing a parallel with RDF simplification might give us a solution to the problem raised by canonicalization of an embedded resource value (see previous email with David Solo).  </s>
<s> I have to think over that a bit more... Richard D. Brown  </s>
<s> that  </s>
<s> to  </s>
<s> I now use agreement.  </s>
<s> There is no definition of "well-formed XML element."  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> Joseph, Comment Follows...  </s>
<s> Fair.  </s>
<s> In that case, consider "An XML-signature must be an XML element as  </s>
<s> specified by the production labeled element in the XML specification."  </s>
<s> Richard D.  </s>
<s> But it's more than an element.  </s>
<s> I'm rather happy with the constrained definition from xml-fragment, is there a reason you oppose this?  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> Why is it more than an element?  </s>
<s> (I mean besides the procedures to be further  </s>
<s> defined) OK, we may provide some additional definition for packaging certificates, but the core of an XML-Signature consists of an XML element.  </s>
<s> Conversely, an XML fragment might comprise part of an element as well as spanning multiple elements (in part or in whole).  </s>
<s> Richard D.  </s>
<s> It might be nested elements.  </s>
<s> right, that is why I constrained the well-balance definition with beginning with an element.  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> Sure, but the top level, which consists of the signature element, remains an  </s>
<s> element according to the production given in the XML specification.  </s>
<s> element := EmptyElemTag | STag content ETag content := (element | CharData | Reference | CDSect | PI | Comment)*  </s>
<s> Richard D.  </s>
<s> an  </s>
<s> Ok, I'll buy that.  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> Ok, I've included to Don's suggest text.  </s>
<s> The resulting document is at [1] and will be officially published tomorrow.  </s>
<s> Then I'll update the ietf-draft and push this out to W3C chairs and XML plenary and start twisting arms to get commitments for review once we have a draft we are fairly comfortable with.  </s>
<s> [1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> Hi Joseph, Regarding [1], section 3.1.3, the requirement that an XML signature can apply to all or part of an XML document, it has turned out that much of the current draft scenarios document [2] is about securely addressing this requirement.  </s>
<s> From the scenarios, what became apparent was that the only solution which seemed to solve all of the problems was having the ability to explicitly list the portions of a resource that should be excluded.  </s>
<s> This allows me to create signatures that have document closure, retain ancestor information when necessary, and retain element order of non-continuous regions that must be signed.  </s>
<s> A letter from Brown (cited in [2]) suggested making this a parameter of the canonicalizer element.  </s>
<s> I favor this approach since c14n is only defined for XML resources anyway.  </s>
<s> However, I favor it as long as the exclude list (could be just a list of XPointers) is made part of the core behavior and part of the requirements.  </s>
<s> The security problems and shortcomings that would result if this were not a requirement are substantial and not application-specific.  </s>
<s> Further reasoning is given in [2] section 2.4.  </s>
<s> Please consider adding a requirement (or a subrequirement to requirement 3) that we provide a method of explicit exclusion of portions of XML resources.  </s>
<s> [1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html [2] http://www.w3.org/Signature/Drafts/xmldsig-scenarios-990818.html  </s>
<s> Thanks, John Boyer Software Development Manager UWI.Com -- The Internet Forms Company [mailto:w3c-ietf-xmldsig-request@w3.org]On  </s>
<s> Behalf Of Joseph M. Reagle Jr.  </s>
<s> Ok, I've included to Don's suggest text.  </s>
<s> The resulting document is at [1] and will be officially published tomorrow.  </s>
<s> Then I'll update the ietf-draft and push this out to W3C chairs and XML plenary and start twisting arms to get commitments for review once we have a draft we are fairly comfortable with.  </s>
<s> [1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> Suggested Requirement: As a separate requirement or as a co-requirement of 3.1.3,  </s>
<s> XML Signatures must have the ability to indicate which portions of a resource should be excluded from the resource.  </s>
<s> Significance: LI Document Closure (the ability to assert that no changes were made to the document except for those elements explicitly listed as being omitted).  </s>
<s> LI Preservation of ancestor element information (XML allows elements to derive information from the tags and attributes of their ancestors; requirement 3.1.3  </s>
<s> permits signing part of an XML document.  </s>
<s> Hence, there must be a way to retain all information relevant to the part specified, including information carried by ancestors).  </s>
<s> LI Preservation of order of non-continuous element blocks (omitting elements is necessary; if it can only be done implicitly by non listing in a manifest, then the resulting signature does not capture the order in which the included elements appear in the document.) Options: LI The canonicalizer element could include a subelement 'exclude'.  </s>
<s> Any element of the resource being canonicalized that matches one of the locators in the exclude list would not be rendered to the message whose digest is to be computed.  </s>
<s> LI The exclude list could accompany the locator in the resource element.  </s>
<s> LI The fragment specification already accounts for ancestor information.  </s>
<s> It does not solve the document closure and element order problems.  </s>
<s> LI If the new XPointer spec now allows the ability to indicate non-continuous regions (must be verified), then that solves the element order problem, but not document closure and ancestor info.  </s>
<s> Once it is a requirement to sign a portion of a document, the resulting security problems are too great without this co-requirement.  </s>
<s> These must be mandatory to implement if signing partial documents is mandatory, and the latter is mandatory for operations like multiple overlapping signatures.  </s>
<s> See section 2.4 of [1] for more information on this topic.  </s>
<s> [1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html  </s>
<s> Thanks, John Boyer Software Development Manager UWI.Com -- The Internet Forms Company [mailto:w3c-ietf-xmldsig-request@w3.org]On  </s>
<s> Behalf Of Joseph M. Reagle Jr.  </s>
<s> Ok, I've included to Don's suggest text.  </s>
<s> The resulting document is at [1] and will be officially published tomorrow.  </s>
<s> Then I'll update the ietf-draft and push this out to W3C chairs and XML plenary and start twisting arms to get commitments for review once we have a draft we are fairly comfortable with.  </s>
<s> [1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>

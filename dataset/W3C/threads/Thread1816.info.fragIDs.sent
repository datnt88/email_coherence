<s> Since there have been no objections, I have taken Julian's  </s>
<s> suggested text, marked these two issues as closed, and posted a revised 3253 draft to the deltav web site.  </s>
<s> These were the last two open issues on the RFC-3253 issues list, so all current RFC-3253 issues are now resolved!  </s>
<s> If any new issues arise, please notify the working group via the mailing list.  </s>
<s> I will submit the revised 3253 draft as an internet draft later this week.  </s>
<s> Cheers, Geoff I agree with the proposed resolution.  </s>
<s> Unless someone disagrees, I will add this to the Errata sheet, and mark the issue as closed.  </s>
<s> Cheers, Geoff -----Original Message----- Proposed resolution: 1) Deprecate marshalling through OPTIONS.  </s>
<s> 2) Add three new live properties: (Version histories) 5.2 Additional Resource Properties The version-history feature introduces the following REQUIRED property for resources that reside in a part of a server's namespace that supports version histories.  </s>
<s> 5.1.1  </s>
<s> DAV:version-history-collection-set (protected) The DAV:version-history-collection-set property identifies collections that may contain version histories.  </s>
<s> An identified collection MAY be the root collection of a tree of collections, all of which may contain version histories.  </s>
<s> Since different servers can control different parts of the URL namespace, different resources on the same host MAY have different DAV:version-history-collection-set values.  </s>
<s> The identified collections MAY be located on different hosts from the resource.  </s>
<s> (Workspaces) 6.2.1 DAV:workspace-collection-set (protected) The DAV:workspace-collection-set property identifies collections that may contain workspaces.  </s>
<s> An identified collection MAY be the root collection of a tree of collections, all of which may contain workspaces.  </s>
<s> Since different servers can control different parts of the URL namespace, different resources on the same host MAY have different DAV:workspace-collection-set values.  </s>
<s> The identified collections MAY be located on different hosts from the resource.  </s>
<s> (Activities) 13.4 Additional Resource Properties The activity feature introduces the following REQUIRED property for resources that reside in a part of the server's namespace supporting activities.  </s>
<s> 13.4.1  </s>
<s> DAV:activity-collection-set (protected) The DAV:activity-collection-set property identifies collections that may contain activities.  </s>
<s> An identified collection MAY be the root collection of a tree of collections, all of which may contain activities.  </s>
<s> Since different servers can control different parts of the URL namespace, different resources on the same host MAY have different DAV:activity-collection-set values.  </s>
<s> The identified collections MAY be located on different hosts from the resource.  </s>
<s> Hi. The VERSION-CONTROL method -- when applied to a versionable but not yet version-controlled resource, creates one or two new resources (being the checked-in version and optionall the version history resource).  </s>
<s> I'd like to see the definition in 3.5 extended to - allow a 201 to be returned when new resources were created (see [1]) - define that in this case, the Location header should point to the version being created - define an optional response body (DAV:version-control-response) that contains references to the resources being created, such as: (similar marshalling may also be needed for other methods that create new resources) [1] http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.10.2.2  </s>
<s> Could you motivate why we would want to do this?  </s>
<s> (I'm not saying it's a bad idea, but it is additional text that would need to be added to the protocol definition, and we've got a lot of text already :-).  </s>
<s> In particular, this information is easily obtainable with a subsequent PROPFIND (and even a streaming PROPFIND, i.e. you can issue the PROPFIND without waiting for the VERSION-CONTROL to succeed).  </s>
<s> Cheers, Geoff Hi.  </s>
<s> The VERSION-CONTROL method -- when applied to a versionable but not yet version-controlled resource, creates one or two new resources (being the checked-in version and optionall the version history resource).  </s>
<s> I'd like to see the definition in 3.5 extended to - allow a 201 to be returned when new resources were created (see [1]) - define that in this case, the Location header should point to the version being created - define an optional response body (DAV:version-control-response) that contains references to the resources being created, such as: (similar marshalling may also be needed for other methods that create new resources) [1] http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.10.2.2  </s>
<s> Sure. 1) Consistency with HTTP: requests that create new resources should return a 201.  </s>
<s> 2) Consistence with deltaV (defining DAV:version-control-response as optional response body) 3) Performance: I've seen many cases where after a version-control, a client would like to access either the checked-in version or the VHR -- in which case it currently needs an additional PROPFIND.  </s>
<s> It's still an additional request and doesn't come for free.  </s>
<s> In general, a server will have to do another call to it's backend to get this information.  </s>
<s> To date, we've limited 3253 modifications to demonstrable semantic problems with the protocol (e.g. the Label header) or interoperability problems (the use of an OPTIONS body).  </s>
<s> I personally would not want to modify/extend the protocol simply for "consistency".  </s>
<s> This makes the protocol too much of a moving target for implementors.  </s>
<s> For the same reason, I would not want to modify/extend the protocol for optimizing certain requests, until it has been demonstrated that these performance issues are common and severe.  </s>
<s> But it certainly would be reasonable to define these extensions in a separate draft, and add that draft to the list of proposed DeltaV extensions on the DeltaV web site.  </s>
<s> That way implementors who encounter these performance issues can work around them in a common way, making that extension a likely candidate for inclusion in the next draft.  </s>
<s> Cheers, Geoff Hi.  </s>
<s> The VERSION-CONTROL method -- when applied to a versionable but not yet version-controlled resource, creates one or two new resources (being the checked-in version and optionall the version history resource).  </s>
<s> I'd like to see the definition in 3.5 extended to - allow a 201 to be returned when new resources were created (see [1]) - define that in this case, the Location header should point to the version being created - define an optional response body (DAV:version-control-response) that contains references to the resources being created, such as: (similar marshalling may also be needed for other methods that create new resources) [1] http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.10.2.2  </s>
<s> I agree with this.  </s>
<s> However, I'm not sure about how intrusive this change is.  </s>
<s> - Right now the response code for VERSION-CONTROL conflicts with the recommendations from RFC2616.  </s>
<s> With the current wording, client writers can rely on getting a 200 on success.  </s>
<s> I think we should relax that so that 201 is allowed as well (yes, I think this needs to be mentioned as an erratum).  </s>
<s> - All the other changes then follow from standard RFC2616 semantics, and or similar definitions in DeltaV.  </s>
<s> Julian  </s>
<s> The intrusiveness occurs if we add these extensions as a MUST.  </s>
<s> If it is a MUST, a client should be able to count on them being there, which is where it is a burden on server writers (they have to go and rev all their servers to provide this new required information).  </s>
<s> On the other hand, if we define it in a separate spec, it effectively becomes a MAY, which gives clients and servers a way of starting to use these extensions without forcing existing servers to rev their implementations.  </s>
<s> In a couple of years, it would probably be reasonable to absorb a whole set of extensions that have proven to be useful in practice, at which point clients can count on them being implemented as a bundle.  </s>
<s> Cheers, Geoff  </s>
<s> I agree with this.  </s>
<s> However, I'm not sure about how intrusive this change is.  </s>
<s> - Right now the response code for VERSION-CONTROL conflicts with the recommendations from RFC2616.  </s>
<s> With the current wording, client writers can rely on getting a 200 on success.  </s>
<s> I think we should relax that so that 201 is allowed as well (yes, I think this needs to be mentioned as an erratum).  </s>
<s> - All the other changes then follow from standard RFC2616 semantics, and or similar definitions in DeltaV.  </s>
<s> Julian  </s>
<s> I wasn't saying that it should be a MUST.  </s>
<s> Well, we can also make it a MAY or a SHOULD and put it into RFC3253bis.  </s>
<s> Right now we have: - the response codes aren't specified, one example (plain V-C) says 200, the other (V-C in workspace) says 201. - the document element for the optional response body in fact *is* defined.  </s>
<s> So what's left?  </s>
<s> 1) clarifying that the plain V-C *may* return 201 and optionally may provide the location of the checked-in version in the Location header 2) possibly allow marshalling of "both" locations (version and VHR) in the response body.  </s>
<s> I think 1) is an erratum, while 2) would be just a useful extension (although recommended in HTTP).  </s>
<s> Julian  </s>
<s> (I'd like to see this issue added to the issues list)  </s>
<s> From: Julian Reschke [mailto:julian.reschke@greenbytes.de] Sent: Friday, October 11, 2002 4:06 PM Subject: RE: 3.5: VERSION-CONTROL response codes  </s>
<s> I'll add the issues identified in (1) to the issues/errata list.  </s>
<s> I think clarifying that VERSION-CONTROL can return 201 is uncontroversial, so I'll just make that as an editorial change.  </s>
<s> Does anyone object to having VERSION-CONTROL be required to return a Location header with the newly created version, just as CHECKIN does?  </s>
<s> This does seem like a reasonable thing to require,  </s>
<s> to make sure that the client can get a reliable handle to the version it just created.  </s>
<s> As for the extension (marshalling the version and vhr info in the response body), since this is just an optimization of information that can currently be obtained via PROPFIND or the DAV:version-tree report, I'd prefer to see that written up in a draft that is referenced in the "proposed extensions" section of the deltav page, to keep the "issues and errata" document for errors and ambiguities in 3253.  </s>
<s> Cheers, Geoff (I'd like to see this issue added to the issues list)  </s>
<s> From: Julian Reschke [mailto:julian.reschke@greenbytes.de] Sent: Friday, October 11, 2002 4:06 PM Subject: RE: 3.5: VERSION-CONTROL response codes  </s>
<s> Note that this would only apply to VERSION-CONTROL when applied to a version controlled resource.  </s>
<s> When creating a working resource, it would return 201 but no Location header (because the resource at the request URI was created).  </s>
<s> OK. Would it make sense to start a draft that contains *all* proposed extensions the working group agrees on?  </s>
<s> Julian  </s>

<s> Larry requested an internet draft to progress the REPOST/Idempotent/Redo-Safe/Safe issue, so I made one.  </s>
<s> Happy reading!  </s>
<s> Koen.  </s>
<s> ----snip--- HTTP Working Group Koen Holtman, TUE Internet-Draft Expires: April 10, 1997 October 10, 1996 The Safe Response Header draft-holtman-http-safe-00.txt  </s>
<s> STATUS OF THIS MEMO This document is an Internet-Draft.  </s>
<s> Internet-Drafts are working documents of the Internet Engineering Task Force (IETF), its areas, and its working groups.  </s>
<s> Note that other groups may also distribute working documents as Internet-Drafts.  </s>
<s> Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  </s>
<s> It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress".  </s>
<s> To learn the current status of any Internet-Draft, please check the "1id-abstracts.txt"  </s>
<s> listing contained in the Internet-Drafts Shadow Directories on ftp.is.co.za (Africa), nic.nordu.net  </s>
<s> (Europe), munnari.oz.au (Pacific Rim), ds.internic.net  </s>
<s> (US East Coast), or ftp.isi.edu (US West Coast).  </s>
<s> Distribution of this document is unlimited.  </s>
<s> Please send comments to the HTTP working group at http-wg@cuckoo.hpl.hp.com .  </s>
<s> Discussions of the working group are archived at discussions about HTTP and the applications which use HTTP should take place on the www-talk@w3.org  </s>
<s> mailing list.  </s>
<s> ABSTRACT This document proposes a HTTP response header called Safe, which can be used to label the corresponding POST request as being safe.  </s>
<s> This labeling will allow user agents to present services which use safe POSTs in a more user-friendly way.  </s>
<s> Improving the user-friendliness of safe POSTs is considered important, because web internationalization will depend for a large part on the use of safe POSTs. 1 Introduction This document proposes a HTTP response header called Safe, which can be used to label the corresponding POST request as being safe.  </s>
<s> This labeling will allow user agents to present services which use safe POSTs in a more user-friendly way.  </s>
<s> Improving the user-friendliness of safe POSTs is considered important, because web internationalization will depend for a large part on the use of safe POSTs. 2 Background According to Section 9.1.1 (Safe Methods) of the HTTP/1.1 draft specification [1], POST requests are assumed to be `unsafe' by default.  </s>
<s> `Unsafe' means `causes side effects for which the user will be held accountable'.  </s>
<s> If the POST request is unsafe, explicit user confirmation is necessary before the request is repeated.  </s>
<s> User agents will repeat POST requests when the user presses the RELOAD button while a POST result is displayed, or when the history function is used to redisplay a POST result which is no longer in the history buffer.  </s>
<s> The necessary confirmation dialog often takes the form of a `repost form data?' dialog box.  </s>
<s> The dialog is confusing to many users, and slows down navigation in any case.  </s>
<s> In theory, if the repeated POST request is safe, the user-unfriendly confirmation dialog can be omitted.  </s>
<s> However, up till now, HTTP has no mechanism by which agents can tell if POST requests are safe.  </s>
<s> This proposal adds such a mechanism.  </s>
<s> Many content authors have managed to avoid the confirmation dialog problem by using GETs for form submission instead of safe POSTs.  </s>
<s> However, this escape is not possible for forms a) which are (sometimes) used to submit large amounts of data b) which are (sometimes) used to submit data in a charset other than ISO-8859-1.  </s>
<s> Case b) will be the increasingly common; web internationalization [2] makes it necessary to use the POST method for form submission.  </s>
<s> It is therefore considered important to eliminate the unnecessary confirmation dialogs for safe POSTs as soon as possible.  </s>
<s> They are a counter-incentive to the upgrading of GET based forms services (like search engines) to internationalized POST based forms services.  </s>
<s> 3 The Safe response header This header is proposed as an addition to the HTTP/1.x suite.  </s>
<s> The Safe response header field indicates whether the corresponding request is safe in the sense of Section 9.1.1 (Safe Methods) of the HTTP/1.1 draft specification [1].  </s>
<s> Safe = "Safe" ":" safe-nature safe-nature = "yes" | "no" An example of the field is: Safe: yes If the Safe header is absent, the corresponding request must be considered unsafe, unless it is a GET or HEAD request.  </s>
<s> GET and HEAD requests are safe by definition, user agents must ignore a `Safe: no' header field in GET and HEAD responses.  </s>
<s> Note: User agents can use the received information about safety when repeating an earlier request.  </s>
<s> If the request is known to be safe, it can be silently repeated without asking for user confirmation.  </s>
<s> 4 Smooth upgrade path That the Safe header provides a smooth upgrade path; if a service switches from GETs to safe POSTs, existing browsers will still be able to access the service.  </s>
<s> Its use requires little re-coding effort for service authors and user agent authors, and is optional in any case. 5 About syntax This document mainly intends to recommend a _mechanism_; the syntax of the corresponding header is considered less important.  </s>
<s> One alternative to the addition of a Safe header would be the addition of a `safe' response directive to the Cache-Control header.  </s>
<s> 6 Security considerations This proposal adds no new HTTP security considerations.  </s>
<s> 7 References [1] Fielding et al, Hypertext Transfer Protocol -- HTTP/1.1.  </s>
<s> Internet-Draft draft-ietf-http-v11-spec-07.txt,  </s>
<s> HTTP Working Group, August 12, 1996 [2] Yergeau et al, Internationalization of the Hypertext Markup Language, Internet-Draft draft-ietf-html-i18n-05.txt, Network Working Group, August 7, 1996 8 Author's address Koen Holtman Technische Universiteit Eindhoven Postbus 513 Kamer HG 6.57 5600 MB Eindhoven (The Netherlands) Expires: April 10, 1997  </s>
<s> Clarification ...  </s>
<s> This is not true.  </s>
<s> The only time that web internationalization might  </s>
<s> impact the choice of POST vs GET is when it is not known what the input character set will be *and* it is possible for the user agent to submit data in some character set other than what is expected *and* the form does not contain an entry box for the user to select which particular character set they are using *and* nobody has convinced the browser community to include a standard hidden form field containing the charset whenever the charset is not the same as that of the output form.  </s>
<s> In other words, i18n has nothing to do with it.  </s>
<s> ...Roy T. Fielding  </s>
<s> Department of Information &amp; Computer Science (fielding@ics.uci.edu)  </s>
<s> Roy T. Fielding:  </s>
<s> Quoting from section 5.2 of [2] (draft-ietf-html-i18n-05.txt):  </s>
<s> The best solution is to use the "multipart/form-data" media type described in [RFC1867] with the POST method of form submission.  </s>
<s> Do you disagree with draft-ietf-html-i18n-05.txt, or with my interpretation of it?  </s>
<s> I can't really tell from your comments.  </s>
<s> I have not read all of draft-ietf-html-i18n-05.txt, so I may be missing something, but the quote above seems quite clear.  </s>
<s> POSTs are the route draft-ietf-html-i18n-05.txt seems to be taking, and draft-ietf-html-i18n-05.txt is approved as a proposed standard.  </s>
<s> My proposal attempts to identify and clear away an obstacle to the deployment of draft-ietf-html-i18n-05.txt.  </s>
<s> If you can convince me it does not, I will retract my proposal.  </s>
<s> Koen.  </s>
<s> Yes, I disagree with draft-ietf-html-i18n-05.txt and I did so more than once on the HTML WG list.  </s>
<s> I'd rather not discuss it again.  </s>
<s> For the particular problem they were discussing, yes.  </s>
<s> That particular problem only occurs under ALL of the conditions I described.  </s>
<s> What i18n did was try to find a theoretically cleaner solution to a problem that  </s>
<s> has already been solved in a number of ways in practice.  </s>
<s> What they should have done is just recommend using the existing methods of handling charset-varying input until such time as there was a new method for GET+body.  </s>
<s> What obstacle?  </s>
<s> Having the user hit the OK button is an inconvenience.  </s>
<s> Given that the conditions under which a charset-sensitive input dialog is needed is ridiculously low (and no, this has nothing to do with western vs non-western -- it is only when the input text is in a different charset than what the server would expect, the charset of the form), I just don't consider it a worthy justification for yet-another HTTP control field.  </s>
<s> [And if it was, the browser community would implement it long before the standards committee, regardless of other HTTP requirements.]  </s>
<s> I don't mind the proposal -- just be sure the justification for it matches the actual need and doesn't invent problems that don't exist.  </s>
<s> ...Roy T. Fielding Department of Information &amp; Computer Science (fielding@ics.uci.edu)  </s>
<s> Roy says:  </s>
<s> This is actually very close to what I had in mind, though I tend to be more of the "let's get the GET-with-body ASAP" mind.  </s>
<s> That is, I think, the correct solution.  </s>
<s> The other I18N authors did not agree entirely with my stance.  </s>
<s> Well, I'd say this is the time to define it.  </s>
<s> If there is a working definition and evidence that it is useful, a new method is the way to go.  </s>
<s> The hard part is deciding on a name.  </s>
<s> My vote is for QUERY, but someone else gets to write the ID.  </s>
<s> .....Roy  </s>
<s> I favour PGET (Parameterised GET).  </s>

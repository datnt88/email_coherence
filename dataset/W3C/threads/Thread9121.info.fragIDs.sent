<s> Hi, The answer to this question may be in the XML signature documentation, but I could not find it.  </s>
<s> I am a bit confused as to what parts of the signed document are exactly canonicalised.  </s>
<s> Section 4.2.1 states that the "CanonicalizationMethod is a required element that specifies the canonicalization algorithm applied to the SignedInfo element prior to performing signature calculations".  </s>
<s> But what about the method being applied to elements prior to digest calculations.  </s>
<s> Would not a slight variation in the bits of these elements (the reason for the canonical transform) produce different digests?  </s>
<s> Are the elements, for which digests are calculated, also passed thru a canonical transform prior to digest calculation?  </s>
<s> Thanks, Tarun.  </s>
<s> Outgoing mail is certified Virus Free.  </s>
<s> Checked by AVG anti-virus system (http://www.grisoft.com).  </s>
<s> Version: 6.0.493 / Virus Database: 292 - Release Date: 6/26/2003  </s>
<s> Tarun,  </s>
<s> That's correct.  </s>
<s> Canonicalizing SignedInfo is all the CanonicalizationMethod is used for.  </s>
<s> You need to read up on the data pipeline.  </s>
<s> Remember, the data retrieved from the URL in the Reference is passed through any Transforms and, even more important, subject to default transformations on its was to becoming the octet stream that is digested.  </s>
<s> If the URL is, for example, an "ftp://" URL or something else that returns an octet string, no conversion is neede and the data just gets directly digested.  </s>
<s> On the other hand, if you have a same document reference, like "#foo", then that reference yields an XPATH node set which must be serialized into an octet stream before it can be digested.  </s>
<s> This serialization process defaults to using Canonical XML.  </s>
<s> If you want some other canonicalization in this case, you need to specify it as a Transform.  </s>
<s> Donald Donald E. Eastlake 3rd dee3@torque.pothole.com  </s>
<s> 155 Beaver Street +1-508-634-2066(h) +1-508-851-8280(w) Milford, MA 01757 USA Donald.Eastlake@motorola.com  </s>
<s> When calculating digests, you may specify c14n in Transform/ element [1]: Any canonicalization algorithm that can be used for |CanonicalizationMethod| (such as those in Canonicalization Algorithms http://www.w3.org/TR/xmldsig-core/#sec-c14nAlg (section 6.5)) can be used as a |Transform|.  </s>
<s> or the default c14n would be used [2]: If the data object is a node-set and the next transform requires octets, the signature application MUST attempt to convert the node-set to an octet stream using Canonical XML [XML-C14N http://www.w3.org/TR/xmldsig-core/#ref-XML-C14N ]. Aleksey [1] http://www.w3.org/TR/xmldsig-core/#sec-Canonicalization [2] http://www.w3.org/TR/xmldsig-core/#sec-ReferenceProcessingModel  </s>

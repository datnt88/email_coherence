<s> In the abstract model object model section 18 is the following: "XML defined the "well-formed" (WF) state for documents which are parsed without reference to their DTDs.  </s>
<s> "  </s>
<s> This is not worded well, because WF documents still MUST include internal entities and MAY include external entities (see XML 4.4,3).  </s>
<s> However XML says at 2.1 "[Definition: A textual object is a well-formed XML document if:]  </s>
<s> 1..  </s>
<s> Taken as a whole, it matches the production labeled document.  </s>
<s> 2..  </s>
<s> It meets all the well-formedness constraints given in this specification.  </s>
<s> 3..  </s>
<s> Each of the parsed entities which is referenced directly or indirectly within the document is well-formed."  </s>
<s> So even a WF document is parsed with reference to (the entity declarations in) the DTD.  </s>
<s> I think it is worthwhile avoiding this mistake, because already so many XML system get entities wrong.  </s>
<s> Cheers Rick Jelliffe  </s>
<s> Quoth Rick, re AS section 18 description of WF:  </s>
<s> Valid criticism, both because "DTD" can refer to the internal subset and  </s>
<s> because XML did not officially define a processor type/mode in which no attempt is made to use the external subset.  </s>
<s> Many implementations do offer  </s>
<s> that as a nonstandard feature (or by deliberately creating a situation where external subset retrieval will fail, eg by plugging in a SAX Entity Resolver which no-ops that request), and perhaps the XML REC _should_ have defined and named that behavior... but it didn't.  </s>
<s> We can, if we want to.  </s>
<s> Maybe we should; there's clearly a demand for it.  </s>
<s> But we'd have to come up with a name for it and spell out exactly what it does; WF ain't it.  </s>
<s> And if you really want to process without _any_ reference to the Document  </s>
<s> Type, including its internal subset... we can do that too but that's yet  </s>
<s> another mode, and again we would have to assign it a name and precisely  </s>
<s> define its behavior.  </s>
<s> (I'm not convinced this one is really desirable, since it's hard to argue that the internal subset is not intended to be taken as part of that specific instance document.) Joe Kesselman / IBM Research  </s>
<s> Eh? I sure think it did.  </s>
<s> The external subset is an unnamed entity, so it falls under the options for a non-validating parser.  </s>
<s> That was the clear intent.  </s>
<s> ... actually that'd be clearly outside the scope of the XML REC, so don't call it "XML".  </s>
<s> - Dave  </s>
<s> They said that this was legitimate behavior for a nonvalidating processor.  </s>
<s> As far as I can tell, they didn't provide any terminology for distinguishing this case from that where the attempt is made, and that lack of terminology has been an ongoing problem for XML users.  </s>
<s> I would be  </s>
<s> happier if someone closer to XML's core told us what to call this case... but if they don't, and we're going to provide an API that exposes it, I think that nomenclature responsibility falls squarely on us.  </s>
<s> "A nonvalidating parser running with an EntityResolver that blocks attempts to retrieve the External Subset" works as a descriptive, but is impossibly ungainly for discussion... and is more closely tied to specific APIs than I really like.  </s>
<s> It's a fairly commonly seen case; it needs a name.  </s>
<s> Especially if we decide to actually make it directly requestable through the API... which I think might be a good idea; the parser itself is much better equipped to know which external entity requests are intended for use as External Subsets than the EntityResolver is.  </s>
<s> Document  </s>
<s> yet  </s>
<s> ... actually that'd be clearly outside the scope of the XML REC, so don't  </s>
<s> call it "XML".  </s>
<s> Raised it mostly so folks could shoot it down; thanks for doing so.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> The parse would be non-validating, whether an attempt was made or not.  </s>
<s> The problem was ... what?  </s>
<s> The "org.xml.sax.ext.EntityResolver2" interface (see the SAX website, that information available to the resolver.  </s>
<s> Not that it can cause PEs to be "skipped"; it can only resolve them to empty content, which is a much simpler thing.  </s>
<s> Having thought about this a bit, I can still say that I think it's a lot more usable to just have controls that affect all external entitiees of a given type: PE or GE. Attempting more granular control, particularly of PEs, creates needless confusion and potential for error.  </s>
<s> - Dave  </s>

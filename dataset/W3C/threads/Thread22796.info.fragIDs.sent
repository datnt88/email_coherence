<s> The last couple of days I have been putting together a test suite for javadom.py, which is a simple wrapper interface that allows Python scripts running in JPython to use Java DOM implementations with a Python DOM interface.  </s>
<s> When writing this test suite I found a number of bugs in the underlying DOM implementations (and, of course, my own interface), which I have reported.  </s>
<s> I also found a couple of weak spots, I believe, in the specifications, where implementations differ.  </s>
<s> 1. What is the result of document.createAttribute("a")._get_nodeValue()?  </s>
<s> Is it None or ""?  </s>
<s> As far as I can see neither of the level 1 and level 2 specs answer this question.  </s>
<s> None would be the most reasonable answer, methinks, but some implementations think otherwise.  </s>
<s> Xerces: ""  </s>
<s> Sun: None Brownell: "" 4DOM: "" Indelv: None SXP: None OpenXML: ""  </s>
<s> 2. What is the result of calling element.removeAttribute("non-existent")?  </s>
<s> The specs (1 and 2) seem to say that nothing should happen, and that is my own interpretation.  </s>
<s> Xerces: nothing Sun: raise DOMException Brownell: raise DOMException 4DOM: nothing Indelv: nothing SXP: nothing OpenXML: nothing --Lars M.  </s>
<s> Since Delphi does not treat wideStrings as ordinary objects I always use an empty string where the DOM prescribes a null pointer.  </s>
<s> In my opinion DOM 2 should explicitly allow this by modifying ?1.1.5.  </s>
<s> I agree.  </s>
<s> The problem probably arises in some implementation, because  </s>
<s> NamedNodeMap.removeNamedItem() will raise a NOT_FOUND_ERR exception,  </s>
<s> i.e. if you use instead of the above example element.attributes.removeNamedItem("non-existent")  </s>
<s> you should raise an exception.  </s>
<s> So if an implementation just transforms a removeAttribute() call into a removeNamedItem() call of the Element's attribute list it is not conforming with the DOM spec.  </s>
<s> Though it is a constant pitfall for implementations, the DOM WG decided not to harmonize the NamedNodeMap- and the Element-calls, because of backward compatibility.  </s>
<s> Dieter Koehler, M. A. - dieter.koehler@ppp.uni-bamberg.de  </s>
<s> Mittlere Kaulberg 22, D-96049 Bamberg, +49(0)951-5190726 "http://www.philo.de/Philosophie-Seiten/":  </s>
<s> 1000+ Philosophie-Links "http://www.philo.de/VirtualLibrary/14.de.htm": Deutsche Philo-Links "http://www.philo.de/xml/":  </s>
<s> Open XML - XML-Komponenten fuer Delphi  </s>
<s> * Lars Marius Garshol  </s>
<s> * Dieter K?hler  </s>
<s> This is a case of name collision.  </s>
<s> My Python - Java DOM module only handles Java DOM implementations, so the OpenXML I am talking about is not your Delphi module, but this one: In my XML tools list I've called your module XDOM, since you seem to use that name just as often as OpenXML.  </s>
<s> In any case, keshlam has already assured me off-list that "" is the correct return value.  </s>
<s> * Lars Marius Garshol  </s>
<s> * Dieter K?hler  </s>
<s> So, apparently does the DOM WG, again according to keshlam.  </s>
<s> Aha, I didn't think of that.  </s>
<s> Thank you for pointing that out.  </s>
<s> --Lars M.  </s>
<s> Nothing should happen if you try to remove a non-existent attribute.  </s>
<s> The methods don't have a return value and explicitly raises no exception for that case.  </s>
<s> Philippe  </s>

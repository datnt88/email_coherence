<s> Last example fn:string-join is wrong: ancestor-or-self::* is a reverse axis so result would be section/chap/doc.  </s>
<s> Either fix the result or add a /. at the end of the path expression.  </s>
<s> No, the result of an AxisStep is always in forwards document order.  </s>
<s> Michael Kay  </s>
<s> It is also an XPath 2.0-only example and should be marked as such.  </s>
<s> PS: MS-FO-LC1-035 &amp; -038 was provided to the editors directly.  </s>
<s> The example is wrong, however, because it uses the expression "name(.)" when it should use "name($n)".  </s>
<s> The current example would return "section/section/section" since "name(.)"  </s>
<s> always returns "section".  </s>
<s> The corrected example is: fn:string-join(for $n in ancestor-or-self::* return name($n), '/')  </s>
<s> If we can't have a "for" expression that binds the context item, I really do think that as a minimum, a "for" expression should unbind ".", so that this all-too-common error gets detected.  </s>
<s> Michael Kay  </s>
<s> Michael: Thank you for your comment.  </s>
<s> As responses to this mail have confirmed, the result of the example is correct.  </s>
<s> I have fixed the bug in the return clause and marked the example as an XPath 2.0 example.  </s>
<s> All the best, Ashok  </s>
<s> From: public-qt-comments-request@w3.org [mailto:public-qt-comments- request@w3.org]  </s>
<s> On Behalf Of Michael Rys Sent: Monday, June 30, 2003 6:38 PM Subject: MS-FO-LC1-036: string-join example is wrong Class: Editorial Last example fn:string-join is wrong: ancestor-or-self::* is a reverse axis so result would be section/chap/doc.  </s>
<s> Either fix the result or add  </s>
<s> a  </s>
<s> /. at the end of the path expression.  </s>
<s> It is also an XPath 2.0-only example and should be marked as such.  </s>
<s> PS: MS-FO-LC1-035 &amp; -038 was provided to the editors directly.  </s>

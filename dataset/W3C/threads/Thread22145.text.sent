entitygetpublicid, notationgetsystemid These tests have been a subject of debate repeatedly on the www-dom-ts mailing list. 
Crimson alone of the tested processors changes the relative URI's in the source document to absolute URI's when retrieved by Entity.getPublicId() and similar. 
While not expressly prohibited by the DOM spec, there is nothing that would suggest to the user that it should be anticipated. 
Edwin, it would be interesting to get your take on whether the returning absolute URI's was intentional and any thought process behind it. 
Tests *EE tests and documentcreateentitydefault Entity content not added when entity reference is created in both entity expanding and entity preserving modes elementreplaceattributewithitself Fails here too but throws WRONG_DOCUMENT_ERR Implementation title:org.apache.crimson.tree 
Implementation vendor:Apache Software Foundation Implementation version:1.1.3 isCoalescing() == false isExpandEntityReferences() == false isIgnoringComments() == false isIgnoringElementContentWhitespace() == false isNamespaceAware() == false isValidating() == false .............E.........E.......E............ ......E.......E..E...........E..F............. ..............................E..E..E....... E...E...F...........................F........ ................F......................... F.........F...E........F...........E.......... Time: 3.425 There were 14 errors: 1) allowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.attrsetvaluenomodificationallowederrEE.runTest(Unk nown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 2) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdataappenddatanomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 3) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatadeletedatanomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 4) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatainsertdatanomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 5) modificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatareplacedatanomodificationallowederrEE 
.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 6) ficationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatasetdatanomodificationallowederrEE.run 
Test(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 7) ltattr(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.documentcreateelementdefaultattr.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 8) nomodificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementremoveattributenodenomodificationallowederr 
EE.runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 9) dificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementremoveattributenomodificationallowederrEE.r unTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 10) hself(org.w3c.domts.JUnitTestCaseAdapter) 
org.apache.crimson.tree.DomEx: 
WRONG_DOCUMENT_ERR: That node doesn't belong in this document. 
at org.apache.crimson.tree.AttributeSet.setNamedItem(AttributeSet.java:432) at org.apache.crimson.tree.ElementNode2.setAttributeNode(ElementNode2.java:572) at org.w3c.domts.level1.core.elementreplaceattributewithself.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 11) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementsetattributenodenomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 12) icationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementsetattributenomodificationallowederrEE.runT est(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 13) tionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.nodesetnodevaluenomodificationallowederrEE.runTest (Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 14) nallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.textsplittextnomodificationallowederrEE.runTest(Un known Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) There were 7 failures: 1) nceknown(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.AssertionFailedE rror: size expected: 1 but was: 0 at org.w3c.domts.JUnitTestCaseAdapter.assertSize(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertSize(Unknown 
Source) at org.w3c.domts.level1.core.documentcreateentityreferenceknown.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 2) domts.JUnitTestCaseAdapter)junit.framework.AssertionFailedError: systemIdStrict expected: entityFile but was: jar:file:/D:/domts/2001/DOM-Test-Suite/dist/dom1-core.jar!/entityFile at org.w3c.domts.JUnitTestCaseAdapter.assertEquals(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertEquals(Unknown 
Source) at org.w3c.domts.level1.core.entitygetpublicid.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 3) ionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertion 
FailedError: throw_NO_MODIFICATION_ALLOWED_ERR at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.nodeappendchildnomodificationallowederrEE.runTest( 
Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 4) tionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertio nFailedError: nodeInsertBeforeNoModificationAllowedErrAssert at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.nodeinsertbeforenomodificationallowederrEE.runTest (Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 5) ionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertion 
FailedError: throw_NO_MODIFICATION_ALLOWED_ERR at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.noderemovechildnomodificationallowederrEE.runTest( 
Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 6) tionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertio nFailedError: throw_NO_MODIFICATION_ALLOWED_ERR at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.nodereplacechildnomodificationallowederrEE.runTest (Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 7) c.domts.JUnitTestCaseAdapter)junit.framework.AssertionFailedError: exactEquals expected: notation2File but was: jar:file:/D:/domts/2001/DOM-Test-Suite/dist/dom1-core.jar!/notation2Fil e at org.w3c.domts.JUnitTestCaseAdapter.assertEquals(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertEquals(Unknown 
Source) at org.w3c.domts.level1.core.notationgetsystemid.runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) FAILURES!!! Tests run: 290, Failures: 7, Errors: 14 isCoalescing() == false isExpandEntityReferences() == true isIgnoringComments() == false isIgnoringElementContentWhitespace() == true isNamespaceAware() == true isValidating() == true .............E.........E.......E............ ......E.......E..E...........E..F............. ..............................E..E..E....... E...E...F...........................F........ ................F......................... F.........F...E........F.....E......E.......... Time: 2.524 There were 15 errors: 1) allowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.attrsetvaluenomodificationallowederrEE.runTest(Unk nown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 2) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdataappenddatanomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 3) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatadeletedatanomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 4) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatainsertdatanomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 5) modificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatareplacedatanomodificationallowederrEE 
.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 6) ficationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.characterdatasetdatanomodificationallowederrEE.run 
Test(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 7) ltattr(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.documentcreateelementdefaultattr.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 8) nomodificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementremoveattributenodenomodificationallowederr 
EE.runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 9) dificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementremoveattributenomodificationallowederrEE.r unTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 10) hself(org.w3c.domts.JUnitTestCaseAdapter) 
org.apache.crimson.tree.DomEx: 
WRONG_DOCUMENT_ERR: That node doesn't belong in this document. 
at org.apache.crimson.tree.AttributeSet.setNamedItem(AttributeSet.java:432) at org.apache.crimson.tree.ElementNode2.setAttributeNode(ElementNode2.java:572) at org.w3c.domts.level1.core.elementreplaceattributewithself.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 11) odificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementsetattributenodenomodificationallowederrEE. 
runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 12) icationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.elementsetattributenomodificationallowederrEE.runT est(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 13) tionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.nodesetnodevaluenomodificationallowederrEE.runTest (Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 14) tanomodificationallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.ClassCastException: org.apache.crimson.tree.TextNode at org.w3c.domts.level1.core.processinginstructionsetdatanomodificationallowede 
rrEE.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 15) nallowederrEE(org.w3c.domts.JUnitTestCaseAdapter) 
java.lang.NullPointerException at org.w3c.domts.level1.core.textsplittextnomodificationallowederrEE.runTest(Un known Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) There were 7 failures: 1) nceknown(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.AssertionFailedE rror: size expected: 1 but was: 0 at org.w3c.domts.JUnitTestCaseAdapter.assertSize(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertSize(Unknown 
Source) at org.w3c.domts.level1.core.documentcreateentityreferenceknown.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 2) domts.JUnitTestCaseAdapter)junit.framework.AssertionFailedError: systemIdStrict expected: entityFile but was: jar:file:/D:/domts/2001/DOM-Test-Suite/dist/dom1-core.jar!/entityFile at org.w3c.domts.JUnitTestCaseAdapter.assertEquals(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertEquals(Unknown 
Source) at org.w3c.domts.level1.core.entitygetpublicid.runTest(Unknown 
Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 3) ionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertion 
FailedError: throw_NO_MODIFICATION_ALLOWED_ERR at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.nodeappendchildnomodificationallowederrEE.runTest( 
Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 4) tionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertio nFailedError: nodeInsertBeforeNoModificationAllowedErrAssert at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.nodeinsertbeforenomodificationallowederrEE.runTest (Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 5) ionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertion 
FailedError: throw_NO_MODIFICATION_ALLOWED_ERR at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.noderemovechildnomodificationallowederrEE.runTest( 
Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 6) tionallowederrEE(org.w3c.domts.JUnitTestCaseAdapter)junit.framework.Assertio nFailedError: throw_NO_MODIFICATION_ALLOWED_ERR at org.w3c.domts.JUnitTestCaseAdapter.assertTrue(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertTrue(Unknown 
Source) at org.w3c.domts.level1.core.nodereplacechildnomodificationallowederrEE.runTest (Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) 7) c.domts.JUnitTestCaseAdapter)junit.framework.AssertionFailedError: exactEquals expected: notation2File but was: jar:file:/D:/domts/2001/DOM-Test-Suite/dist/dom1-core.jar!/notation2Fil e at org.w3c.domts.JUnitTestCaseAdapter.assertEquals(Unknown 
Source) at org.w3c.domts.DOMTestCase.assertEquals(Unknown 
Source) at org.w3c.domts.level1.core.notationgetsystemid.runTest(Unknown Source) at org.w3c.domts.JUnitTestCaseAdapter.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.runTest(Unknown 
Source) at org.w3c.domts.JUnitRunner.execute(Unknown 
Source) at org.w3c.domts.DOMTestCase.doMain(Unknown 
Source) at org.w3c.domts.level1.core.alltests.main(Unknown 
Source) FAILURES!!! Tests run: 290, Failures: 7, Errors: 15 I looked to see how crimson was resolving the URIs and it is in part of the code that originated before I started working on the parser. 
It's in Parser2.java which was based from an older version of the code. 
The original author, Dave Brownell, might be able to help. 
[snip] Not sure whether I was supposed to comment on the other parts of your email. 
-Edwin The deal is that SAX clearly specifies that those IDs are supposed to be resolved, so that's how Crimson does it. 
(Xerces just as clearly violates the SAX spec in this area. 
See the "saxunit 0.2" tests now available at http://xmlconf.sourceforge.net 
...) I suspect that if you had included the GNUJAXP software you'd find it also resolves those URIs. 
(What test software were you running? 
The "domunit 0.0.6" test cases don't address such issues.) 
If you want rationales, I'll share two beyond "it's allowed and conforms with the specs". 
First, the original expectation with XML was that as "SGML on the web", all system IDs would be URLs. 
And second, since DOM levels 1 and 2 don't expose information about the base URLs of nodes, it'd seem that ever exposing relative URLs through DOM would be buglike. 
I know there were some discussions early in the L2 timeframe about exposing those bases, but that never happened. 
Was there some rationale available for DOM implementations that chose to expose relative URIs while hiding the base URIs needed to interpret them? 
FYI, there's now a SAX feature flag defined to control how those IDs get handled: See the listing of such flags Some of those IDs support "SAX extensions 1.1", which I may put out as a "beta" release soon. 
(All the RFEs have been answered.) - Dave So Dave, p.s. Thanks Edwin for the archive work, that was all I was asking ----- Original Message ----- From: "Edwin Goei" edwingo@sun.com 
Sent: Thursday, November 15, 2001 9:24 PM Subject: Re: Crimson 1.1.3 tests [snip] Thanks for the backgrounder, I've put some comments in-line with your ----- Original Message ----- had ca: The NIST/W3C DOM Test Suite stuff in the W3C CVS (see replaced (sorry) with Xalan-J 2.1 (again exactly) and the corresponding Xerces to build, if you are interested. 
DOMUnit did have testNotationGetSystemId which accepted either a relative or absolute URI. 
CA: Isn't done by most processors and may come as a surprise to even knowledgable practitioners. 
Therefore should be worth at least a mention that absolutizing may occur since it seems rare in current practice (Crimson being the only implementation that I've seen that does it) [ca] Probably so you could serialize a document without having the system id's obviously mucked with. 
Probably a fair number of entity resolvers that examine the systemId would fail to work if the source document had a unexpectedly absolutized systemId. 
Of course, that is a consequence of using the systemId to perform publicId's role. 
With SAX making the behavior switchable and since many DOM implementations are layers on SAX, that makes it pretty clear that mandating absolutizing in the tests isn't acceptible either. 
I've removed the verbatim systemId assertions in the two tests in the DOM L1 Core suite (leaving an assertion that just checks if the filename fragments are the same) and changed the verbatim systemId assertions in the DOM L2 tests (main the import*.xml 
tests). 
[ this was supposed to be a 'reply all', sorry ] Curious. 
I found this stuff, but it built with Ant 1.4.1 and my existing environment. 
That defaults to using GNUJAXP (for SAX and DOM) and SAXON (for XSLT); there were no evident problems building. 
I can confirm that it came as a surprise to me to learn that those URIs were NOT resolved ... I'd have expected Xerces (for one) to obey the SAX specs in such basic respects. 
URI reporting through DOM has never been clearly specified, so at least this knowledgeable practitioner was not surprised by anything except an unrelated spec non-conformance ... :) An org.xml.sax.EntityResolver applies only to parsed entities. 
But yes, if ya misuses System IDs ya gots to pay da price. 

<s> Tex, I have realised this evening that although I use Notepad all the time, I almost never used the Open dialog box !  </s>
<s> I simply right click on a file and say Open with  Notepad, or drag and drop the file into an open Notepad window.  </s>
<s> I find that when either of these approaches I never have an issue with Notepad failing to recognise that this is utf-8 and I always see my file displayed correctly.  </s>
<s> If I use the Open dialog box I note that it appears to auto-detect the signature before opening a file and automatically changes the Encoding option when it is able to detect a utf-8 file.  </s>
<s> But if this fails, it is not forcing me to open the file as ANSI.  </s>
<s> If there's no auto-detection of the utf-8 signature, it doesn't seem to me that you are in any way in an unusual situation when compared to general editing of files.  </s>
<s> If your file is encoded as iso-8859-5, you'd generally need to know that and specify that when opening the file in any editor.  </s>
<s> So I think that with Notepad, rather than us being faced with a problem, we are, on the contrary, simply being offered some useful help if it can sniff and detect that this is a utf-8 file.  </s>
<s> Otherwise, all things are equal with what you would naturally expect.  </s>
<s> So I'm not convinced that there is any particular issue to address here.  </s>
<s> RI  </s>
<s> Richard Ishida W3C contact info: http://www.w3.org/People/Ishida/ W3C Internationalization FAQs RSS feed: http://www.w3.org/International/questions.rss  </s>
<s> Richard, The issue is that the FAQ simply recommends removing the BOM as a solution and offers no indication of possible consequences.  </s>
<s> We just need to indicate that removing the BOM can have some impact.  </s>
<s> In terms of what that impact may be, it depends on how the file is used.  </s>
<s> We can look at risks to notepad users, but the file might be touched by many other applications, any of which might have a dependency on the BOM as a signature.  </s>
<s> With respect to Notepad, one of the considerations we discussed is that Windows has 3 file systems.  </s>
<s> One of them, NTFS, maintains additional information about files.  </s>
<s> We speculated it recorded encoding.  </s>
<s> So, if notepad made use of that, the BOM might be less necessary in that environment.  </s>
<s> (Which I suspect is also your environment, as NTFS is the default for hard disks.)  </s>
<s> However, it won't have that information on other file systems.  </s>
<s> I think one test is to open a file on a floppy, which won't be ntfs.  </s>
<s> Also notepad has some awareness of html format and perhaps other markup filetypes, so to test this, we need to make sure of these dependencies.  </s>
<s> e.g.  </s>
<s> I am sure all your files have a meta charset statement.  </s>
<s> But others may not.  </s>
<s> Also, you and I can remove BOMS on our systems, our files aren't being processed by complex development or complicated web publishing systems.  </s>
<s> However, files that are in such an environment such as Deborah might have, could easily have some dependency on bom detection.  </s>
<s> But the point is that the few tests we made today are not going to cover all the possible scenarios where removing a BOM can have an impact.  </s>
<s> As for concerns, they are two-fold.  </s>
<s> a) In an environment where people are blissfully letting notepad and other software use the BOM as an indicator, if one individual reads the faq, starts removing BOMs, and he/she and others are unaware of the consequences, they don't know to start paying attention to encoding when they open the file.  </s>
<s> So it's nice that it is shown on the open dialog, but nobody will pay attention to it until after a problem occurs.  </s>
<s> And if they use right-click, they won't even get the choice.  </s>
<s> b) The danger is that a file is opened as iso 8859-1 for example, and as markup is mostly ascii, it is possible for the encoding problem not to be noticed, and then if the file is saved as utf-8, the non-ascii data will be corrupt.  </s>
<s> (Latin-1 characters written out instead of Unicode, as utf-8) Saving it as utf-8 might require some overt user action, but is not beyond belief.  </s>
<s> Another scenario is the user copies and pastes data from the iso file to another correctly utf-8 file, but the data pasted will now be incorrect.  </s>
<s> The solution to the FAQ is just to include a sentence or two indicating that if you are going to remove a BOM, you should know how the file is used and verify whether it will have an impact, (or remove it and monitor that subsequent processing doesn't break).  </s>
<s> Also, as we noted, BOM is not the only reason there might be problem lines or  </s>
<s> characters in front of files.  </s>
<s> e.g. misinterpretation of the encoding, perhaps an older or incorrect version of the software.  </s>
<s> And an alternative solution is to upgrade or replace software to make it BOM aware.  </s>
<s> (Although that doesn't work for CSS yet.) hth tex  </s>
<s> Tex Texin cell: +1 781 789 1898 mailto:Tex@XenCraft.com Xen Master http://www.i18nGuy.com  </s>
<s> XenCraft http://www.XenCraft.com  </s>
<s> Making e-Business Work Around the World  </s>
<s> I have NTFS but Notepad is only able to detect that a file is UTF-8 before opening with the Open dialog box if the signature is present.  </s>
<s> Remove the signature and it no longer knows.  </s>
<s> So it seems to me that NTFS doesn't remember the encoding.  </s>
<s> Same happens for html files with encoding declaration.  </s>
<s> And if they use right-click, they won't even get the choice.  </s>
<s> Note that Notepad seems to apply some heuristics to the file when you right click.  </s>
<s> It always opens correctly as utf-8.  </s>
<s> That sounds fair enough.  </s>
<s> RI  </s>
<s> possibly.  </s>
<s> We were speculating it also depended on how the file was created.  </s>
<s> But as you say it was also doing some detecting based on heuristics, it is going to depend on the data in the file.  </s>
<s> Which means our studies with a handful of files are not conclusive.  </s>
<s> Apparently it also depends on how you open the file since you say above the box looks for the signature, but below for right click its always correct.  </s>
<s> Odd they don't use the same detection for both.  </s>
<s> At least we are together on the conclusion!  </s>
<s> ;-)  </s>
<s> And if they use right-click, they won't even get the choice.  </s>
<s> Tex Texin cell: +1 781 789 1898 mailto:Tex@XenCraft.com Xen Master http://www.i18nGuy.com  </s>
<s> XenCraft http://www.XenCraft.com  </s>
<s> Making e-Business Work Around the World  </s>

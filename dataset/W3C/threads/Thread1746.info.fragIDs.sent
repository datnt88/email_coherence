<s> Hi,  </s>
<s> suppose I have a repository landscape with a workspace under baseline-control.  </s>
<s> The workspace contains my VCR's.  </s>
<s> Checkout is done with  </s>
<s> DAV:apply-to-version and DAV:activity-set (href or new).  </s>
<s> So Work in process is represented by working-resources collected in activities.  </s>
<s> Well what if a client wants to add a file to the repository using a given activity (or a newly created one).  </s>
<s> The file should be placed under version control automatically.  </s>
<s> Do it have to directly add the file/resource to the workspace where all the VCR's are stored?  </s>
<s> Or is there a way to have a working resource connected to the activity and creating the VCR of that file at checkin?  </s>
<s> May I perform a checkout to a not existing VCR (like locking a not existing resource in WebDAV to reserve the name) with apply-to-version and activoity-set to get an working-resource in my activity?  </s>
<s> What happens when I checkin this (creation of VCR, version-history etc.)?  </s>
<s> What happens when I want to revert this (uncheckout? is this defined for working-resources to - I suppose it is) Regards, Daniel  </s>
<s> From: Kirmse, Daniel [mailto:daniel.kirmse@sap.com]  </s>
<s> suppose I have a repository landscape with a workspace under baseline-control.  </s>
<s> The workspace contains my VCR's.  </s>
<s> Checkout is done  </s>
<s> with DAV:apply-to-version and DAV:activity-set (href or new).  </s>
<s> So Work in process is represented by working-resources collected in activities.  </s>
<s> Well what if a client wants to add a file to the repository using a given activity (or a newly created one).  </s>
<s> The file should be placed under version control automatically.  </s>
<s> Do it have to directly add the file/resource to the workspace where all the VCR's are stored?  </s>
<s> Yes.  </s>
<s> Or is there a way to have a working resource connected to the activity and creating the VCR of that file at checkin?  </s>
<s> To keep that resource "hidden", your server would need to support  </s>
<s> either multiple workspaces or version-controlled collections.  </s>
<s> With multiple workspaces, you could create the new resource in a second workspace, and it would be hidden until you MERGE'd into the first workspace.  </s>
<s> With version-controlled collections, you could checkout the collection that is to contain the new  </s>
<s> resource, add the resource to the working collection, and the  </s>
<s> new resource will only be visible when you check in that working collection.  </s>
<s> May I perform a checkout to a not existing VCR (like locking a not existing resource in WebDAV to reserve the name) with apply-to-version and activoity-set to get an working-resource in my activity?  </s>
<s> This is not currently supported (CHECKOUT can only be applied to an existing checked-in resource).  </s>
<s> There was no push to provide this kind of behavior because you can get the same effect through working collections.  </s>
<s> Also, the problems encountered with the whole "lock null resource" concept would probably cause us to shy away from something like this (this is kind of like a "versioning-null resource), unless there were no alternative.  </s>
<s> What happens when I checkin this (creation of VCR, version-history etc.)?  </s>
<s> If it were legal, creating the VCR and version history at checkin time is probably what would happen.  </s>
<s> What happens when I want to revert this (uncheckout? is this defined for working-resources to - I suppose it is) In general, if you want to cancel a checkout that resulted in a working resource, just delete the working resource.  </s>
<s> Cheers, Geoff  </s>
<s> Landscape:  </s>
<s> collections.  </s>
<s> Checkout is done  </s>
<s> O.k. after some more reading and thinkinh I'll take version-controlled collections.  </s>
<s> But there are some questions left: 0. Does a checkout to a version-controlled collection always create a working-collection?  </s>
<s> So there is no checkout-in-place available for version-controlled collections.  </s>
<s> 1. Do I understand it the right way if I assume in order to have a "hidden"  </s>
<s> PUT (adding a new file w/o makinging it visible within the workspace (codeline) containing all the VCR's) I have to perform an explicit checkout  </s>
<s> to the version-controlled collection that's to contain this file.  </s>
<s> After that  </s>
<s> I perform the PUT on the working collection.  </s>
<s> And not before checkin there is  </s>
<s> the newly added file visible in the workspace.  </s>
<s> By the way a new baseline of  </s>
<s> the baseline-controlled workspace is created (because of the change of the  </s>
<s> DAV:checked-in property of the version-controlled collection)?  </s>
<s> 2. Every namespace operation (DELETE, MOVE, COPY) and only they (except for  </s>
<s> MKCOL see 5.) would cause an auto-checkout if auto-version is set to DAV:checkout behavior?  </s>
<s> 3. In case 2. is true: Is there a way to give an activity the created working-collection will be bound to?  </s>
<s> Maybe I just give the DAV:activity-set  </s>
<s> tag in the body?  </s>
<s> 4. A non-version-controlled resource MUST be created within the version-controlled collection itself instead of creating it within the working collection?  </s>
<s> 5. As I come to think of it: MKCOL will not cause an working-collection to be created when performed on a version-controlled collection, will it?  </s>
<s> Because at MKCOL it is not clear wether the created collection will be under  </s>
<s> version-control (if no auto-version-control behavior is implemented).  </s>
<s> Or more precise: MKCOL creates non-version-controlled collections (if no auto-version-control behavior is implemented)?  </s>
<s> 6. What about Request that deal with two version-controlled collections as for example MOVE.  </s>
<s> With an auto-version = DAV:checkout both collections have  </s>
<s> to be checked out, two working collections are created.  </s>
<s> The source  </s>
<s> collection working-collection will get rid of the binding of the moved out  </s>
<s> resource.  </s>
<s> The destination collection working-collection will add a new binding for the moved in resource.  </s>
<s> But now I'm free to check in the source  </s>
<s> collection working-collection, so the binding there is gone with the wind.  </s>
<s> And I delete the destination collection working-collection, so the new binding is not added.  </s>
<s> The result is inconsistent, its a half way done MOVE!  </s>
<s> Is there anything to prevent this?  </s>
<s> So that's all for now, maybe there are some more questions to come later on.  </s>
<s> Regards, Daniel  </s>
<s> snipp  </s>
<s> version-controlled  </s>
<s> No, you can have a checked-out version-controlled collection (i.e., checkout in place).  </s>
<s> "hidden"  </s>
<s> checkout  </s>
<s> that  </s>
<s> there is  </s>
<s> Yes, to keep the new resource hidden from other users of the same workspace, you would have to create a working collection (possibly with the auto-update feature so that it is reflected back in the workspace when the working collection is checked in).  </s>
<s> the  </s>
<s> The new auto baseline would be created when the working collection is checked-in (assuming auto-update).  </s>
<s> As you point out, it occurs when the DAV:checked-in property of any version-controlled resource changes.  </s>
<s> for  </s>
<s> Yes, I was thinking about MERGE too, but that does it's 'own' check-outs so does not rely on auto-versioning behavior.  </s>
<s> DAV:activity-set  </s>
<s> No, it is not defined for those namespace modifying operations to take an DAV:activity-set tag in the body, so you would have to rely upon the DAV:current-activity-set of the workspace to capture them.  </s>
<s> If you want the resource to remain non-version-controlled, then yes.  </s>
<s> It is defined that checking in a working collection applys VERSION-CONTROL to all the versionable resources in the working collection.  </s>
<s> under  </s>
<s> although the new collection will not be version-controlled, the parent of the new collection will have been modified to add the new internal member name, so it much be checked-out (automatically or otherwise).  </s>
<s> Inthis respect, there is no difference between a MKCOL and a PUT, DELETE, etc.  </s>
<s> have  </s>
<s> Since you are applying MOVE to members of two version-controlled collections, then the auto-versioning will checkout the version-controlled collections in-place.  </s>
<s> This would not create any working collections.  </s>
<s> out  </s>
<s> source  </s>
<s> wind.  </s>
<s> MOVE!  </s>
<s> No, if you apply the MOVE to working collections so that they are 'work in progress' there is nothing to prevent clients from checking in one working resource and DELETEing the other.  </s>
<s> Although the MOVE was good, the checked-in results would be inconsistent (either the binding disappears alltogether, or there are now two bindings to the same history depending upon which you checked in and which you deleted).  </s>
<s> on.  </s>
<s> I'll add my usual plug for the DeltaV FAQ.  </s>
<s> It would be good if you could add any "aha!'s" to the FAQ at http://www.webdav.org/deltav/faq  </s>
<s> Regards, Tim  </s>
<s> From: Kirmse, Daniel [mailto:daniel.kirmse@sap.com]  </s>
<s> O.k. after some more reading and thinkinh I'll take version-controlled collections.  </s>
<s> But there are some questions left: 0. Does a checkout to a version-controlled collection always create a working-collection?  </s>
<s> So there is no checkout-in-place available for version-controlled collections.  </s>
<s> A version-controlled collection is just a VCR with some additional rules, so it inherits all the VCR rules.  </s>
<s> In particular, this means that when you apply CHECKOUT to a VCR, it is an in place checkout unless you specify the DAV:apply-to-version parameter.  </s>
<s> 1. Do I understand it the right way if I assume in order to have a "hidden" PUT (adding a new file w/o makinging it visible within the workspace (codeline) containing all the VCR's) I have to perform an explicit checkout to the version-controlled collection that's to contain this file.  </s>
<s> Yes.  </s>
<s> After that I perform the PUT on the working collection.  </s>
<s> Yes.  </s>
<s> And not before checkin there is the newly added file visible in the workspace.  </s>
<s> Yes.  </s>
<s> By the way a new baseline of the baseline-controlled workspace is created (because of the change of the DAV:checked-in property of the version-controlled collection)?  </s>
<s> Yes, if you have DAV:auto-version appropriately set on the DAV:version-controlled-configuration of the workspace (e.g. DAV:checkout-checkin).  </s>
<s> 2. Every namespace operation (DELETE, MOVE, COPY) and only they (except for MKCOL see 5.) would cause an auto-checkout if auto-version is set to DAV:checkout behavior?  </s>
<s> Auto-checkout only occurs for in-place checkouts (there is no way to specify a DAV:apply-to-version flag for an auto-checkout).  </s>
<s> Auto-checkout is primarily for versioning unaware clients, and this means that the result of auto-checkout must be something that makes sense to a versioning unaware client (and leaving the resource unchanged while returning a working collection containing the change is *definitely* not something that would make sense to a versioning unaware client).  </s>
<s> 3. In case 2. is true: Is there a way to give an activity the created working-collection will be bound to?  </s>
<s> Maybe I just give the DAV:activity-set tag in the body?  </s>
<s> This only applies to "in-place" checkouts, but currently the only interoperable way of setting the activity for auto-checkout is through the DAV:current-activity-set of the workspace.  </s>
<s> If your client wants greater control on the activity, it either needs to do explicit CHECKOUT's, or needs to adjust the DAV:activity value once the auto-checkout has occurred.  </s>
<s> 4. A non-version-controlled resource MUST be created within the version-controlled collection itself instead of creating it within the working collection?  </s>
<s> Yes.  </s>
<s> All non-version-controlled members of a working collection are put under version control when that working collection is checked in.  </s>
<s> 5. As I come to think of it: MKCOL will not cause an working-collection to be created when performed on a version-controlled collection, will it?  </s>
<s> Because at MKCOL it is not clear wether the created collection will be under version-control (if no auto-version-control behavior is implemented).  </s>
<s> Or more precise: MKCOL creates non-version-controlled collections (if no auto-version-control behavior is implemented)?  </s>
<s> Correct.  </s>
<s> 6. What about Request that deal with two version-controlled collections as for example MOVE.  </s>
<s> With an auto-version = DAV:checkout both collections have to be checked out, two working collections are created.  </s>
<s> The source collection working-collection will get rid of the binding of the moved out resource.  </s>
<s> The destination collection working-collection will add a new binding for the moved in resource.  </s>
<s> But now I'm free to check in the source collection working-collection, so the binding there is gone with the wind.  </s>
<s> And I delete the destination collection working-collection, so the new binding is not added.  </s>
<s> The result is inconsistent, its a half way done MOVE!  </s>
<s> Is there anything to prevent this?  </s>
<s> Note that auto-versioning does not occur with working resources.  </s>
<s> But your question is still valid, when applied to explicitly created working collections (all working collections must be explicitly created by CHECKOUT).  </s>
<s> A "partial-MOVE" is the same as a DELETE.  </s>
<s> If that what a client tells the server to do, the server must do it.  </s>
<s> Similarly, there is no way for a server to tell when a client issues a DELETE when it meant to issue a MOVE.  </s>
<s> If a client has a bug and sends the wrong requests to the server, there's not much a server can do about it.  </s>
<s> Cheers, Geoff  </s>
<s> I agree with all of Tim's responses in this message except for the following; From: Tim Ellison [mailto:Tim_Ellison@uk.ibm.com]  </s>
<s> although the new collection will not be version-controlled, the parent of the new collection will have been modified to add the new internal member name, so it much be checked-out (automatically or otherwise).  </s>
<s> Inthis respect, there is no difference between a MKCOL and a PUT, DELETE, etc. No, only the addition/removal of a version-controlled internal member requires the version-controlled collection to be checked out.  </s>
<s> In particular, quoting from section 14: "Non-version-controlled bindings are not under version control, and therefore can be added or deleted without checking out the version-controlled collection."  </s>
<s> So you do not need to checkout a version-controlled collection in order to use PUT and MKCOL to create new non-version-controlled resources in that collection, or use DELETE to delete non-version-controlled resources from that collection.  </s>
<s> Cheers, Geoff  </s>

<s> The definition of op:numeric-divide is not specific enough in how integer and decimal operands should be handled.  </s>
<s> Should they be converted to double and a zero divisor be handled by the double division returning + or -INF, or should the divisor be checked for zero before converting to double.  </s>
<s> I suggest we change the details to one of the paragraphs below.  </s>
<s> My, not very strong, preference is the first paragraph.  </s>
<s> For xs:decimal and xs:integer operands, the operands are first converted to xs:double.  </s>
<s> For xs:float and xs:double operands, floating point division is preformed as specified in [IEEE 754-1985] http://lists.w3.org/Archives/Member/w3c-archive/2003Feb/att-0150/xquery -operators.html .  </s>
<s> For xs:decimal and xs:integer operands, the divisor is checked first.  </s>
<s> If it is 0, then an error is raised ("Division by zero").  </s>
<s> The operands are then converted to xs:double.  </s>
<s> For xs:float and xs:double operands, floating point division is preformed as specified in [IEEE 754-1985] http://lists.w3.org/Archives/Member/w3c-archive/2003Feb/att-0150/xquery -operators.html .  </s>
<s> All the best, Ashok  </s>
<s> As someone who has spent time making sure that xs:decimal arithmetic truly handles infinite precision, I am not in favor of xs:decimal magically becoming xs:double.  </s>
<s> If the user wants the speed but less accuracy of xs:double, it's great that the type is available to them from such a rich base set of types.  </s>
<s> -Todd [mailto:public-qt-comments-request@w3.org]  </s>
<s> On Behalf Of Ashok Malhotra The definition of op:numeric-divide is not specific enough in how integer and decimal operands should be handled.  </s>
<s> Should they be converted to double and a zero divisor be handled by the double division returning + or -INF, or should the divisor be checked for zero before converting to double.  </s>
<s> I suggest we change the details to one of the paragraphs below.  </s>
<s> My, not very strong, preference is the first paragraph.  </s>
<s> For xs:decimal and xs:integer operands, the operands are first converted to xs:double.  </s>
<s> For xs:float and xs:double operands, floating point division is preformed as specified in http://lists.w3.org/Archives/Member/w3c-archive/2003Feb/att-0150/xquery -operators.html  </s>
<s> [IEEE 754-1985].  </s>
<s> For xs:decimal and xs:integer operands, the divisor is checked first.  </s>
<s> If it is 0, then an error is raised ("Division by zero").  </s>
<s> The operands are then converted to xs:double.  </s>
<s> For xs:float and xs:double operands, floating point division is preformed as specified in http://lists.w3.org/Archives/Member/w3c-archive/2003Feb/att-0150/xquery -operators.html  </s>
<s> [IEEE 754-1985].  </s>
<s> All the best, Ashok  </s>
<s> The Functions and Operators taskforce discussed this question at yesterday's telcon.  </s>
<s> Their recommendation is as follows: The signature of op:numeric-divide is: op:numeric-divide($operand1 as numeric, $operand2 as numeric) as numeric The general rule for operands to numeric types says... "Operands of type xdt:untypedAtomic are converted to xs:double, ..., If the two operands are not of the same type, subtype substitution and type promotion are used to obtain two operands of the same type."  </s>
<s> Thus, the operands are first converted to a common type.  </s>
<s> If this common type is xs:float or xs:double, floating point division is performed.  </s>
<s> If this common type is xs;decimal or xs:integer the divisor is first checked.  </s>
<s> If it is zero, a "division by zero" error is raised.  </s>
<s> If not, decimal division is performed.  </s>
<s> The taskforce decided that no change was needed but it may be desirable to add an explanatory example to clarify the rules.  </s>
<s> All the best, Ashok From: public-qt-comments-request@w3.org [mailto:public-qt-comments-request@w3.org]  </s>
<s> On Behalf Of Ashok Malhotra The definition of op:numeric-divide is not specific enough in how integer and decimal operands should be handled.  </s>
<s> Should they be converted to double and a zero divisor be handled by the double division returning + or -INF, or should the divisor be checked for zero before converting to double.  </s>
<s> I suggest we change the details to one of the paragraphs below.  </s>
<s> My, not very strong, preference is the first paragraph.  </s>
<s> For xs:decimal and xs:integer operands, the operands are first converted to xs:double.  </s>
<s> For xs:float and xs:double operands, floating point division is preformed as specified in http://lists.w3.org/Archives/Member/w3c-archive/2003Feb/att-0150/xquery -operators.html  </s>
<s> [IEEE 754-1985].  </s>
<s> For xs:decimal and xs:integer operands, the divisor is checked first.  </s>
<s> If it is 0, then an error is raised ("Division by zero").  </s>
<s> The operands are then converted to xs:double.  </s>
<s> For xs:float and xs:double operands, floating point division is preformed as specified in http://lists.w3.org/Archives/Member/w3c-archive/2003Feb/att-0150/xquery -operators.html  </s>
<s> [IEEE 754-1985].  </s>
<s> All the best, Ashok  </s>

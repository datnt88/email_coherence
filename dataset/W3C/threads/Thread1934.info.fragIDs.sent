<s> Problem: When a document is composite (text &amp; images) it is not nice to have to wait for the whole document to load before display, but until the size of the images is known this is tricky.  </s>
<s> Non-Solutions: 1) Opening up multiple TCP/IP sessions.  </s>
<s> This is a kludge.  </s>
<s> Solutions: 1) HTML+ allows the size of an image to be given in the text.  </s>
<s> We could imagine some sort of "intall" utility to set up such info.  </s>
<s> 2) Using MGET we could imagine sending a resume of the images (size etc) before starting the download.  </s>
<s> This could be sent in the message header "image/gif; width=200; height=300; colours=256".  </s>
<s> Again this would require some sort of install perhaps - or the server could be intelligent and "know" about gifs, jpegs etc.  </s>
<s> This is where I think that MGET is not quite enough, we would also need an MHEAD.  </s>
<s> I think that we need to enrich the content types to add in extra information also.  </s>
<s> Phill.  </s>
<s> Very true.  </s>
<s> But it is kinda breathtaking and effective from the *client* end.  </s>
<s> This is exactly one solution being given by the same maker of this browser in their "extensions to HTML" document.  </s>
<s> But I don't like this too much, as I think it crosses the HTML structure-presentation boundary too far and isn't  </s>
<s> trustable (the HTML author or install procedure could be wrong, the image  </s>
<s> size could change over time, etc.)  </s>
<s> I like this idea much more.  </s>
<s> I think the server could be configured to recognize image files and return coordinates like width, height, and color pretty easily - and it could cache that information for popular images.  </s>
<s> Brian  </s>
<s> A general problem that I see in the proposals until now is that we have no guarantee that the images are in fact on the same server as the main document.  </s>
<s> Often this is _not_ the case and then it doesn't help to keep the connection open nor is it easy for the server to get the size of the image.  </s>
<s> I think a general solution must be based on at least two connections.  </s>
<s> First the main document gets retrived.  </s>
<s> If the client is text-based then fine - no more connections are made.  </s>
<s> If not then the client can sort the requests for inline images and make simultaneously (multi-threaded) connenctions to the servers involved.  </s>
<s> These can then be multipart, MGET or whatever solution we come up with.  </s>
<s> This might not seem very elegant but I think it is necessary in order to keep the flexibility and backward compatibility which in my opinion is required.  </s>
<s> Another solution could be that the client has a special header-line saying: keep the connection open - I will tell yon when to close but then I think it's another protocol than the HTTP we are heading for.  </s>
<s> -- cheers -- Henrik Frystyk  </s>
<s> The following assumes that the client gets the html document and then sends the server a list of images to send next, reusing the same connection.  </s>
<s> I like the idea of being able to get the image sizes in advance of the data, but would also like to be able to interleave the image data streams.  </s>
<s> This way users see all of the images start to appear concurrently, rather than one by one.  </s>
<s> One simple idea is to use the segmented encoding approach and include the stream number with the segment length.  </s>
<s> The initial info on image size/type would specify the stream number for each image.  </s>
<s> If this sounds too difficult, then at least the server could sort the images by size and send the small ones first.  </s>
<s> The following assumes that the client gets the html document and then sends the server a list of images to send next, reusing the same connection.  </s>
<s> I like the idea of being able to get the image sizes in advance of  </s>
<s> the data, but would also like to be able to interleave the image data streams.  </s>
<s> This way users see all of the images start to appear concurrently, rather than one by one.  </s>
<s> One simple idea is to use the segmented encoding approach and include the stream number with the segment length.  </s>
<s> The initial info on image size/type would specify the stream number for each image.  </s>
<s> If this sounds too difficult, then at least the server could sort the images by size and send the small ones first.  </s>
<s> Dave Raggett  </s>
<s> Both excellent suggestions.  </s>
<s> I think the latter will result in better performance on average or lower-end machines.  </s>
<s> Brian  </s>
<s> Actually, I'd dispute this.  </s>
<s> I bet we could get one of our web-crawler authors to add to his crawling algorithm a measure of the ratio of inlined-images-on-same-site to inlined-images-off-site, and that it would probably be something on the order of 20-1, if not 100-1.  </s>
<s> We can't guarantee it, and we certainly shouldn't set up a protocol that would make inlining off-site images difficult or impossible, but forgoing optimizations because of it is a bad choice, I think.  </s>
<s> Right, this would be great, and I don't see how it contradicts other proposals made here, it's just another parallel action.  </s>
<s> Brian  </s>

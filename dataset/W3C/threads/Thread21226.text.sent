We have several times found that Amaya strips the charset declaration, ie. in our case, from an XHTML file during either editing or saving. 
This is bad enough normally, but we are posting files now without the XML declaration to ensure that IE works in standards mode. 
That leaves the file without any internal encoding information. 
Please rectify this as soon as possible. 
Also, please check whether Amaya takes any other such decisions on behalf of the user. 
In my opinion the default should be to leave the file untouched. 
If any cleaning is done it should be an option and the user should be asked whether it is appropriate. 
Thankyou, RI Richard Ishida W3C See the W3C Internationalization FAQ page On Fri, 15 Aug 2003 18:24:04 +0100 date: 2002/06/27 Amaya no longer generates a meta http-equiv ...  element when it saves a XHTML document (and removes this element if it exists) to avoid conflicts between the charset in the XML declaration and the meta charset. 
When you request to save the document in HTML (See Save As), Amaya adds the meta. 
So the charset is either defined by the XML declaration or the meta element. 
Irene. 
Ir?ne Vatton INRIA Rh?ne-Alpes INRIA ZIRST e-mail: Irene.Vatton@inria.fr 655 avenue de l'Europe Irene, Thanks for this explanation, but it still doesn't allow me to save XHTML Transitional pages in a way that will allow standards-mode on IE. 
This means that I cannot use Amaya for any of the web pages I currently develop. 
(I imagine that would apply to a lot of other people too.) If there happens to be a conflict between the xml declaration and the charset declaration, I would like Amaya to inform me when I save, and offer me the chance to change it, rather than take (in this case incorrect) decisions on my behalf. 
RI Richard Ishida W3C See the W3C Internationalization FAQ page On Mon, 18 Aug 2003 13:48:02 +0100 Okay I restore the old code and now the CVS version of Amaya generates the meta element with an http-equiv for each saved XHTML document. 
Irene. 
Ir?ne Vatton INRIA Rh?ne-Alpes INRIA ZIRST e-mail: Irene.Vatton@inria.fr 655 avenue de l'Europe Thanks Irene, Does it autogenerate an xml declaration too? 
RI Richard Ishida W3C contact info: http://www.w3.org/People/Ishida/ See the W3C Internationalization FAQ page me when I save, and offer me the chance to change it, On Tue, 19 Aug 2003 15:12:16 +0100 Yes of course. 
Irene. 
Ir?ne Vatton INRIA Rh?ne-Alpes INRIA ZIRST e-mail: Irene.Vatton@inria.fr 655 avenue de l'Europe Then I'm unfortunately going to have a problem again if I edit and save my docs with Amaya. 
I put together an example. 
See the enclosed xhtml file (without xml declaration). 
The graphic withoutXMLDecl.gif shows how this will look in IE6 and, for example, Amaya, Netscape 7.1, Mozilla 1.3 and Opera 7. If I edited this slightly with Amaya and it added an XML declaration, it would continue to look the same for all browsers, except IE 6 - the graphic withXMLDecl.gif shows how it now looks in IE. 
I am now authoring new pages in Standards Mode. 
With the XML declaration, IE is now in Quirks mode because the DOCTYPE wasn't the first thing in the file. 
If this were some small new browser I wouldn't care, but since IE has such a huge market share, this is going to affect (and break) the look of my page for the majority of my readers. 
That's why I don't want Amaya to add the declaration without my permission. 
RI Richard Ishida W3C contact info: http://www.w3.org/People/Ishida/ See the W3C Internationalization FAQ page Hello Richard, Irene, I think it is okay to leave out the xml declaration if the file is UTF-8 (as I think we have done for some time (but not currently) on the W3C homepage) is okay. 
The same applies for UTF-16 (with a proper BOM). 
However, I think it is a bad idea to not use an XML declaration for files in other encodings. 
As I think you are working mostly in UTF-8, I hope this should be okay. 
Regards, Martin. 
On Wed, 20 Aug 2003 13:26:01 +0100 If I understand, your suggestion is to remove the xml declaration and to add a doctype + meta element. 
This is an HTML document, isn't it? 
As I explained before, Amaya is able to generate and edit HTML documents. 
In your case I suggest you generate HTML documents instead of XHTML documents (we can also add the HTML option in the New menu). 
The xml declaration is there not only to define the charset. 
It also allows browsers able to read xml documents to use an xml parser instead of an html parser and so to check that the document is well formed. 
What HTML guys think about that? 
Irene. 
Ir?ne Vatton INRIA Rh?ne-Alpes INRIA ZIRST e-mail: Irene.Vatton@inria.fr 655 avenue de l'Europe 

TO:w3c-wai-ig@w3.org Hi, I have a question - and I apologise if the answer is obvious, but I was never a programmer so I don't know. 
From what I understand (please correct me if I'm wrong) the DTD and HTML 
Lang attribute?are 
used by browsers/ATs to determine the code and language used in order to best represent a site.? 
My question is this: 
Can these browsers/ATs still read (and interpret) the DTD and HTML Lang attribute if it is not at the very beginning of the document? 
for 
example: META HTTP-EQUIV="Content-Type" CONTENT="text/html; 
!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" 
title Amputations /title meta http-equiv="content-Type" This is a Lotus Notes problem - this Content Management System automatically generates HTML code from a word processing type environment.? The first five lines are automatically generated by Notes 
and cannot be tinkered with in any way (and if they can I would be more than happy to admit my error and learn how!) 
Cheers, Gian Gian Sampson-Wild Accessibility Specialist Member: Web Content Accessibility Group Working Group W3C Web Accessibility Initiative Stanley &amp; Milford A Software Communication Group Company Level 16 644 Chapel Street South Yarra VIC 3141 Australia Mob. 0404 498 030 Email gian@stanleymilford.com.au 
Web: www.stanleymilford.com.au 
This message contains privileged and confidential information intended 
only for the use of the addressee named above. 
If you are not the intended recipient of this message you must not disseminate, copy or take any action in reliance on it. 
If you have received this message in error, please notify Software Communication Group immediately. 
Any views expressed in this message are those of the individual sender except where the sender specifically states them to be the views of Software Communication Group. 
DOCTYPE is used by validators to enable them to check the syntax. 
In principle it could be used by a pure CSS browser to tell it something about HTML - you would need a full style sheet as well. 
It is used by some recent browsers to indicate that the author probably really wrote in HTML, rather than a random sequence of tags, and therefore wants HTML obeyed properly, rather than heuristics to make it behave more like broken earlier browsers. 
This is typically triggered by a Strict variant of the DTD. 
LANG is used to set the default natural language for the document, and in theory is used to select layout rules appropriate for the language (e.g. there are no word spaces in Chinese). 
It can be used by style sheets to implement some of this. 
Some search engines will use it to allow search by language. 
Only if they provide appropriate error recovery - however, in principle, the nature of that error recovery depends on the document type, so not starting with the DOCTYPE is likely to force legacy broken HTML mode and cause the subsequent DOCTYPE to be ignored. 
There are some artefacts in the following due to not decoding the quotable printed encoding, but the actually demonstrate some points. 
META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; 
No content is allowed here, so the non break space is invalid. 
Too late. 
title Amputations /title meta http-equiv=3D"content-Type" 
I doubt that any browser will find this, even if it does very crude parsing. 
This document is restricted to ASCII, although you can use entities, as the browser will have selected the character set on the first one (chances are it doesn't enforce the restriction). 
It is always going to generate technically invalid documents, but you can avoid compounding the issue by not including DOCTYPE, a HEAD element, or BODY tag. 
You ought to be able to specify LANG on the outermost elements in the BODY, but you will have to do it for each one, and not have any text not in a block element - I'm not sure what rules search engines use, but I doubt they look for LANG in depth. 
You will need to ensure that you use entities for any non-ASCII characters and should not assume anything beyond HTML 4.01 Transitional (technically the last version of HTML that allowed DOCTYPE to be left out was HTML 2.0, but that's not a problem with real browsers). 
Bogus confidentiality notice deleted. 
Content-Type: application/rtf 
Redundant, proprietory, huge (25K), word processor format deleted. 
From what I understand the parser in the browser will look for the DTD on the first line, or the first entry. 
If it does not find it there it will probably ignore all efforts to find a DTD and will not render it according to any DTD (just mongrel HTML). 
But run it past the W3C validator and see if it finds the declaration. 
This is how most browsers have been working until now, they do not try to render to a DTD because there is so much undeclared and broken HTML out there they have to spend all their time trying to make sense of the HTML soup. 
This is infact great programming, and we should appreciate the effort that the programmers actually put in to try to make sense out of all the different forms of HTML out there, and not have so many broken pages. 
Most of the pre V6 browsers ignored rendering content to a declared DTD. 
This is not the case with the recent browsers; MSIE6, Mozilla , Netscape 7 and Opera 6 (and probably earlier versions of Opera). 
All of them look for the DTD and do their best to render the document according to that DTD. 
This should aid the browser in rendering valid correctly declared HTML much faster and more accurately. 
!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" 
You might not be able to fix this in the Notes or the CMS, but if the organisation you are working with has a good web programmer it is not too difficult to get them to write scripts to parse the whole site and fix this. 
It's not so hard, easy for a decent programmer. 
Once they have done that, if you can point out to them what needs to be changed they could do it, as long as this anomaly has a consistency about it that can easily be identified and corrected. 
Well, you would also have to get the programmer to strip this out of HEAD. 
!--alang="en" TIDY now comes in many forms, C, Perl, Java, Python, on all platforms, so a good programmer should be able to use this library to reformat the generated templates as close to valid as possible. 
I'm afraid Notes is an accessibility hell, but there are probably others on this list who have found ways to work with it. 
Have fun Geoff Of gian@stanleymilford.com.au 
Hi, I have a question - and I apologise if the answer is obvious, but I was never a programmer so I don't know. 
From what I understand (please correct me if I'm wrong) the DTD and HTML Lang attribute are used by browsers/ATs to determine the code and language used in order to best represent a site. 
My question is this: Can these browsers/ATs still read (and interpret) the DTD and HTML Lang attribute if it is not at the very beginning of the document? 
for example: META HTTP-EQUIV="Content-Type" CONTENT="text/html; !DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" title Amputations /title meta http-equiv="content-Type" This is a Lotus Notes problem - this Content Management System automatically generates HTML code from a word processing type environment. 
The first five lines are automatically generated by Notes and cannot be tinkered with in any way (and if they can I would be more than happy to admit my error and learn how!) Cheers, Gian Gian Sampson-Wild Accessibility Specialist 

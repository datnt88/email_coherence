<s> If my proxy, while processing a chunked response, exceeds the amount of data I am willing to buffer, does anything break by me throwing away the contents of the trailer?  </s>
<s> I think, from previous discussion, that the answer should be "no", but I am concerned about the effects of discarding "Authentication-Info" and "Content-MD5".  </s>
<s> Thank You,  </s>
<s> Richard L. Gray will code for chocolate  </s>
<s> Since the spec does not appear to anywhere specify that clients MUST honour header fields found in chunked trailers, nor that proxies MUST NOT remove and discard header fields found in chunked trailers, I think that it would be a bad idea for a server to place, in a chunked trailer, a header field that it did not want to risk loss of.  </s>
<s> Your premise is wrong.  </s>
<s> Section 13.5.1  </s>
<s> (End-to-end and Hop-by-hop Headers) defines: End-to-end headers, which must be transmitted to the ultimate recipient of a request or response.  </s>
<s> (that "must" should be a MUST; see issue-list MMS_AUDIT_ITEM_110). and says: All other headers defined by HTTP/1.1 are end-to-end headers.  </s>
<s> after a short list of specifically hop-by-hop headers.  </s>
<s> Thus, proxies MUST forward all but a specific and small set of headers.  </s>
<s> There is no exception here for header fields carried in the trailer of a chunked encoding; this encoding is hop-by-hop and so one clearly can't use it as an excuse to delete a header that would otherwise have to be sent end-to-end.  </s>
<s> -Jeff  </s>
<s> Then, I am forced to wonder why it is allowed to occur in the Trailer.  </s>
<s> Since the spec does not appear to anywhere specify that clients MUST honour header fields found in chunked trailers, nor that proxies MUST NOT remove and discard header fields found in chunked trailers, I think that it would be a bad idea for a server to place, in a chunked trailer, a header field that it did not want to risk loss of.  </s>
<s> Richard L. Gray will code for chocolate lawrence@agranat.com on 07-21-98 04:04:53 PM Please respond to lawrence@agranat.com  </s>
<s> Subject: Re: chunking and trailers  </s>
<s> Throwing away Authentication-Info would certainly break Digest Authentication.  </s>
<s> Scott Lawrence Consulting Engineer lawrence@agranat.com  </s>
<s> Agranat Systems, Inc. Embedded Web Technology http://www.agranat.com/  </s>
<s> I believe you violate the protocol if you delete header values which aren't explictly described as removed by a proxy.  </s>
<s> Whether the value is provided in the headers or the trailer.  </s>
<s> You have the option removing chunking and promoting the trailer values to the 'real' header.  </s>
<s> In a normal situation, the trailers should be relatively small so if your proxy can't tolerate the additional data, then it suggests to me that some form of denial of service attack is underway and the proxy should just discard the whole response.  </s>
<s> Dave Morris  </s>

<s> Section 3.7.1.3 "Content" of the new XQuery draft does not say what happens to namespace nodes in the content of a direct element constructor.  </s>
<s> There are two choices: (1) They are allowed, and treated as in the context expression of a Computed Element Constructor.  </s>
<s> I.e. they must precede attributes which must precede other content.  </s>
<s> (2) They are not allowed, in which case the specification should say that, as it does for document nodes.  </s>
<s> I think (1) is more consistent.  </s>
<s> Otherwise, why can the content of a direct element constructor allow attributes but not namespaces, while the content of a computed constructor allows both?  </s>
<s> An alternative is to dis-allow *both* attributes and namespace nodes in direct element constructors, since you can create attributes using both literal attributes as well as attribute nodes in enclosed content, and that's arguably a bit of a weird hack.  </s>
<s> Since we have computed element constructors, we don't need this special handling.  </s>
<s> --Per Bothner per@bothner.com  </s>
<s> http://per.bothner.com/  </s>
<s> XQuery does not provide the namespace axis, and does not provide any other construct that allows you to get your hands on a namespace node.  </s>
<s> Therefore, the sequence that provides the content for a new element can never contain namespace nodes, except in the very limited and controlled way allowed by computed namespace constructors.  </s>
<s> Michael Kay  </s>
<s> That wasn't the issue I've asked about.  </s>
<s> I was asking why not allow: let $n := namespace metric {"http://example.org/metric-system"}  </s>
<s> altitude { $ns, attribute {"metric:unit"} {"meter}, 10000 } /altitude However, I now see the following sentence which I overlooked before: The immediately enclosing expression of the computed namespace constructor must be a computed element constructor; otherwise a static error is raised.  </s>
<s> I missed this, as I would have expected this constraint to be expressed in the grammar.  </s>
<s> That could express it clearer, and also add the cnstraint that the namespace nodes must come first: CompElemConstructor ::= (("element" QName "{") | ("element" "{" Expr "}" "{")) ((CompNSConstructor ("," CompNSConstructor)* | ExprSingle) (", " ExprSingle)*)?  </s>
<s> "}" --Per Bothner per@bothner.com  </s>
<s> http://per.bothner.com/  </s>

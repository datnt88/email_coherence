<s> Hi John, hi Joseph,  </s>
<s> I implemented exclusive c14n for the Apache package.  </s>
<s> On my implementation, exclusive c14n is SLOWER than inclusive c14n: Factor between 1.3 and 1.6  </s>
<s> I can verify the signature from merlin-iaikTests-two.tar.gz but one reference (the first one fails).  </s>
<s> This means that I can do reference validation on all things which use exclusive c14n.  </s>
<s> The first reference uses conventional (inclusive) c14n.  </s>
<s> I re-created the same signature Merlin did on the four IAIK files.  </s>
<s> This signature is attached.  </s>
<s> HMAC, secret key is the six octets from "secret".  </s>
<s> Regards, Christian  </s>
<s> Do you have a sense of why?  </s>
<s> In some cases I expect some variances, but this is rather surprising.  </s>
<s> The intent was to simplify a number of things c14n processing required such as (1) checking to see if the parent element is in the subset on that xml:foo issue we've been discussing and (2) if you have a subset in a small document, you don't have to walk up the tree to find ancestor xml:foo attributes.  </s>
<s> Well, the main difference between inclusive and exclusive c14n is that in inclusive c14n, I can simply output the changes to the inscope namespace decls.  </s>
<s> In exclusive c14n, I also have to check whether a namespace is visibly utilized.  </s>
<s> That's the additional overhead.  </s>
<s> But I have to reduce this 1.3-1.6 to a lower level of 1.1-1.2.  </s>
<s> Regards, Christian  </s>
<s> Yes, so that should mean for every element one tests to see if the node.prefix or any of the attributes prefixes are the same as the namespace prefix avaible in its axis.  </s>
<s> I haven't dug deeply but in the small tests I can do, this is a neglible difference in performance (and for other reasons, exc-c14n tends to be slight faster as the size of the document grows.)  </s>
<s> However, I'll also say I'm not expert at this...  </s>

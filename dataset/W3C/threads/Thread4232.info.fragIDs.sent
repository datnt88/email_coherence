<s> How can I effectively process data with result that consist of two outputs (first is a main result, and second is a log).  </s>
<s> In order to achieve required results I have to perform either: a) two time processing: first in order to get main result and another to get log; or b) create temporary tree with both main result and log, and then create two result xml(s) by filtering data in that temporary tree.  </s>
<s> From my user's perspective it would be useful to have a stack of active  </s>
<s> named (or indexed) output trees and ability to dynamically switch between them.  </s>
<s> The following example demonstrates such a hypothetical feature: Generate here main result Put here log data Generate here main result again !--  </s>
<s> Here we have result in $result and log in the $log -- or Generate here main result Put here log data Generate here main result again !-- here we have result in the principal-result-document and log in the secondary result-document.  </s>
<s> --  </s>
<s> In these examples tree-name attribute defines a name of tree (temporary  </s>
<s> tree or result tree) and xsl:output-tree element defines what destination to use for output.  </s>
<s> Nesterovsky Vladimir vladimir@nesterovsky-bros.com  </s>
<s> I think the problem of producing two separate result documents is exactly the same as producing a single document that contains the "main result" and the "log" as separate sub-elements.  </s>
<s> We don't allow "interleaved" writing in either case, and I don't think the two cases are essentially different.  </s>
<s> In both cases the stylesheet must be written to produce one output first, then the other.  </s>
<s> I recognize there are use cases where this can cause difficulty.  </s>
<s> Your particular use case, of producing a log, is covered I think by xsl:message .  </s>
<s> Whether xsl:message meets the requirement depends rather on the implementation.  </s>
<s> I know that some implementors provide very little control over the destination of messages, and some discard the message entirely, but this is a matter for implementors, not for the specification itself.  </s>
<s> Any attempt to offer interleaved writing - including the xsl:message capability - suffers from the fact that the sequence of nodes in the result  </s>
<s> tree will depend on the order of execution of instructions in the stylesheet.  </s>
<s> For example, if xsl:message is included inside xsl:variable, then the number of messages output and their relative order depends on the order in which variables are evaluated, and on whether their values are held  </s>
<s> in memory or re-evaluated on demand.  </s>
<s> Michael Kay  </s>
<s> From my user's perspective it would be useful to have a  </s>
<s> In my case log tree after the further processing is appending to a main result.  </s>
<s> result  </s>
<s> held  </s>
<s> I suppose a small set of rules could be tailored in order to guaranty consistent order of output operations.  </s>
<s> For example something like this: a) all xsl:output-tree (hypothetical element) elements are executing in the order of appearance; b) if variable contains such element then after variable declaration it should be evaluated one time with option to execute xsl:output-tree elements in content of variable declaration, in other cases (if any) xsl:output-tree in the content of variable is not evaluated.  </s>
<s> In general these rules do not impose any restrictions on the order of content execution if it does not contain any xsl:output-tree element and just force variable evaluation when it contains xsl:output-tree element.  </s>
<s> Nesterovsky Vladimir vladimir@nesterovsky-bros.com  </s>

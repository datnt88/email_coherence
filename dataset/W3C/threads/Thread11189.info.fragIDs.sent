<s> Hmm, seems I was right - we do *not* have a consensus on this one.  </s>
<s> I think this is inevitable.  </s>
<s> There is no consensus on how PUBLIC should be interpreted.  </s>
<s> Different peole want it as a hook for different things.  </s>
<s> It's a recipe for disaster.  </s>
<s> If we open the can of PUBLIC worms, we have to say: * what to do if you are givena PUBLIC Id and no SYSTEM Id  </s>
<s> * what to do if you are given both  </s>
<s> * what to do if you are given both and the resulting files are different  </s>
<s> * give at least one way in which I can put an XML file on the web and someone else 6 months in the future with some new application can use that file, whether or not it has a PUBLIC Identifier.  </s>
<s> Otherwise... Some people will implement systms that ignore the PUBLIC ID, as  </s>
<s> David Durand and Paul Prescod suggest, and always require a SYSTEM Id.  </s>
<s> Some people will implement systems in which the SYSTEM Id is ignored,  </s>
<s> as Paul Grosso suggests, when both are given.  </s>
<s> Some people will implement systems in which the SYSTEM ID is used for some things and the PUBLIC for others, as per Panorama today.  </s>
<s> Some people will implement systems that require end users to edit local configuration files before they can use documents containing PUBLIC Ids, as per Author/Editor today.  </s>
<s> No document will work on all systems.  </s>
<s> If we give a set of rules for which to prefer, as I have several times said, we will end up with interoperability, and you will then be safe to use XML in systems where you have no control over the recipient, rather like HTML today.  </s>
<s> If we don't have PUBLIC at all, this problem goes away.  </s>
<s> I would rather wait six to twelve months before adding PUBLIC.  </s>
<s> Lee  </s>
<s> Net the fact that the XML catalog proposal left practically everything optional/recommended--we could make things required, but the subcommittee got the sense that the ERB and WG didn't want to set any hard requirements in this area--I thought the XML catalog proposal did answer the first three questions above (and your fourth question isn't a question to be answered by a catalog proposal--it's not even clear it's a real question at all).  </s>
<s> Given the application has decided to use the XML catalog in the external identifier resolution process, the proposal gives (or meant to give) the following answers:  </s>
<s> * what to do if you are given a PUBLIC Id and no SYSTEM Id  </s>
<s> Use the PUBLIC id--what wlse would you expect?  </s>
<s> Use the PUBLIC id. (If that fails, the proposal doesn't forbid trying the system id--the proposal doesn't discuss fallback/recovery mechanisms.) If the proposal fails to make this clear, we can reword it.  </s>
<s> If the ERB decides to prefer system ids, we can change this decision easily without affecting any of the rest of the catalog proposal, but there are many good arguments for preferring public ids, and the subcommittee decided to write the proposal so as to prefer public ids.  </s>
<s> Why are you asking this question?  </s>
<s> How did you discover the "resulting files" are different?  </s>
<s> You must have retrieved both--why?  </s>
<s> Though nothing prevents an application from retrieving both (perhaps some "external id consistency checking application might want to do this), this is a red herring as far as resolution is concerned.  </s>
<s> Once you've successfully retrieved something, you've resolved it--end of resolution.  </s>
<s> So the answer is the same as the answer to the second question.  </s>
<s> I'll let Durand and Prescod speak for themselves, though given that both of them as well as myself were on the subcommittee that produced the proposal, it seems a simplification at best to make the above characterizations of our positions.  </s>
<s> I can say that your characterization of my position is inaccurate.  </s>
<s> For external identifiers in which both a PUBLIC and SYSTEM id are given, I suggest that the application first attempt to resolve the PUBLIC id.  </s>
<s> In the event that this resolution fails, I would want the SYSTEM id to be tried, though the XML catalog proposal does not require this behavior.  </s>
<s> We could explicitly recommend this behavior in the proposal if we wish.  </s>
<s> paul  </s>
<s> No it's not, it's quite clear-cut:  </s>
<s> 1. Resolve it, either algorithmically or using a catalog.  </s>
<s> If that doesn't work then you do indeed have a problem, and the browser can't be blamed for the deficiencies of the author in failing to provide the right info.  </s>
<s> 2. Browser-configurable preference.  </s>
<s> 3. Never occurs: you use the one you get first from (2) above.  </s>
<s> If you've resolved one successfully, why on earth would you want to fetch the other one?  </s>
<s> That doesn't make sense: the question is surely, how can someone use that file whether or not it has _some kind of identifier_, sys or pub?  </s>
<s> If you provide no identifier, then the instance has to be well-formed only, and the question falls.  </s>
<s> It strikes me that the authors of such systems need some serious help.  </s>
<s> Perhaps (as often looks all too frighteningly obvious) they've never actually had to _use_ their software to do a job of work.  </s>
<s> I'm delighted to see that at long last this problem is being taken seriously.  </s>
<s> We may have to agree to disagree on this, but I'm willing to be persuaded.  </s>
<s> The problem is that the PUBLIC identifier is the "real" (ie formal) name of my DTD.  </s>
<s> I don't care what filename you give your locally-cached copy, or what filename someone calls their version available via a URL.  </s>
<s> What is crucial is that if I identify my document as being "-//Davenport//DTD DocBook V3.0//EN" then that is what it is, nothing more and nothing less.  </s>
<s> Trying to fudge the issue of public DTDs without PUBLIC identifiers, trying to rely on someone's localised concept of what they might want to call the DTD file on the third Tuesday after the full moon, is a guaranteed recipe for disaster.  </s>
<s> Where private DTDs are concerned, by all means stick with SYSTEM ids.  </s>
<s> I just cannot believe that people seriously mean that a browser is capable of doing the right thing when given !doctype html system "html.dtd"  </s>
<s> when there must be 100 or more DTDs all claiming to be that.  </s>
<s> Where we agree 100% is that we need a set of rules, and they're nearly all binary choices, so it's just a large nest if if-then-elses.  </s>
<s> ///Peter  </s>
<s> sorry for misunderstanding -- the clarification is helpful.  </s>
<s> If we require this behaviour, it is nonsensical unless we specify exactly how that resolution is to happen -- you can't require an unspecified action!  </s>
<s> (e.g. how are you going to test conformance?)  </s>
<s> So I strongly agree with Michael on that one.  </s>
<s> And to do that, we have to supply a mechanism by which CATALOG can be fetched when XML is used over the Web.  </s>
<s> The same mechanism should work when a local XML file is used (as is true for Panorama) so you don't have to edit system ids or catalog files.  </s>
<s> Any proposal (e.g. as per Ken's mail) that involves users editing CATALOG files is assuming SGML levels of sophistication in users.  </s>
<s> I know that Panorama users don't download catalog files and edit them when there are problems -- or most don't.  </s>
<s> I don't suppose XML users will, and XML is supposed to be easier than SGML.  </s>
<s> So I think "We could explicitly recommend this behavior  </s>
<s> in the proposal if we wish" is like saying "we could explicitly recommend  </s>
<s> that  and  be used around element names in tags, but if you prefer you can use some other method, whith no way to signal this in the file, and by prior arrangement with the recipient arrasnge for interoperability".  </s>
<s> I.e. it won't work. Lee  </s>
<s> If this happens, it means that the document's author has assumed that the recipient already knows how to resolve the PUBLIC id.  </s>
<s> So the recipient's software should try to resolve it.  </s>
<s> If the PUBLIC id can't be resolved, then the document's author's assumption was incorrect.  </s>
<s> We don't need to specify error recovery in this case.  </s>
<s> Try to resolve either one.  </s>
<s> If that fails, try the other.  </s>
<s> It doesn't matter which one you try first.  </s>
<s> (If the software does not know how to automatically resolve PUBLIC ID's -- which I suspect most software will not, since _nobody_ is sure how to do this yet -- then naturally it should try the SYSTEM ID first.  </s>
<s> Is there a need to put  </s>
<s> this in the spec though?  </s>
<s> It seems like common sense to me.)  </s>
<s> This means that somebody somewhere has made a mistake.  </s>
<s> We don't need to specify error recovery in this case.  </s>
<s> How is using the file six months in the future any different from using the file right away?  </s>
<s> I don't understand the question.  </s>
<s> Fine.  </s>
<s> I expect that PUBLIC IDs will be used more for identification ("the official name of this resource is...") than for resolution anyway.  </s>
<s> Such systems will naturally have to be very good at automatically resolving PUBLIC IDs, which will be tricky, since nobody knows how to do this at all yet.  </s>
<s> I don't see how this conclusion follows from the premises.  </s>
<s> If the author provides both PUBLIC and SYSTEM id's, the document should work on any system, regardless of which of either or both the system in question uses.  </s>
<s> --Joe English jenglish@crl.com  </s>
<s> I'm not sure how the latter follows from the former.  </s>
<s> If software does not know how to look up the public identifier, it should use the system ID first and last.  </s>
<s> There is nothing to specify.  </s>
<s> But if software knows about both, I would urge that the public identifier should be tried first.  </s>
<s> a) It will probably be faster (since it will be a catalog lookup more often than a network transaction using a still-under-development URN protocol).  </s>
<s> b) It provides opportunity for client-side overriding.  </s>
<s> c) It could allow "smarter" caching (e.g. Document 1 says it needs same public identifier.  </s>
<s> The browser should know its already got the right document).  </s>
<s> Paul Prescod  </s>

If I follow production 33 in WD-xml-961114 by the word then I am allowed to use PEReference only at the top-level of internal-subset. 
Do we want this ? 
And if not, do we put certain restrictions on it ? 
Best regards, Norbert H. Mikula = SGML, DSSSL, Intra- &amp; Internet, AI, Java = mailto:nmikula@edu.uni-klu.ac.at = http://www.edu.uni-klu.ac.at/~nmikula 
On Mon, 24 Feb 1997 11:56:56 -0500 Norbert H. MIKULA said: 
If this is a correct reading of the grammar, then the document is wrong. 
There was no decision to restrict parameter entities to a single level of expansion, and the motivation for having p.e.s at all was to allow the use of current DTD construction methods. 
To be honest though I don't think this is a correct reading of production 33. 
There should probably be prose saying that PE references in the internal and external subsets are invisible to the grammar (in the sense that the replacement text has to fit where the reference goes, i.e. that you stay in the internal 
subset rule), except that references can only occur where the grammar say they can. 
(Except that that is also false; the grammar makes no pretense of saying where PE refs can occur within declarations. 
Perhaps it's the limitations of my technical training, but I have not found a clean way to describe the PE rules formally, and not much of a clean way to describe them informally, either. 
Any help from the assembled wise ones would be very useful. 
Thank you for calling attention to this problem. 
-CMSMcQ 
You were talking about prose in the standard. 
I am not too much of a person that is crazy about formal languages. 
However, IMHO the less prose in the XML standard the better. 
(But I think everybody will agree on this.....or not?) I do believe the less prose, the more implementors we will get. 
I have started to implement an SGML parser when I knew about SGML that it is something like Standard or was it Structured GML.... :-) Putting down the productions of the SGML handbook was pretty much straightforward, but then .... During the implementation of XML I tried to implement it the way it is prescribed in the standard literally (like a person without any SGML knowledge would do....) After all, one day we have to face the WWW crowd and guess how eager the will be to read through lots of potentially ambigous prose. 
When I tested XML first time against the XML test-instances I had to change the grammar lot. 
(Especiall many S were missing the current draft. 
Maybe, one day, I will have the time to put down all the *mistakes* I enountered) Finally, if you think that my interpretation of production 33 in the current draft is wrong ,or at least not correct :-), then I just would like to know how one can deduce that (%par;) works in XML. 
PS: Just playing devils advocate...... Best regards, Norbert H. Mikula = SGML, DSSSL, Intra- &amp; Internet, AI, Java = mailto:nmikula@edu.uni-klu.ac.at = http://www.edu.uni-klu.ac.at/~nmikula 
I took the sense of 4.3(6) to mean that PEs were treated in the same way as other entities, though I agree that strictly 4.3 does not relate to PEs. 
The effect is important, of course. 
For example, I have included HTML2.0 in my DTDs by something like: %html20; Unless the PEs in HTML2.0 are processed, the construct fails. 
IMO developing parsers and real examples are the best way to discover these problems and I am very grateful to Norbert for his effort. 
Peter Murray-Rust, domestic net connection Virtual School of Molecular Sciences 

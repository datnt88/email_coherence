<s> Efficiency brings in all sorts of tradeoffs.  </s>
<s> One can make a protocol use a few fewer bytes on the wire by using a binary encoding, but this has the expense of requiring significant additional programmer time to develop debugging and testing suites since "telnet" doesn't work any more.  </s>
<s> I know that you can use TELNET to test a server by simulating a client, by a human typing or pasting the client parts of a textual protocol.  </s>
<s> But how can you use TELNET to test a client by simulating a server?  </s>
<s> This would certainly be very useful, and perhaps this is common knowledge which I have not acquired?  </s>
<s> Jacob Palme jpalme@dsv.su.se (Stockholm University and KTH) for more info see URL: http://www.dsv.su.se/~jpalme  </s>
<s> Efficiency brings in all sorts of tradeoffs.  </s>
<s> One can make a protocol use a few fewer bytes on the wire by using a binary encoding, but this has the expense of requiring significant additional programmer time to develop debugging and testing suites since "telnet" doesn't work any more.  </s>
<s> You have to use some glueware.  </s>
<s> In particular, a program that would do the trick would monitor two ports and forwards packets between the two.  </s>
<s> I've never seen such a program, but it should be possible to write it very quickly in perl or most other languages.  </s>
<s> Tony Hansen tony@att.com  </s>
<s> # pseudo code follows.  </s>
<s> anyone care to finish it?  </s>
<s> $port_telnet = $ARGV[1];# telnet to this port $port_client = $ARGV[2];# may need root to accept connections here accept connection on ports $port_telnet and $port_client while (select($port_telnet | $port_client, 0, 0, 0)) if ($port_telnet has input) $buf = sysread($port_telnet); ... check for errors, EOF, etc. syswrite($port_client, $buf, length $buf); if ($port_client has input) $buf = sysread($port_client); ... check for errors, EOF, etc. syswrite($port_telnet, $buf, length $buf);  </s>
<s> try WRS's 'sock' program or Hobbits "netcat".  </s>
<s> Both will give an equivalent server function.  </s>
<s> You can bind on a port and when a connectoin comes in, ie from a browser, the i/o will be on stdin/stdout for you to manually enter.  </s>
<s> From: Jacob Palme [mailto:jpalme@dsv.su.se] Sent: Sunday, February 14, 1999 9:15 AM Subject: Use of TELNET for testing protocols  </s>
<s> Efficiency brings in all sorts of tradeoffs.  </s>
<s> One can make  </s>
<s> a protocol use  </s>
<s> a few fewer bytes on the wire by using a binary encoding,  </s>
<s> but this has the  </s>
<s> expense of requiring significant additional programmer time  </s>
<s> to develop  </s>
<s> debugging and testing suites since "telnet" doesn't work any more.  </s>
<s> I've dealt with both binary (straight-forward marshalling onto the wire,  </s>
<s> nothing baroque like PER) and text protocols, and have not found a particular advantage to either in terms of debugging.  </s>
<s> To me, use of telnet is hardly a compelling argument one way or the other.  </s>
<s> Putting a breakpoint on the stubs on either end in a debugger, and dumping the data structures, has often been easier than having to scratch my head about syntax being correct (and the generation and parsing thereof) in a text based protocol.  </s>
<s> Not having the same  </s>
<s> class of parsing bugs in binary implementations helps muchly on their  </s>
<s> side of the equasion.  </s>
<s> Note that binary protocols must be well engineered when it comes to extensions, or they get into trouble in the long term.  </s>
<s> There are similar problems with text protocols: a good example is HTTP, where there is about 4 different ways to figure out if a message is complete (some of which require fondling every byte fondly as it goes by).  </s>
<s> I find worrying about one or the other pretty close to a religious debate, not amenable to rational discussion, and only an issue when either: o latency requirements force a tight encoding o The protocol parameters are a significant fraction of the payload, and bandwidth becomes an issue.  </s>
<s> So this is/should be an engineering decision, examined in the light of the application.  </s>
<s> And as far as I'm concerned, all this is another argument for modularity in any protocol stack, so that argument marshalling is one of the modules that can be traded off on a per application basis.  </s>
<s> - Jim Gettys  </s>
<s> Jim Gettys said this:  </s>
<s> Just a minor nit, your observation is probably correct when you are actually writing an implementation of the protocol from scratch.  </s>
<s> I think when most of us speak about 'debugging' a server by simply telnetting to the port is after its been built and we are debugging particular applications that are using that protocol.  </s>
<s> Or also in the case where we do not have debugging access to the server or client (proprietary binaries).  </s>
<s> Also, from a past sysadmin's point of view, you're never gauranteed to have the libraries needed to parse a binary protocol on any given client.  </s>
<s> Telnet is everywhere.... -MM Sorry, hard to resist when your particular religion gets tweaked... ;-)  </s>
<s> Michael Mealling| Vote Libertarian!  </s>
<s> | www.rwhois.net/michael  </s>
<s> Sr. Research Engineer | www.ga.lp.org/gwinnett | ICQ#: 14198821 Network Solutions| www.lp.org | michaelm@netsol.com  </s>
<s> Jim Gettys said this:  </s>
<s> Text protocols and telnet debugging have a lower entry cost, but much higher curve as things get compicated.  </s>
<s> Binary protocols tend to have higher up-front costs (building a bit more infrastructure up front), but lower difficultly curves, as the complexity of the protocol goes up.  </s>
<s> I think it might be somewhat valuable to wrap a draft boilerplate around that last paragraph and send it out as an informational RFC.  </s>
<s> IMHO, as soon as complex data types and marshalling come into play, the low cost aspects of a text based protocol go out the window.  </s>
<s> But that's just the test that I personally use.  </s>
<s> I stand by my opinion that it is six of one, half a dozen of the other; what is most appropriate depends on your application.  </s>
<s> One size does not fit all needs.  </s>
<s> Exactly.... -MM Michael Mealling| Vote Libertarian!  </s>
<s> | www.rwhois.net/michael  </s>
<s> Sr. Research Engineer | www.ga.lp.org/gwinnett | ICQ#: 14198821 Network Solutions| www.lp.org | michaelm@netsol.com  </s>
<s> As I said; religious argument... Then again, I've been involved in several binary protocols, one of which has had literally thousands of applications written for it (the X Window System protocol).  </s>
<s> On the systems that support it, the client libraries are either there from the vendor, or can be built from source (your preference).  </s>
<s> Another debugging tool useful at times for X has been a pseudo-server, which dumps the protocol traffic in both directions; this is particularly useful when looking at performance issues.  </s>
<s> This has also allowed looking at both client and server as black boxes, without poking inside, and eases finger pointing in binary only situations.  </s>
<s> Text protocols and telnet debugging have a lower entry cost, but much  </s>
<s> higher curve as things get compicated.  </s>
<s> Binary protocols tend to have  </s>
<s> higher up-front costs (building a bit more infrastructure up front), but  </s>
<s> lower difficultly curves, as the complexity of the protocol goes up.  </s>
<s> I stand by my opinion that it is six of one, half a dozen of the other; what is most appropriate depends on your application.  </s>
<s> One size does not fit all needs.  </s>
<s> - Jim  </s>
<s> agree.  </s>
<s> I think we are not typical of the folks who debug.  </s>
<s> I suspect that, by far, the most common debugging case (in volume) is sysadmin and network people using sniffers or telnet.  </s>
<s> Text based protocols are helpful to telnet and to someone reading a simple network trace.  </s>
<s> While sniffers have protocol modules to decipher non-text protocols for easy reading, not everyone has access to a sniffer or sniffer program with the latest protocol modules.  </s>
<s> One thing that I think text based does for a protocol is to greatly increase its chances of quick adoption.  </s>
<s> Maybe people hacked together working implementations of web servers (for better or worse) by simply examining another working web server with telnet having never looked at the spec.  </s>
<s> As an admin in the past, it was easy for me to hack up a perl script to do http for quick fixes and administrative announcements, which helped me learn alot.  </s>
<s> When it came to SNMP (which I was also responsible for) I had such a hard time figuring out what was going on because the books were too theoretical for my practical mind, the tools were limited, and I couldnt easily hack my own in perl.  </s>
<s> www.rwhois.net/michael  </s>
<s> Sr. Research Engineer | www.ga.lp.org/gwinnett | ICQ#: 14198821 Network Solutions| www.lp.org | michaelm@netsol.com  </s>
<s> definitely an insightful statement.  </s>
<s> However, has IMAP or POP had the same problems because its text?  </s>
<s> Or, is it just HTTP's loose syntax of optional and ignored stuff that has cause so much pain?  </s>
<s> I havent noticed the same terrible cries in the IMAP/POP world, but then again, maybe I dont spend enough time in that world to notice.  </s>
<s> Chris ?  </s>
<s> POP is very simple, so it's a huge win that it's text.  </s>
<s> IMAP is a more interesting case as it has a number of complex datastructures which use a simple S-expression style syntax.  </s>
<s> I don't know of any significant problems that have been caused by these being text encoded.  </s>
<s> There are certain traditions which can make text protocols painful as they get complicated.  </s>
<s> For example, some people misinterpret the "be liberal in what you accept" principle as meaning "accept illegal protocol".  </s>
<s> Thankfully most of the IMAP server implementors didn't make this mistake so the IMAP protocol is one of the most syntacticly interoperable text protocols.  </s>
<s> It does become harder to precisely specify a text protocol as it becomes more complex.  </s>
<s> But this may be a good thing as it makes an out-of-control protocol designer suffer in a way that ASN.1 doesn't.  </s>
<s> I have a definite preference for text protocols.  </s>
<s> I've found them much easier to write code for and maintain in practice than binary protocols.  </s>
<s> A key advantage text protocols have is that when there's an interoperability problem, it is easy to prove to the customer who is at fault since you can show them the actual protocol.  </s>
<s> Sometimes the customer even identifies who is at fault themselves.  </s>
<s> Furthermore, a text protocol trace looks the same regardless of who generates it.  </s>
<s> Binary protocol debugging info appears in whatever format was the implementor's whim if it's available at all.  </s>
<s> However, the relative advantages and disadvantages between text and binary protocol encodings are negligible compared to other protocol design issues.  </s>
<s> Protocol simplicity and avoiding rarely-used features are _far_ more important.  </s>
<s> I'd much rather implement and maintain a simple well-designed binary protocol (e.g., Secure Shell 2) than a complex text protocol (e.g., HTTP 1.1).  </s>
<s> I should also point out the option of a hybrid encoding.  </s>
<s> Use a simple binary structure with fixed-length ASCII character strings for protocol keywords.  </s>
<s> You get all the advantages of binary encoding, and a protocol dump is at least partially useful.  </s>
<s> Secure Shell 2 has a different interesting hybrid characteristic -- it uses length-counted text strings for extensibility-oriented feature lists.  </s>
<s> - Chris  </s>

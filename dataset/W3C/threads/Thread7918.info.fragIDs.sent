<s> I'm interested in the list's thoughts on two ideas for DAV improvements: The first is to introduce a GETSRC method to support access to the unprocessed source of a resource.  </s>
<s> This would decouple the dynamic response of a resource (GET) from its static source (GETSRC).  </s>
<s> The second is to introduce the MULTIPUT method to support "PUT with  </s>
<s> PROPPATCH" scenarios.  </s>
<s> MULTIPUT would accept some subset of multipart MIME  </s>
<s> packages and atomically write them to the server.  </s>
<s> This would support the update of a resource and its metadata in one transaction.  </s>
<s> - Jim  </s>
<s> That would, of course, be completely contrary to the HTTP design and further propagate the mistake of not accessing properties as resources.  </s>
<s> Just use the source link.  </s>
<s> Please choose a better name -- MPUT and MULTIPUT means multiple PUT requests,  </s>
<s> which was already tried and abandoned.  </s>
<s> Maybe you can call it PKG.  </s>
<s> Or just  </s>
<s> define a mapping to transactions and leave them as separate requests.  </s>
<s> ....Roy  </s>
<s> Roy,  </s>
<s> The source link didn't work.  </s>
<s> Telling people to use the source link is not, IMO, productive.  </s>
<s> GETSRC could be defined as something like, "returns to the client a representation of the resource suitable for editing in an authoring client", so we avoid issues of getting at the "true" state of the resource.  </s>
<s> GETSRC wouldn't have the same caching properties as GET; I don't see that as being a big problem for authoring.  </s>
<s> So, which specific HTTP design principle(s) does this proposal violate?  </s>
<s> it  </s>
<s> I don't want to do arbitrary transactions, since that dramatically increases the implementation burden.  </s>
<s> But I'd be happy to call it something different.  </s>
<s> - Jim  </s>
<s> Under what conditions did it not work?  </s>
<s> Do you mean just never implemented?  </s>
<s> The one that calls for different resources to be accessed using different URI.  </s>
<s> The set of source URI for some other URI are different resources.  </s>
<s> Since there can be many more than one source per representation, the notion of creating a new method to avoid one indirection is just wrong.  </s>
<s> ....Roy  </s>
<s> The source link was never implemented.  </s>
<s> The two reasons I have heard for this (there may be more) are:  </s>
<s> (a) Server implementors did not want to handle the namespace complexity of automatically creating new areas of the namespace for source resources.  </s>
<s> That is, on most servers, the source resources would be "synthetic" -- the server would be making up the URL for the source resource, and would be managing interactions with this synthetic resource.  </s>
<s> (b) There was insufficient direction given to client implementors on how to use and handle the source link, especially in the case of multiple sources for a given resource.  </s>
<s> The user interfaces of almost all existing DAV clients implicitly assume there is just a single "source" representation for a  </s>
<s> resource.  </s>
<s> Perhaps DAV's closeness to a traditional network file system protocol is coming back to haunt us.  </s>
<s> Certainly, it would involve significant UI and operational shifts to accommodate more.  </s>
<s> I think existing client UIs could handle a standard mechanism to get at 1 source representation for a resource.  </s>
<s> I do not think they can handle a  </s>
<s> mechanism that provides access to multiple source representations.  </s>
<s> Efforts  </s>
<s> to do so will, like the source link, be ignored.  </s>
<s> I think it is instructive that the only mechanism that has gained any traction so far is the Translate header, which provides access to one source representation.  </s>
<s> - Jim  </s>
<s> GETSRC is evil: 1) It's strictly less powerful than the source link.  </s>
<s> What are you going to do about synthetic _collections_, and multiple synthetic resources with the same source, or a synthetic document with a source collection (i.e., a compiled source tree)?  </s>
<s> 2) It's incompatible with existing DAV clients.  </s>
<s> Everyone who writes a DAV client has to know that they must set Translate: F if they want to work properly with IIS.  </s>
<s> You'd force everyone to retrofit to call GETSRC in place of GET. 3) It doesn't even satisfy Microsoft's requirements.  </s>
<s> Translate: F works for all methods, not just GET. 4) It breaks the symmetry that HTTP requires between GET and PUT.  </s>
<s> I think the big one is that, in most cases, it isn't necessary.  </s>
<s> If the web site has a source tree, it's not unreasonable to expect the web site authors to know where that source tree is.  </s>
<s> They are the authors, after all.  </s>
<s> There isn't a requirement to automatically synthesize parts of the namespace.  </s>
<s> In fact, what I can easily do Today does everything but fill in the source links.  </s>
<s> I just have to map two virtual directories to the same location -- one view tree at http://me.com/* and one source tree at execution, grant source editing and browsing permissions, and require stronger authentication.  </s>
<s> What Today's web servers don't do is fill in the source link, because in most cases they can't know how to do it properly.  </s>
<s> Oh sure, a Web server might be able to supply a sourcelink for /cgi/mycgi.exe, but it can't provide a source link for /cgi/mycgi.exe/doc1, because it doesn't know where my CGI gets its information from.  </s>
<s> Similarly, of course, the Web server can't implement GETSRC on /cgi/mycgi.exe/doc1.  </s>
<s> It's the CGI's job to fill in those source links if it wants to.  </s>
<s> handle a  </s>
<s> You're right, but a "source representation" is not necessarily an entity body.  </s>
<s> All we really need is some language that tells a client how to extract a URI for the source from the source link property, i.e., a single source link, or a "main" source link, or some such thing.  </s>
<s> What the source link gets you is a File/Edit item on the menu when you view the page in a Web browser.  </s>
<s> The appropriate thing to do when that item is selected is clear if you have a single source link -- you PROPFIND it to determine DAV:resourcetype and DAV:getcontenttype, and then open the link in whatever client application is appropriate for editing that type of resource.  </s>
<s> If the source resource is a jsp or asp page, then the source file will open in the appropriate editor.  </s>
<s> If the source resource is a collection, then it will open in your default WebDAV explorer.  </s>
<s> GETSRC has a much reduced scope.  </s>
<s> That's not all that Translate: does.  </s>
<s> Translate: F disables script processing.  </s>
<s> If you PUT to a CGI with Translate: F, you overwrite the CGI.  </s>
<s> If you leave out the header, then the CGI processes the request.  </s>
<s> If you PROPFIND mycgi.exe with Translate:F, you get properties of the executable file.  </s>
<s> Without the header, you might get DAV:resroucetype=DAV:collection and some children.  </s>
<s> If you PROPFIND mycgi.exe/somedir with Translate: F, you get 404 or 409.  </s>
<s> If you leave out the header, the CGI might give you the properties of a synthetic DAV-compliant resource.  </s>
<s> In short, Translate: F and GETSRC are not equivalent in functionality, and MS's decision to use Translate: F does not support adding GETSRC to the RFC.  </s>
<s> Moving on...  </s>
<s> There is, however, a real problem with the source link in 2518 -- it's a property, and only works for resources that are DAV-compliant.  </s>
<s> A CGI, for example, is a simple way to synthesize a Web page.  </s>
<s> There is no reason for that synthetic resource to be DAV-compliant at all.  </s>
<s> CGI authors don't want to go through all the trouble of implementing PROPFIND just so they don't have to remember where the source tree is.  </s>
<s> How many other methods will CGI authors have to implement to convince the browser that it should do a PROPFIND in the first place?  </s>
<s> If we want to provide a really useful link to source representations, it needs to be a simple header that CGIs can just stick in their responses.  </s>
<s> We could define the DAV-source: URL header to point the the "primary source" for that resource.  </s>
<s> We can keep the existing source link for DAV-compliant synthetic resources if we describe the mapping between the two.  </s>

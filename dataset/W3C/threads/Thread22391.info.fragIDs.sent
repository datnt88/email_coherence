<s> This is a semi-official Software AG response to the "Last Call" for comments on DOM Level 2: [I apologize to the WG for not raising this before the Last Call draft, but we agreed at the August meeting to take this to e-mail to figure out a solution for for Level 2; that discussion never happened, and since I was travelling for most of the rest of August I did not notice.]  </s>
<s> We believe that it is important to have a method in DOM Level 2 to get an element by the value of its ID attribute.  </s>
<s> There is a getElementById() method for HTML in DOM Level 1, and this is also needed by XML developers.  </s>
<s> Several DOM implementations, including Microsoft's widely used one, have such a method, and its lack in DOM Level 1 is often noted.  </s>
<s> The DOM Working Group has considered this issue on several occasions; the general feeling has always been that a) this could only work for XML documents that have a DTD, and the DOM (like XML) does not require a DTD ; so b) a more general mechanism that could be used to look up elements by ID as a special case is preferred.  </s>
<s> Unfortunately, no such general mechanism has been agreed upon.  </s>
<s> Therefore, we strongly urge the WG to simply adopt the getElementById() method in the HTML DOM as an XML method in Level 2 rather than waiting until Level 3 for a "better" solution.  </s>
<s> As for what to do when there is no DTD, or a DTD that does not define an ID attribute, I suggest that it simply return null, just like the HTML DOM.  </s>
<s> I could imagine that a DOMException could be thrown, but in the interest of simplicity I would suggest making it identical to the HTML method.  </s>
<s> So, I'm suggesting that to the Document interface, add the method Element getElementById(in DOMString elementId) "Returns the Element whose ID is given by elementId.  </s>
<s> If no such element exists, return null.  </s>
<s> Behavior is not defined if more than one element has the id." So, do people on this list support this idea?  </s>
<s> Is returning null the right solution for the situation where there is no ID defined *or* no element matches the specified ID?  </s>
<s> Does it make *practical* sense to distinguish these two situations?  </s>
<s> Is this an excessive burden on DOM implementors?  </s>
<s> ( I really don't think so, especially in Java, since this is easily done with java.util.Hashtable ....or am I missing something?).  </s>
<s> Thanks, Mike Champion  </s>
<s> I don't see how IDs are more of a DTD issue than NOTATIONs.  </s>
<s> Notations, at least, are isolated -- you can set them and query them and they don't otherwise interact with anything else.  </s>
<s> IDs do need to so interact; to use them you have to be able to set the type of an attribute, which requires defining an attribute, which we don't currently do.  </s>
<s> Default attributes, like IDs, currently have no place in the DOM to assert them.  </s>
<s> They do, however, have defined behavior.  </s>
<s> Personally, I consider that an unpleasant situation and I have no particular wish to exacerbate it.  </s>
<s> But I do understand that folks want IDs -- and in fact all of DTDs -- yesterday if not sooner.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> I'm not clear on the difficult part.  </s>
<s> Looking up IDs is trivial.  </s>
<s> Traversing an IDREF is just a matter of looking up an ID so that's trivial too.  </s>
<s> Setting an ID is just setting an attribute so that's trivial too.  </s>
<s> Of course the underlying implementation needs to know that the attribute is an ID attribute but that's not particularly difficult either.  </s>
<s> Being able to change the DTD to make an attribute INTO an ID attribute would be neat, but I think that that is a clearly separable problem: a DTD problem instead of a document instance problem.  </s>
<s> Paul PRescod  </s>

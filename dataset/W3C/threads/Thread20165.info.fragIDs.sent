<s> Hi, Some basic set elements such as SPAN, SUB, SUP, etc., insert an ancestor (ADDRESS?) when they're inserted on a new empty document.  </s>
<s> In CreateNewElement, it appears CanInsertBySplitting returns FALSE on current element (type 27) at the insertion point, and ListRuleOfElem subsequently returns ADDRESS as a possible ancestor where the element is inserted as a child under.  </s>
<s> As far as I know, the standard does not require presence of ADDRESS (or other ancestor -- well, it has to be inside BODY obviously) before inserting SPAN, SUB, SUP, etc.  </s>
<s> Is this a bug?  </s>
<s> If so, what is the suggested code fix?  </s>
<s> Thanks!  </s>
<s> -An  </s>
<s> I've dug deeper into this...  </s>
<s> It appears that inserting a pseudo paragraph fixes this problem (if it is indeed one).  </s>
<s> Then the next question is, is this a correct fix?  </s>
<s> Will it be safe to universally insert a pseudo paragraph before SPAN, etc., or just in  </s>
<s> the case where it follows the BASE element?  </s>
<s> I'm thinking maybe in some case  </s>
<s> where it is illegal to insert SPAN, inserting the pseudo paragraph may become a backdoor.  </s>
<s> On another note, inserting this pseudo paragraph also allows you to type text right after inserting an image after BASE!  </s>
<s> Is this valid HTML structure  </s>
<s> or is the behavior of such code undefined by the spec?  </s>
<s> If it's valid then inserting the pseudo paragraph appears to fix this other problem.  </s>
<s> Thanks for any feedback!  </s>
<s> -An  </s>
<s> Hi, Some basic set elements such as SPAN, SUB, SUP, etc., insert an ancestor (ADDRESS?) when they're inserted on a new empty document.  </s>
<s> In CreateNewElement, it appears CanInsertBySplitting returns FALSE on current element (type 27) at the insertion point, and ListRuleOfElem subsequently returns ADDRESS as a possible ancestor where the element is inserted as a child under.  </s>
<s> As far as I know, the standard does not require presence of ADDRESS (or other ancestor -- well, it has to be inside BODY obviously) before inserting SPAN, SUB, SUP, etc.  </s>
<s> Is this a bug?  </s>
<s> If so, what is the suggested code fix?  </s>
<s> Thanks!  </s>
<s> -An  </s>
<s> Oops, I meant BODY, not BASE.  </s>
<s> :) I've dug deeper into this...  </s>
<s> It appears that inserting a pseudo paragraph fixes this problem (if it is indeed one).  </s>
<s> Then the next question is, is this a correct fix?  </s>
<s> Will it be safe to universally insert a pseudo paragraph before SPAN, etc., or just in  </s>
<s> the case where it follows the BASE element?  </s>
<s> I'm thinking maybe in some case  </s>
<s> where it is illegal to insert SPAN, inserting the pseudo paragraph may become a backdoor.  </s>
<s> On another note, inserting this pseudo paragraph also allows you to type  </s>
<s> text right after inserting an image after BASE!  </s>
<s> Is this valid HTML structure  </s>
<s> or is the behavior of such code undefined by the spec?  </s>
<s> If it's valid then inserting the pseudo paragraph appears to fix this other problem.  </s>
<s> Thanks for any feedback!  </s>
<s> -An  </s>
<s> -----Original Message----- Hi, Some basic set elements such as SPAN, SUB, SUP, etc., insert an ancestor (ADDRESS?) when they're inserted on a new empty document.  </s>
<s> In CreateNewElement, it appears CanInsertBySplitting returns FALSE on current element (type 27) at the insertion point, and ListRuleOfElem subsequently returns ADDRESS as a possible ancestor where the element is inserted as a child under.  </s>
<s> As far as I know, the standard does not require presence of ADDRESS (or other ancestor -- well, it has to be inside BODY obviously) before inserting SPAN, SUB, SUP, etc.  </s>
<s> Is this a bug?  </s>
<s> If so, what is the suggested code fix?  </s>
<s> Thanks!  </s>
<s> -An  </s>
<s> Hi Ly, SPAN, SUP, SUB, etc. elements are in-line elements and Amaya needs a block element to format them in line.  </s>
<s> When they are not put into a paragraph Amaya is waiting for a pseudo block level (the pseudo paragraph).  </s>
<s> The pseudo paragrah is automatically generated by our HTML parser and is never exported.  </s>
<s> In-reply-to: Your message of Wed, 01 Sep 1999 16:40:27 -0400."  </s>
<s> Irene.  </s>
<s> Hi Irene, I quickly tested importing an existing doc and it indeed inserts a pseudo p before SPAN and IMG.  </s>
<s> But the GUI incorrectly (?) inserts an ADDRESS block element when I insert a SPAN/SUP/SUB, etc.  </s>
<s> And it doesn't insert any block element when I insert an IMG.  </s>
<s> I am testing with 2.0a.  </s>
<s> Oh, how to tell if the parent of insertion point is a pseudo block level-type of element?  </s>
<s> Thanks for your help... -An  </s>
<s> Hi Ly, SPAN, SUP, SUB, etc. elements are in-line elements and Amaya needs a block element to format them in line.  </s>
<s> When they are not put into a paragraph Amaya is waiting for a pseudo block level (the pseudo paragraph).  </s>
<s> The pseudo paragrah is automatically generated by our HTML parser and is never exported.  </s>
<s> In-reply-to: Your message of Wed, 01 Sep 1999 16:40:27 -0400."  </s>
<s> in  </s>
<s> case  </s>
<s> structure  </s>
<s> Irene.  </s>
<s> In-reply-to: Your message of Thu, 02 Sep 1999 10:48:24 -0400."  </s>
<s> The thotlib looks within the structure schema for finding out what path allows you to insert an element type at the current position in the document tree.  </s>
<s> That algorithm works 80% of the time.  </s>
<s> For remaining 20% you have to insert first an intermediate element.  </s>
<s> With TtaGetParent and TtaGetElementType.  </s>
<s> Irene.  </s>

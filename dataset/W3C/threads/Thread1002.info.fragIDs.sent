<s> I have run into a problem while tidying up some html that has comments in it.  </s>
<s> Maybe this can turn into a requested feature??  </s>
<s> the comment looks something like Except that the ' is a chr 146.  </s>
<s> In other words, a 'smart apostropy' or 'curly apostropy' (yes this is output from word if you are curious) This character is getting changed to something else.  </s>
<s> In my text editor it indicates it is a chr 25.  </s>
<s> In Word (opened as raw text) it inidicates chr  </s>
<s> 13. I am not convinced that it is either of these because of the tools I  </s>
<s> used.  </s>
<s> I can get more carefull and find out if I need to, but it is definately no longer a chr 146.  </s>
<s> It may be the unicode equivalent of a smart apostropy???  </s>
<s> If chr 146 is in a regular uncommented tag it becomes &amp;#8217; Which is great.  </s>
<s> Is there a way I can get tidy to convert the character in the same way as if it was not in the comment?  </s>
<s> or to leave it alone?  </s>
<s> I did search the archives and tried different config file settings.  </s>
<s> I used Bj?rn's command-line version (last updated 7 April, 2002) I used these config settings last (tried many variations) tidy-mark: no doctype: omit output-xml: yes output-xhtml: yes add-xml-decl: yes write-back: yes quiet: yes show-warnings: no wrap: 0 assume-xml-procins: yes quote-nbsp: no quote-marks: yes hopefully I am not just being a bothersome newbe.  </s>
<s> Thanks Fred  </s>
<s> Yes. That's a bug.  </s>
<s> I added it to the bug tracker, see  </s>
<s> regards.  </s>
<s> Is it a bug?  </s>
<s> Surely this depends on the charset.  </s>
<s> If it is something  </s>
<s> other than the windows charset then 146 isn't a valid character.  </s>
<s> Dave Raggett dsr@w3.org or dave.raggett@openwave.com  </s>
<s> W3C lead for voice/multimodal.  </s>
<s> http://www.w3.org/People/Raggett  </s>
<s> To convert 0x92 to 0x19 is a bug, yes.  </s>
<s> Why? If you are converting a broken document (invalid characters) into a valid document with the equivalent Unicode characters and a Unicode character set, surely this is in direct alignment with the goals of HTML Tidy?  </s>
<s> If the OUTPUT charset is the Windows charset, then yes it would be a bug to convert these characters to the Unicode equivalents.  </s>
<s> Dave Raggett dsr@w3.org or dave.raggett@openwave.com  </s>
<s> W3C lead for voice/multimodal.  </s>
<s> http://www.w3.org/People/Raggett  </s>
<s> Again, a reduced test case looks like this It's encoded using Windows-1252, hence a hex dump looks like 3C 21 2D 2D 92 2D 2D 3E After running Tidy on that document without any special configuration option it becomes 3C 21 2D 2D 19 2D 2D 3E U+0019 is a c0 control character ("END OF MEDIUM") and it is an invalid character in HTML ("UNUSED" in the SGML declaration).  </s>
<s> That's a bug.  </s>
<s> I am not against transcoding or replacing the U+2019 in the source document, but Tidy does not do this at the moment, it just mangles the character.  </s>
<s> Agreed - if both input and output character sets are Windows-1252 then Tidy shouldn't mess with valid Windows-1252 characters.  </s>
<s> That said, I think it is bad practice to use Windows-1252 and we should set the default to a portable character set based on Unicode.  </s>
<s> Linux and Mac user's aren't happy with folks delivering documents using Windows-1252 special characters when these characters have equivalent Unicode code points.  </s>
<s> It is also the case that Windows-1252 TrueType fonts include the Unicode glyph tables so that using the Unicode code points works fine on Windows.  </s>
<s> Dave Raggett dsr@w3.org or dave.raggett@openwave.com  </s>
<s> W3C lead for voice/multimodal.  </s>
<s> http://www.w3.org/People/Raggett  </s>

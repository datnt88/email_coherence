IE and Netscape seem to ignore extra framesets while 26-Jul-99 Tidy treats 
them as errors. 
I hope it's not rash to assume that in cases like this, we want Tidy to approximate what most users are likely to experience in their browsers. 
-------- Example input document -------- The following changes should cause Tidy to discard extra framesets. 
Note the potential problem described in the comments. 
The changes are untested in C but they were translated from Java where they WERE tested. 
1. 
In parser.c, 
change: /* flag an error if we see more than one frameset */ to: /* parse framesets but only keep the first one */ /* PROBLEM: Discarded framesets might still affect the */ /* global document state when they are parsed */ 2. Also in parser.c, 
change: if (frameset != null) ReportError(lexer, html, node, DUPLICATE_FRAMESET); else frameset = node; to: if (frameset != null) ReportWarning(lexer, html, node, DUPLICATE_FRAMESET); ParseTag(lexer, node, mode); continue; frameset = node; 3. In localize.c, 
change DUPLICATE_FRAMESET from an error to a warning (be sure to change the string literal itself, too). 
Randy 
Well, I am not sure I understand, but if Tidy is to be clean, it doesn't have to follow what browsers say, but what the dtd says ? 
Jany. 
I think the issue is how to transform the non-conforming into the conforming. 
When Tidy encounters something non-conforming, it must decide if there a reasonable way to transform the non-conforming construct into something conforming. 
If a reasonable transformation is available, Tidy issues a warning and applies the transformation (it "tidies"). 
If reasonable transformation is not available, Tidy issues an error and does not produce an output document. 
My comment about the browsers was concerning how to choose a "reasonable transformation." 
Occasionally the HTML spec recommends what to do with a non-conforming construct, but usually we're on our own. 
My hopefully-not-rash assumption is that when the two major browsers treat something non-conforming in the same way (in other words, they have chosen the same non-conforming-to-conforming transformation), it is desirable for Tidy to use that same transformation. 
In the case of extra framesets, both browsers have chosen to discard the extra framesets, so maybe Tidy should do the same. 
Tidy will complain about it and output the transformed, conforming document. 
(Currently, Tidy complains but does not output a document.) Randy 

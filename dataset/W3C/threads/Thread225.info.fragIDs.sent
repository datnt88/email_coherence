<s> IE and Netscape seem to ignore extra framesets while 26-Jul-99 Tidy treats  </s>
<s> them as errors.  </s>
<s> I hope it's not rash to assume that in cases like this, we want Tidy to approximate what most users are likely to experience in their browsers.  </s>
<s> -------- Example input document -------- The following changes should cause Tidy to discard extra framesets.  </s>
<s> Note the potential problem described in the comments.  </s>
<s> The changes are untested in C but they were translated from Java where they WERE tested.  </s>
<s> 1.  </s>
<s> In parser.c,  </s>
<s> change: /* flag an error if we see more than one frameset */ to: /* parse framesets but only keep the first one */ /* PROBLEM: Discarded framesets might still affect the */ /* global document state when they are parsed */ 2. Also in parser.c,  </s>
<s> change: if (frameset != null) ReportError(lexer, html, node, DUPLICATE_FRAMESET); else frameset = node; to: if (frameset != null) ReportWarning(lexer, html, node, DUPLICATE_FRAMESET); ParseTag(lexer, node, mode); continue; frameset = node; 3. In localize.c,  </s>
<s> change DUPLICATE_FRAMESET from an error to a warning (be sure to change the string literal itself, too).  </s>
<s> Randy  </s>
<s> Well, I am not sure I understand, but if Tidy is to be clean, it doesn't have to follow what browsers say, but what the dtd says ?  </s>
<s> Jany.  </s>
<s> I think the issue is how to transform the non-conforming into the conforming.  </s>
<s> When Tidy encounters something non-conforming, it must decide if there a reasonable way to transform the non-conforming construct into something conforming.  </s>
<s> If a reasonable transformation is available, Tidy issues a warning and applies the transformation (it "tidies").  </s>
<s> If reasonable transformation is not available, Tidy issues an error and does not produce an output document.  </s>
<s> My comment about the browsers was concerning how to choose a "reasonable transformation."  </s>
<s> Occasionally the HTML spec recommends what to do with a non-conforming construct, but usually we're on our own.  </s>
<s> My hopefully-not-rash assumption is that when the two major browsers treat something non-conforming in the same way (in other words, they have chosen the same non-conforming-to-conforming transformation), it is desirable for Tidy to use that same transformation.  </s>
<s> In the case of extra framesets, both browsers have chosen to discard the extra framesets, so maybe Tidy should do the same.  </s>
<s> Tidy will complain about it and output the transformed, conforming document.  </s>
<s> (Currently, Tidy complains but does not output a document.) Randy  </s>

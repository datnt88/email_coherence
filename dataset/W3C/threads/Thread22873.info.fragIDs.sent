<s> kboone wrote, on the public list:  </s>
<s> Assuming the following Java statements are executed: attr.setValue("foo"); element.setAttributeNodeNS(attr);  </s>
<s> element.setAttributeNS(attr.getNamespaceURI(), attr.getName(), "bar"); What will be returned by attr.getValue()?  </s>
<s> If I'm reading this correctly, this has some serious concerns.  </s>
<s> He didn't say how the attr node was created.  </s>
<s> Two scenarios: 1) createAttribute -- prefix/localname/namespaceURI are all null.  </s>
<s> 2) createAttributeNS -- attr has the localname and namespaceURI specified It may have a prefix.  </s>
<s> When we issue setAttributeNodeNS, this Attr replaces any existing Attr with the same {nsuri}localname.  </s>
<s> Problem: If it's a non-namespaced Attr, that means it replaces a non-namespaced Attr but we don't know which, since they all have null for both values.  </s>
<s> The results are implementation dependent.  </s>
<s> Ugh.  </s>
<s> When we issue setAttributeNS()...  </s>
<s> As written, the line doesn't work; he probably intended to use getLocalName().  </s>
<s> But if it's a non-namespaced node, this still results in our setting the value for {null}null, which matches any single non-namespaced Attr on this element.  </s>
<s> And again, the results are implementation dependent.  </s>
<s> Ugh ugh.  </s>
<s> Is my analysis in error?  </s>
<s> If so, do we still believe this is an acceptable answer?  </s>
<s> Note that if we had gone with localname=nodename for non-namespaced nodes, this particular scenario wouldn't arise; the NS methods would be replacing {null}localname, and everything would work correctly.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> First of all, I'm fairly sure I meant attr.getName(), because setAttributeNS() requires a qualified name, which is what getName() is supposed to return -- yes?  </s>
<s> Secondly, you can assume the attr in my example is created using the createAttributeNS() method, as the DOM 2 is clear that mixing NS-aware and NS-unaware calls may be flakey.  </s>
<s> Finally, why isn't localName = qualifiedName when a node is created using the non-namespace aware methods.  </s>
<s> Keith keshlam@us.ibm.com kboone wrote, on the public list:  </s>
<s> Assuming the following Java statements are executed: attr.setValue("foo"); element.setAttributeNodeNS(attr);  </s>
<s> element.setAttributeNS(attr.getNamespaceURI(), attr.getName(), "bar"); What will be returned by attr.getValue()?  </s>
<s> If I'm reading this correctly, this has some serious concerns.  </s>
<s> He didn't say how the attr node was created.  </s>
<s> Two scenarios: 1) createAttribute -- prefix/localname/namespaceURI are all null.  </s>
<s> 2) createAttributeNS -- attr has the localname and namespaceURI specified It may have a prefix.  </s>
<s> When we issue setAttributeNodeNS, this Attr replaces any existing Attr with the same {nsuri}localname.  </s>
<s> Problem: If it's a non-namespaced Attr, that means it replaces a non-namespaced Attr but we don't know which, since they all have null for both values.  </s>
<s> The results are implementation dependent.  </s>
<s> Ugh.  </s>
<s> When we issue setAttributeNS()...  </s>
<s> As written, the line doesn't work; he probably intended to use getLocalName().  </s>
<s> But if it's a non-namespaced node, this still results in our setting the value for {null}null, which matches any single non-namespaced Attr on this element.  </s>
<s> And again, the results are implementation dependent.  </s>
<s> Ugh ugh.  </s>
<s> Is my analysis in error?  </s>
<s> If so, do we still believe this is an acceptable answer?  </s>
<s> Note that if we had gone with localname=nodename for non-namespaced nodes, this particular scenario wouldn't arise; the NS methods would be replacing {null}localname, and everything would work correctly.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> One reason is that names with colons were used by by users of namespaces throughout level one.  </s>
<s> This would produce localnames that have colons in them, which seems wrong.  </s>
<s> This mixing situation is bound to produce errors in any case with the application using NS methods.  </s>
<s> I like an obvious error more than a less-obvious one, that just causes the program to malfunction for less-obvious reasons.  </s>
<s> So I like a null localname.  </s>
<s> Ray Whitmer ray@xmission.com  </s>
<s> Apologies, everyone -- that commentary was intended for the IG list, not the public list.  </s>
<s> Please hang loose while folks determine whether I'm confused or not.  </s>
<s> I've got half an idea, but half an hour from now I may look like a halfwit.  </s>
<s> Joe Kesselman / IBM Research  </s>

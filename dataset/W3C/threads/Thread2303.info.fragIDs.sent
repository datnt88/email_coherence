<s> Two more charset-related issues in the HTTP 1.1 draft: 1) Unregistered charset values In draft-ietf-http-v11-spec-05.txt is said:  </s>
<s> 3.4 Character Sets Although HTTP allows an arbitrary token to be used as a charset value, any token that has a predefined value within the IANA Character Set registry MUST represent the character set defined by that registry.  </s>
<s> My reading of this is that, in HTTP 1.1, any charset value not registered with IANA can be used for  </s>
<s> non-registered character sets that can be used after private agreement.  </s>
<s> In my view this is an unnecessary  </s>
<s> deviation from the long-established rules for MIME, that private charset values must start with "x-".  </s>
<s> According to draft-ietf-822ext-mime-imt-05.txt: : No character set name other than those defined above may be : used in Internet mail without the publication of a formal : specification and its registration with IANA, or by private : agreement, in which case the character set name must begin : with "X-".  </s>
<s> 2) Preferred MIME names for ISO-8859 character sets The HTTP 1.1 draft doesn't explicitly recommend the use  </s>
<s> of any particular subset of the more than 200 character sets registered with IANA.  </s>
<s> I suppose that this decision (which I don't believe is wise) is the result of earlier WG discussions, which I unfortunately have missed.  </s>
<s> However, the draft seems to indirectly give preference to some of the more popular or well-defined character sets in this section:  </s>
<s> 19.8.1 Charset Registry The following names should be added to the IANA character set registry under the category "Preferred MIME name" and this section deleted.  </s>
<s> "US-ASCII" | "ISO-8859-1" | "ISO-8859-2" | "ISO-8859-3" | "ISO-8859-4" | "ISO-8859-5" | "ISO-8859-6" | "ISO-8859-7" | "ISO-8859-8" | "ISO-8859-9" | "ISO-2022-JP" | "ISO-2022-JP-2" | "ISO-2022-KR" | "SHIFT_JIS" | "EUC-KR" | "GB2312" | "BIG5" | "KOI8-R" Please also add the following new alias as the "preferred MIME name": "EUC-JP" for "EXTENDED_UNIX_CODE_PACKED_FORMAT_FOR_JAPANESE"  </s>
<s> There are some problematic cases in this list: a) "ISO-8859-10" is left out, though this part of ISO 8859 was adopted as early as in 1992.  </s>
<s> b) It's unclear what charset registration the preferred MIME name "GB2312" shall designate: the ISO-registered character set GB_2312-80 (MIBenum: 57) or the only incompletely described GB2312 (MIBenum: 2025), which of course already has the proposed preferred MIME name as it's principal name.  </s>
<s> It is also possible that these two registrations actually refer to exactly the same character set, and should be merged in the IANA registry.  </s>
<s> c) The meanings of the two charset values ISO_8859-6:1987 (ISO-8859-6) and ISO_8859-8:1988 (ISO-8859-8) is not clear.  </s>
<s> The ISO standards are silent on the question of in which order the right-to-left characters of these standards should be coded in a string.  </s>
<s> RFC 1556 explains that three different interpretations are possible: visual order, explicit logical order, and implicit logical order.  </s>
<s> It proposes that the values "ISO-8859-6" and "ISO-8859-8" shall be used for text coded in visual order, that "ISO-8859-6-E" and "ISO-8859-8-E" shall be used for text coded in explicit order, and "ISO-8859-6-I" and "ISO-8859-8-I" for text coded in implicit order.  </s>
<s> The MIME draft draft-ietf-822ext-mime-imt-05.txt follows RFC 1556 regarding the meanings of "ISO-8859-6" and "ISO-8859-8".  </s>
<s> Current practice is more complex, unfortunately, which is clear from a recent message to the Hebrew-oriented mailing list ILAN-H, enclosed at the end of this message.  </s>
<s> For Arabic, visual order and explicit logical order are seldom used.  </s>
<s> Normally, implicit logical order is used, and the charset label then is "ISO-8859-6", not "ISO-8859-6-I".  </s>
<s> In Hebrew, on the other hand, "ISO-8859-8" usually has the meaning of visual order, while the more popular implicit order (as defined by the Unicode bidi algorithm) is indicated by the "ISO-8859-8-I" charset value.  </s>
<s> It should also be noted that the current draft for internationalization of HTML, draft-ietf-html-i18n-04.txt, only specifies implicit order for bi-directional text.  </s>
<s> I would recommend that current practice rather than RFC theory is followed.  </s>
<s> If the indirect way of favouring certain character sets for HTTP - to let IANA assign "preferred MIME names" only for a few of all the registered charset values - is followed, "ISO-8859-6" should be retained as such a name, but "ISO-8859-8" should be replaced by "ISO-8859-8-I".  </s>
<s> /Olle Olle Jarnefors, Royal Institute of Technology (KTH) ojarnef@admin.kth.se  </s>
<s> Included message from the ILAN-H mailing list: Date: Fri, 5 Jul 1996 21:04:43 -0500 (CDT) From: Alexandre Khalil iskandar@ee.tamu.edu  </s>
<s> "ITISALAT: IT IS Arabic Language And Technology." Subject: Re: RFC 1556 Message-Id: Pine.GSO.3.93.960705204813.3148r-100000@ee.tamu.edu  </s>
<s> Mime-Version: 1.0 Sender: owner-ilan-h@VM.TAU.AC.IL  </s>
<s> On Thu, 4 Jul 1996 14:21:52 +0200 you said:  </s>
<s> Second, at least for ISO-8859-6, visual directionality is rarely, if ever, used, and ISO-8859-6 is taken to mean Arabic in implicit directionality.  </s>
<s> I assume you are talking about the use of "iso-8859-6" as a charset parameter in e-mail according to MIME here.  </s>
<s> Does also a de-facto standard for directionality in the encoding of Hebrew text with charset value "iso-8859-8" exist?  </s>
<s> Is it the same as for "iso-8859-6"?  </s>
<s> If this is so, I would suggest that the revised RFC 1556 should document the de facto standards, and introduce new values "iso-8859-6v" and "iso-8859-8v" for visual directionality.  </s>
<s> Incidentally, iso-8859-8 == iso-8859-8-v so no need for a visual charset.  </s>
<s> After knocking this subject around for a few more weeks, would anyone like to volunteer to amend RFC1556?  </s>
<s> I am a bit busy and will only do it/get to it if no one else steps forward (probably during August).  </s>
<s> In summary iso-8859-8 == iso-8859-8-v as Hank said and iso-8859-6 == iso-8859-6-i as Uri pointed out Also, visual and explicit encoding for iso-8859-6 have practically not been in use and with the appearance of better multi-script software such AccentSoft's and Alis that supports UTF/8 and its explicit directional tagging, these along with iso-8859-e might never see significant usage.  </s>
<s> Shouldn't we promote Unicode in its various avatars or is there still a need to finetune 8 bit encodings?  </s>
<s> alex  </s>
<s> In draft-ietf-http-v11-spec-05.txt is said:  </s>
<s> 3.4 Character Sets Although HTTP allows an arbitrary token to be used as a charset value, any token that has a predefined value within the IANA Character Set registry MUST represent the character set defined by that registry.  </s>
<s> and Olle presented a reading of this that makes it seem like HTTP is permitting unregistered charset values.  </s>
<s> Frankly, I don't think anyone cares much what this says; it was the case that the MIME documents were in flux.  </s>
<s> Clearly, using non-standard charset values is non-standard.  </s>
<s> There have been innumerable discussions on the issues of charset names, and no desire in the HTTP working group to actually prevent anyone from using any charset they want if properly labelled (the subject of the last heated debate.)  </s>
<s> There's no simple reason why HTTP itself should restrict itself to some charset names over others since the client can send Accept-Charset to identify the charset values it's willing to deal with.  </s>
<s> This is a significantly different situation than mail, which is sent preemptively without direct communication.  </s>
<s> However, most of the comments here do not change the HTTP specification, but only the recommendations for what should happen to the IANA registration.  </s>
<s> As such, I would assume that the charset registration issues could merged with the consideration of draft-freed-charset-reg-00.txt as BCP, while the HTTP/1.1 spec could be processed.  </s>
<s> The intent was not to establish a monopoly on "preferred MIME names", and not to reinterpret any of the charset registrations, but just to pick the short names that are currently in use in HTTP.  </s>
<s> 3.4 Character Sets Although HTTP allows an arbitrary token to be used as a charset value, any token that has a predefined value within the IANA Character Set registry MUST represent the character set defined by that registry.  </s>
<s> I wouldn't go that far.  </s>
<s> Certainly for experimental purposes or within a certain community a character set that still hasn't been registered should be possible to use.  </s>
<s> But in that case the use of a charset value starting with "x-" (and therefore guaranteed to never be registered by IANA) should be required by the HTTP 1.1 specification, as it always has been in MIME specifications.  </s>
<s> As an example, among users of the Sami languages (also called Lappish) in Northern Norway, Sweden and Finland, a new 8-bit character set, similar to ISO 8859-1 but including also the letters used in Sami that 8859-1 lacks, was recently defined and it is now tried out in identify this character set, which is not yet registered with IANA.  </s>
<s> Though the designers of this new character set hopes it will eventually become part 16 of ISO 8859, I don't think the HTTP specification should allow the use other, until "iso-8859-16" has been registered as a charset value by IANA.  </s>
<s> I suggest that the quote from the draft above is amended by this text: + Unregistrered character sets may be used for + experimental purposes or according to the convention of + a certain user community, but a value starting with + "X-" or "x-" must then be used.  </s>
<s> Such values are + guaranteed never to be registered by IANA.  </s>
<s> Yes, this should not be allowed to delay the processing of HTTP 1.1 further.  </s>
<s> The HTTP 1.1 draft talks about "preferred MIME names", the charset registration draft requires "a single primary name" if multiple names for the same character set are registered.  </s>
<s> The current registry has one "Name:" field for each character set, and zero or more "Alias:" fields.  </s>
<s> I suppose that preferred MIME name = primary name = IANA-name.  </s>
<s> In that case the changes section 19.8.1 in the HTTP draft asks for are: - register EUC-JP as the primary name for EXTENDED_UNIX_CODE_PACKED_FORMAT_FOR_JAPANESE - make US-ASCII the primary name instead of ANSI_X3.4-1968 - make ISO-8859-1 the primary name instead of ISO_8859-1:1987 - make ISO-8859-2 the primary name instead of ISO_8859-2:1987 - make ISO-8859-3 the primary name instead of ISO_8859-3:1988 - make ISO-8859-4 the primary name instead of ISO_8859-4:1988 - make ISO-8859-5 the primary name instead of ISO_8859-5:1988 - make ISO-8859-6 the primary name instead of ISO_8859-6:1987 - make ISO-8859-7 the primary name instead of ISO_8859-7:1987 - make ISO-8859-8 the primary name instead of ISO_8859-8:1988 - make ISO-8859-9 the primary name instead of ISO_8859-9:1989 These changes would be improvements, in my opinion.  </s>
<s> In the following cases nothing has to be done, because these values are already the primary names of registered character sets: - ISO-2022-JP  </s>
<s> - ISO-2022-JP-2 - ISO-2022-KR - SHIFT_JIS - GB231 - EUC-KR - BIG5  </s>
<s> - KOI-8R  </s>
<s> /Olle Olle Jarnefors, Royal Institute of Technology (KTH) ojarnef@admin.kth.se  </s>
<s> KOI8-R  </s>
<s> This should be "GB2312".  </s>
<s> As somebody else mentioned, this should be "KOI8-R".  </s>
<s> Erik  </s>
<s> Just noticed the following error *in* the draft document: URL: ftp://ds.internic.net/internet-drafts/draft-ietf-http-v11-spec-06.txt 14.45 Warning English and the default character set is ISO-8599-1.  </s>
<s> If a character set other than ISO-8599-1 is used, it MUST be encoded in That should of course be "ISO-8859-1".  </s>
<s> - KW  </s>
<s> No. The MIME specifications have always been broken for that reason.  </s>
<s> RFC 1521 required behavior that no implementation ever obeys -- that being a check of the IANA registry before transmission of a token which is not prefixed by "x-".  </s>
<s> Requirements which serve no useful purpose, and which are directly contradicted by all known implementations, do not belong in any RFC.  </s>
<s> Even if such a requirement were added, it is poor engineering to implement a system that relies on "flag days" in which to switch from existing use of an x-token to use of its registered non-x equivalent.  </s>
<s> The result is that a good implementation treats any "x-" prefix as if it didn't exist, so that the same application won't die when somebody eventually gets around to registering that particular token.  </s>
<s> In other words, a good implementation does not distinguish between registered and non-registered tokens, and at that point there is no reason to use the "x-" prefix for anything.  </s>
<s> Our experience with "x-" prefixes has been uniformly bad; rather than encouraging registration of all tokens, they encourage the easy route of just using the x-token as the standard for that type.  </s>
<s> I see no reason to further encourage their use.  </s>
<s> IANA should certainly continue its normal behavior of never registering "x-" prefixed tokens, but that registration process is outside the scope of HTTP.  </s>
<s> ...Roy T. Fielding Department of Information &amp; Computer Science (fielding@ics.uci.edu)  </s>
<s> No. While I agree that the name "gb2312" is lousy ("euc-cn" would have been better), the descriptions provided with the IANA registrations for gb2312 and gb_2312-80 are: Name: GB_2312-80 [RFC1345,KXS2] MIBenum: 57 Source: ECMA registry Alias: iso-ir-58 Alias: chinese Alias: csISO58GB231280 Name: GB2312 MIBenum: 2025 Source: Chinese for People's Republic of China (PRC) mixed one byte, two byte set: 20-7E = one byte ASCII A1-FE = two byte PRC Kanji See GB 2312-80 PCL Symbol Set Id: 18C Alias: csGB2312 Since the GB_2312-80 entry mentions iso-ir-58, it is clear that this is a single character set in the ISO 2022 sense.  </s>
<s> I.e. this charset does not include the single-byte ASCII characters.  </s>
<s> The gb2312 entry explicitly mentions single-byte ASCII, so it is clear that this is referring to the charset actually used on the net, whose name might more properly be "euc-cn" (to follow euc-kr's and euc-jp's lead).  </s>
<s> By the way, there is an RFC (1922) that proposes even more names for some of the same things: ftp://ds.internic.net/rfc/rfc1922.txt  </s>
<s> This document mentions "cn-gb" and "cn-big5", which appear to be the same as "gb2312" and "big5" respectively, but they have not been added to the IANA registry yet.  </s>
<s> Anarchy and chaos rule.  </s>
<s> Erik  </s>

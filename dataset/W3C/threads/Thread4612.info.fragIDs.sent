<s> I'm sorry if this has already been discussed, but I couldn't find a discussion of how client-side transformation of multiple result-documents will be handled (in web browsers, for example).  </s>
<s> Thanks for these comments.  </s>
<s> Browser vendors have been involved in the  </s>
<s> discussions of these XSLT facilities, but the exact way that multiple result trees might be handled in the browser is not something that the WG considers within its scope - it's a product issue.  </s>
<s> I can only speculate about how browsers might choose to map the abstract concepts in the specification to  </s>
<s> concrete concepts in their implementation.  </s>
<s> The original drafts of the specification caused some resistance because they were written in a way that appeared to restrict implementations too much.  </s>
<s> This obstacle seems to have been cleared, and we can now only wait to see what implementors choose to do.  </s>
<s> Mozilla currently uses XSLT(1) transoformations to display web content.  </s>
<s> However, if multiple result-documents are returned, the browser needs a way to choose an initial result For example, I will pose a hypothetical docbook transformation that separates the transformation results into a TOC, a page for each chapter, and an index.  </s>
<s> These pages will need to link together in various ways.  </s>
<s> 1) is there a mechanism for a browser to know which result-document is the "default"?  </s>
<s> We have tried to avoid giving preferential status to any one result tree, though in practice there will often be one that is output "first".  </s>
<s> An implementation might attach special status to the result tree that is created implicitly, without using an xsl:result-document instruction, or it might impose some convention on the URIs that are used.  </s>
<s> 2) is there a URI by which each result can be accessed individually?  </s>
<s> Yes, the href attribute of the xsl:result-document defines a URI which is intended to provide some kind of handle by means of which an API might access each result tree, or an implementor could define some kind of mapping from these URIs to the names of frames or other browser GUI objects in which the result trees are to be rendered.  </s>
<s> 3) is there a method that can link from one result-document to another?  </s>
<s> Yes, we have taken care to specify that the URIs provided in the href attribute can be used to link from one tree to another.  </s>
<s> The idea is that you would probably use relative URIs for links within the collection of result trees, so that they would survive serialization to any particular location on disk.  </s>
<s> It seems that these would be a necessity if XSLT2 is to be used in any interactive client-side situation.  </s>
<s> If this has not been resolved, I would propose a URI scheme to handle this situation: xlst:source-xml!transformation!result-document  </s>
<s> I don't feel qualified to judge whether the scheme you propose would be  </s>
<s> useful; this is something we are leaving entirely to the browser implementors.  </s>
<s> Many thanks for the comments.  </s>
<s> This area probably hasn't been discussed as much as it should be.  </s>
<s> Michael Kay  </s>
<s> source-xml = relative or absolute URI (exclamation marks must be escaped; relative to linking document) transformation = relative or absolute URI (exclamation marks must be escaped; relative to source-xml, may be left empty for default stylesheet specified by ?xml-stylesheet? or other mechanisms) result-document = relative or absolute URI (exclamation marks must be escaped; relative to source-xml) Examples: xslt:http://www.abc.123/docbook.xml!http://www.docbook.org/doc  </s>
<s> book.xslt2!index.html  </s>
<s> retrieves the source http://www.abc.123/docbook.xml  </s>
<s> transforms it using http://www.docbook.org/docbook.xslt2  </s>
<s> displays the result-document http://www.abc.123/index.html  </s>
<s> xslt:http://www.abc.123/docbook.xml!!index.html  </s>
<s> retrieves the source http://www.abc.123/docbook.xml  </s>
<s> transforms it using the default stylesheet displays the result-document http://www.abc.123/index.html  </s>
<s> After further reading, I now understand that the href specified in result-document is relative to an implementation-defined URI.  </s>
<s> And that the nature of this URI is outside the scope of the XSLT spec.  </s>
<s> However, I still feel that a standardized protocol for (absolute URI) linking to result-documents would be a significant aid, even if these links were transformed internally by browser implementations to other  </s>
<s> formats.  </s>
<s> Is there a WG to consider the xslt: URI scheme as a separate spec?  </s>
<s> --BDS  </s>
<s> I don't think this is within the scope of the XSL WG's activity.  </s>
<s> Although the activity seems worthwhile, I don't think I can offer advice on how it would be best to pursue this: you need to talk to other vendors in the same line of business to see whether there is scope for agreeing a common approach.  </s>
<s> Michael Kay  </s>
<s> Hi Michael et al, I'm peer of XSLT in Mozilla and would like to give my own two cents on the ideas around xsl:result-document in a webbrowser environment.  </s>
<s> Thanks for your note, this is very useful input.  </s>
<s> Upfront, I really like the idea of having multiple output documents in a publishing and maybe even a server environment.  </s>
<s> In a webbrowser on the other hand, xsl:result-document raises quite a few issues on the sandbox.  </s>
<s> One issue is already dealt with, making absolut URIs in xsl:result-document having implementation defined constraints.  </s>
<s> Reading the WD-xslt20-20030502, I don't see the chance to have implementation defined constraints for relative URIs, though.  </s>
<s> The thinking here is that there are no security/sandbox issues in creating a  </s>
<s> result tree, only in serializing it to persistent storage.  </s>
<s> We tried to separate the two things.  </s>
<s> Perhaps we have stretched things too far with the  </s>
<s> notion that a URI can be used to refer to a resource (a result tree) that is  </s>
<s> not persistent.  </s>
<s> The thinking is that you can create as many result trees as  </s>
<s> you like, using any URI that you like, and the transformation API then gives you a way to access these (in-memory) result trees using these URIs as a handle.  </s>
<s> Security concerns only kick in if you try to serialize the result tree to persistent disk storage.  </s>
<s> Very good point, I see the difficulty: and off-hand, I don't see an easy solution.  </s>
<s> Perhaps the handles that are used to refer to in-memory result trees in the API should not be URIs at all; but the problem of defining cross-links between multiple result trees remains.  </s>
<s> Perhaps we need a new URI scheme?  </s>
<s> Now take this to a scenario of a site with split responsibilities.  </s>
<s> Most major sites probably are, and it goes down to simple things as user areas like http://www.junk.net/~whoever/.  </s>
<s> Having no restrictions on relative URIs in xsl:result-document enables a webauthor of one part of the site to shadow pages done by other entities.  </s>
<s> One can really go on and find stranger scenarios.  </s>
<s> But I don't wanna be a bore.  </s>
<s> Not more than necessary.  </s>
<s> I'm not sure I understand this scenario in detail, but I get the general thrust.  </s>
<s> I don't think the WG will have any difficulty allowing the implementation to impose further restrictions, and I will put this on the agenda as issue 183.  </s>
<s> Many thanks for the feedback, Michael Kay  </s>
<s> creating a  </s>
<s> with the  </s>
<s> that is  </s>
<s> trees as Unfortunately, in a client-side implementation this assumption is incorrect.  </s>
<s> A browser uses security checks based on the URI to determine whether a page (a result-tree in this case) may link images, frames, and scripts, whether cookies are available to a page, etc.  </s>
<s> I don't think this matters for the spec, because this security checking is really an implementation detail.  </s>
<s> But it would almost certainly require that any absolute-URI-result-tree be rejected for security reasons out of hand (as is allowed by the spec).  </s>
<s> In addition, if relative URI's are used, the transformation has the potential to "shadow" other content, which is another security issue (also by the implementation).  </s>
<s> --BDS  </s>
<s> Hi Micheal et al.  </s>
<s> Hi Michael et al, I'm peer of XSLT in Mozilla and would like to give my own two cents on the ideas around xsl:result-document in a webbrowser environment.  </s>
<s> Upfront, I really like the idea of having multiple output documents in a publishing and maybe even a server environment.  </s>
<s> In a webbrowser on the other hand, xsl:result-document raises quite a few issues on the sandbox.  </s>
<s> One issue is already dealt with, making absolut URIs in xsl:result-document having implementation defined constraints.  </s>
<s> Reading the WD-xslt20-20030502, I don't see the chance to have implementation defined constraints for relative URIs, though.  </s>
<s> I'm fine with separating serialisation from XSLT, but as the xslt2 spec is more concrete on errors, it should give hints on where the serialisation module might bail.  </s>
<s> I couldn't find any hint on failure-to-write in the serialisation spec, btw.  </s>
<s> I could imagine a xpointer scheme serving good for this.  </s>
<s> Something like foo.xml#xslt-result-doc(part2/chapter5.html)id('target'), maybe xslt:result-doc?  </s>
<s> This has the downside that links between result documents look different when you view the result in a browser (or any other implementation that doesn't serialise) as opposed to when you serialize them.  </s>
<s> Having an xpointer scheme gives the chance to both specify the result document while still being able to identify fragments in the result doc.  </s>
<s> Not sure who'd do the work to actually propose such a scheme, but if we had it, something like this might give a good hint to implementations: Implementations that don't support serialisation MAY facilitate the XPointer scheme xslt-result-doc to expose result documents in their API.  </s>
<s> This would make result documents reside "inside" the source document and resolve all security issues in a non-serialized environment.  </s>
<s> Of course, serialising implementations may throw errors for any effective output URI, so the spec should mention both the error and that the implementation should define when it throws the error.  </s>
<s> (Didn't realise in my first answer that this problem is at least as prominent in implementations that do serialize as in those that don't.)  </s>
<s> Now take this to a scenario of a site with split responsibilities.  </s>
<s> Most major sites probably are, and it goes down to simple things as user areas like http://www.junk.net/~whoever/.  </s>
<s> Having no restrictions on relative URIs in xsl:result-document enables a webauthor of one part of the site to shadow pages done by other entities.  </s>
<s> One can really go on and find stranger scenarios.  </s>
<s> But I don't wanna be a bore.  </s>
<s> Not more than necessary.  </s>
<s> My pleasure Axel  </s>

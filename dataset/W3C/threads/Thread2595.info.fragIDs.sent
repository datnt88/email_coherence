<s> This seems like such an obvious issue that it's hard to believe it's not addressed by the existing protocol but, for the life of me, I can't see it, so I'll "open my mouth and remove all doubt" : Many password oriented security systems have password expiration mechanisms that force users to change passwords on a semi-regular basis.  </s>
<s> When a user's password has not been changed within a system-specific time interval the password is considered "expired" and the user is prompted for a new password the next time she/he logs on.  </s>
<s> Furthermore, many security systems allow a user to change his or her logon password at any time.  </s>
<s> Yet both of these features are, at best, clunky to implement via HTTP.  </s>
<s> Our current hack for allowing users to change password, is to allow users using our software to change passwords by specify a new password after their existing password by separating old password from new password with a colon (:).  </s>
<s> This deeply unsatisfactory on many accounts.  </s>
<s> 1.  </s>
<s> When our server accepts the old-pass:new-pass password, the browser sends this same pair the next time it requests a URL from the same server.  </s>
<s> But, on subsequent attempts, old-pass is no longer valid.  </s>
<s> Unless we do something fancy, this results in a 401 going back to the browser, forcing the user to just enter new-pass.  </s>
<s> Yes, it might be possible to check if new-pass is now the current password but not until after old-pass is rejected and a password violation logged (we can't all control the web server *and* the access control facility).  </s>
<s> Perhaps we can keep a history of successful password changes but is a lot of work if one wishes to make this history survive server outages.  </s>
<s> From an aesthetic point of view, it's just plain grody that the browser is sending old-pass:new-pass on every request to the server.  </s>
<s> 2. If new-pass is invalid (not enough characters, contains an invalid character, whatever), we have no decent way of identifying the problem to the user.  </s>
<s> Perhaps if browsers would display the text of the 401 message in the password pop-up windows ?  </s>
<s> Doing so, however, would produce some serious backword compatibility problems.  </s>
<s> We can also put up a page explaining the problem with an indication that the user should hit "reload" however that's done on whatever browser the user is using (mumble, mumble) and then correct the problem.  </s>
<s> Unfortunately, when the user hits reload, the browser will believe that the user had enterred a valid password (after all, it got an HTML page didn't it ?) so will re-send it producing the same page indicating the same problem.  </s>
<s> Argggggghhhhh !  </s>
<s> Re-directing with a back link produces the same result.  </s>
<s> So what's a poor server to do ?  </s>
<s> Send an explanation page every other time, alternating with 401's ?  </s>
<s> Horrors !  </s>
<s> Another alternative is to provide a password change page but this can be a major pain depending on the access control facility and would result in the loss of any POST data unless many hoops are jumped through.  </s>
<s> 3. There is no decent way to tell the user that his/her password has expired and a new one is required.  </s>
<s> Once again, the current technology is to send down a page that explains the situation to the user, explaining that the user must hit reload (mumble, mumble) and then respond to the password expiry.  </s>
<s> But then you're back to the reload loop problem outlined in 2. There are other problems with the current mechanisms but these 3 are the major ones.  </s>
<s> Clearly, I must be missing something because dealing with expired passwords can't possibly be this bad, can it ?  </s>
<s> It certainly seems that the Digest Access Authentication Scheme won't help much because sending any passwords (new or old) in clear text is antithetical to its operation.  </s>
<s> But a new password *must* be sent in clear text (though advisedly over an SSL connection) unless one can control the encryption of the passwords on the access control facility and change it to something the browser understands (we don't and can't).  </s>
<s> On the off chance that I'm not missing anything, I would think a new response header field such as "WWW-Authnewpass:" with values such as "disallow", "allow", "require" would do the trick.  </s>
<s> Perhaps a new response message indicating "Invalid new password" would be useful to notify the browser of a common error.  </s>
<s> The browser would need a new request header ("Authnewpass:" ?) that contains any new password provided.  </s>
<s> If the new password appears to be accepted, the browser would use the new password in subsequent accesses to the server.  </s>
<s> Perhaps any browser that supports "Authnewpass:" would send it every time followed by a null string to indicate that it supports this facility so that the server can drop back to old/clunky mode of operation, otherwise.  </s>
<s> Yes, yes, I understand HTTP 1.1 is frozen, so I suppose a reasonable response is to tell me to go bark up another tree.  </s>
<s> I'm actually kinda hoping someone will respond and tell me how stupid I am and how password expirations are easily and elegantly handled by the current protocols (a little public humiliation never hurt anyone).  </s>
<s> Sorry about the long post and thanks for your time.  </s>
<s> Alex Kodat Sirius Software Cambridge, MA  </s>
<s> Some history.  </s>
<s> The HTTP Authentication metchanism was invented back in 1993.  </s>
<s> The principle constraint on the design was the patent encumberances on all known forms of public key cryptography.  </s>
<s> I would much have preferred to have been able to propose a public key based scheme at that time.  </s>
<s> Today the Diffie Helleman patent has expired and the RSA patent will expire in very short order.  </s>
<s> There is no reason to propose another password based scheme.  </s>
<s> We should look to phase out the use of passwords entirely - except for passphrases used to secure private keys.  </s>
<s> The PKIX group has proposed a complete set of standards for use and management of PKI.  </s>
<s> Commercial products provide a complete infrastructure for deployment in enterprises both large and small.  </s>
<s> Phill  </s>
<s> While I wholeheartedly agree that PKCS is *far* superior to password based schemes, I suspect passwords will be around for some time to come.  </s>
<s> The idea that every workstation out there will be equipped with smart-card readers and all users will be walking around with smart cards that contain their personal client certificate is lovely but not one I think we're likely to see everywhere for many years to come.  </s>
<s> Password based systems are just too easy to manage and can be trivially used with existing legacy systems.  </s>
<s> It's kinda like the https vs. shttp issue or electronic wallets vs. credit card numbers over SSL: the obviously superior technology is adopted slowly because the easier to manage technology is considered "good enough" (BTS) and has virtually no administrative overhead whereas the newer superior technology has considerable administrative overhead.  </s>
<s> Just a prediction that 10 years from now people will still be using passwords with we-based applications and will still be sending credit card numbers over SSL.  </s>
<s> If there's a way I can help our customers using password based systems I'd like to be able to do so.  </s>
<s> Alex Kodat Sirius Software Cambridge, MA  </s>
<s> While I'm sure this thread is off-topic for http-wg, I agree with Alex that passwords are here to stay, and I agree with Phillip that PKI is too.  </s>
<s> The big question is: How will passwords be used?  </s>
<s> I sincerely doubt that the dominant form will be PINs for smart cards, and I know we can do better than simple local key files encrypted with a password/phrase.  </s>
<s> For another vision of strong password + PKI systems, visit http://www.IntegritySciences.com .  </s>
<s> -- dpj  </s>

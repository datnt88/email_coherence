In testing my servlet which uses Tidy before doing XSLT processing, I've been uploading copies of various HTML pages on the Internet. 
This code: LINK REL="stylesheet" HREF="http://www.thestreet.com/tsc/common/stylesheets/global.css" 
TYPE="text/css" Resulted in (XHTML mode): LINK REL="stylesheet" HREF="http://www.thestreet.com/tsc/common/stylesheets/global.css" 
TYPE="text/css" Besides the fact that it's not XHTML (lower case), it's not well-formed, as it should be an empty element. 
I understand what the problem is here: LINK should be under HEAD , not STYLE . 
For my application, I don't particularly care if the XHTML output is valid or not, but I definitely care if it's well-formed. 
It would be nice if there was a way to incorporate, say, a SAX parser to ensure the output is well-formed, and give the user options as to what to do when it's not well-formed. 
I would like a method returning true or false, to let me know whether I should go on or not. 
What exactly is the criterion for Tidy outputting something versus nothing? 
In this case, LINK in its context, should be an unrecognized element... 
Any further thoughts on this would be appreciated. 
Thanks, Evan Lenz elenz@xyzfind.com 
XYZFind Corp. "Building Better Search" The input is valid, style data is CDATA. 
In XHTML it's PCDATA. 
I think Tidy has to assume, that the input code is close to be perfect, so it can do two things: * encode occurences of  and &amp; into  and &amp;amp; or * wrap the style data into ![CDATA[]] 
Any other action (besides reporting an error) isn't appropriate in my opinion. 
The input is valid HTML, so there aren't errors tidy has to correct. 
The thing tidy does in your case is conversion between HTML and XHTML syntax rules, so one of the above actions (the latter is recommended in XHTML/1.0) should take place. 
What you want and what you've meant with your code isn't the right thing to do. 
regards, Bj?rn H?hrmann ^ mailto:bjoern@hoehrmann.de ^ http://www.bjoernsworld.de am Badedeich 7 ? 
Telefon: +49(0)4667/981ASK ? 
http://bjoern.hoehrmann.de 
25899 Dageb?ll # PGP Pub. 
KeyID: 0xA4357E78 # http://learn.to/quote 
+{i} This is related to the JavaScript problem I mentioned in my previous reply. 
Tidy is interpreting the style element's content as just text, not a tag to be tidied. 
The "proper" XHTML output should escape the preceding the LINK, or wrap the content in a CDATA section. 
The problem is that, as you indicated in another message, many Tidy users want Tidy's XHTML output to be directly renderable by today's browsers where escaped 's and XML CDATA sections aren't recognized. 
One workaround is for Tidy to hide the CDATA section markup in comments. 
This produces well-formed XML and that is also directly renderable by existing browsers. 
The gotcha is that every script and style language has its own comment syntax, so Tidy can only recognize a limited set. 
--Randy I stand corrected; it should be just character data, which I'm just fine with. 
All I want for Christmas is well-formedness. 
Thanks, Evan Lenz elenz@xyzfind.com 
XYZFind Corp. "Building Better Search" Behalf Of Bjoern Hoehrmann | In testing my servlet which uses Tidy before doing XSLT processing, I've | been uploading copies of various HTML pages on the Internet. 
| This code: | STYLE | LINK REL="stylesheet" | HREF="http://www.thestreet.com/tsc/common/stylesheets/global.css" | TYPE="text/css" | /STYLE | Resulted in (XHTML mode): | LINK REL="stylesheet" | HREF="http://www.thestreet.com/tsc/common/stylesheets/global.css" | TYPE="text/css" The input is valid, style data is CDATA. 
In XHTML it's PCDATA. 
I think Tidy has to assume, that the input code is close to be perfect, so it can do two things: * encode occurences of  and &amp; into  and &amp;amp; or * wrap the style data into ![CDATA[]] 
Any other action (besides reporting an error) isn't appropriate in my opinion. 
The input is valid HTML, so there aren't errors tidy has to correct. 
The thing tidy does in your case is conversion between HTML and XHTML syntax rules, so one of the above actions (the latter is recommended in XHTML/1.0) should take place. 
What you want and what you've meant with your code isn't the right thing to do. 
regards, Bj?rn H?hrmann ^ mailto:bjoern@hoehrmann.de ^ http://www.bjoernsworld.de am Badedeich 7 ? 
Telefon: +49(0)4667/981ASK ? 
http://bjoern.hoehrmann.de 
25899 Dageb?ll # PGP Pub. 
KeyID: 0xA4357E78 # http://learn.to/quote 
+{i} So Santa has do to more sports? 
SCNR, Bj?rn H?hrmann ^ mailto:bjoern@hoehrmann.de ^ http://www.bjoernsworld.de am Badedeich 7 ? 
Telefon: +49(0)4667/981ASK ? 
http://bjoern.hoehrmann.de 
25899 Dageb?ll # PGP Pub. 
KeyID: 0xA4357E78 # http://learn.to/quote 
+{i} 

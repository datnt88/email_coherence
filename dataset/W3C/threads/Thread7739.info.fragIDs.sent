<s> Caught by the spam filter.  </s>
<s> - Jim Behalf Of John Stracke properties Our discussion of compound documents reminded me of an idea I toyed with last summer: encoding a DAV resource, bundled with its properties, into a MIME entity.  </s>
<s> I've attached a possible Draft describing one way to do this.  </s>
<s> It's quite preliminary--it describes the XML elements informally instead of with a DTD, and it isn't formatted to be published as a Draft--but I hope it gets the idea across.  </s>
<s> It supports all the currently extant types of DAV resources (ordinary, reference, and collection), and discusses (briefly :-) how to use it with MKCOL.  </s>
<s> |John Stracke | My opinions are my own | S/MIME &amp; HTML OK | |francis@ecal.com|============================================| |Chief Scientist | NT's lack of reliability is only surpassed | |eCal Corp. | by its lack of scalability.  </s>
<s> -- John Kirch |  </s>
<s> So, I've read through this proposal, and while I like its goals, I disagree with its mechanisms.  </s>
<s> It seems to me to be a bad idea to submit a resource by reference, since it requires the server to receive the reference, then go and perform another network request to try and get the value of the resource.  </s>
<s> The server could  </s>
<s> not then give a status response to the first request until it had finished dereferencing the reference.  </s>
<s> Also, the assumption is that the request would be a GET witohut accept headers.  </s>
<s> But what if someone subsequently did want to use accept headers.  </s>
<s> This adds extra marshalling complexity.  </s>
<s> Furthermore, this could be used for some subtle attacks, for example submitting a URL to an infinitely large resource, trying to fill the server's storage, or by submitting a lot of requests, and hence effecting a denial of service attack.  </s>
<s> Beyond the problems with passing a reference, there is the issue of encoding arbitrary binary information inside an XML element, which is difficult to do in XML.  </s>
<s> Even in CDATA sections you need to watch out for the escape  </s>
<s> sequence and encode around it if it occurs naturally.  </s>
<s> As a result, I think the best way to encode a resource in a MIME message is to put the body in one MIME chunk, and the properties in another chunk, and send it together as an appropriate multipart/ type.  </s>
<s> Since one of the goals  </s>
<s> is to support submission of a bunch of resources together in a MKCOL body, this could be done by sending a series of nested multiparts, each top level multipart containing one internal multipart, containing two parts, one for the resource, one for properties.  </s>
<s> The memo only discusses using this encoding with MKCOL, but it seems that it would be quite useful to use it on individual, existing resources.  </s>
<s> Perhaps a RPUT method should be defined, which only will write if the resource is locked, and which will write the body and the properties in one atomic operation.  </s>
<s> I can see this being useful to a number of clients.  </s>
<s> - Jim  </s>
<s> Oops. Yeah, that would be a problem.  </s>
<s> I just left it in there because it seemed like a nice theoretical win that fell out of the decision to use multipart/related and cid: URIs.  </s>
<s> Uh...I didn't think I mentioned putting binary information in the XML.  </s>
<s> I mentioned embedding the body of the resource into the XML, *if* the resource was itself XML.  </s>
<s> Hmm. That's a good alternative, yeah.  </s>
<s> |John Stracke | My opinions are my own | S/MIME &amp; HTML OK | |francis@ecal.com|============================================| |Chief Scientist | NT's lack of reliability is only surpassed | |eCal Corp. | by its lack of scalability.  </s>
<s> -- John Kirch |  </s>

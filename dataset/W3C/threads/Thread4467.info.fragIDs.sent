<s> In message Divison of decimal numbers is not well specified.  </s>
<s> There are two aspects of the problem: 1.  </s>
<s> How many fraction digits should be kept?  </s>
<s> For example, what is the  </s>
<s> result of 1.0 div 3.0?  </s>
<s> 2. Should the answer be rounded or truncated?  </s>
<s> I have been told previously that the answer is "implementation defined", but it's hard for me to accept arithmetic that is "implementation defined".  </s>
<s> Since I am chairman of the OASIS XSLT Conformance committee, I would like to be able to produce a test suite that expects known answers to numerical operations.  </s>
<s> I have a suggestion: For XSLT processors which are schema-aware, it is possible to specify the number of fraction digits in the result from any operation.  </s>
<s> In this case, my first question has a clear answer.  </s>
<s> I propose that some mechanism be added to XSLT so that, even without schemas, the number of fraction digits can be specified.  </s>
<s> I believe that this would solve my problem, and that, along with a statement in the spec about rounding, it would make decimal arithmetic precise, as it should be.  </s>
<s> Because this is an F&amp;O comment but was raised against XSLT, we haven't really got round to discussing it properly yet.  </s>
<s> We clearly need to do so.  </s>
<s> Section 6.2.4 (op:numeric-divide) currently says nothing about decimal division, not even that the results are implementation defined.  </s>
<s> I would like to offer the following suggestion for a more interoperable definition of decimal division:  </s>
<s> If the types of $arg1 and $arg2 are xs:integer or xs:decimal, then the result is of type xs:decimal.  </s>
<s> The precision of the result is implementation-defined, but it must be not be less than min((18, max((p1, p2)), R)) digits, where p1 is the precision of $arg1, p2 is the precision of $arg2, and R is the number of digits (possibly infinite) required to represent the exact mathematical result.  </s>
<s> "Precision" here means the total number of significant decimal digits in the value; all digits are considered significant other than leading zeros before the decimal point and trailing zeros after the decimal point.  </s>
<s> If rounding is necessary, the value must be rounded towards zero.  </s>
<s> Handling of overflow and underflow is defined in section 6.2.  </s>
<s> Michael Kay  </s>
<s> (personal contribution)  </s>
<s> Hi Mike,  </s>
<s> Using the precision of the two arguments to determine the precision of the result leads to results that I find strange.  </s>
<s> For example: 1 div 3 = 0.3 1000000 div 3000000 = 0.3333333 0.00001 div 0.00003 = 0.33333 It would make a lot more sense to me to just use min((18, R)), but any definition here is better than none.  </s>
<s> What cases were you thinking of that led you to suggest using the precision of the arguments to determine the precision of the result?  </s>
<s> Cheers, Jeni Jeni Tennison  </s>
<s> You're right, the formula doesn't work in these cases.  </s>
<s> The cases I was thinking of are where p1 or p2 are  18, which would mean the correct formula is min((max((18, p1, p2)), R)) Michael Kay  </s>

Tnks, Amancio 
Plugins work in amaya with libwww. 
We can't, at the present time guaratee that everything works well, but we expect your comments about this item to improve the amaya plug-ins API. 
655 Avenue de l'Europe | e-mail: Ramzi.Guetari@w3.org 
38330 Montbonnot Saint Martin - France | http://www.w3.org 
Perhaps you can explain where and how in amaya the plugins are called. 
I don't see any functions or actual code which makes use of the table amayaFunctionsTable which is initialized in pluginapi.c: 
Ap_InitializeAmayaTable You see I can't find any code which decides based upon the loaded plugin MIME types to call the appropriate plugin entry. 
For instance, I don't see any calls to Ap_CreatePluginInstance. I think that amaya is correctly loading and characterizing plugins: {hasty} amaya Size of NPAmayaFuncs = 72 ***** Ap_InitializePlugin ***** Plugin type: midi suffixes: mid,midi comment: A HREF=mailto Plugin type: hoff@bnl.gov 
Larry Hoff's /A MIDIX plugin version 1.00;audio/x-midi suffixes: mid,midi comment: A HREF=mailto Plugin name: hoff@bnl.gov 
Larry Hoff's /A MIDIX plugin version 1.00; Suffixes: mid,midimid,midi ***** Ap_InitializePluginTable ***** Size of NPPluginFuncs = 52 Tnks! 
Amancio From The Desk Of Ramzi GUETARI : 
At the begenning Amaya loades the dynamic libraries of plug-ins (function TtaBrowsePluginDirectory, file: pluginbrowse.c) 
to be ready to execute any known plug-in. 
Ap_CreatePluginInstance is called by the function Ap_DrawPicture (file pluginhandler.c). 
Indeed, plug-ins are treated as image files in Amaya (Ap_DrawPicture is called by the function DrawPicture file picture.c). 
In particular, the parsing of the mime type is also done in the file picture.c by the function Match_Format which calls the function Ap_MatchFormat (pluginghandlers.c). 
The result of this parsins allows to create an instance of the right plug-in. 
Ramzi. 
655 Avenue de l'Europe | e-mail: Ramzi.Guetari@w3.org 
38330 Montbonnot Saint Martin - France | http://www.w3.org 
I wonder if I well understood your question and I hope my answer will satisfy you. 
Images are recognized with respect to IMG tag in html files. 
The second step consists to determine the right type of a given image: gif, jpeg, ... This is done by the function Match_Format. 
In the plug-ins case, they are recognized the OBJECT element in HTML files. 
Then, with respect to the mime type of the plug-in an instance is created and the data file (DATA element in the html file) is passed to the plug-in as a stream. 
How does the plug-in behave and how does it treat the stream is the business of the plug-in. 
The task of Amaya stops after creating the instance and passing the stream to it (except other communications required by the plug-in). 
Ramzi. 
Cool, your explanation helps! 
Got another question, How does amaya determine what a picture is? 
Thank you now that explains every thing that I need to know in order to support plugins . 
It appears that the plugin interface seems to work on FreeBSD 3.0 with very minor change to the pluging library . 
Specifically, our dlsym interface requires us to prefix the symbol to be loaded by "_". 
For example: ptr_NPP_Initialize = (int (*) ()) dlsym (pluginTable [indexHandler]- pluginH andle, "_NPP_Initialize"); Browsing around the web , I found this HTML format for invoking plugins: I got it from : Which was pointed by suns' cool tcl applet of the week. 
Amaya doesn't recognize the html tag: embed Not sure if this is a valid html tag or not. 
Best Regards, Amancio From The Desk Of Ramzi GUETARI : 
Cool, your explanation helps! 
Got another question, How does amaya determine what a picture is? 

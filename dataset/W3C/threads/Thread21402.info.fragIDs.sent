<s> Hi all, I noticed that annotations posted with Amaya aren't including time zone information in the date they post.  </s>
<s> They send something like: 2003-03-04T11:04:10 which doesn't give enough information.  </s>
<s> what we need is more like: 2003-03-04T11:04:10-06:00 I think the protocol document has the time zone in the created and date fields.  </s>
<s> thanks, Doug  </s>
<s> We use UTC and the times should have a Z after the time but is was dropped out by accident in our implementation.  </s>
<s> It was supposed to be corrected but I'll check that it is on the todo list.  </s>
<s> Here is an extract from the new protocol document (http://www.w3.org/2001/Annotea/User/Protocol.html).  </s>
<s> Is there a reason why this is not enough?  </s>
<s> The times can be converted to local time by the client if that is known.  </s>
<s> Marja  </s>
<s> Adding the 'Z' would be sufficient to specify the point in time (and be ISO8601 compliant).  </s>
<s> But sending UTC will lose the information about which timezone the poster was in, which could be useful.  </s>
<s> If you send local time + timezone, the server can retain that info.  </s>
<s> --Brent  </s>
<s> Please correct me if I'm wrong, but i'm using ZAnnot 0.3 and the dates are sent like this: a:created="2003/02/06 11:28:08 +0100" d:date="2003/02/06 11:28:08 +0100" Shouldn't they be in ISO 8601 format, as specified in the Annotea Protocol document?  </s>
<s> Thanks a lot, Pierre Queinnec.  </s>
<s> In the new RDF specifications there is the possiblity to specify a datatype for a literal.  </s>
<s> So we can write a date in one or another format, and provide a datatype that identifies the year, month, second, etc so they can be related to a different string format for date/time.  </s>
<s> For now there is only what DC says about date at Recommended best practice for encoding the date value is defined in a profile of ISO 8601 [W3CDTF] and follows the YYYY-MM-DD format.  </s>
<s> and a similar note in the Annotation schema itself yyyy-mm-ddThh:mm:ssZ format recommended So it seems legal to use any kind of date format, if not carefully following the recommendations.  </s>
<s> (Having datatyping will be something that can help us here...) cheers Chaals  </s>
<s> Hmmm. Indeed you are correct.  </s>
<s> Unfortunately, changing this seems to break the latest CVS Annozilla since Mozilla's javascript doesn't natively understand ISO 8601 dates.  </s>
<s> I'll release a new ZAnnot that corrects this once Annozilla 0.4 comes out.  </s>
<s> In the meantime, this shouldn't cause problems for anyone since Amaya seems to just treat it as a string.  </s>
<s> But if anyone is interested I can post a patch.  </s>
<s> --Brent  </s>
<s> The only place where the dates are used in Amaya is when doing reply threads.  </s>
<s> They are used during the sort.  </s>
<s> I'm upgrading the date functions of the Annotea part of Amaya to take into account this.  </s>
<s> And yes, it was a bug, the 'Z' was missing for some mysterious reason.  </s>
<s> -jose  </s>
<s> A follow-up,  </s>
<s> We modified the Amaya code so that now we respect the ISO 8601 format, as specified in [1].  </s>
<s> We can parse both formats: 1994-11-05T08:15:30-05:00 1994-11-05T13:15:30Z  </s>
<s> And we output the first format now (with the time zone offset).  </s>
<s> The patch is commited to CVS and will be available in the next Amaya release.  </s>
<s> -jose  </s>
<s> [1] http://www.w3.org/TR/NOTE-datetime  </s>
<s> For [backward] compatibility, the Amaya fix will also accept timestamps that have no time zone designator.  </s>
<s> It will treat these as if they are in the local time of the current Amaya session.  </s>
<s> At the present, Amaya only parses this data when it sorts the list of replies to an annotation thread.  </s>
<s> I believe that the Amaya fix makes this part of Amaya support the full syntax of [1]; specifically, the seconds are optional and fractions of sections are accepted (and ignored).  </s>

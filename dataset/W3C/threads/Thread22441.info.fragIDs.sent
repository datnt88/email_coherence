<s> Vidur, I have not seen any document describe a common way to normalize HTML that is poorly formed w.r.t. the DOM.  </s>
<s> This seems important if all DHTML clients are to respond to JavaScript in the same way.  </s>
<s> For instance, does not produce a valid DOM tree.  </s>
<s> I can see two ways of representing this: b i four ----- three one i two This gives proper style inheritance, but JavaScript access to i will not be correct unless i remembers it is in multiple parts of the tree.  </s>
<s> On the other hand: b four one i two /b three Gives proper style inheritance and proper JavaScript access, but results in nodes under b that aren't really bold, and introduces end-tags to the hierarchy, as well as bounding box calculation complexities.  </s>
<s> Is this a question for the DOM working group?  </s>
<s> Do all clients need to build a normalized DOM tree the same way?  </s>
<s> Or should clients do whatever they think makes most sense, as long as the JavaScript behavior is the same?  </s>
<s> Thst is, getting the inner/outer text works as expected, changing the text color works as expected, etc. David David Mott, Network Computer Inc. mott@nc.com http://www.nc.com  </s>
<s> Actually, the rule is that it must be a valid HTML, which is always properly nested.  </s>
<s> If it isn't I believe it errors (obviously since it's very clear that XML must nest correctly, there's not problem there).  </s>
<s> If the text doesn't nest right, the browser is at fault for interpretting it incorrectly.  </s>
<s> Netscape and Microsoft don't worry about nesting order, but the spec does.  </s>
<s> This is partially true (or at least I think it is.  </s>
<s> I couldn't completely parse the entire response).  </s>
<s> It is true that the spec currently only discusses well-formed HTML and XML.  </s>
<s> Our supposition was that most of the content that uses the DOM will be new and, hence, forcing the markup to be well-formed is a reasonable constraint.  </s>
<s> This doesn't address scripts or applications that attempt to deal with (potentially illegal) legacy content.  </s>
<s> It also doesn't address cases (like FORM tags that don't have clean nesting boundaries) which are acceptable based on current practice.  </s>
<s> The issue of having a cannonical way to deal with non well-formed content (at least for HTML) has been brought up in the working group.  </s>
<s> We haven't come to a resultion on how or if it should be done.  </s>
<s> --Vidur  </s>

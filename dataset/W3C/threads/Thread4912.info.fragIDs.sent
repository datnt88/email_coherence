<s> In http://lists.w3.org/Archives/Public/public-qt-comments/2004Feb/0910.html  </s>
<s> Steve Buxton requested that we define 'collation' I did some research and tried to find a definition but did not find anything satisfactory.  </s>
<s> Here's an attempt at a definition.  </s>
<s> Please comment.  </s>
<s> A collation is an artefact that assigns a sort order for every codepoint or sequence of codepoints.  </s>
<s> The sort order is implementation dependent and can vary widely.  </s>
<s> The sort order may or may not distinguish between lower and upper-case variants of codepoints or accented and unaccented versions of codepoints.  </s>
<s> It may also choose to ignore punctuation between certain codepoints.  </s>
<s> All the best, Ashok  </s>
<s> Gentlepeople, My apologies for entering this discussion rather late, even though it is one of my favorite topics; I've been out of the country on business and am just now catching up on email.  </s>
<s> The most pithy definition of "collation" that I can devise would read something like this: collation: A specification of the manner in which character strings are compared and, by extension, ordered.  </s>
<s> That definition says absolutely nothing about the technology used to perform the comparisons/orderings, nor about how to specify a collation in any particular context.  </s>
<s> I think those omissions are a strength of the definition.  </s>
<s> Such a definition does not preclude collations based on the Unicode Collation Algorithm (UCA), proprietary mechanisms, or even so-called "phone book" collations.  </s>
<s> I, in agreement with the XML Query WG (and, presumably, the XSL WG), would oppose any definition that might preclude some collation that our implementations might use or that our customers might demand.  </s>
<s> Igor, you have raised some interesting points, but I don't think that we are in any disagreement about the goals.  </s>
<s> Nonetheless, I think that I do disagree with your statement that the UCA "cannot be implemented correctly when you compare or match just parts of the strings (represented by the collation units)".  </s>
<s> Perhaps it's a matter of interpretation, because I believe that such comparisons can be done, but (as I think you said) the collation units for the entire set of strings must be computed in order for them to be done.  </s>
<s> You argue that this cannot be implemented in a reasonable period of time, but others may well disagree (indeed, some may already have implemented such facilities), so this is not a useful argument against such a requirement.  </s>
<s> As Mike Kay said, "Whether a real collation actually operates in this way is irrelevant, it only needs to produce the same results as if it did so".  </s>
<s> I especially disagree with your statement that "Just anoter example from  </s>
<s> the Unicode specs which theoretically cannot be implemented (for contains or any other collation function) using just collation elements".  </s>
<s> I am convinced, after inspecting UTR #10 and spending a bit of time thinking about this, that matching such as that required by fn:contains() can readily be implemented using just collation elements.  </s>
<s> It might (or might not) be claimed that doing so would be time-consuming or perhaps inefficient, but "theoretically cannot be implemented" is very hard to swallow.  </s>
<s> That seems tantamount to a claim that the UCA cannot be implemented ("for...any other collation function"), even in theory, which is patently absurd.  </s>
<s> Surely fn:compare($arg1, $arg2, $collation) is "any...collation function".  </s>
<s> Do you really mean to imply that it is theoretically impossible to implement that function?  </s>
<s> Mike also asked about what assumptions can a system make about a collation, such as transitivity, symmetry, etc.  </s>
<s> This is an area fraught with peril, except when the nature of the collation is generally known.  </s>
<s> For example, I share your belief that collations based on the UCA are transitive, symmetrical, etc., but I can easily imagine other collations that do not share all of, perhaps any of, those properties.  </s>
<s> That makes it dangerous for a system to make universal assumptions.  </s>
<s> Of course, a partial solution (which I think I could support) to this problem is to say that the results of collations that do not support those properties is implementation-defined. (Mike, with respect, I am troubled by your lengthy, almost algorithmic, definition of a collation, in part because it seems to presume something very like the UCA, but also in part because I see no need for such detailed semantics to be included in the definition.  </s>
<s> I strongly prefer my much more terse and general definition.  </s>
<s> For similar reasons, I am uncomfortable with Ashok's proposed definition; again, it goes into too much detail and I don't think we need to provide a tutorial on the possible behaviors that collations can be built to provide.) Hope this helps, Jim = Facts are facts.  </s>
<s> However, any opinions expressed are the opinions = = only of myself and may or may not reflect the opinions of anybody = = else with whom I may or may not have discussed the issues at hand.  </s>
<s> =  </s>
<s> the Unicode specs  which theoretically cannot be implemented (for contains or any other collation function) using  just collation elements".  </s>
<s> I agree this point by itself is incorrect.  </s>
<s> I wrote it when I described situation when a collation element calculated based only on the part of the string it represents.  </s>
<s> Collation is context sensitive according to the Unicode specs.  </s>
<s> String comparison (and matching) cannot be implemented correctly just by direct independant comparison of the collation elements calculated this way.  </s>
<s> Context sensitive collation element calculations with following direct comparison of the collation elements is OK.  </s>
<s> I am not sure, that such algorithm could be really efficient.  </s>
<s> Igor Hersht XSLT Development IBM Canada Ltd., 8200 Warden Avenue, Markham, Ontario L6G 1C7 Jim Melton jim.melton@acm.  </s>
<s> org To Igor Hersht/Toronto/IBM@IBMCA 06/09/2004 08:27 cc PM "Michael Kay" mhk@mhk.me.uk , ashokmalhotra@alum.mit.edu, public-qt-comments@w3.org,  </s>
<s> Stephen.Buxton@oracle.com  </s>
<s> Subject RE: PLease define 'collation' Gentlepeople, My apologies for entering this discussion rather late, even though it is one of my favorite topics; I've been out of the country on business and am just now catching up on email.  </s>
<s> The most pithy definition of "collation" that I can devise would read something like this: collation: A specification of the manner in which character strings are compared and, by extension, ordered.  </s>
<s> That definition says absolutely nothing about the technology used to perform the comparisons/orderings, nor about how to specify a collation in any particular context.  </s>
<s> I think those omissions are a strength of the definition.  </s>
<s> Such a definition does not preclude collations based on the Unicode Collation Algorithm (UCA), proprietary mechanisms, or even so-called "phone book" collations.  </s>
<s> I, in agreement with the XML Query WG (and, presumably, the XSL WG), would oppose any definition that might preclude some collation that our implementations might use or that our customers might demand.  </s>
<s> Igor, you have raised some interesting points, but I don't think that we are in any disagreement about the goals.  </s>
<s> Nonetheless, I think that I do disagree with your statement that the UCA "cannot be implemented correctly when you compare or match just parts of the strings (represented by the collation units)".  </s>
<s> Perhaps it's a matter of interpretation, because I believe that such comparisons can be done, but (as I think you said) the collation units for the entire set of strings must be computed in order for them to be done.  </s>
<s> You argue that this cannot be implemented in a reasonable period of time, but others may well disagree (indeed, some may already have implemented such facilities), so this is not a useful argument against such a requirement.  </s>
<s> As Mike Kay said, "Whether a real collation actually operates in this way is irrelevant, it only needs to produce the same results as if it did so".  </s>
<s> I especially disagree with your statement that "Just anoter example from the Unicode specs which theoretically cannot be implemented (for contains or any other collation function) using just collation elements".  </s>
<s> I am convinced, after inspecting UTR #10 and spending a bit of time thinking about this, that matching such as that required by fn:contains() can readily be implemented using just collation elements.  </s>
<s> It might (or might not) be claimed that doing so would be time-consuming or perhaps inefficient, but "theoretically cannot be implemented" is very hard to swallow.  </s>
<s> That seems tantamount to a claim that the UCA cannot be implemented ("for...any other collation function"), even in theory, which is patently absurd.  </s>
<s> Surely fn:compare($arg1, $arg2, $collation) is "any...collation function".  </s>
<s> Do you really mean to imply that it is theoretically impossible to implement that function?  </s>
<s> Mike also asked about what assumptions can a system make about a collation, such as transitivity, symmetry, etc.  </s>
<s> This is an area fraught with peril, except when the nature of the collation is generally known.  </s>
<s> For example, I share your belief that collations based on the UCA are transitive, symmetrical, etc., but I can easily imagine other collations that do not share all of, perhaps any of, those properties.  </s>
<s> That makes it dangerous for a system to make universal assumptions.  </s>
<s> Of course, a partial solution (which I think I could support) to this problem is to say that the results of collations that do not support those properties is implementation-defined. (Mike, with respect, I am troubled by your lengthy, almost algorithmic, definition of a collation, in part because it seems to presume something very like the UCA, but also in part because I see no need for such detailed semantics to be included in the definition.  </s>
<s> I strongly prefer my much more terse and general definition.  </s>
<s> For similar reasons, I am uncomfortable with Ashok's proposed definition; again, it goes into too much detail and I don't think we need to provide a tutorial on the possible behaviors that collations can be built to provide.) Hope this helps, Jim = Facts are facts.  </s>
<s> However, any opinions expressed are the opinions = = only of myself and may or may not reflect the opinions of anybody = = else with whom I may or may not have discussed the issues at hand.  </s>
<s> =  </s>

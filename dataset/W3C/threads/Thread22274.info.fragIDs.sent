<s> I don't know how to subscribe to this mailing list.  </s>
<s> But I have a comment to DOM Level 1.  </s>
<s> I think that the interface DocumentType should have a method which returns default value of a attribute, like DOMString getDefaultAttribute(in DOMString element_name, in DOMString attribute_name); "Fundamental Interfaces" does not include DocumentType.  </s>
<s> But the method getAttribute of Element should search DTD for default value.  </s>
<s> Implementators of Fundamental Interfaces who don't care about the structure of DocumentType could call such method if doctype of Document is not null.  </s>
<s> I am developping my own DOM in Perl, then I noticed it.  </s>
<s> // (UENO Kojun) / k.ueno@psynet.net,  </s>
<s> kojun@ann.ne.jp /  </s>
<s> I posted the following on the DOM IG's mailing list a while back.  </s>
<s> I think  </s>
<s> it covers most of the things that the DocumentType has to tell us.  </s>
<s> I've tried to generalize from DTDs so it can also support DCD, and maybe other schema proposals.  </s>
<s> I haven't yet compared it to the draft that Arnaud has made available, and it may be missing needed features; if you see a mistake, please say so!  </s>
<s> DocumentType has to be able to tell us: a) The type(s) of the acceptable Root element(s).  </s>
<s> Some of the schema designs allow more than one valid choice (to avoid the need for a functionless wrapper element).  </s>
<s> b) The type(s) and sequence(s) of children that each kind of element will  </s>
<s> permit.  </s>
<s> To insulate us from possible variation in how these rules are expressed in the schema langauges, I'd suggest making this a query that asks "If I was to do nodeX.insertBefore(nodeY,nodeZ), where X and Z are known, what types of nodes would be permitted as Y?" Note that I'm only  </s>
<s> suggesting checking the structure upward and backward from this point, not the following nodes, since a legal may require insertion of several nodes before Z rather than just one.  </s>
<s> c) The type(s) of attributes that each type of element will permit/require, together with acceptable values and default and so on.  </s>
<s> Note that in some schema languages, this depends on the context in which the element appears, so we may have to pass in a specific element, in context, rather than just an element's nodename.  </s>
<s> d) Whether a node's contents are valid, given the rules used above.  </s>
<s> This could be more tightly optimized than checking the single-node calls repeatedly.  </s>
<s> This is the real validation test; the preceeding two are primarily provided for directed editing.  </s>
<s> The application would decide whether it wants to check each node as it's built or defer that to a go/no-go test on larger chunks of the document; this may mean the validate call should be able to operate either as a shallow check (if the tree is being checked bottom-up) or as a deep tree-walk (if an entire subtree is to be validated at once).  </s>
<s> Failure might return the first node that isn't acceptable where it stands.  </s>
<s> That isn't necessarily the point of error, but it's probably the best we can do to help the user find the problem.  </s>
<s> e) Entity and Notation information is already covered by the Level 1 API.  </s>
<s> I'm not wild about the way in which they're handled -- I'd rather have a get-by-name query against the DocumentType itself rather than retrieving the NamedNodeMap and then querying that, especially since some schema proposals may have to gather data from several document descriptions -- but it's workable.  </s>
<s> There may be some details that have to be filled in; I haven't used either Entities or Notations enough to be sure about that.  </s>
<s> Joe Kesselman / IBM Research Unless stated otherwise, all opinions are solely those of the author.  </s>
<s> This is a very interesting document indeed!  </s>
<s> One simplification:  </s>
<s> It's not clear that such a list is easy to compute.  </s>
<s> I would rather make the legal element types known, and then simply ask: is this type a legal predecessor of existing node Z? (X is just Z.getParent()).  </s>
<s> John Cowanhttp://www.ccil.org/~cowancowan@ccil.org  </s>
<s> You tollerday donsk?  </s>
<s> N.  </s>
<s> You tolkatiff scowegian?  </s>
<s> Nn.  </s>
<s> You spigotty anglease?  </s>
<s> Nnn.  </s>
<s> You phonio saxo?  </s>
<s> Nnnn.  </s>
<s> Clear all so! 'Tis a Jute.... (Finnegans Wake 16.5)  </s>
<s> Now I am a member of this list.  </s>
<s> Supporting query method is kind to the users, but a burden to the implementation.  </s>
<s> Exposing attributes, the opposite, in some sense.  </s>
<s> I don't know which is important.  </s>
<s> But in case of fetching default value from DTD, a query procedure must be written AFTER ALL for Element- getAtribute.  </s>
<s> DocumentType, Attr or Element should contain such procedure.  </s>
<s> I think DocumentType is most reasonable.  </s>
<s> // UENO Kojun / k.ueno@psynet.net,  </s>
<s> kojun@ann.ne.jp /  </s>
<s> wouldn't the follow-on states be easier to compute and just as useful?  </s>
<s> i would not expect, in the context of editing, to need an interface which allowed more specificity than "shallow" v/s "entire document".  </s>
<s> since the context models are context-free, only a shallow test on the immediate content set is strictly necessary to edit.  </s>
<s> were one to wished to defer validation, i'd be surprised if the editing user were able to control more than three modes: the element i just edited, all changed elements, the entire document.  </s>
<s> an option such as "the trees (with depth n) starting from all changed elements" would be seldom used and produce results which would be hard to use.  </s>
<s> will  </s>
<s> I think my version is essentially your two stages combined, with the second used to filter the first.  </s>
<s> That filtered list is a good basis for content-directed editing.  </s>
<s> Of course, the filtering could be done in user code rather than the DOM, but I think moving it into the DOM would generally produce a significantly more efficient implementation.  </s>
<s> Joe Kesselman / IBM Research Unless stated otherwise, all opinions are solely those of the author.  </s>

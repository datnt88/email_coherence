<s> Hello, Amaya 5.1 does not properly support input and displaying of international characters.  </s>
<s> It does not even call "setlocale" to be at least partially prepared for it.  </s>
<s> Still I am using ISO-8859-2 charset and I desperately need Amaya to work properly for me.  </s>
<s> I made Amaya execute "setlocale" by inserting two lines into Amaya/batch/writeapp.c, here is the patch: --- writeapp-orig.c  </s>
<s> Fri Mar 30 18:06:28 2001  </s>
<s> +++ writeapp.c  </s>
<s> Wed Aug 1 23:32:31 2001 @@ -52,6 +52,7 @@ fprintf (file, "/* File generated by app - do not edit!  </s>
<s> */\n"); fprintf (file, "/* #################################### */\n"); fprintf (file, "/* Included files */\n"); + fprintf (file, "#include \ locale.h\  </s>
<s> \n"); fprintf (file, "#include \"string.h\"\n");  </s>
<s> fprintf (file, "#include \"thot_gui.h\"\n");  </s>
<s> fprintf (file, "#include \"thot_sys.h\"\n");  </s>
<s> @@ -541,6 +542,7 @@ fprintf (AppFile, " int lg; /* identify dialogue messages */\n"); fprintf (AppFile, " char appName[MAX_PATH]; /* name of the application */\n"); fprintf (AppFile, " char workName[MAX_PATH]; /* path of the application */\n"); + fprintf (AppFile, " setlocale\(LC_ALL,\"\"\);\n"); fprintf (AppFile, " /* initialize the Registry */\n"); fprintf (AppFile, " TtaInitializeAppRegistry (argv[0]);\n"); As I am very new to Amaya I do not know the source very well so I have put it in the first place that seemed to be suitable.  </s>
<s> This was not sufficient, though.  </s>
<s> Amaya now loads the locale, yet it doesn't load the proper font and it does not accept a modifier key (that is, key with acute, circumflex and other special "decorations").  </s>
<s> This is however too difficult for me to implement.  </s>
<s> Would PLEASE somebody be so kind to implement at least a font selection dialog which would allow the user to select also the font encoding?  </s>
<s> I suppose that would not be difficult for a skilled programmer (I am not such a one).  </s>
<s> That would solve the font displaying problems.  </s>
<s> Or is there a nicer way to solve it?  </s>
<s> Thanks a lot.  </s>
<s> I will try to help as much as I can.  </s>
<s> All the very best, Peter  </s>
<s> Hi Peter, you astonished me, because my mail agent newly created a folder to for this mailing list, where I did subscribe a month ago.  </s>
<s> This folder wasn't created yet because I never got an answer from anybody.  </s>
<s> I feld very seldom and its a pity to mee that you will do also, I think.  </s>
<s> So I write to you.  </s>
<s> The amaya project is a nice one.  </s>
<s> So lets discuss about it.  </s>
<s> Why are you interested in amaya, since there are so many other browsers ?  </s>
<s> CU INGO  </s>
<s> Hello,  </s>
<s> how does this affect the windows version -- does it have a set locale concept.  </s>
<s> I don't know.  </s>
<s> I doubt that the Windows locale works in a same way that Linux locales do.  </s>
<s> The fact is that Windows handles the locale initialization differently, so it would be the best if some Windows users reported their (un)success with using Amaya under non-English environments.  </s>
<s> In the meantime we could solve this platform problem by defining a symbol LINUX and using a conditional compilation: #ifdef LINUX fprintf (file, "#include \ locale.h\  </s>
<s> \n"); #endif #ifdef LINUX fprintf (AppFile, " setlocale\(LC_ALL,\"\"\);\n"); #endif  </s>
<s> there are methods built into amaya to recognize and save docs as 8859-2 but at present unicode support is not there.  </s>
<s> Maybe the Amaya can recognize the 8859-2 encoding, but it can not display it nor it can input 8859-2 characters from the keyboard.  </s>
<s> This way a user can't browse pages written in 8859-2, nor can he edit or annontate them.  </s>
<s> Also the support for the modifier key (dead key, compose key) is problematic.  </s>
<s> It obviously uses a fixed (thus incorrect) encoding to interpret the resulting compose characters.  </s>
<s> I suggest that those who are willing to make this working should first have a look at the NEdit.  </s>
<s> It is a very good text editor, it uses Motif (or Lesstif) and it is working perfectly with the 8859-2 charset.  </s>
<s> It's homepage and source texts are at http://nedit.org .  </s>
<s> Thanks to all.  </s>
<s> All the very best, Peter  </s>
<s> Hi Peter, The support of international characters in Amaya is quite complex.  </s>
<s> Of course we could switch to ISO-8859-2 charset to support another subset of European languages, but the right general solution is to handle Unicode characters.  </s>
<s> This implies 3 steps: 1- Replacing the handling of 8 bits characters by Unicode functions.  </s>
<s> Due to external constraints, sometimes Unicode characters must be encoded as UTF-8 strings, sometimes they must be encoded as wide-characters.  </s>
<s> So the adaptation of the code is not easy and adequate conversion functions must be developed.  </s>
<s> 2- We need also to write displaying functions that'll find for each character the right font and the right glyph within the font.  </s>
<s> Theses functions depends on the platform (Windows or X-Windows).  </s>
<s> 3- Then several input methods should be added to the Amaya code.  </s>
<s> Just the step 1 is quite finished now.  </s>
<s> Date |Tue, 14 Aug 2001 14:56:02 +0200  </s>
<s> From |Irene Vatton Irene.Vatton@inrialpes.fr  </s>
<s> Hello!  </s>
<s> IV Hi Peter, IV The support of international characters in Amaya is quite complex.  </s>
<s> IV Of course we could switch to ISO-8859-2 charset to support another IV subset of European languages, but the right general solution is to IV handle Unicode characters.  </s>
<s> IV This implies 3 steps: IV 1- Replacing the handling of 8 bits characters by Unicode functions.  </s>
<s> IV Due to external constraints, sometimes Unicode characters must be IV encoded as UTF-8 strings, sometimes they must be encoded as IV wide-characters.  </s>
<s> IV So the adaptation of the code is not easy and adequate conversion IV functions must be developed.  </s>
<s> IV 2- We need also to write displaying functions that'll find for each IV character the right font and the right glyph within the font.  </s>
<s> IV Theses functions depends on the platform (Windows or X-Windows).  </s>
<s> IV 3- Then several input methods should be added to the Amaya code.  </s>
<s> IV Just the step 1 is quite finished now.  </s>
<s> I'm sorry but why you want to invent bicycle ?  </s>
<s> I mean step 3. This locale patch (i already send absolutely idenical patch half year ago) made you work quite simple.  </s>
<s> after set_locale(LC_ALL,"") call on all unix platforms you can get full unicode input.  </s>
<s> Windows as far as i know support unicode input too.  </s>
<s> So i say: insert of set_locale call resolve all troubles with nonlatin1 input.  </s>
<s> At least on Linux, Irix and Solaris, cause i check it.  </s>
<s> I like amaya.  </s>
<s> You make great product.  </s>
<s> But i need to add this setlocale call after each download of fresh sources.  </s>
<s> It's annoyed me.  </s>
<s> For technical support contracts, visit https://order.mysql.com/  </s>
<s> This email is sponsored by SWSoft, http://www.asplinux.ru/  </s>
<s> / |/ /_ __/ __/ __ \/ / Grigory Bakunov black@asplinux.ru  </s>
<s> / /|_/ / // /\ \/ /_/ / /__ MySQL AB / SWSoft ___/ www.mysql.com  </s>
<s> Of course we don't plan to re-invent bicycle.  </s>
<s> We want to use existing input methods and existing conversion algorithms when it's possible.  </s>
<s> I just tried to explain that the problem is more complex.  </s>
<s> Date |Tue, 14 Aug 2001 16:03:59 +0200 From |Irene Vatton Irene.Vatton@inrialpes.fr  </s>
<s> Hello!  </s>
<s> IV Of course we don't plan to re-invent bicycle.  </s>
<s> We want to use IV existing input methods and existing conversion algorithms when IV it's possible.  </s>
<s> I just tried to explain that the problem is more IV complex.  </s>
<s> Ok but why you don't include this patch ?  </s>
<s> It's realy clean solution of all localization troubles.  </s>
<s> At least in this stage.  </s>
<s> For technical support contracts, visit https://order.mysql.com/  </s>
<s> This email is sponsored by SWSoft, http://www.asplinux.ru/  </s>
<s> / |/ /_ __/ __/ __ \/ / Grigory Bakunov black@asplinux.ru  </s>
<s> / /|_/ / // /\ \/ /_/ / /__ MySQL AB / SWSoft ___/ www.mysql.com  </s>
<s> The patch is included in the module thotlib/dialogue/interface.c  </s>
<s> Date |Fri, 17 Aug 2001 08:30:57 +0200 From |Irene Vatton Irene.Vatton@inrialpes.fr  </s>
<s> Hello!  </s>
<s> IV The patch is included in the module thotlib/dialogue/interface.c  </s>
<s> Hurray!  </s>
<s> Now you do realy great browser and editor !  </s>
<s> Realy thanks!  </s>
<s> For technical support contracts, visit https://order.mysql.com/  </s>
<s> This email is sponsored by SWSoft, http://www.asplinux.ru/  </s>
<s> / |/ /_ __/ __/ __ \/ / Grigory Bakunov black@asplinux.ru  </s>
<s> / /|_/ / // /\ \/ /_/ / /__ MySQL AB / SWSoft ___/ www.mysql.com  </s>

<s> Despite using the 'fix-bad-comments: true' setting the HTML comment inside  </s>
<s> the script tag isn't cleaned as hoped.  </s>
<s> The multiple hyphens (---) stops my  </s>
<s> XSL-transformation as '--' is not valid XML.  </s>
<s> Isn't Tidy suppose to handle  </s>
<s> this.  </s>
<s> I'm using JTidy ver.  </s>
<s> 8jul !-- myRandomNum = Math.round(10000*Math.random())  </s>
<s> //--- Preload Images ---// var idx; var check; var maxImages = 14; // Number of images to preload.  </s>
<s> var rollImg = new Array(); for(idx=0; idx  maxImages + 1; idx++) rollImg[idx] = new Image(); if (idx == 0) rollImg[idx].src  </s>
<s> = "/gfx/lc_glbnetwork_usaflag.gif";  </s>
<s> if (idx == 1) rollImg[idx].src  </s>
<s> = "/gfx/lc_glbnetwork_dkflag.gif";  </s>
<s> if (idx == 11) rollImg[idx].src  </s>
<s> = "/gfx/lc_glbnetwork_no.gif";  </s>
<s> //-- erik@abnett.no  </s>
<s> :|: Mobile: 91606563  </s>
<s> erik@abnett.no :|: Mobile: 91606563  </s>
<s> The problem is the -- operator.  </s>
<s> For example, the for loop in your example might have been counting down instead of up.  </s>
<s> You wouldn't want Tidy to change idx-- into idx==.  </s>
<s> I don't believe you can represent the -- operator inside a comment that's both legal XML and is recognized by JavaScript.  </s>
<s> So Tidy has to leave it alone.  </s>
<s> The only solution is to pull the JavaScript out of the comment and put it in a CDATA section.  </s>
<s> Gary L Peskin posted some changes to do this a few weeks ago.  </s>
<s> Search the Tidy archives at for "CDATA".  </s>
<s> Beware that the results might get rendered improperly by non-JavaScript aware browsers, assuming you wanted the resulting XML to be renderable as "backwards compatible" XHTML.  </s>
<s> --Randy  </s>
<s> how do I delete tidy sold the machine Thanks  </s>
<s> inside  </s>
<s> my  </s>
<s> handle  </s>
<s> I have the problem with the comments '//' in javascript code :o(  </s>

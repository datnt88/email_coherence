<s> From:Foteos Macrides [SMTP:MACRIDES@SCI.WFBR.EDU]  </s>
<s> Sent:Tuesday, December 09, 1997 7:02 AM Subject:Re: LYNX-DEV two curiosities from IETF HTTP session.  </s>
<s> Two issues came up in today's session of the HTTP 1.1 WG that left me curious.  </s>
<s> Not that any major decisions hang on the answers, but: Lynx came up when the fellow from MicroSoft quipped regarding the 305 proxy redirection message "Lynx has implemented it."  </s>
<s> Later it appeared he meant to be humorous, as it was left as an open question.  </s>
<s> The Conventional Wisdom in the meeting is that 305 is broken and 306 didn't fix it.  </s>
<s> The group is headed in the direction that this function will not be present in the "Draft Standard" version of 1.1.  </s>
<s> Going, going...  </s>
<s> [Joshua Cohen] Well, I guess its time for me to fess up.  </s>
<s> Im the guy who "quipped".  </s>
<s> Im also the guy who wrote the 305/306 draft to specify the 305 and 306 so that they are usable.  </s>
<s> Unfortunately, we simply couldnt resolve the security implications in time and leaving them in the http/1.1  </s>
<s> draft puts the entire protocol at risk from a process point of view.  </s>
<s> Before anyone jumps at dont put process over function, if we had a good resolution, Id be pushing for it in the core protocol.  </s>
<s> We dont, and until we do, it needs to wait..  </s>
<s> The specs for 305 in the most current HTTP/1.1 draft in effect describe Lynx's implementation, years ago, but not completely.  </s>
<s> Lynx's implementation:  </s>
<s> [Joshua Cohen] [--snipped--]  </s>
<s> If 306 is revised, it would be better to treat that as a new status, not a revision of 305, and have 306 based on only a Set-Proxy: header, with no Location header.  </s>
<s> Browsers which do not implement it thus will treat it as 300, and should show the body by virtue of no Location header being present.  </s>
<s> Whether or not the "guys at MicroSoft" as yet grasp the occassional uses to which 304, 305, and 307 might be put, they nonetheless can be useful ocassionally (that statement was intended to be humorous &amp;#1;).  </s>
<s> But 306 does need more work before it's intended uses can be achieved.  </s>
<s> [Joshua Cohen] This "guy at microsoft" gets it, and I beleive that most of my colleagues do as well.  </s>
<s> As I said earlier, the 305-306 draft (which was supposed to roll into http/1.1) was my doing.  </s>
<s> Please dont ascribe any higher meaning to the fact that a "microsoft" guy spoke about temporarily holding 305/306 from the http/1.1  </s>
<s> draft.  </s>
<s> Im still enthusiastic about the 305/306 functionality but until we can resolve the very real security implications it is prudent to withold it from the draft..  </s>
<s> Josh Cohen joshco@microsoft.com  </s>
<s> Here's what I think needs to happen: It looks to me as though we may need a clarification to Rev-01 on 305 (use this proxy for a single request) to to match the existing Lynx behavior, if that is actually the "right thing" for the desired semantics (single time redirection to a proxy).  </s>
<s> (previous comments say that we're pretty close to that now in Rev-01, but a bit of further tweaking is needed).  </s>
<s> And the full "go use this proxy forever" functionality (i.e. what we called 306) needs to get addressed somehow, but in an independent (not HTTP/1.1 document (and concievably, outside of HTTP altogether, if that seems the  </s>
<s> right solution.).  </s>
<s> This one nees to deal with all the security/trust problems  </s>
<s> identified in the discussion on 306 in the mailing list.  </s>
<s> - Jim  </s>
<s> From: Yaron Goland yarong@microsoft.com  </s>
<s> Date: Wed, 10 Dec 1997 11:21:51 -0800 http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com Subject: RE: LYNX-DEV two curiosities from IETF HTTP session.  </s>
<s> I doubt any commercial browser will implement 305 without some very serious security provided to assure that the proxy asking for the one time redirect is going to get it.  </s>
<s> I would suggest that this problem needs to be dealt with in the large 305/306 context, in a stand alone spec, and that the draft standard for HTTP should simply state that 305 has been deprecated and SHOULD NOT be implemented.  </s>
<s> Yaron  </s>
<s> I think you are confused....  </s>
<s> In Rev-01, only an origin server is allowed to generate a 305 response.  </s>
<s> It is authoritative for that resource, so  </s>
<s> the spoofing problems don't come up (and is the reason for that text being in the document...)  </s>
<s> - Jim  </s>
<s> From: Yaron Goland yarong@microsoft.com  </s>
<s> Date: Wed, 10 Dec 1997 11:21:51 -0800 http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com Subject: RE: LYNX-DEV two curiosities from IETF HTTP session.  </s>
<s> I doubt any commercial browser will implement 305 without some very serious security provided to assure that the proxy asking for the one time redirect is going to get it.  </s>
<s> I would suggest that this problem needs to be dealt with in the large 305/306 context, in a stand alone spec, and that the draft standard for HTTP should simply state that 305 has been deprecated and SHOULD NOT be implemented.  </s>
<s> Yaron  </s>
<s> But what is there about the protocol which allows this requirement to be enforced?  </s>
<s> Seems to me that the protocol relies on gentle (i.e., conforming) behavior by proxies and servers.  </s>
<s> The definition of spoofing includes an element of malicious intent.  </s>
<s> Perhaps it would close the loop to require that the client only accept a 305 status from an origin server to which it is directly connected?  </s>
<s> Then the potential for spoofing would be limited to IP and/or DNS spoofing.  </s>
<s> In either case though, I fail to see the motivation for someone  </s>
<s> intending to spoof a redirect who wouldn't simply change the  </s>
<s> origin server or make the IP spoofed variant of the origin server simply serve the nefarious content which would have be acquired as a result of the redirect.  </s>
<s> Thus I don't see any difference in risk with/without 305.  </s>
<s> Dave Morris  </s>
<s> And exactly how can the browser tell that it was the origin server that sent the 305?  </s>
<s> And not the untrustworthy proxy in between the client and the server?  </s>
<s> I know that normally one trusts one's proxy, but since security issues are being raised here, the question needs to be asked.  </s>
<s> Paul  </s>
<s> It is still an attack as the origin server, if it has not been authenticated, is just some random server.  </s>
<s> To remind folks of the problems with click tracking and cookies, a bunch of servers could choose to have requests to them redirected to indicated proxies where advertising and other information will be inserted as needed.  </s>
<s> This very effectively gets around cookie issues.  </s>
<s> Yaron  </s>
<s> From:jg@pa.dec.com [SMTP:jg@pa.dec.com]  </s>
<s> Sent:Wednesday, December 10, 1997 7:48 PM http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com Subject:RE: LYNX-DEV two curiosities from IETF HTTP session.  </s>
<s> From: Yaron Goland yarong@microsoft.com  </s>
<s> Date: Wed, 10 Dec 1997 11:21:51 -0800  </s>
<s> http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com Subject: RE: LYNX-DEV two curiosities from IETF HTTP session.  </s>
<s> I doubt any commercial browser will implement 305 without some very  </s>
<s> serious  </s>
<s> security provided to assure that the proxy asking for the one time  </s>
<s> is going to get it.  </s>
<s> I would suggest that this problem needs to be dealt  </s>
<s> in the large 305/306 context, in a stand alone spec, and that the draft standard for HTTP should simply state that 305 has been deprecated and SHOULD NOT be implemented.  </s>
<s> Yaron  </s>

<s> Here is my recommended revision to sections 4.3.5 and 7.1: 4.3.5  </s>
<s> Sending Cookies in Unverifiable Transactions Users must have control over sessions in order to ensure privacy.  </s>
<s> (See PRIVACY section below.)  </s>
<s> To simplify implementation and to prevent an additional layer of complexity where adequate safeguards exist, however, this document distinguishes between transactions that are verifiable and those that are unverifiable.  </s>
<s> A transaction is verifiable if the user, or a user-| designated agent, has the option to review the request-URI prior to its| use in the transaction.  </s>
<s> A transaction is unverifiable if the user does not have that option.  </s>
<s> Unverifiable transactions typically arise when a user agent automatically requests inlined or embedded entities or when it resolves redirection (3xx) responses from an origin server.  </s>
<s> Typically the origin transaction, the transaction that the user initiates, is verifiable, and that transaction may directly or indirectly induce the user agent to make unverifiable transactions.  </s>
<s> When it makes an unverifiable transaction, a user agent must enable a session only if a cookie with a domain attribute D was sent or accepted in its origin transaction, such that the host name in the Request-URI of the unverifiable transaction domain-matches D. This restriction prevents a malicious service author from using unverifiable transactions to induce a user agent to start or continue a session with a server in a different domain.  </s>
<s> The starting or continuation of such sessions could be contrary to the privacy expectations of the user, and could also be a security problem.  </s>
<s> User agents may offer configurable options that allow the user agent, or any autonomous programs that the user agent executes, to ignore the above rule, so long as these override options default to ``off.''  </s>
<s> A user agent may verify that the request-URI comes from a trusted | domain by placing a request to a certificate authority to get the | credentials of the domain.  </s>
<s> Those credentials may be persistently | cached by the user agent to reduce overhead of repetitive verification  </s>
<s> The user agent may have the default behavior of sending and accepting| cookies from the request-URI domain if the credentials indicate that the| domain is trusted and the credentials have not expired.  </s>
<s> The user should have the ability to explicitly override the user agent verification for a | specific domain.|  </s>
<s> 7.1 User Agent Control A user agent usually begins execution with no remembered state information.  </s>
<s> It should be possible to configure a user agent never to send Cookie headers, in which case it can never sustain state with an origin server.  </s>
<s> (The user agent would then behave like one that is unaware of how to handle Set-Cookie2 response headers.)  </s>
<s> The user agent should allow the user to specify whether state information should be retained each time the user agent terminates; the default | should be "yes."  </s>
<s> If the user chooses to retain state information,| it would be restored the next time the user agent runs.|  </s>
<s> NOTE: User agents should probably be cautious about using files to store cookies long-term.  </s>
<s> If a user runs more than one instance of the user agent, the cookies could be commingled or otherwise corrupted.  </s>
<s> My objective here is to provide a more explicit definition of how a certificate authority would "verify" an otherwise unverifiable transaction.  </s>
<s> In addition, there has been no discussion in this forum on the item in 7.1 that effectively eliminates persistent cookies.  </s>
<s> I believe that the current wording could allow a browser to provide an "invisible default" where a user could have a default that cookies are not persistent and the user would never know.  </s>
<s> My recommendation is that we make it explicit that the user be prompted and the default should be positive.  </s>
<s> Once again, this provides consistency with the current implementations in terms of default behavior yet provides the user with control.  </s>
<s> ) ) ) ) )----------------------------------------  </s>
<s> Daniel Jaye djaye@engagetech.com  </s>
<s> Engage Technologies, Inc. (508)684-3641 v 100 Brickstone Square, Andover MA 01810 (508)684-3636 f  </s>
<s> Without commenting on the overall concept... this paragraph requires a certificate authority without providing any protocol or reference as to how this is accomplished.  </s>
<s> Dave Morris  </s>
<s> Sorry, I'm not willing to entertain the idea of credentials and trusted parties for this version of the spec.  </s>
<s> Maybe it's reasonable for the future, but lacking a complete description of the credentials infrastructure, your proposal isn't practical now.  </s>
<s> Perhaps, but you've only made reference to a now-non-existent facility.  </s>
<s> I disagree that 7.1 eliminates persistent cookies.  </s>
<s> The current wording is: When the user agent terminates execution, it should let the user discard all state information.  </s>
<s> Alternatively, the user agent may ask the user whether state information should be retained; the default should be ``no.'' If the user chooses to retain state information, it would be restored the next time the user agent runs.  </s>
<s> Note the wording: "should *let*".  </s>
<s> And "may ask".  </s>
<s> The spec says the UA should give the user the choice of what to do.  </s>
<s> The default in the *dialog* should be ``no'' (i.e., did not retain).  </s>
<s> I see no invisible control.  </s>
<s> (:-) Dave Kristol  </s>

<s> I have built amaya on an AIX 4.1.5  </s>
<s> R2 system with gcc 3.3.2.  </s>
<s> When I try to run it, I get the following error: Gdk-ERROR **: BadValue (integer parameter out of range for operation) serial 735 error_code 2 request_code 51 minor_code 0 Note that the gtk test programs run ok (using gtk+ 1.2.10 and glib 1.2.10).  </s>
<s> The glib and gtk test programs did not run until I recompiled them without optimization.  </s>
<s> I have now rebuilt everything without optimization, but I still get the above error.  </s>
<s> I suppose that I sould get and build the GNU debugger and then try to debug this (the AIX debugger does not seem to work with programs built with gcc).  </s>
<s> But, before I do that, does anyone know how to interpret the above error message?  </s>
<s> Tom schulz Applied Dynamics Intl. schulz@adi.com  </s>
<s> On Wed, 7 Apr 2004 17:29:14 -0400 (EDT)  </s>
<s> Hum, when GDK detects an error it exits the process and so it's very difficult to understand what generated the crash.  </s>
<s> Before installing gdb could you launch amaya with strace to see what happends.  </s>
<s> Irene.  </s>
<s> Ir?ne Vatton INRIA Rh?ne-Alpes INRIA ZIRST e-mail: Irene.Vatton@inria.fr 655 avenue de l'Europe  </s>
<s> strace produced no output.  </s>
<s> Note that I will be out of the office until next week, so it will be awhile until I get back to this.  </s>
<s> I am going to mail out the changes that I had to make to get amaya to compile.  </s>
<s> As most of the changes would not be needed on later versions of AIX, feel free to ignore most of them.  </s>
<s> Tom schulz Applied Dynamics Intl. schulz@adi.com  </s>
<s> AIX has a program called strace, but it has nothing to do with debugging programs.  </s>
<s> I downloaded the GNU strace source, but it does not support AIX.  </s>
<s> I have now built GNU gdb and have run amaya with a breakpoint at gdk_x_error.  </s>
<s> The output is as follows: tools@whale 149 gdb amaya GNU gdb 6.0 --- cut --- This GDB was configured as "powerpc-ibm-aix4.1.4.0"... (gdb) break gdk_x_error Breakpoint 1 at 0x10033f50: file gdk.c, line 1067.  </s>
<s> (gdb) run Starting program: /tmp_mnt/home/projects/tools/amaya/Amaya/aix/bin/amaya Breakpoint 1, gdk_x_error (display=0x216b9218, error=0x2ff21020) at gdk.c:1067 1067 gdk.c:  </s>
<s> A file or directory in the path name does not exist.. in gdk.c (gdb) backtrace #0 gdk_x_error (display=0x216b9218, error=0x2ff21020) at gdk.c:1067 #1 0xd01f10b8 in _XError () from /usr/lib/libX11.a(shr4.o)  </s>
<s> #2 0xd01eee44 in _XReply () from /usr/lib/libX11.a(shr4.o)  </s>
<s> #3 0xd021eae4 in XSync () from /usr/lib/libX11.a(shr4.o)  </s>
<s> #4 0x10066e50 in gdk_image_new (type=GDK_IMAGE_SHARED, visual=0x216bde28, width=1536, height=64) at gdkimage.c:264  </s>
<s> #5 0x100f1824 in gdk_rgb_allocate_images (n_images=1, shared=1) at gdkrgb.c:586 #6 0x100f1d54 in gdk_rgb_init () at gdkrgb.c:703 #7 0x100f857c in gdk_rgb_get_visual () at gdkrgb.c:3273 #8 0x1012ca58 in gdk_imlib_init () #9 0x1011c218 in _Z15TtaInitDialoguePcPm (server=0x0, app_context=0x200087f0) at ../../thotlib/dialogue/dialogapi.c:791 #10 0x10164b34 in _Z12TteInitMenusPci (name=0x2ff224e0 "amaya", number=281) at ../../thotlib/dialogue/appdialogue.c:422 #11 0x1000061c in main (argc=1, argv=0x2ff22d3c) at EDITORAPP.c:381 (gdb) continue Continuing.  </s>
<s> Breakpoint 1, gdk_x_error (display=0x216b9218, error=0x2ff1bf68) at gdk.c:1067 1067 in gdk.c (gdb) backtrace #0 gdk_x_error (display=0x216b9218, error=0x2ff1bf68) at gdk.c:1067 #1 0xd01f10b8 in _XError () from /usr/lib/libX11.a(shr4.o)  </s>
<s> #2 0xd01eee44 in _XReply () from /usr/lib/libX11.a(shr4.o)  </s>
<s> #3 0xd01f92d0 in XListFonts () from /usr/lib/libX11.a(shr4.o)  </s>
<s> #4 0x101b3c1c in _Z19IsXLFDPatterneAFontPc ( pattern=0x2ff1c152 "-mozilla-times-medium-r-*-*-12-*-*-*-*-*-iso8859-1") at ../../thotlib/dialogue/fontconfig.c:116 #5 0x101b488c in _Z12FontLoadFileP4FILEPP10FontScript (file=0xf0172528, fontsscript_tab=0x2170a408) at ../../thotlib/dialogue/fontconfig.c:342 #6 0x101b4af4 in _Z14FontConfigLoadv () at ../../thotlib/dialogue/fontconfig.c:412 #7 0x101b4c44 in _Z18FontLoadFromConfigcii (script=76 'L', face=2, style=0) at ../../thotlib/dialogue/fontconfig.c:438 #8 0x101b0844 in _Z17GetFontIdentifierciii8TypeUnitPcS0_ (script=76 'L', family=2, highlight=0, size=3, unit=UnRelative, text=0x2ff22288 "", textX=0x2ff22298 "/?#\030D\"BB!p?\b/?#8/?#\030?6'\  </s>
<s> ?s\"\200????/?#\030???????? N\ 17?????/?\"?/?#\030") at ../../thotlib/dialogue/ ont.c:1391 #9 0x101b0b3c in _Z8ReadFontciii8TypeUnit (script=76 'L', family=2, highlight=0, size=3, unit=UnRelative) at ../../thotlib/dialogue/font.c:1450 #10 0x101b2c00 in _Z17InitDialogueFontsPc (name=0x2ff224e0 "amaya") at ../../thotlib/dialogue/font.c:2485 #11 0x10170bc8 in _Z15ThotInitDisplayPcii (name=0x2ff224e0 "amaya", dx=0, dy=0) at ../../thotlib/dialogue/context.c:489 #12 0x10164b5c in _Z12TteInitMenusPci (name=0x2ff224e0 "amaya", number=281) at ../../thotlib/dialogue/appdialogue.c:437 #13 0x1000061c in main (argc=1, argv=0x2ff22d3c) at EDITORAPP.c:381 (gdb) continue Continuing.  </s>
<s> Gdk-ERROR **: BadValue (integer parameter out of range for operation) serial 735 error_code 2 request_code 51 minor_code 0 Program exited with code 01. (gdb) This is as far as I have gotten today.  </s>
<s> Note that I have never used gdb before and I don't really know what I am doing.  </s>
<s> Tom schulz Applied Dynamics Intl. schulz@adi.com  </s>

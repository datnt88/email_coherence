<s> I do not understand the rationale for the numeric datatypes permitted for a basic processor.  </s>
<s> Could someone explain, please?  </s>
<s> My thoughts are on the following lines: The programmer ought to have the choice between accuracry and speed of operation.  </s>
<s> The former is represented by xs:decimal and xs:integer.  </s>
<s> The latter by - well what?  </s>
<s> I would have said xs:int and xs:float.  </s>
<s> Colin Paul Adams Preston Lancashire  </s>
<s> Thanks for the comment.  </s>
<s> The public comment period has closed but we'll still add this to the agenda if we can find time for it.  </s>
<s> However: a personal response: (a) I think there are likely to be very few stylesheets whose performance will benefit noticeably from using 32-bit rather than 64-bit arithmetic.  </s>
<s> If you're going to trade correctness of output for speed of output, you need a very clear view of how much performance you think you can gain by it.  </s>
<s> (b) xs:integer and xs:decimal are types for which there are numeric literals defined in the XPath syntax.  </s>
<s> Also, note that the result of adding two xs:int values is an xs:integer value.  </s>
<s> They are therefore pretty fundamental.  </s>
<s> (Of course, an xs:int is an xs:integer, so it's valid for an implementation to return an xs:int as the result of 2+2.  </s>
<s> But it's not valid to give the wrong answer if the result of the addition exceeds 32 bits.) Michael Kay # From: public-qt-comments-request@w3.org # [mailto:public-qt-comments-request@w3.org]  </s>
<s> On Behalf Of Colin # Paul Adams # Sent: 18 March 2004 06:21 # Subject: [XSLT 2.0] Data types for a Basic XSLT processor # I do not understand the rationale for the numeric datatypes # permitted for a basic processor.  </s>
<s> Could someone explain, please?  </s>
<s> # My thoughts are on the following lines: # The programmer ought to have the choice between accuracry and # speed of operation.  </s>
<s> # The former is represented by xs:decimal and xs:integer.  </s>
<s> # The latter by - well what?  </s>
<s> # I would have said xs:int and xs:float.  </s>
<s> # Colin Paul Adams # Preston Lancashire  </s>
<s> MK (a) I think there are likely to be very few stylesheets whose MK performance will benefit noticeably from using 32-bit rather MK than 64-bit arithmetic.  </s>
<s> If you're going to trade correctness MK of output for speed of output, you need a very clear view of MK how much performance you think you can gain by it.  </s>
<s> But xs:decimal and xs:integer are NOT hardware types, limited to 64-bits of precision.  </s>
<s> At least, that's how I understand XML Schema.  </s>
<s> I read them as being arbitrary precision numbers and integers (with a cop-out clause).  </s>
<s> My point was, why include xs:double (rather than xs:float - presumably faster), and not include a hardware integer type?  </s>
<s> Colin Paul Adams Preston Lancashire  </s>
<s> It's possible to implement xs:integer using 64-bit hardware arithmetic, I believe*.  </s>
<s> It's certainly possible to implement it so that it uses hardware arithmetic when the numbers are small enough.  </s>
<s> I've no idea about xs:decimal - I grew up with machines that did decimal arithmetic in hardware, but I suspect that's gone out of fashion?  </s>
<s> As for float and double, surely 32-bit floating point is a complete anachronism?  </s>
<s> 20 years ago I was using mainframes - a thousand times slower than my laptop today - that only offered 64-bit and 128-bit floating point in the hardware, and emulated  </s>
<s> 32-bit float in software.  </s>
<s> But this is aside from the point.  </s>
<s> I don't believe that numeric arithmetic accounts for a sufficiently high proportion of XSLT execution costs for this to be a real concern.  </s>
<s> Michael Kay  </s>
<s> * (Schema Part 2): "All .minimally  </s>
<s> conforming.  </s>
<s> processors .must.  </s>
<s> support decimal [and hence integer] numbers with a minimum of 18 decimal digits (i.e., with a .totalDigits. of 18)".  </s>
<s> 64 bits is enough to meet this requirement.  </s>
<s> I think the word "minimum" here is meaningless, and best ignored.  </s>
<s> # From: Colin Paul Adams [mailto:colin@colina.demon.co.uk] # Sent: 18 March 2004 11:36 # Subject: Re: [XSLT 2.0] Data types for a Basic XSLT processor # MK (a) I think there are likely to be very few stylesheets whose # MK performance will benefit noticeably from using 32-bit rather # MK than 64-bit arithmetic.  </s>
<s> If you're going to trade correctness # MK of output for speed of output, you need a very clear view of # MK how much performance you think you can gain by it.  </s>
<s> # But xs:decimal and xs:integer are NOT hardware types, limited # to 64-bits of precision.  </s>
<s> At least, that's how I understand # XML Schema.  </s>
<s> I read them as being arbitrary precision numbers # and integers (with a cop-out clause).  </s>
<s> # My point was, why include xs:double (rather than xs:float - # presumably faster), and not include a hardware integer type?  </s>
<s> # Colin Paul Adams # Preston Lancashire  </s>
<s> MK It's possible to implement xs:integer using 64-bit hardware MK arithmetic, I believe*.  </s>
<s> It's certainly possible to implement MK it so that it uses hardware arithmetic when the numbers are MK small enough.  </s>
<s> I've no idea about xs:decimal - I grew up with MK machines that did decimal arithmetic in hardware, but I MK suspect that's gone out of fashion?  </s>
<s> As for float and double, MK surely 32-bit floating point is a complete anachronism?  </s>
<s> 20 Then why is it in XML Schema part 2?  </s>
<s> MK But this is aside from the point.  </s>
<s> I don't believe that numeric MK arithmetic accounts for a sufficiently high proportion of XSLT MK execution costs for this to be a real concern.  </s>
<s> Then why include xs:double?  </s>
<s> Pointless.  </s>
<s> MK 18)".  </s>
<s> 64 bits is enough to meet this requirement.  </s>
<s> I think the MK word "minimum" here is meaningless, and best ignored.  </s>
<s> I don't think so.  </s>
<s> I think it means you should implement arbitrary precision if you can.  </s>
<s> Colin Paul Adams Preston Lancashire  </s>
<s> Colin,  </s>
<s> The floating point types in XML Schema part 2 are aligned with, conformant to, and based on, IEEE 754.  </s>
<s> They were not designed out of whole cloth.  </s>
<s> Er, ah, for better precision?  </s>
<s> Because of compatibility with XPath 1.0?  </s>
<s> I disagree (and I attend the Schema meetings, so I have spent at least a few cycles thinking about this).  </s>
<s> "minimum...of 18 digits" can very readily be interpreted to mean "use 64 bits if your hardware encourages that, use 96 is your hardware prefers that, use 128 if your hardware likes that".  </s>
<s> I do not believe that the intent was "you must use a decimal notation internally and you really ought to implement millions of digits of precision".  </s>
<s> On the other hand, any implementation that chooses that latter interpretation would *also* be conforming.  </s>
<s> Hope this helps, Jim = Facts are facts.  </s>
<s> However, any opinions expressed are the opinions = = only of myself and may or may not reflect the opinions of anybody = = else with whom I may or may not have discussed the issues at hand.  </s>
<s> =  </s>
<s> Thanks jim and Mike, I understand it now.  </s>
<s> Colin Paul Adams Preston Lancashire  </s>

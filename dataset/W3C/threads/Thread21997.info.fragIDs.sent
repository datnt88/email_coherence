<s> Hi Everyone, We are in the process of updating our tests to DOM L2 and have come across a couple of questions.  </s>
<s> 1) The setPrefix() method will throw a NAMESPACE_ERR DOMException if the specified prefix is malformed.  </s>
<s> The same method will also throw an INVALID_CHARACTER_ERR if the specified prefix contains an illegal character.  </s>
<s> What is the difference between a malformed prefix and a prefix with an invalid character?  </s>
<s> How are they distinguished?  </s>
<s> 2) The setPrefix() method will throw a NO_MODIFICATION_ALLOWED_ERR if this  </s>
<s> node is readonly.  </s>
<s> How do you determine if a node is readonly or not?  </s>
<s> Is there a way to specify a node as readonly?  </s>
<s> As it turns out, we had problems converting our read  </s>
<s> only tests to Java and do not have any tests in this area.  </s>
<s> Can anyone suggest a  </s>
<s> test scenario that will give us a read-only node that we can then manipulate?  </s>
<s> Thanks, Mary Brady NIST, Conformance Testing mbrady@nist.gov  </s>
<s> Descendents of EntityReference and Entity nodes are automatically marked read-only.  </s>
<s> The latter may or may not be revised when DOM Level 3 addresses DTDs in more detail.  </s>
<s> You can't currently ask a node if it's readonly except by trying to modify it.  </s>
<s> That query, and ways to selectively make nodes read-only or read-write by user request, are known wishlist items.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> We ran into the same question.  </s>
<s> On the WWW-DOM list it was answered as follows: - A qualfied name (QN) is malformed, if you cannot determine if it has a prefix, or where the prefix ends and the local name starts.  </s>
<s> Thus, a QN is malformed if it has: - more than one colon (:).  </s>
<s> - A colon at the start or at the end of the QN. - A prefix is malformed if it contains a colon.  </s>
<s> So in both these cases a NAMESPACE_ERR is appropriate.  </s>
<s> In all other cases (where the QN or prefix doesn't match the XML Name production) a INVALID_CHARACTER_ERR is appropriate.  </s>
<s> Entity and EntityReference Node subtrees are read-only.  </s>
<s> However, you cannot create Entity Nodes with the DOM Level 2 API alone.  </s>
<s> In our DOM level 2 tests for Python DOM implementations the API asks for a parse method to be passed in, next to the DOMIMplementation to be tested.  </s>
<s> This method is expected to accept an arbitrary XML document (stored in a string) and return a DOM tree built with the DOMImplementation that is tested.  </s>
<s> With the help of this method our tests *can* create Entity Nodes, and thus execute tests on read-only Node types.  </s>
<s> We simply pass in a document that defines an interal DTD which in turn defines an entity.  </s>
<s> We test individual attributes on their read-only state by trying to change them, expecting an exception to be raised.  </s>
<s> We also test for all situations where a NO_MODIFICATION_ERR should be raised, for example when trying to append a Node that itself is a child of a read-only node.  </s>
<s> There are no other ways of determining wether or not a Node is read-only.  </s>
<s> Martijn Pieters  </s>
<s> Software Engineer mailto:mj@digicool.com  </s>
<s> Digital Creations http://www.digicool.com/  </s>
<s> Creators of Zope http://www.zope.org/  </s>
<s> The specification has been clarified.  </s>
<s> See errata core-10, core-11 and core-12 in Thank you for your report, Philippe  </s>

<s> Hi all, I'm trying to figure out how to format the body of annotations for annozilla, and there doesn't seem to be a standard in place.  </s>
<s> Right now, Amaya 7.1 is creating annotation bodies that look like:  </s>
<s> this sort of annotation 1) has no doctype and 2) has no namespace.  </s>
<s> as such, when annotest.w3.org serves this document up with mimetype "application/xhtml+xml", poor mozilla becomes utterly confused.  </s>
<s> seeing a  </s>
<s> standards-compliant mimetype, it tries to render in standards compliance mode.  </s>
<s> however, without a namespace and/or doctype, there's no styling info, and the whole process gets hosed.  </s>
<s> so, I suggest that we have our clients, especially amaya, put a namespace and/or doctype in the body html.  </s>
<s> what do you all think?  </s>
<s> regards, Doug  </s>
<s> A doctype would presumably cause havoc when the annotation body is posted along with the annotation information.  </s>
<s> Perhaps if the annotation server used a MIME type of 'text/html' ?  </s>
<s> Matthew  </s>
<s> Yeah, a doctype would cause havoc.  </s>
<s> But a namespace, I think, would be correct.  </s>
<s> In fact, if you look at the example in the protocols, the XHTML namespace *is* provided on the html tag: Doug  </s>
<s> "Doug Daniels" rainking@rice.edu wrote in message news:Pine.LNX.4.33.0301231519310.19069-100000@bunker.ece.rice.edu...  </s>
<s> annotest gets the mime-type of the resource from the submission, the problem is purely an Amaya problem of incorrectly submitting the mime-type as application/xhtml+xml (well and a problem of embedding documents within other documents in the xhtml world...)  </s>
<s> amaya should simply not claim that the previous document is application/xhtml+xml when it's not!  </s>
<s> Jim.  </s>
<s> Hello! Thanks for your report.  </s>
<s> You're correct.  </s>
<s> The generated XHTML body is not valid.  </s>
<s> The procedure that Amaya uses to add a namespace was changed around December.  </s>
<s> The annotation library was not updated at that time and this is what was causing the problem.  </s>
<s> Previous to this modification (I suppose before release 7.0), I believe that the namespace was being correctly added.  </s>
<s> I fixed the problem and commited the code to CVS.  </s>
<s> The namespace is now being added to the HTML element.  </s>
<s> We're planning a new Amaya release for next week so this fix will make it.  </s>
<s> Another problem is that if I post an annotation with this modification and then reload it from the server, the server is not retaining the namespace.  </s>
<s> I'll ask Eric to take a look at this problem later on today (when he wakes up).  </s>
<s> I'll ask him also if it's possible to add the missing namespace to the annotations that were posted in the meantime and stored in the database.  </s>
<s> Thank you all for this report.  </s>
<s> -jose  </s>

<s> DocumentFragment appears to be a placeholder for nodes or node trees that can be in the process of being cut/pasted from one document to another.  </s>
<s> During this phase it seems like the nodes might not be attached to a particular document.  </s>
<s> This would be very useful for creating templatized documents, for example, where some commonly used document fragments are cached and pasted into the document or rendered serially into an enclosing document when converted to ascii in a web server.  </s>
<s> However, the spec for Document clearly states that nodes may not exist outside the context of a particular Document.  </s>
<s> This appears to contradict the idea of DocumentFragments.  </s>
<s> I apologize if I'm completely missing something here, but any help clearing this up would be much appreciated!  </s>
<s> I've built an HTML40 parser that builds up a DOM tree from either a full document or valid document %block fragments.  </s>
<s> It would be nice to not have to always have to create a full Document object just for the fragments.  </s>
<s> My template engine takes a top-level document and a hashtable of named document fragments that are substituted into the output stream whenever a SUBST tag is encountered.  </s>
<s> This allows me to share document fragments with multiple master template documents since the merging is done at serialization time.  </s>
<s> Also, just a comment on a possible future server-DOM, it would be nice to be able to deprecate attributes like Node.nextSibling, Node.previousSibling and Node.ownerDocument that make the nodes completely encrusted into the collection they reside in.  </s>
<s> This makes it very inefficient if some of the nodes are remote objects and some are local.  </s>
<s> And please bring iterators back!  </s>
<s> Being able to mix and match nodes from different DOM  </s>
<s> implementations would be very handy, especially for distributed documents.  </s>
<s> As I understand it, the current DOM forbids this.  </s>
<s> Thanks, - Claude Zervas  </s>
<s> Claude,  </s>
<s> Following restrictions are inplace for Level 1 of the DOM API: 1. DocumentFragment exists within the context of the Document which created it.  </s>
<s> 2. ownerDocument attribute never changes.  </s>
<s> 3. DocumentFragment can not be used as a template because nodes will be 'moved' to the destination.  </s>
<s> Think of it as a 'laundry line' or a 'clipboard' for now.  </s>
<s> 4. Level 1 does not allow any movement of nodes between documents as well as implementations.  </s>
<s> Is this clear enough?  </s>
<s> Don Park  </s>
<s> Totally clear; what it means is that DOM Level 1 in its present form is totally useless for anything but client-side scripting.  </s>
<s> It has been made abundantly clear that client-side scripting is its only purpose, but it's very unfortunate nonetheless.  </s>
<s> Since I'm implementing a document processor, not an ECMAscript interpretor, the present DOM is of little interest to me at this point.  </s>
<s> What I'm going to do is continue implementing a version of the DOM API with all the interfaces but without the semantic restrictions, and hope that they get lifted in Level 2.  </s>
<s> In the mean time, there's no hope of getting a useable DOM library from a third party in the near future (not that I needed one), of interoperating with anyone else's DOM implementation, or of using a DOM implementation as a  </s>
<s> portability vehicle.  </s>
<s> Oh, well.  </s>
<s> Stephen R. Savitzky Chief Software Scientist, Ricoh Silicon Valley, Inc., steve@rsv.ricoh.com  </s>
<s> California Research Center home: steve@starport.com  </s>
<s> URL: http://www.starport.com/people/steve/  </s>
<s> Well, that is the bad news.  </s>
<s> The good news is that Level 1 will arrive sooner than it would have if we tried to address everything in Level 1. Frankly, I am as frustrated as you are and hope to do my best to make sure all the shortcomings are met in Level 2 and 3.  </s>
<s> My understanding is that they will be either removed or loosened.  </s>
<s> a  </s>
<s> Docuverse DOM Server will solve that problem and many more when it is released and I am sure there will be other DOM providers with similar capabilities.  </s>
<s> Regards, Don Park CTO/Docuverse  </s>

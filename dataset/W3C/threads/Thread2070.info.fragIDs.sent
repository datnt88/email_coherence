<s> Why not pass the full URI in a header line?  </s>
<s> No change to the request line necessary, and essentially upwards compatible.  </s>
<s> Perhaps: Full-URI: http://foo.bar.org/index.html  </s>
<s> Mike Cowlishaw IBM UK Laboratories  </s>
<s> This, or some variation upon it, has been discussed several times on the mailing list.  </s>
<s> The most common response is that it includes  </s>
<s> too much extra information which would better appear in the Request-URI.  </s>
<s> Rather than discussing that again, let's simplify it a bit:  </s>
<s> Host: foo.bar.org since that is the only thing interesting which was left off the request.  </s>
<s> [Before anyone mentions it: no, the port number is not interesting].  </s>
<s> We should then ask ourselves why this is desirable and what it allows us to achieve?  </s>
<s> The only desirable aspect is that it allows a single IP address and port to use the same default root address for multiple hostnames.  </s>
<s> For example, both get resolved to If those two hostnames were intended to represent separate organizations, as in the case of a single server providing Internet-presence-for-hire (i.e., vanity hostnames), then there may be a slight political/marketing problem if the result was a page that required the user to select from all of the various home pages.  </s>
<s> Note that it has no other advantage, as the only non-distinguishable link to that server is the root.  </s>
<s> So, the next question is what would adding  </s>
<s> a "host" header (or the equivalent) achieve?  </s>
<s> Well, we already know that existing clients do not support such a header, and it would take quite a bit of time to get them to, so the server cannot rely on its existence to provide the switching mechanism among the intended home pages.  </s>
<s> Thus,  </s>
<s> the best that it can do is provide a supplement -- if the header is present, the choice is made automatically; otherwise, the user is presented with a "choose one of the following" default page.  </s>
<s> The next question is: are there any better ways of accomplishing what is desired?  </s>
<s> The answer is Yes and No. Yes in that just putting the full URI in the Request-Line achieves the same effect (plus many more important effects) and would be consistent with the existing protocol for communicating with proxies.  </s>
<s> No, because doing so will not work with 1.0 servers and thus cannot be introduced before version 2.0.  </s>
<s> The final question is: Does the additional functionality justify the cost and effort of including the Host header in the 1.1 standard, with the necessarily strong recommendation that it be included with all requests?  </s>
<s> In my opinion, the answer to this last question is NO. Allowing a server  </s>
<s> to automatically choose the root URL from among the roots associated with multiple vanity hostnames is simply not a sufficiently important piece of functionality to justify its inclusion as part of the 1.x standard.  </s>
<s> In order for such a feature to be added to the protocol, it will have to justify itself externally to the standards process.  </s>
<s> In other words, if a sufficient number of WWW browsers and servers implement a header with the above syntax and semantics, that header will be added to the specification.  </s>
<s> When in doubt, bottom-up standardization is better than top-down.  </s>
<s> ......Roy Fielding ICS Grad Student, University of California, Irvine USA  </s>
<s> No, but the fragment identifier (i.e. the #foo that may go on the end of a URL) could be there, and could be interesting in some cases.  </s>
<s> There had been some discussion of extending fragments to allow searches for particular strings, line references, that sort of thing; including it in the request line could allow servers to do  </s>
<s> preprocessing or only send part of the document if such is appropriate, which could in theory be more efficient.  </s>
<s> I don't find  </s>
<s> this compelling, but it is another potential advantage of sending a full URL.  </s>
<s> I wouldn't quite agree there.  </s>
<s> Other site-level conventions (e.g. /robots.txt,  </s>
<s> /site.idx, a file for site-level description information if one is made, etc.) could also benefit from this header.  </s>
<s> It also could permit a smoother migration of name; for example, if you need to change the name of your server, this header could permit the old and new names to be mapped together briefly but permit logging of which Referer: URLs are still pointing to the old name.  </s>
<s> That said, I'm inclined to agree that the benefits are not terribly overwhelming.  </s>
<s> - Marc Marc VanHeyningen URL:http://www.cs.indiana.edu/hyplan/mvanheyn.html  </s>
<s> Time for $.02 from the peanut gallery.  </s>
<s> The benefits are not terribly overwhelming, it serves only a few specific purposes, and it involves the addition of a single request header.  </s>
<s> Given that this has been discussed and requested and discussed again for the past 6 months, why not mollify the people who want this feature and simply add it to the spec?  </s>
<s> Rather than continuing to thrash this around repeatedly in e-mail, just write the paragraph about it in the standard and let the standards process finish off the discussion.  </s>
<s> One of the complaints many have about HTML and HTTP is that the standards process is creeping at a snail's pace, forcing commercial developers to strike out on their own when the standards  </s>
<s> "keepers" ignore or discard their requests for feature incorporation into the DRAFT standards.  </s>
<s> In the grand scheme of things, this feature requires NO modifications to existing servers and about a 2 line modification to clients that want to be compliant.  </s>
<s> Let's stop talking about it and put a strawman in the standard!  </s>
<s> If it turns out to be a bad idea, we can delete it.  </s>
<s> That's been done before.  </s>
<s> In the meantime, it'll stop complaints that the standards process isn't responsive and accomodate the people who want this feature.  </s>
<s> Chuck Shotton cshotton@biap.com http://www.biap.com/  </s>
<s> cshotton@oac.hsc.uth.tmc.edu "I am NOT here."  </s>
<s> According to Roy T. Fielding:  </s>
<s> I suspect that the ability to customize the default page based on hostname part of the URL is the single most requested feature from server maintainers.  </s>
<s> I doubt that a week goes by without a thread on this subject in c.i.w.providers.  </s>
<s> The practice of using multiple IP addresses on a single host for the sole purpose of working around this deficiency in the protocol is becoming increasingly common.  </s>
<s> Those who are critical of adding a new HTTP header just for "vanity addresses" should keep in mind that the likely alternative is the wasteful use of IP addresses just for vanity addresses.  </s>
<s> John Franks  </s>
<s> rom Roy T. Fielding:  </s>
<s> rom John Franks:  </s>
<s> Though I can't find it right now, there is actually a web page/tutorial devoted to using multiple IP addresses on one network interface for this purpose.  </s>
<s> Not only is it likely, it is happening quite a bit.  </s>
<s> There are plenty of businesses buying machines and connections exclusively to put up web servers, and they often want to split costs with other businesses.  </s>
<s> I agree with Roy that some protocol enhancement should drive the addition of a Host: header.  </s>
<s> It is currently possible to put more than one server at one address by assigning one of them a non-standard port number (http://www.name.dom/ and http://www.name.dom:8080/).  </s>
<s> A Host: header could provide the same functionality in a transparent manner.  </s>
<s> As Chuck Shotton mentioned, this addition would require no change to servers.  </s>
<s> The benefit -- allowing providers to seperate offerings into categories without making the user choose from a home page menu -- seems worthwhile.  </s>
<s> Not just to businesses.  </s>
<s> M. Hedlund march@europa.com  </s>
<s> Fortunately, the changes on each side are really minor.  </s>
<s> In fact there are no changes required on the server side if the request is funneled to a CGI script (where one would look for the "HTTP_HOST" environment variable).  </s>
<s> So, client folk, it's up to you.... do I hear any takers?  </s>
<s> It seems to me to be the *definition* of something easy to add - if  </s>
<s> semantically or systemically there are no objections to it, then browser authors should be encouraged to take 10 minutes to add it.  </s>
<s> In fact, I  </s>
<s> don't even see a terrible upgrade issue - if there's a host with multiple vanity hostnames going to it, and it doesn't get a Host: header, it can give a default page with a list of all pages, whereas if it does get a Host: header it can give the appropriate vanity home page.  </s>
<s> In some respects this gets into the need for an HTTP user agent definition, possibly even a numbered-level classification scheme.  </s>
<s> Agreed.  </s>
<s> Now if only I could find my way around X Mosaic source code... Brian brian@hotwired.com  </s>
<s> brian@hyperreal.com  </s>
<s> http://www.hotwired.com/Staff/brian/  </s>
<s> Well, after reading all the comments, I have come to the following conclusions: 1) Too many web developers work on the weekends;  </s>
<s> 2) Marketing has too much influence on web technology; and,  </s>
<s> 3) There's not much I can do about either one.  </s>
<s> So, which one should we include in the 1.1 specification: Host: foo.bar.com  </s>
<s> or  </s>
<s> Orig-URI: http//foo.bar.com:8001/home/is/where/the/wallet/is.html  </s>
<s> Also, should it be: a) recommended for all requests  </s>
<s> b) recommended only for requests to standard URLs like / and /site.idx  </s>
<s> I am assuming that it will not be recommended for requests that already use the full URI, and that will remain the goal for 2.0.  </s>
<s> One of the things  </s>
<s> that we intend to require for 1.1 is that servers know their own set of hostnames and do the right thing if they receive a full-URI using one of those hostnames.  </s>
<s> That would not mean that 1.1 clients would send full-URIs, only that we would have some reasonable hope of doing so for 2.0.  </s>
<s> ......Roy Fielding ICS Grad Student, University of California, Irvine USA  </s>
<s> Agree. (unfortunately)  </s>
<s> Agree!  </s>
<s> Disagree! You're working very hard to put together a good standard.  </s>
<s> If it meets the needs of developers and users and gets accepted in a timely fashion, this will have much more influence on the WWW than rogue commercial development organizations.  </s>
<s> As you mentioned earlier, this is all that is *required*, since everything else should be in the URL as received.  </s>
<s> It is certainly is easier to implement because no parsing is required to extract this info.  </s>
<s> On the other hand, this format is a little more work to parse, but contains  </s>
<s> valuable information that is often lost or munged when data passes through proxies, etc.  </s>
<s> Looking at just long-term usefulness, this version seems to  </s>
<s> have a greater chance at being able to support multiple, unforeseen uses.  </s>
<s> (it certainly makes implementing proxy servers easier...)  </s>
<s> Yes!  </s>
<s> No!  </s>
<s> Why not be consistent?  </s>
<s> Proxies can still munge a full URI as easily as they can mangle a current version.  </s>
<s> Might as well maintain it unscathed in the header field where the real server can grab it.  </s>
<s> Chuck Shotton cshotton@biap.com http://www.biap.com/  </s>
<s> cshotton@oac.hsc.uth.tmc.edu "I am NOT here."  </s>
<s> Host:, as it's the only unique part of the request, and we should definitely try to keep the amount of stuff in the request headers down.  </s>
<s> It should be recommended for all requests - otherwise collections of HTML pages will be nowhere nearly as portable.  </s>
<s> However, one way to reduce the number of times it has to stick Host: into the headers would be to do a reverse-lookup of the IP number associated with that Host, and if it returned the same hostname, then that must be the canonical hostname for that IP number and thus no Host: header is needed (presuming providers don't do something stupid like have multiple reverse DNS tables for the same IP numbers :) Just a thought.  </s>
<s> Brian brian@hotwired.com  </s>
<s> brian@hyperreal.com  </s>
<s> http://www.hotwired.com/Staff/brian/  </s>
<s> Date: Sun, 12 Feb 1995 12:50:45 -0800 From: march@europa.com  </s>
<s> (M.  </s>
<s> Hedlund)  </s>
<s> It's even more complicated than that.  </s>
<s> I have a permanent 24 h link home over modem, and five machines home on my net.  </s>
<s> I've set up a web tree elsewhere, right at a T1 socket, but can't stick it into my named database for obvious reasons.  </s>
<s> I want to have www.homenet.com  </s>
<s> point to it (by DNS), and have the server at the T1 socket do the right thing.  </s>
<s> Modifying httpd to look at the header and pick the root from a config file would be trivial, if the information were just passed.  </s>
<s> Playing games with IP addresses is not an option in my case, since I doubt the T1 link owner will let me play around with their routers and interface configurations.  </s>
<s> Since any old Sparc-1 with 2GB disk and 32MB memory will make a splendid server, the expensive resource is net bandwidth.  </s>
<s> In the future, more and more small businesses, individuals, and organizations (the San Francisco Aids Foundation is trying to do something very close to what I'm trying to do), will buy shares in a dedicated off-site web server.  </s>
<s> It'll sit right next to an existing T1 socket to reduce telco costs I can't see why there's even any discussion about this.  </s>
<s> Just add the damn field to the spec so people can get things working.  </s>
<s> -- Jan Brittenson bson@eng.sun.com  </s>

<s> I faced a couple of problems compiling Amaya on an Alpha workstation running Linux (Red Hat 5.0).  </s>
<s> The first I imagine is not linux-specific, and I could fix it, but I can't handle the second.  </s>
<s> (a) There seems to be a problem with the Amaya makefile in the source package which I downloaded from ftp.w3.org (amaya-src-1.2a.tar.gz) # Main Makefile for Thot/Amaya source tree # Generated from Makefile.in # Daniel Veillard, 1997 bin/cextract : @(cd tools/cextract-$(CEXTRACT_VER) ; $(MAKE) CC="-O" CFLAGS="$(CFLAGS)" cextract) proto : rebuild bin/cextract @(for dir in $(SUBDIRS) ;\ do if test -d $$dir ; then cd $$dir ; \  </s>
<s> $(MAKE) CC="$(CC)" CFLAGS="$(CFLAGS)" proto ; \ cd .. ; fi ;done )  </s>
<s> It refuses to "make proto".  </s>
<s> I changed the line for bin/cextract to $(MAKE) CC="$(CC) .... and it compiles then.  </s>
<s> (b) Moreover, I'm unable to "make kaffe": it gives the following error message gcc -g -O2 -I. -I../../../../kaffe-0.9.2/kaffe/kaffe/../kaffevm -I../../config -I../../../../kaffe-0.9.2/kaffe/kaffe/../../config -I../../include -I../../../../kaffe-0.9.2/kaffe/kaffe/../../include -o kaffe main.o -L../kaffevm -lkaffevm -L../../packages/tjwassoc.co.uk/APIcore/lib -lnative -L../../packages/tjwassoc.co.uk/APInet/lib -lnet -L../../packages/tjwassoc.co.uk/APIzip/lib -lzip -L/usr/X11/lib -lX11 -lkaffevm -lm -lc ../kaffevm/libkaffevm.a(classMethod.o):  </s>
<s> In function `buildDispatchTable': /temp/stuff/Thot/obj/kaffe-0.9.2/kaffe/kaffevm/../../../../kaffe-0.9.2/kaffe/kaffevm/classMethod.c:746: undefined reference to `alpha_do_fixup_trampoline' collect2: ld returned 1 exit status Can anyone help with this?  </s>
<s> Rahul Siddharthan rsidd@physics.iisc.ernet.in  </s>
<s> Department of Physics, Indian Institute of Science, Bangalore 560012 (India)  </s>
<s> In-reply-to: Your message of Fri, 01 May 1998 10:04:46 -0400."  </s>
<s> Pine.LNX.3.96.980501095342.1101A-100000@theory6.physics.iisc.erne  </s>
<s> t.in  </s>
<s> The osf1 binaries are now available on our serveur (see  </s>
<s> I think you made some mistakes somewhere.  </s>
<s> Did you follow the process given in http://www.w3.org/Amaya/User/Autoconf.html a) create a subdirectory osf1 b) go into it to configure: cd osf1  </s>
<s> ../configure  </s>
<s> Regards Irene.  </s>
<s> I said, a linux machine, not OSF.  </s>
<s> The autoconf page instructs me to create a subdirectory called obj (not osf1), cd to it, and run configure, and that's what I did.  </s>
<s> The object directory name doesn't matter.  </s>
<s> Ok, I don't understand why $(MAKE) CC="$(CC)" CFLAGS="$(CFLAGS)" proto ; chokes on your setup, it seems valid to me ...  </s>
<s> Concerning the second and more annoying problem with kaffe, the autoconf stuff tend to build the java support using kaffe which  </s>
<s> in turn doesn't seems to work well on Linux/Alpha.  </s>
<s> I suggest using the non java distribution of Amaya [1] and use:  </s>
<s> ../configure --disable-java to for the compilation process to use the libwww http implementation instead of using the Java engine.  </s>
<s> I a second step, if running without Java engine really hurts you, then trying to debug kaffe-0.9.2 on the linux/alpha platform seems the only choice and in that case I suggest looking at the kaffe mailing-list archive [2] to find references of this problem, if any, yours, Daniel [1] ftp://ftp.w3.org/pub/amaya/amaya-src-1.2a.tar.gz [2] http://rufus.w3.org/tools/Kaffe/messages/ Daniel.Veillard@w3.org | W3C MIT/LCS NE43-344 | Today's Bookmarks : Tel : +1 617 253 5884 | 545 Technology Square | Linux, WWW, rpm2html,  </s>
<s> I said, a linux machine, not OSF.  </s>
<s> The autoconf page instructs me to create a subdirectory called obj (not osf1), cd to it, and run configure, and that's what I did.  </s>
<s> Regards Rahul.  </s>
<s> i ../configure  </s>
<s> In-reply-to: Your message of Mon, 04 May 1998 10:56:45 -0400."  </s>
<s> Pine.LNX.3.96.980504202010.4413A-100000@theory7.physics.iisc.erne  </s>
<s> t.in  </s>
<s> Sorry Rahul, I read too quickly your message.  </s>
<s> If you processed as explained in Autoconf it seems you have troubles with make or cpp.  </s>
<s> By default ../configure doesn't try to compile Kaffe and obviously you cannot compile it because the source is not available.  </s>
<s> Regards Irene.  </s>
<s> Let me go through what I did, again: (sorry I may have missed out some important stuff earlier): (1) I tried unzipping the amaya-java source and compiling, didn't work.  </s>
<s> (2) I tried unzipping the amaya-src and compiling, didn't work.  </s>
<s> (3) Some time later, I tried amaya-java again.  </s>
<s> Didn't work.  </s>
<s> (4) Then I did make clean, and unzipped amaya-src into the *same* directory (Thot).  </s>
<s> Maybe that matters?  </s>
<s> (5) I did ../configure without java.  </s>
<s> But the problem with the makefile seems to be in the source Makefile.in, as I said earlier.  </s>
<s> Didn't work.  </s>
<s> (6) After I fixed the makefile, it compiled fine, runs ok most of the time.  </s>
<s> (7) Then I tried reconfiguring (after a make clean), with java, it refuses to compile.  </s>
<s> (8) I tried the make stages one by one, as described in autoconf.html,  </s>
<s> and it chokes on the make kaffe step.  </s>
<s> Hope this is of help.  </s>
<s> Rahul.  </s>
<s> It works fine.  </s>
<s> The problem is in the earlier line, which I quote again: bin/cextract : @(cd tools/cextract-$(CEXTRACT_VER) ; $(MAKE) CC="-O" When I make proto, it chokes on this line.  </s>
<s> Regarding Java, no, I'm not desperate to run it.  </s>
<s> I just wanted to let you know the problem.  </s>
<s> Regards Rahul.  </s>
<s> When I untarred the OSF binary distribution right now, I found that most files were not readable by group or world.  </s>
<s> I don't think this is how you want to make a binary distribution...  </s>
<s> In any case, it seems to run on my new Alpha (running 4.0D).  </s>
<s> BTW, you are welcome to an account on the system if you want it.  </s>
<s> Dunno where you are getting your binary bits these days for Digital UNIX. - Jim Jim Gettys Industry Standards and Consortia Digital Equipment Corporation Visting Scientist, World Wide Web Consortium, M.I.T. jg@w3.org,  </s>
<s> jg@pa.dec.com  </s>
<s> I'm in a similar position (having a Alpha with RH 5.0) and not being able to build cleanly.  </s>
<s> I have seen comments (such as the one below) about compatibility between OSF/1 (now Digital UNIX) and Alpha Linux binaries.  </s>
<s> Is it possible that the Amaya OSF/1 binary was linked statically or that a statically linked binary could easily be made available?  </s>
<s> : Hi, : We're interested in getting an alpha based PC (something like a : microway Screamer) to do number crunching on.  </s>
<s> What I'm wondering is : whether binaries which we compile under Digital Unix (DEC Fortran) on : our Alpha Stations will run on the Alpha PC w/Linux as the OS? Or, : would we need to buy a compiler and compile under the new platform.  </s>
<s> : Thanks, : J They will run if linked statically (with -non_cached flag).  </s>
<s> DEC Fortran is still far superior than anything you can get on Linux/Alpha platform.  </s>
<s> Xiaoguang Zhang  </s>
<s> In-reply-to: Your message of Mon, 04 May 1998 21:21:00 +0530."  </s>
<s> Pine.LNX.3.96.980504211435.15565B-100000@theory6.physics.iisc.ern  </s>
<s> et.in  </s>
<s> I have integrated you bug fix.  </s>
<s> Thanks  </s>
<s> The release amaya-src-1.2a is a core release and doesn't include kaffe and java code.  </s>
<s> Releases amaya-java-src are done by Daniel Veillard who is in charge to adapt the java interface to each new core release.  </s>
<s> Today amaya-src and amaya-java-src have 2 releases of difference and you have to use release 1.1c if you need the Java interface.  </s>
<s> You cannot use amaya 1.2a C code with amaya 1.1c Java code.  </s>
<s> Yes. It's clear now.  </s>
<s> Irene.  </s>

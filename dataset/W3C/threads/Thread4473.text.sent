15.4.4 fn:doc fn:doc($uri as xs:string?) as document? 
No mention of the current 1.0 practice, fn:doc('') retrieving the current stylesheet. 
Please add that back in if its been removed. 
If its still available, please document it. 
If its been replaced please annotate to locate it. 
I regret the change from document() to doc(). 
An unnecessary change from an xslt perspective, requiring work which is not necessary when migrating from 1.0 to 2.0 What was the justification for the name change? 
Regards DaveP. 
AC RNIB **** snip here ***** NOTICE: The information contained in this email and any attachments is confidential and may be legally privileged. 
If you are not the intended recipient you are hereby notified that you must not use, disclose, distribute, copy, print or rely on this email's content. 
If you are not the intended recipient, please notify the sender immediately and then delete the email and any attachments from your system. 
RNIB has made strenuous efforts to ensure that emails and any attachments generated by its staff are free from viruses. 
However, it cannot accept any responsibility for any viruses which are transmitted. 
We therefore recommend you scan all attachments. 
Please note that the statements and views expressed in this email and any attachments are those of the author and do not necessarily represent those of RNIB. 
RNIB Registered Charity Number: 226227 Website: http://www.rnib.org.uk 
I don't share your reading of this (notoriously difficult) RFC. 
The paragraph you are quoting occurs within a section that is describing how to resolve a relative URI against a base URI. 
It states explicitly that you can't resolve a relative URI without knowing the base URI, and section 5.1 explains clearly the precedence of the rules for establishing a base URI, which are reflected in the XML specifications for xml:base. 
I think that the paragraph you quote is using the term "current document" loosely (there is no formal definition of this term and it is not used anywhere else) to mean "the resource identified by the base URI", and that the base URI should be established as described in section 5.1 - which in an XML context, means by using xml:base. 
Michael Kay From: Kian-Tat Lim [mailto:ktl@ktlim.com] 
Sent: 13 May 2003 14:53 Subject: RE: TR/xquery-operators/#func-doc xml:base changes the meanings of relative URIs in a document, including the meaning of the relative URI "". 
This appears to be a misunderstanding of RFC2396, section 5.2 "Resolving Relative References to Absolute Form", which states: 2. If the path component is empty and the scheme, authority, and query components are undefined, then [the URI reference] is a reference to the current document and we are done. 
This occurs without any reference to a base URI, whether specified in the document using xml:base or via any other method. 
This specific example is the first one in section C.2 of the RFC. 
As Dave Pawson desires, the relative URI "" should be guaranteed to refer to the current document, regardless of any xml:base setting. 
Kian-Tat Lim, ktl@ktlim.com, 
UTF-7: +Z5de+pBU- Michael, I agree that the RFC is notorious for its inexact language and can be difficult to understand. 
No disagreement here. 
Actually, "current document" is also used in section 4.2, which I just noticed is much more explicit about what the zero-length string means as a URI: A URI reference that does not contain a URI is a reference to the current document. 
In other words, an empty URI reference within a document is interpreted as a reference to the start of that document, However, if the URI reference occurs in a context that is always intended to result in a new request, as in the case of HTML's FORM element, then an empty URI reference represents the base URI of the current document and should be replaced by that URI when transformed into a request. 
Since fn:resolve-uri explicitly disclaims in the Note that any new request will occur, the second part of this does not seem to apply. 
Accordingly, as long as the XPath or argument to fn:resolve-uri() (or fn:doc() or document()) appears within a document, the zero-length string should be a reference to the start of that document. 
In light of the above-referenced section, it is hard to see how to justify this from the RFC's language. 
If this were the intent, there would be no need for the "However". 
Kian-Tat Lim, ktl@ktlim.com, 
UTF-7: +Z5de+pBU- 

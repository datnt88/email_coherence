<s> i've got a problem while responding to POST requests.  </s>
<s> i'm currently developing a small http-server to configure some files via a webbrowser.  </s>
<s> while sending responses to GET requests everything works fine and the browser prints the output.  </s>
<s> but if i try to handle a post request i encounter different reactions by netscape navigator and internet explorer.  </s>
<s> after processing the content of the post-request i'm sending the html-output to the client and close the connection.  </s>
<s> this works fine with NN. but IE doesn't show the page and gives an error-msg telling me that the connection has been reset.  </s>
<s> i just don't get it why NN is doing fine and IE not.  </s>
<s> what's the difference between responses to GET and POST requests ?  </s>
<s> why is IE telling me errors and not showing the transmitted page ?  </s>
<s> greetings, olli here's some of the code: while ((conn = accept(sock,(struct sockaddr *) &amp;addr,&amp;addr_length))  = 0) reading/parsing header etc. if (strcmp(request- method,"POST") == 0) putsock(conn,"HTTP/1.0 200 OK\n"); putsock(conn,"Content-Type: text/plain\n\n");  </s>
<s> putsock(conn,"Netscape Navigator shows this.\ Internet Explorer gives error"); // here NN says "Document Done" and shows the page // but IE gives error msg "Connection Reset" close(conn); Sent through GMX FreeMail - http://www.gmx.net  </s>
<s> There isn't any.  </s>
<s> Those "\n" should really be "\r\n", but that isn't your problem.  </s>
<s> Your TCP is probably (incorrectly) sending an RST when you do the close.  </s>
<s> If the browser hasn't read all of the response, then any unread part will be discarded and produce the error you are seeing.  </s>
<s> The difference between the browsers could be timing or differences in the way they do i/o.  </s>
<s> If your platform supports it, use shutdown() rather than close().  </s>
<s> Scott Lawrence Architect lawrence@agranat.com  </s>
<s> Virata http://www.virata.com/  </s>
<s> http://emweb.com/  </s>
<s> Fred Bohle@NEON 08/25/2000 08:26 AM Olli, You didn't mention http version in the browsers.  </s>
<s> If Netscape is using 1.0 and IE is using 1.1, you may have a problem with omitting the Connection: header.  </s>
<s> I suggest adding a header line with Connection: close to tell the browser that you are closing the connection.  </s>
<s> The addition of a shutdown() call would help too.  </s>
<s> When all else fails, read the RFCs 1945 and 2616, available from www.ietf.org.  </s>
<s> Reading the Apache source code is useful too.  </s>
<s> Fred OSeemann@gmx.net on 08/25/2000 05:32:15 AM Subject: problem with responses to post-requests  </s>
<s> i've got a problem while responding to POST requests.  </s>
<s> i'm currently developing a small http-server to configure some files via a webbrowser.  </s>
<s> while sending responses to GET requests everything works fine and the browser prints the output.  </s>
<s> but if i try to handle a post request i encounter different reactions by netscape navigator and internet explorer.  </s>
<s> after processing the content of the post-request i'm sending the html-output to the client and close the connection.  </s>
<s> this works fine with NN. but IE doesn't show the page and gives an error-msg telling me that the connection has been reset.  </s>
<s> i just don't get it why NN is doing fine and IE not.  </s>
<s> what's the difference between responses to GET and POST requests ?  </s>
<s> why is IE telling me errors and not showing the transmitted page ?  </s>
<s> greetings, olli here's some of the code: while ((conn = accept(sock,(struct sockaddr *) &amp;addr,&amp;addr_length))  = 0) reading/parsing header etc. if (strcmp(request- method,"POST") == 0) putsock(conn,"HTTP/1.0 200 OK\n"); putsock(conn,"Content-Type: text/plain\n\n"); putsock(conn,"Netscape Navigator shows this.\ Internet Explorer gives error"); // here NN says "Document Done" and shows the page // but IE gives error msg "Connection Reset" close(conn); Sent through GMX FreeMail - http://www.gmx.net  </s>
<s> You might find that the easiest way to be compliant is to build on top of an existing Web server.  </s>
<s> If you use Apache, you can strip out the parts you don't need.  </s>
<s> |John Stracke | http://www.ecal.com  </s>
<s> |My opinions are my own.| |Chief Scientist |=============================================| |eCal Corp. |The plural of mongoose is polygoose.  </s>
<s> | |francis@ecal.com| |  </s>
<s> do you have a test site where I could see this and also do you have any network traces of the problem?  </s>
<s> I'd like to see if there is a problem with the way IE handles this.  </s>
<s> Get Your Private, Free E-mail from MSN Hotmail at http://www.hotmail.com  </s>
<s> Are you sure "\n" (C++) represents CRLF or only a CR???  </s>
<s> I thought it represents only the CR.  </s>
<s> Maybe this is the problem, because RFC2616 requires you to send only CRLF in the headers and status/'command'-line.  </s>
<s> - Joris  </s>

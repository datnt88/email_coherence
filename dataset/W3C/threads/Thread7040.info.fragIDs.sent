<s> Section 2.1 To say that you don't mandate the use of any particular encoding, and then to recommend the use of UTF-8 for a certain case, could probably stand for some revision.  </s>
<s> Try to avoid the terms "glyph" and "character set", if not used  </s>
<s> in a manner consistent with UTR#17.  </s>
<s> Try to cite ISO/IEC 10646 with at least "ISO/IEC" rather than just "ISO".  </s>
<s> (And should this be linked as a reference?)  </s>
<s> Questionable grammar in the last sentence should be addressed ("We recommend that the data first be encoded, then escaping [certain octets]" reads a little awkwardly.)  </s>
<s> The text currently reads: "As described above, the URI syntax is defined in terms of characters by reference to the US-ASCII encoding of characters to octets.  </s>
<s> This specification does not mandate the use of any particular mapping between its character set and the octets used to store or transmit those characters." [...] "Most URI schemes represent data octets by the US-ASCII  </s>
<s> character corresponding to that octet, either directly in the  </s>
<s> form of the character's glyph or by use of an escape triplet (section 2.4)." "When a URI scheme defines a component that represents textual data consisting of characters from the Unicode (ISO 10646) character set, we recommend that the data be encoded first as octets according to the UTF-8 [RFC2279] character encoding, and then escaping only those octets that are not in the unreserved character set."  </s>
<s> I suggest changing it to: "As described above, the URI syntax is defined in terms of characters by reference to the US-ASCII encoding of characters to octets.  </s>
<s> This specification only mandates that URIs be composed of abstract characters, regardless of what mapping to octets, if any, is used to store or transmit those characters.  </s>
<s> [...] "Most URI schemes represent data octets by the US-ASCII character corresponding to that octet, either directly in the form of the actual character, or indirectly by use of an escape triplet (section 2.4)." "When a URI scheme defines a component that represents textual data consisting of characters from the Unicode / ISO/IEC 10646 character repertoire, we recommend first encoding the data as octets according to the UTF-8 [RFC2279] character encoding, and then escaping only those octets that are not in the unreserved character set."  </s>
<s> -Mike  </s>
<s> I want to revise my suggestion for rewording section 2.1.  </s>
<s> In the last paragraph, I didn't follow my own advice!  </s>
<s> Also, there are a couple of other details that I want to address.  </s>
<s> 1.  </s>
<s> I missed a "character set".  </s>
<s> 2. Prior to the adoption of RFCs 2277 and 2718, protocols and URI schemes were free to mandate the use of encodings other than UTF-8 as the basis for %-escaping, or to not speak to the issue at all (HTTP being the most notorious example).  </s>
<s> This should be acknowledged when recommending UTF-8.  </s>
<s> 3. Link the first mention of escaping to section 2.4 (#escape).  </s>
<s> 4. Even though the reader probably can figure out what is meant, the recommended action to encode-then-escape can be difficult to follow to the letter.  </s>
<s> If you escape an octet, then you have a triplet of characters.  </s>
<s> So far, so good.  </s>
<s> But if you don't escape an octet, then you've got ...an octet.  </s>
<s> You might say to just use characters represented by the unescaped octets, but then this makes me think the whole example is redundant, saying, in effect, "to escape certain characters, encode them all so you know how to escape them, but then just escape the ones you need to."  </s>
<s> What's the point?  </s>
<s> Just drop this entirely.  </s>
<s> So, the last paragraph should be sufficient if it reads like this: In accordance with the trend toward UTF-8 [RFC2279] (see also [RFC2277] and [RFC2718]), when a URI scheme defines a component that represents textual data consisting of characters from the Unicode / ISO/IEC 10646 repertoire and does not mandate the use of some other encoding, we recommend using UTF-8 [RFC2279] to determine the octets used to escape [#escape] characters that are not in the unreserved set.  </s>
<s> Hi Mike, Bunch of good and thougtful comments - thanks.  </s>
<s> Below, "trend toward UTF-8" is a little weak.  </s>
<s> You cited RFC 2277 "IETF Policy on Character Sets and Languages", with is also BCP 18, an IETF best practices document.  </s>
<s> RFC 2277 says on pages 2-3: "All protocols MUST identify, for all character data, which charset is in use.  </s>
<s> Protocols MUST be able to use the UTF-8 charset, which consists of  </s>
<s> the ISO 10646 coded character set combined with the UTF-8 character encoding scheme, as defined in [10646] Annex R (published in Amendment 2), for all text.  </s>
<s> Protocols MAY specify, in addition, how to use other charsets or other character encoding schemes for ISO 10646, such as UTF-16, but  </s>
<s> lack of an ability to use UTF-8 is a violation of this policy; such a  </s>
<s> violation would need a variance procedure ([BCP9] section 9) with clear and solid justification in the protocol specification document  </s>
<s> before being entered into or advanced upon the standards track."  </s>
<s> While a URI is not a protocol, it _is_ a protocol element, containing a (sort of) human-readable identifier, which is typically displayed to human users.  </s>
<s> As such, I believe that UTF-8 support in URI is mandated by RFC 2277.  </s>
<s> Cheers, - Ira McDonald High North Inc I want to revise my suggestion for rewording section 2.1.  </s>
<s> In the last paragraph, I didn't follow my own advice!  </s>
<s> Also, there are a couple of other details that I want to address.  </s>
<s> 1.  </s>
<s> I missed a "character set".  </s>
<s> 2. Prior to the adoption of RFCs 2277 and 2718, protocols and URI schemes were free to mandate the use of encodings other than UTF-8 as the basis for %-escaping, or to not speak to the issue at all (HTTP being the most notorious example).  </s>
<s> This should be acknowledged when recommending UTF-8.  </s>
<s> 3. Link the first mention of escaping to section 2.4 (#escape).  </s>
<s> 4. Even though the reader probably can figure out what is meant, the recommended action to encode-then-escape can be difficult to follow to the letter.  </s>
<s> If you escape an octet, then you have a triplet of characters.  </s>
<s> So far, so good.  </s>
<s> But if you don't escape an octet, then you've got ...an octet.  </s>
<s> You might say to just use characters represented by the unescaped octets, but then this makes me think the whole example is redundant, saying, in effect, "to escape certain characters, encode them all so you know how to escape them, but then just escape the ones you need to."  </s>
<s> What's the point?  </s>
<s> Just drop this entirely.  </s>
<s> So, the last paragraph should be sufficient if it reads like this: In accordance with the trend toward UTF-8 [RFC2279] (see also  </s>
<s> [RFC2277] and [RFC2718]), when a URI scheme defines a component that represents textual data consisting of characters from the Unicode / ISO/IEC 10646 repertoire and does not mandate the use of some other encoding, we recommend using UTF-8 [RFC2279] to determine the octets used to escape [#escape] characters that are not in the unreserved set.  </s>
<s> Please keep in mind that the URI technology predates UTF-8 by at least 5 years, and the IETF policies on identifying charset in use are even later than that.  </s>
<s> As such, they do not apply.  </s>
<s> We are way beyond the design phase.  </s>
<s> The hardest part of editing a spec towards standard status is recognizing what can be tweaked without breaking all of the deployed implementations that justify it being a standard.  </s>
<s> New ideas need to be proposed as separate specifications and deployed to the point where they attain equal status with the standard.  </s>
<s> That doesn't mean change is impossible -- it is simply slow and not always correct (some of the changes I made for RFC 2396 simply did not work out in practice and were not universally deployed).  </s>
<s> ....Roy BTW, I have 56 stored requests for changes to the next draft, so please accept my apologies if I don't respond to all of the commentary.  </s>
<s> I read them all, but suggestions that include text get first dibs because they are simply easier to enact or respond to directly.  </s>
<s> Hi Roy, Actually, the IETF can and is enforcing that no document remains _on_ the standards track at all that doesn't support or mandate use of UTF-8 in all human readable protocol elements.  </s>
<s> See the highlighted line in the verbatim quote from RFC 2277 below.  </s>
<s> I assure you from personal experience that a waiver for a variance is _not_ likely.  </s>
<s> If RFC 2396 is revised and republished (as now underway), then RFC 2396 bis MUST conform to RFC 2277 or else get a waiver.  </s>
<s> "Protocols MAY specify, in addition, how to use other charsets or other character encoding schemes for ISO 10646, such as UTF-16, but lack of an ability to use UTF-8 is a violation of this policy; such a  </s>
<s> violation would need a variance procedure ([BCP9] section 9) with clear and solid justification in the protocol specification document  </s>
<s> For existing protocols or protocols that move data from existing datastores, support of other charsets, or even using a default other  </s>
<s> than UTF-8, may be a requirement.  </s>
<s> This is acceptable, but UTF-8 support MUST be possible."  </s>
<s> Sorry I can't propose the right wording.  </s>
<s> I just observe that the URI being pre-existing does not preclude applicability of RFC 2277.  </s>
<s> ...and hope Martin (for example) will suggest the best wording... Cheers, - Ira McDonald High North Inc Please keep in mind that the URI technology predates UTF-8 by at least 5 years, and the IETF policies on identifying charset in use are even later than that.  </s>
<s> As such, they do not apply.  </s>
<s> We are way beyond the design phase.  </s>
<s> The hardest part of editing a spec towards standard status is recognizing what can be tweaked without breaking all of the deployed implementations that justify it being a standard.  </s>
<s> New ideas need to be proposed as separate specifications and deployed to the point where they attain equal status with the standard.  </s>
<s> That doesn't mean change is impossible -- it is simply slow and not always correct (some of the changes I made for RFC 2396 simply did not work out in practice and were not universally deployed).  </s>
<s> ....Roy BTW, I have 56 stored requests for changes to the next draft, so please accept my apologies if I don't respond to all of the commentary.  </s>
<s> I read them all, but suggestions that include text get first dibs because they are simply easier to enact or respond to directly.  </s>
<s> Ira, you left out the important part of RFC 2277 where it talks about scope.  </s>
<s> Names are a problem, because people feel strongly about them, many of them are mostly for local usage, and all of them tend to leak out of the local context at times.  </s>
<s> RFC 1958 [RFC 1958] recommends US-ASCII for all globally visible names.  </s>
<s> This document does not mandate a policy on name internationalization, but requires that all protocols describe whether names are internationalized or US-ASCII.  </s>
<s> In the context of RFC 2277, URIs are "names".  </s>
<s> I don't think any waiver is necessary.  </s>
<s> Rather, there is separate work (http://www.w3.org/International/iri-edit/ ) to define a new protocol element (IRI) that is internationalized.  </s>
<s> a  </s>
<s> document  </s>
<s> other  </s>
<s> Hi Larry, You're right of course.  </s>
<s> URI (as names) are NOT subject to RFC 2277.  </s>
<s> I was unfortunately conflating them with (any other) _textual_ human-readable protocol elements, which certainly ARE subject to RFC 2277.  </s>
<s> Thanks for straightening me out.  </s>
<s> By the way, shouldn't RFC 2396bis (URI) at least informatively reference the IRI work?  </s>
<s> Cheers, - Ira McDonald High North Inc Ira, you left out the important part of RFC 2277 where it talks about scope.  </s>
<s> Names are a problem, because people feel strongly about them, many of them are mostly for local usage, and all of them tend to leak out of the local context at times.  </s>
<s> RFC 1958 [RFC 1958] recommends US-ASCII for all globally visible names.  </s>
<s> This document does not mandate a policy on name internationalization, but requires that all protocols describe whether names are internationalized or US-ASCII.  </s>
<s> In the context of RFC 2277, URIs are "names".  </s>
<s> I don't think any waiver is necessary.  </s>
<s> Rather, there is separate work (http://www.w3.org/International/iri-edit/ ) to define a new protocol element (IRI) that is internationalized.  </s>
<s> a  </s>
<s> document  </s>
<s> other  </s>
<s> Most of your comments were already made by Martin and have been fixed in the draft.  </s>
<s> The exception being  </s>
<s> The reference is to the UTF-8 RFC, which defines it as ISO.  </s>
<s> I'll have to check to see if an update has reached RFC status yet.  </s>
<s> ....Roy  </s>
<s> Roy T. Fielding said:  </s>
<s> The current RFC on the topic is 3629, the abstract of which refers to "ISO/IEC 10646-1".  </s>
<s> Internet Expert | Home: clive@davros.org  </s>
<s> | *** NOTE CHANGE *** Thus plc | | Mobile: +44 7973 377646  </s>
<s> Fixed. ....Roy  </s>

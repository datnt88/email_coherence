<s> Here are the XML Core WG comments on the XQuery 1.0 and XPath 2.0 Data Model Last Call WD at The XML Core WG agreed to submit these as WG comments, but Richard Tobin (hereon cc-ed) was the primary author of these.  </s>
<s> Expanded name terminology [2] The draft uses the term "expanded QName" for namespace name / local name pairs.  </s>
<s> This is an unfortunate change given that Namespaces 1.1 has adopted the term "expanded name" from XPath 1.0.  </s>
<s> The draft uses the term "namespace URI" in several places.  </s>
<s> "Namespace name" is preferable.  </s>
<s> Document order is pre-order [3.2] Document order is stated to be "in-order", but is in fact "pre-order".  </s>
<s> "Inconsistent" data models [3.3] "Inconsistent" data models are referred to but not defined.  </s>
<s> This may not be unreasonable.  </s>
<s> Type mapping list incomplete [3.6] The list defining the type of an element information item is not complete.  </s>
<s> What happens in the case where [member type definition] or [type definition] is present but hase no name property (because the type is anonymous)?  </s>
<s> Presumably the generated anonymous type name is used.  </s>
<s> The list also applies to attributes, not just elements as stated.  </s>
<s> Mapping "no value" and "unknown" [section 4 as a whole] Presumably in general infoset properties with no value or which are unknown map to empty values in the data model, but this is not explicitly stated.  </s>
<s> Document URI example [4.2.2] "For example, if a collection of documents is returned by the fn:collection function, the dm:document-uri may serve to distinguish between them even though each has the same dm:base-uri."  </s>
<s> Under what circumstances can this happen?  </s>
<s> Why would documents retrieved from different URIs have the same base URI?  </s>
<s> "Invalid" infosets [4.2.4] "the resulting Infoset may be invalid": the term "invalid" is not appropriate here.  </s>
<s> For infosets that do not correspond to well-formed documents it would be better to call the infosets "not well-formed".  </s>
<s> The are more uses of "valid" in this sense elsewhere in the draft.  </s>
<s> Zero-length namespace URIs [4.3.1] (7) "A namespace node whose namespace URI is the zero-length string": namespace URIs cannot be zero-length strings.  </s>
<s> It would be better to say "whose namespace URI property is the zero-length string".  </s>
<s> Namespace nodes not a superset "The data model does not enforce a constraint that the namespaces of an element must be a superset of the namespaces of its parent".  </s>
<s> Note that Namespaces 1.1 will allow undeclaring of prefixes, so this constraint will no longer apply.  </s>
<s> Furthermore, the wording is not right: even in Namespaces 1.0 a prefix can be rebound, so the namespace nodes of a child may be quite different from those of the parent.  </s>
<s> The *set of prefixes* of the namespaces is a superset of the set of prefixes of the parent's namespaces.  </s>
<s> Element-declaration vs. node-name [4.3.2] "The dm:element-declaration accessor returns the xs:QName of the global element declaration associated with this element."  </s>
<s> Surely this is just the node-name of the element itself?  </s>
<s> Namespace nodes and QNames in content [4.3.3] "Some implementations may choose to use only a subset of the namespaces present in the PSVI".  </s>
<s> What are stylesheets supposed to do to ensure that documents using QNames in content are not broken by this change?  </s>
<s> Errors in element mapping to infoset [4.3.4]  </s>
<s> In the table, under [children], the value refers to the [namespace name] property instead of the [children] property.  </s>
<s> Under [namespace attributes], the value should be a sequence of attribute information items, not of namespace information items.  </s>
<s> Prefix rebinding forgotten The last paragraph appears to have forgotten the possibility of prefix rebinding (cf 4.3.1  </s>
<s> above).  </s>
<s> Generated attribute prefixes need in-scope namespace [4.4.4]  </s>
<s> The description of [prefix] construction does not explicitly mention that the owner element's [in scope namespaces] will have to be modified.  </s>
<s> Error in namespace mapping to infoset [4.5.4]  </s>
<s> In the table, under [prefix], the value section has been cut-and-pasted from elsewhere and is completely wrong.  </s>
<s> Pointless constraint on PI target [4.6.1] "The string "? " must not occur within the target or content."  </s>
<s> It is pointless to say that it must not occur in the target, since the target is an NCName and does not allow either of those characters.  </s>
<s> Atomic values list incomplete [5] The bulleted list ignores the possibility of lists of unions, etc.  </s>
<s> Why are union values sequences?  </s>
<s> And why are values of union type represented by *sequences* of atomic values?  </s>
<s> How do facets affect value construction?  </s>
<s> "In particular the construction takes into consideration the facets of the type."  </s>
<s> Its not clear what this is getting at.  </s>
<s> The facets affect whether the lexical representation is valid, but in most cases don't affect the value (exceptions are whiteSpace, and the facets of memberTypes of unions).  </s>
<s> Missing infoitem usage [A] The [attribute type] property of attribute information items is used (when the [validity] property is not present).  </s>
<s> The [base URI] property of processing instruction information items is used.  </s>
<s> Whitespace-only text nodes included?  </s>
<s> [D] "The data model doesn't include whitespace-only text nodes."  </s>
<s> Presumably this means that whitespace-only text nodes are not shown, not that they aren't present in the data model.  </s>
<s> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 This reply addresses editorial issues from the Core WG LC1 comments.  </s>
<s> No, I'm pretty sure it's in-order.  </s>
<s> I'll be a bit embarrassed if I'm shown to be wrong on this point, but...  </s>
<s> The document has been reworded to avoid that term.  </s>
<s> The mapping sections have been extensively redrafted.  </s>
<s> I believe this is clearer now.  </s>
<s> The WG understands that in some MIME multi-part cases, it is possible for several documents to have thee same base URI and yet be distinct.  </s>
<s> The sections that describe mapping to the infoset have been removed.  </s>
<s> This text has been redrafted.  </s>
<s> This text has been redrafted.  </s>
<s> This accessor has been removed.  </s>
<s> They cannot.  </s>
<s> Use an implementation that does not casually discard namespaces.  </s>
<s> The sections that describe mapping to the infoset have been removed.  </s>
<s> The sections that describe mapping to the infoset have been removed.  </s>
<s> The sections that describe mapping to the infoset have been removed.  </s>
<s> The sections that describe mapping to the infoset have been removed.  </s>
<s> True.  </s>
<s> This text has been removed.  </s>
<s> Fixed.  </s>
<s> Correct. I've clarified the wording.  </s>
<s> Be seeing you, norm Norman.Walsh@Sun.COM / XML Standards Architect / Sun Microsystems, Inc. NOTICE: This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  </s>
<s> Any unauthorized review, use, disclosure or distribution is prohibited.  </s>
<s> If you are not the intended recipient, please contact the sender by -----BEGIN PGP SIGNATURE----- Version: GnuPG v1.2.3 (GNU/Linux) Comment: Processed by Mailcrypt 3.5.8  </s>
<s> http://mailcrypt.sourceforge.net/  </s>
<s> iD8DBQE/skpKOyltUcwYWjsRAmXyAJwK6rQOmsvzeqG7ptQn7wQuk/HiHACZATgP Z5IuP2jh4GyN5q7Ai0TUf/E= =KAaD -----END PGP SIGNATURE-----  </s>
<s> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1  </s>
<s> The WGs considered this change and rejected it.  </s>
<s> Be seeing you, norm Norman.Walsh@Sun.COM / XML Standards Architect / Sun Microsystems, Inc. NOTICE: This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  </s>
<s> Any unauthorized review, use, disclosure or distribution is prohibited.  </s>
<s> If you are not the intended recipient, please contact the sender by -----BEGIN PGP SIGNATURE----- Version: GnuPG v1.2.3 (GNU/Linux) Comment: Processed by Mailcrypt 3.5.8  </s>
<s> http://mailcrypt.sourceforge.net/  </s>
<s> iD8DBQE/skpnOyltUcwYWjsRAlXOAJwOOH6/86rf41JhYrTexD3drWhspACggazZ M2WfJ1Pv2OZQRddfCrbUJps= =fqzX -----END PGP SIGNATURE-----  </s>
<s> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 / Paul Grosso pgrosso@arbortext.com was heard to say:  </s>
<s> My understanding is that if [member type definition] exists and has no {name} property then [member type definition anonymous] also exists.  </s>
<s> Is that not the case?  </s>
<s> I believe the revised mapping in 4.3.1 of the 12  </s>
<s> Nov draft draft is complete.  </s>
<s> Be seeing you, norm Norman.Walsh@Sun.COM / XML Standards Architect / Sun Microsystems, Inc. NOTICE: This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  </s>
<s> Any unauthorized review, use, disclosure or distribution is prohibited.  </s>
<s> If you are not the intended recipient, please contact the sender by -----BEGIN PGP SIGNATURE----- Version: GnuPG v1.2.3 (GNU/Linux) Comment: Processed by Mailcrypt 3.5.8  </s>
<s> http://mailcrypt.sourceforge.net/  </s>
<s> iD8DBQE/skqBOyltUcwYWjsRAsUGAJ9EYuSiDCD8zlf5OsXCoPgcokPslQCfU5i/ B8mC9e0rBNL3BYId3dWlvVc= =NsK2 -----END PGP SIGNATURE-----  </s>
<s> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 / Paul Grosso pgrosso@arbortext.com was heard to say:  </s>
<s> The union and list of union cases have been clarified in the 12 Nov draft.  </s>
<s> Be seeing you, norm Norman.Walsh@Sun.COM / XML Standards Architect / Sun Microsystems, Inc. NOTICE: This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  </s>
<s> Any unauthorized review, use, disclosure or distribution is prohibited.  </s>
<s> If you are not the intended recipient, please contact the sender by -----BEGIN PGP SIGNATURE----- Version: GnuPG v1.2.3 (GNU/Linux) Comment: Processed by Mailcrypt 3.5.8  </s>
<s> http://mailcrypt.sourceforge.net/  </s>
<s> iD8DBQE/skqXOyltUcwYWjsRAv7vAKCC9KTgZ/tX7UicZFZKo2SskQHNQgCfV+FT tVo2RzVE0JzYi1w/od7hZyI= =B8b7 -----END PGP SIGNATURE-----  </s>
<s> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 / Paul Grosso pgrosso@arbortext.com was heard to say:  </s>
<s> The union and list of union cases have been clarified in the 12 Nov draft.  </s>
<s> Be seeing you, norm Norman.Walsh@Sun.COM / XML Standards Architect / Sun Microsystems, Inc. NOTICE: This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  </s>
<s> Any unauthorized review, use, disclosure or distribution is prohibited.  </s>
<s> If you are not the intended recipient, please contact the sender by -----BEGIN PGP SIGNATURE----- Version: GnuPG v1.2.3 (GNU/Linux) Comment: Processed by Mailcrypt 3.5.8  </s>
<s> http://mailcrypt.sourceforge.net/  </s>
<s> iD8DBQE/skqyOyltUcwYWjsRAvOJAKCAR52edD4BzV4Sxkj0OKuBuT1F2gCfZNis sj9Y/O/cq++lpgJ90OFk3iI= =JGTI -----END PGP SIGNATURE-----  </s>
<s> No. Either: you are a fully-featured schema validator, and you have the [type definition] property and (if the type is a union) the [member type definition property], ... or ... you are a wimpy schema validator, and you have the [type definition type], [type definition namespace], [type definition anonymous] and [type definition name] properties, and (if the type is a union) the [member type definition namespace], [member type definition anonymous] and [member type definition name] properties.  </s>
<s> -- Richard  </s>

<s> It's magnificent.  </s>
<s> Just a few small points in 7.1.2  </s>
<s> (p 19 in the PDF version) the discussion says "has an undefined resource type".  </s>
<s> But I 12.0 says that this property must be defined on all  </s>
<s> resources.  </s>
<s> So maybe 7.1.2 should instead say that the value is empty.  </s>
<s> in 11.4, does the DTD for link actually allow for other tags to occur, or only src and dst?  </s>
<s> My apologies for taking so long to reply to this: On Tuesday, March 10, 1998 3:44 PM, Jim Davis [SMTP:jdavis@parc.xerox.com]  </s>
<s> all  </s>
<s> Good catch!  </s>
<s> The 7th paragraph in the discussion in Section 7.1.2 should definitely say "has an empty resource type" instead of "has an undefined resource type."  </s>
<s> The DTD states that only tags src and dst can occur.  </s>
<s> However, it is  </s>
<s> certainly our intent to allow other tags to be present as well (this is shown in the example in Section 12.10.1).  </s>
<s> As a result, (hopefully some XML/SGML people on the list will double-check this) the link element declaration should be: - Jim  </s>
<s> 7.1.2_empty-  </s>
<s> In 7.1.2  </s>
<s> we refer to an empty resource as undefined not empty I have altered the word from undefined to empty as specified below.  </s>
<s> However, I must respectfully disagree with my learned colleague on the matter of the DTD for LINK (I ALWAYS wanted to say that!!! =).  </s>
<s> As specified  </s>
<s> in section 13, paragraph 1, a DAV XML parser MUST ignore any unknown XML elements.  </s>
<s> Thus one can put any elements one wants into a link and know that  </s>
<s> they will at worst just be ignored.  </s>
<s> Were we to change the DTD as specified  </s>
<s> below we would be forced to put the same change into every DTD production in  </s>
<s> our spec in order to specify what we have already specified in section 13.  </s>
<s> Yaron My apologies for taking so long to reply to this: On Tuesday, March 10, 1998 3:44 PM, Jim Davis [SMTP:jdavis@parc.xerox.com]  </s>
<s> all  </s>
<s> Good catch!  </s>
<s> The 7th paragraph in the discussion in Section 7.1.2 should definitely say "has an empty resource type" instead of "has an undefined resource type."  </s>
<s> The DTD states that only tags src and dst can occur.  </s>
<s> However, it is certainly our intent to allow other tags to be present as well (this is shown in the example in Section 12.10.1).  </s>
<s> As a result, (hopefully some XML/SGML people on the list will double-check this) the link element declaration should be: - Jim  </s>
<s> On Sunday, March 22, 1998 10:22 PM, Yaron Goland  </s>
<s> specified  </s>
<s> that  </s>
<s> specified  </s>
<s> in  </s>
<s> 13. OK by me -- somebody wrote me privately and said that they don't think it's possible to express what we want (any element, interspersed with a src and or dst element) using XML DTDs anyway.  </s>
<s> - Jim  </s>
<s> I have an interesting situation and I'm hoping someone can offer a little advice.  </s>
<s> I'm writing a WEBDAV server that serves out of an object database (which is just a hierarchial tree of objects).  </s>
<s> Objects can't be transmitted directly from the database; they have to be serialized so that they can be transferred over HTTP.  </s>
<s> When serving a GET request, the object is serialized and then finding its Content-Length is easy.  </s>
<s> However, when serving a HEAD or PROPFIND request, there is no way to find the length without serializing the object (which can be a time-consuming process if the object is large).  </s>
<s> It seems like a waste of effort to serialize an object only to find its length.  </s>
<s> As I understand the spec, my server should either send a Content-Length header for GET and HEAD methods and the getcontentlength property for PROPFINDs, or not at all.  </s>
<s> This is more strict than I would like.  </s>
<s> Is there a way around this that I don't see?  </s>
<s> Should I just pay the penalty, or should the spec be modified to support only sending the content length when it is not wasteful to compute it?  </s>
<s> Wesley Felter - wesley@scripting.com  </s>
<s> Look at it from a client point of view.  </s>
<s> Client code would reach an unacceptable level of complexity if every single value either could be there or couldn't be there.  </s>
<s> We needed some sort of consistency so we choose an all or nothing approach.  </s>
<s> IF you return GET then you have to return these properties.  </s>
<s> That way the client only has two code paths, either the resource doesn't support GET or it does have available the specified properties.  </s>
<s> However server people didn't like this because sometimes the values are hard to produce and lots of values may simply not be available.  </s>
<s> So we had to strike a deal.  </s>
<s> Find a middle ground that both the server and client folk could live with.  </s>
<s> The result is the current set of mandatory properties.  </s>
<s> So, that having been said, one needs to be both flexible and realistic.  </s>
<s> I think the answer to your problem is caching.  </s>
<s> After having generated a GET for a property I would cache the header values along with the e-tag that was used in that GET and return that for HEAD and PROPFIND requests.  </s>
<s> If someone follows the HEAD or PROPFIND with a GET and gets different values, so what?  </s>
<s> That is the very nature of an asynchronous universe.  </s>
<s> Unless you are using LOCKing, transactioning, or some other type of consistency guarantee the only thing you can rely upon from request to request is that nothing will remain the same.  </s>
<s> The only important caveat is to make sure that the headers do match with the e-tag.  </s>
<s> Otherwise obviously bad things will result.  </s>
<s> Yaron I have an interesting situation and I'm hoping someone can offer a little advice.  </s>
<s> I'm writing a WEBDAV server that serves out of an object database (which is just a hierarchial tree of objects).  </s>
<s> Objects can't be transmitted directly from the database; they have to be serialized so that they can be transferred over HTTP.  </s>
<s> When serving a GET request, the object is serialized and then finding its Content-Length is easy.  </s>
<s> However, when serving a HEAD or PROPFIND request, there is no way to find the length without serializing the object (which can be a time-consuming process if the object is large).  </s>
<s> It seems like a waste of effort to serialize an object only to find its length.  </s>
<s> As I understand the spec, my server should either send a Content-Length header for GET and HEAD methods and the getcontentlength property for PROPFINDs, or not at all.  </s>
<s> This is more strict than I would like.  </s>
<s> Is there a way around this that I don't see?  </s>
<s> Should I just pay the penalty, or should the spec be modified to support only sending the content length when it is not wasteful to compute it?  </s>
<s> Wesley Felter - wesley@scripting.com  </s>

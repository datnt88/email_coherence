Hi annotea folks, I have developed a client for the annotea framework. 
It used to work very well and I have created, changed and deleted annotations from the testserver fine. 
But today I started to get strange reply's from the test-server (See my RDF below error message): blew its mind. 
br PRE unknown namespace: context: r:type resource=&amp;#39;http://www.w3.org/2000/10/annotationType#Comment&amp;#39;/ W3C::Util::Exception thrown at ../../../W3C/SAX/SAXParseException.pm:159 
W3C::SAX::ChainedSAXParseException::new(...) at ../../../W3C/SAX/XmlParser.pm:178 W3C::SAX::XmlParser::wrap(...) at ../../../W3C/SAX/XmlParser.pm:912 W3C::SAX::PerlXmlParser::element(...) at ../../../W3C/SAX/XmlParser.pm:410 W3C::SAX::PerlXmlParser::processTag(...) at ../../../W3C/SAX/XmlParser.pm:340 W3C::SAX::PerlXmlParser::parseDocument(...) at ../../../W3C/SAX/XmlParser.pm:164 W3C::SAX::XmlParser::parse(...) at ../../../W3C/Rdf/CGIApp.pm:262 
W3C::Rdf::CGIApp::parse(...) at /home/annotest/perl/modules/W3C/Annotations/CGI/annotate:445 (eval) at /home/annotest/perl/modules/W3C/Annotations/CGI/annotate:444 W3C::Annotations::CGI::AnnotateScript::execute(...) at /home/annotest/perl/modules/W3C/Annotations/C GI/annotate:237 (eval) at /home/annotest/perl/modules/W3C/Annotations/CGI/annotate:227 Status: 500 died with Can't call method "flush" without a package or object reference at /home/annotest/perl/mod ules/W3C/Annotations/CGI/annotate line 238. 
Session-id: 1058650431.610446 
The RDF my clients wants to post is very straightforward and has worked earlier: r:RDF xmlns:r='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:d='http://purl.org/dc/elements/1.0/' 
xmlns:a='http://www.w3.org/2000/10/annotation-ns#' xmlns:h='http://www.w3.org/1999/xx/http#' r:Description r:type resource='http://www.w3.org/2000/10/annotation-ns#Annotation'/ h:Body r:parseType='Literal' html head title JUnitTest /title /head body TEST /body /html /h:Body Any suggestions ? 
Thanks, Claus Ljunggren Hi again, Some trial + error revealed that this happens because I use plain html as body -- not xhtml. 
By adding "xmlns='http://www.w3.org/1999/xhtml'" to the html tag -- in my inline body -- things went well. 
Is this mandatory? 
Maybe I have misread the document (http://www.w3.org/2002/12/AnnoteaProtocol-20021219) but it sounds to me as this is just an option (mentioned in section 2.1.2). 
Regards, Claus Ljunggren I'm not sure I entirely believe this. 
There were two problems in the RDF/XML that you included in your first message [1]. 
These were related but separate XML syntax issues, and obscurely identified in the SAX parser errors. 
In the two r:type elements you omitted the namespace identifier for the 'resource' attribute. 
Omission of a namespace qualifier on an RDF attribute when the element itself had an explicit namespace qualifier was accepted at one time by some parsers but only due to a misinterpretation of how XML namespaces were expected to integrate. 
All RDF attributes require a namespace identifier, either by using the default namespace or an explicit namespace prefix. 
The second problem was similar to the first; the html elements also needed a namespace identifier, which your patch supplies. 
Only after fixing both of these do I see that example. 
(BTW, I also had to unwrap the line that the mailer wrapped at " \n/body " -- I got an internal server error with the \n in that position; I think this is a bug.) [1] http://lists.w3.org/Archives/Public/www-annotation/2003JulDec/0019.html 
This particular error actually had nothing to do with whether Annotea requires only XHTML in annotation bodies. 
This is a more subtle question. 
RDF requires that anything inside an rdf:parseType='Literal' be well-formed XML. 
Strictly speaking, HTML is not well-formed XML though it can be made to look like it is. 
But once you do that, you might as well be using XHTML. 
In principle, any XML can be used for the body of an Annotation. 
That's why we include the http:ContentType property in our embedded body as well. 

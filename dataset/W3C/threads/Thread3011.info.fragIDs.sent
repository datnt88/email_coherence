<s> I am building a system that is constructed using servlets and JSPs, I also utilize Session?s and client cookies.  </s>
<s> I am curious if I am truly implementing Basic Authentication or a mutated version of that.  </s>
<s> Here is the flow: First request: Client makes initial request to a secure resource.  </s>
<s> Server finds no session data to indicate previous authentication.  </s>
<s> Server checks header values for credentials, no credentials found, replies with a 401 status code.  </s>
<s> Client receives 401 and prompts for credentials, receives user input and sends the authentication header data.  </s>
<s> Server interrogates the header data and authenticates the user to the realm Server saves user data and flags in the session to indicate that they have successfully authenticated to the realm.  </s>
<s> Server serves up the resource.  </s>
<s> Subsequent request with a valid session: Client request to same or different secure resource within the same realm.  </s>
<s> Session is still valid and server finds authentication flags in the session, does NOT resend 401 status code.  </s>
<s> Server serves up the resource.  </s>
<s> Subsequent request with invalid session: Subsequent request to same or different secure resource within the same realm.  </s>
<s> Session has been invalidated, no session data found.  </s>
<s> Server checks header values for credentials, no credentials found, replies with a 401 status code.  </s>
<s> Client receives 401 and sends cached credentials in the authentication header.  </s>
<s> Server interrogates the header data and authenticates the user to the realm Server saves user data and flags in the session to indicate that they have successfully authenticated to the realm.  </s>
<s> Server serves up the resource.  </s>
<s> Does the server need to reply with a 401 for each and every request to a secure resource within the same realm to say I am using Basic Authentication?  </s>
<s> That type of model would seem to be inefficient.  </s>
<s> I understand that HTTP is a stateless transaction, but with the addition of sessions and cookies the entire transaction becomes stateful to a point.  </s>
<s> FYI, the entire transaction is accomplished using HTTPS/SSL.  </s>
<s> Do you Yahoo!? Get better spam protection with Yahoo!  </s>
<s> Mail  </s>
<s> Jim, I'm using IIS6 w IE6 and here the logs shows up the following situation: Every request to a page that requests authentication will have the 401 200 sequence.  </s>
<s> The exception counts for pictures that are part of the HTML page, where IE instantly authenticates.  </s>
<s> The use of cookies can indeed save some round-trips to the server.  </s>
<s> Because of the use of HTTPS this would be safe enough, though authentication would be a lot safer.  </s>
<s> Adverseries might guess the session identifier.  </s>
<s> Usually this risk is quite small, though...  </s>
<s> The inefficiency was done because of security reasons, I assume.  </s>
<s> If you authenticate, you send you password out into the open, which is not quite safe.  </s>
<s> Note that in the cookies the session identifier is stored and is used to match the session on the server.  </s>
<s> - Joris From: ietf-http-wg-request@w3.org [mailto:ietf-http-wg-request@w3.org]  </s>
<s> On Behalf Of Jim Flath Subject: HTTP Basic Authentication I am building a system that is constructed using servlets and JSPs, I also utilize Sessions and client cookies.  </s>
<s> I am curious if I am truly implementing Basic Authentication or a mutated version of that.  </s>
<s> Here is the flow:  </s>
<s> First request: Client makes initial request to a secure resource.  </s>
<s> Server finds no session data to indicate previous authentication.  </s>
<s> Server checks header values for credentials, no credentials found, replies with a 401 status code.  </s>
<s> Client receives 401 and prompts for credentials, receives user input and sends the authentication header data.  </s>
<s> Server interrogates the header data and authenticates the user to the realm Server saves user data and flags in the session to indicate that they have successfully authenticated to the realm.  </s>
<s> Server serves up the resource.  </s>
<s> Subsequent request with a valid session: Client request to same or different secure resource within the same realm.  </s>
<s> Session is still valid and server finds authentication flags in the session, does NOT resend 401 status code.  </s>
<s> Server serves up the resource.  </s>
<s> Subsequent request with invalid session: Subsequent request to same or different secure resource within the same realm.  </s>
<s> Session has been invalidated, no session data found.  </s>
<s> Server checks header values for credentials, no credentials found, replies with a 401 status code.  </s>
<s> Client receives 401 and sends cached credentials in the authentication header.  </s>
<s> Server interrogates the header data and authenticates the user to the realm Server saves user data and flags in the session to indicate that they have successfully authenticated to the realm.  </s>
<s> Server serves up the resource.  </s>
<s> Does the server need to reply with a 401 for each and every request to a secure resource within the same realm to say I am using Basic Authentication?  </s>
<s> That type of model would seem to be inefficient.  </s>
<s> I understand that HTTP is a stateless transaction, but with the addition of sessions and cookies the entire transaction becomes stateful to a point.  </s>
<s> FYI, the entire transaction is accomplished using HTTPS/SSL.  </s>
<s> Do you Yahoo!? Get better spam protection with Yahoo! http://us.rd.yahoo.com/mailtag_us/*http://antispam.yahoo.com/tools  </s>
<s> Mail  </s>
<s> Jim, Basic authentication is pretty obnoxious.  </s>
<s> Running under HTTPS removes the fundamental security concern, exposure of open text credentials, but it is a stateless protocol.  </s>
<s> Each client request must carry the credentials which must be validated by the server.  </s>
<s> If my memory hasn't failed, a client is permitted to anticipate that a new URL is part of a particular realm and offer the credentials.  </s>
<s> Certainly, once the specific URL has had user entered credentials, the clients send the same credentials on the next request.  </s>
<s> I have observed in the past that some clients may send the same credentials for other URLs which reference the same 'directory' or even child directories.  </s>
<s> The server must sent the 401 when it doesn't believe the client is correctly authenticated, either because there were no credentials or the credentials are wrong.  </s>
<s> It is a slippery slope to expect a user to be prompted if 401 is sent in response to correct credentials.  </s>
<s> There is no protocol mechanism for requesting a client purge credentials.  </s>
<s> The only influence the server has over the user authentication dialog is the 'realm name' so usability is poor at best.  </s>
<s> I haven't seen a moderate to high volume production site in years which uses basic or other client supported authentication.  </s>
<s> That of course isn't an exhaustive survey.  </s>
<s> I find basic authentication most useful in situations where the web security requirements are equivalent to physical security satisified by an unguarded locked fence.  </s>
<s> Perhaps a beta release of a new version or a a design review where you want to avoid access by casual browsers and robots.  </s>
<s> Application controlled authentication provides the most robust user experience and the most server flexibility.  </s>
<s> In simple terms, include a login page which authenticates the user and then uses a cookie or URL decoration to track the user session.  </s>
<s> Enforcement can be achieved with application page logic, app server support, etc.  </s>
<s> Beyond the scope of this list to discuss the alternatives.  </s>
<s> Dave Morris  </s>
<s> Using https or ssl is always the best choice.  </s>
<s> Scott Wiseman Network Consultant Los Angeles Exchange Consultant Los Angeles Security Consultant Los Angeles Outsourcing Consulting Programming  </s>

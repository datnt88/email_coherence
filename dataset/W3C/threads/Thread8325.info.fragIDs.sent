<s> In RFC2518, a MOVE operation is supposed to destroy all locks on the moved resource and any descendants.  </s>
<s> This behavior is unlike most filesystems.  </s>
<s> Yaron laid out the reasons but they weren't too strong.  </s>
<s> Basically the reasons why not amounted to the fact that some systems that didn't support bindings couldn't do this easily.  </s>
<s> I'd assumed that a REBIND was different than MOVE, and couldn't be used  </s>
<s> in as many cases.  </s>
<s> If a REBIND is really the same as a MOVE then why  </s>
<s> are we defining it?  </s>
<s> If it's different -- e.g. if , as I had assumed,  </s>
<s> REBIND is "safer" and more high-fidelity than MOVE (but can be used in fewer cases) then we need to understand how it's different.  </s>
<s> If REBIND can be different than MOVE, then we can make a number of things work better (more predictable) from a client point of view: - locks aren't destroyed, lock token doesn't change, the lock state appearing on other bindings doesn't change  </s>
<s> - getlastmodified date doesn't change unless another resource is overwritten (for that matter, we could specify that REBIND can't overwrite another binding which would make it even simpler), so the getlastmodified date on other bindings doesn't change  </s>
<s> - etag doesn't change...  </s>
<s> - live properties have more guarantees in how they are preserved  </s>
<s> - ACLs aren't re-inherited?  </s>
<s> - this makes a "rename" operation work exactly as the client expects  </s>
<s> it would (not the case today with MOVE) If a server can't implement REBIND -- well, there's still MOVE.  </s>
<s> Lisa  </s>
<s> Because RFC2518 allows servers to implement MOVE as COPY/DELETE, and  </s>
<s> BIND can't override that (when it tried, we got complaints from people  </s>
<s> who rely on MOVE working as it does).  </s>
<s> However, the locking model we all agreed on (remember?  </s>
<s> -  </s>
<s> http://lists.w3.org/Archives/Public/w3c-dist-auth/2004JanMar/0001.html )  </s>
<s> explicitly says...: - If a request causes a directly locked resource to no longer be mapped to the lock-root of that lock, then the request MUST fail unless the lock-token for that lock is submitted in the request.  </s>
<s> If the request succeeds, then that lock MUST have been deleted by that request.  </s>
<s> So REBIND behaves exactly as the locking model is predicting it: a  </s>
<s> namespace operation causes the locked resource not being mapped anymore to the lock root, and thus the lock is removed.  </s>
<s> Changing this would mean that the locking model needs to made more complicated (again).  </s>
<s> In this case, we couldn't talk about namespace operations in general, but would need to go back to special cases.  </s>
<s> Unless there's a clear benefit from that complication, I vote with "no".  </s>
<s> Again, this is incompatible with HTTP semantics for the Last-Modified header, please see my other mail  </s>
<s> ( http://lists.w3.org/Archives/Public/w3c-dist-auth/2004JanMar/0108.html ).  </s>
<s> Same.  </s>
<s> Live properties aren't affected except for the unfortunate cases where  </s>
<s> they are.  </s>
<s> Same behaviour as in RFC2518.  </s>
<s> If you're talking about http://greenbytes.de/tech/webdav/draft-ietf-webdav-acl-latest.html#PROPERTY_inherited-acl-set : no, they aren't.  </s>
<s> Lisa, the issue is that namespace operations in HTTP *can* *not* behave as in filesystems as far as HTTP headers such as "Last-Modified" or "ETag" are concerned -- this is just incompatible with HTTP, so there's no way to require it.  </s>
<s> We *can* encourage servers to use "robust" ETags (Etags that are unique across all resources in the namespace) and thus don't have conflicts  </s>
<s> with ETags that may have been previously used for the same URL.  </s>
<s> But  </s>
<s> that's a general rule, not particular to BIND whatsoever, so if you think it's worth the effort, add it to RFC2518bis.  </s>
<s> Regards, Julian  </s>
<s> I agree with Julian's responses.  </s>
<s> In addition, a client-side motivation for the "delete on MOVE" behavior of  </s>
<s> locks is that it simplifies client-side lock management.  </s>
<s> When the  </s>
<s> client locks a resource, it just adds the request-URL of the lock and the returned lock token to its list of URL/lock-token pairs.  </s>
<s> It knows that that lock-token will be at that URL for the lifetime of that lock-token.  </s>
<s> If locks were not deleted when the protected URL was unmapped, it is harder for a client to keep track of its locks.  </s>
<s> Cheers, Geoff Julian wrote on 03/19/2004 04:48:07 AM:  </s>
<s> used  </s>
<s> are  </s>
<s> REBIND  </s>
<s> http://lists.w3.org/Archives/Public/w3c-dist-auth/2004JanMar/0001.html )  </s>
<s> ( http://lists.w3.org/Archives/Public/w3c-dist-auth/2004JanMar/0108.html ).  </s>
<s> it  </s>
<s> So if REBIND is the same as MOVE in all cases, why are we defining it?  </s>
<s> I reject the argument that this behavior is needed for REBIND as well as MOVE for client convenience.  </s>
<s> MOVE would remain as defined for clients that want the convenience of keeping URL/Lock-token pairs unchanged.  </s>
<s> A new method, like RENAME, could provide clients a completely optional method with different convenience tradeoffs: the convenience of not having to issue a new LOCK request if further resource changes are required, etc.  </s>
<s> That's what I thought the original  </s>
<s> intent of REBIND was.  </s>
<s> Lisa  </s>
<s> It isn't ( http://greenbytes.de/tech/webdav/draft-ietf-webdav-bind-04.html#METHOD_REBIND ): "The REBIND method removes a binding to a resource from one collection, and adds a binding to that resource into another collection.  </s>
<s> It is effectively an atomic form of a MOVE request."  </s>
<s> Well, it isn't.  </s>
<s> If you feel that there should be a method allowing namespace manipulation while maintaining locks, you're free to work on it (I may even be interested on supporting it, once it's defined).  </s>
<s> But this wasn't on the requirements list for BIND, and IMHO nobody has asked for it recently, so it doesn't belong into BIND.  </s>
<s> It's a completely separate issue.  </s>
<s> Regards, Julian  </s>
<s> I agree with Julian that point of REBIND/UNBIND is (and has always been) to define an atomic form of MOVE/DELETE.  </s>
<s> The only point at which we differ is that he might be interested in supporting a lock-preserving RENAME method, while I am not (:-).  </s>
<s> Cheers, Geoff Julian Reschke julian.reschke@gmx.de  </s>
<s> wrote on 03/22/2004 03:31:13 PM:  </s>
<s> original  </s>

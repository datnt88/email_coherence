<s> Off-list, I was asked about the "idempotence" and "safety" of WebDAV methods, following the definitions of "safe" and "idempotent" provided in Section 9.1 ("Safe and Idempotent Methods") of RFC 2616.  </s>
<s> (Basically, "safe" = does not harm the state of the resource, "idempotent" = the effect of N 0 identical requests is the same as a single request) In HTTP/1.1, GET, HEAD, OPTIONS, and TRACE are safe (the rest are not), while GET, HEAD, PUT,  </s>
<s> DELETE, OPTIONS, and TRACE are idempotent.  </s>
<s> For the record:  </s>
<s> PROPFIND: safe, idempotent PROPPATCH: unsafe, idempotent  </s>
<s> MOVE: unsafe, non-idempotent COPY: unsafe, idempotent MKCOL: unsafe, idempotent LOCK: safe, non-idempotent UNLOCK: safe, non-idempotent New method specifications should indicate their idempotence and safety.  </s>
<s> In advanced collections: MKREF: unsafe, idempotent BIND: unsafe, idempotent ORDERPATCH: unsafe, non-idempotent (in general, though some ORDERPATCH requests might be idempotent) - Jim  </s>
<s> ...*provided* you're not using any funky live properties.  </s>
<s> Live properties are  </s>
<s> behavior, not state, so they have safeness and idempotency, too.  </s>
<s> So, really,  </s>
<s> you have to assume that both PROPFIND and PROPPATCH are unsafe and non-idempotent unless you know the safeness and idempotency of all the properties in use.  </s>
<s> (This is the same issue as CGIs in base HTTP/1.1; a CGI script could be built  </s>
<s> that reacts unsafely to GET, but it wouldn't be HTTP/1.1-compliant; it's supposed to use POST if it's unsafe.  </s>
<s> But we don't have PROPFIND-GET and PROPFIND-POST.)  </s>
<s> |John Stracke | My opinions are my own | S/MIME &amp; HTML OK | |francis@ecal.com|============================================| |Chief Scientist | NT's lack of reliability is only surpassed | |eCal Corp. | by its lack of scalability.  </s>
<s> -- John Kirch |  </s>
<s> I think it's more appropriate to define 'live properties' such that they have the same relationship to safety and idempotency of PROPFIND and PROPPATCH as 'resources' have to GET and PUT.  </s>
<s> That is: even though the property is live, PROPFIND of any property SHOULD be safe and idempotent, and PROPPATCH should be idempotent.  </s>
<s> We should make the correspondence of PROPFIND-GET and PROPPATCH-PUT (not POST).  </s>
<s> Not having done so is an flaw in the WebDAV spec that SHOULD be corrected, not celebrated.  </s>
<s> Larry  </s>
<s> Since some systems allow GET to perform non-safe, non-idempotent operations via URL munging (e.g., http://www.docmgmtsys.com/doc-guid;action=CHECKOUT) it seems to me the best a spec.  </s>
<s> can do is state what the intended behavior is wrt safety and idempotence, and assume that people won't break it without a very good reason.  </s>
<s> - Jim  </s>
<s> Yes, PROPFIND SHOULD be safe and idempotent, and PROPPATCH SHOULD be idempotent, under the sense of SHOULD (from RFC 2119): 3. SHOULD This word, or the adjective "RECOMMENDED", mean that there may exist valid reasons in particular circumstances to ignore a particular item, but the full implications must be understood and carefully weighed before choosing a different course.  </s>
<s> in the same way that HTTP 1.1 identifies this for GET and HEAD in RFC 2616: In particular, the convention has been established that the GET and HEAD methods SHOULD NOT have the significance of taking an action other than retrieval.  </s>
<s> These methods ought to be considered "safe".  </s>
<s> This allows user agents to represent other methods, such as POST, PUT and DELETE, in a special way, so that the user is made aware of the fact that a possibly unsafe action is being requested.  </s>
<s> Naturally, it is not possible to ensure that the server does not generate side-effects as a result of performing a GET request; in fact, some dynamic resources consider that a feature.  </s>
<s> The important distinction here is that the user did not request the side-effects, so therefore cannot be held accountable for them.  </s>

<s> 1Meta Data Handling The proper handling of meta-data has been an issue for this group since its inception.  </s>
<s> To date the spec has used links to handle meta-data.  </s>
<s> The power of links is that they allow meta-data to be resources.  </s>
<s> However it is often the case that useful meta-data does not need to be contained in resources, witness the existence of HTTP headers.  </s>
<s> It would seem logical to simply continue adding entity headers to HTTP in order to provide for new meta data.  </s>
<s> The following is a list of reasons why I believe it is not feasible to put non-request/response related meta-data in entity headers.  </s>
<s> 1.Putting arbitrary meta-data into the header will cause namespace confusions and increase the processing load for proxies and other intermediaries who need to sniff headers in order to ensure proper handling of messages.  </s>
<s> 2.It is a waste of bandwidth to return all headers at once.  </s>
<s> 3.Violates the principal that one request should perform one action.  </s>
<s> If a request sets headers as well as executing some arbitrary  </s>
<s> method, it is necessary to provide error information for all of the  </s>
<s> associated actions.  </s>
<s> 4.There is no way to delete a header.  </s>
<s> 5.There is no way to modify just one part of a header.  </s>
<s> So, for example, if a header consists of "name: blah12, blah13, blah14" there is no way to say that "blah13" should be replaced with "blah15".  </s>
<s> While links solve all of these problems, they have their own problem, for example, they make all meta data into resources.  </s>
<s> This is often overkill.  </s>
<s> Status information such as modification dates, ownership information, etc. can all be usefully recorded in small pieces of data rather than requiring the overhead of a resource.  </s>
<s> In order to keep the meta-data model "light", I further propose that meta-data take the form of a header.  </s>
<s> In addition I recommend that meta-data behave like headers in that multiple pieces of meta-data with the same header name must be unambiguously combinable using commas.  </s>
<s> In order to handle the assignment, modification, discovery, and removal of meta-data I propose adding three new methods - METAPOST, METAGET, and METADELETE.  </s>
<s> These methods, defined below, accept meta-data that is  </s>
<s> structured like HTTP headers for assignment to a resource through METAPOST.  </s>
<s> Allow for the discovery of meta-data through METAGET and finally allow for the removal of meta-data through METADELETE.  </s>
<s> METAPOST is meant to be a more generic form of LINK, METADELETE a more generic form of UNLINK, and METAGET is the equivalent of GETLINKVAL for this type of meta-data.  </s>
<s> What this proposal will not address is the question of where meta-data is stored.  </s>
<s> This issue is intentionally left open in order to allow implementers maximum flexibility and power.  </s>
<s> For example, let us say a server has the ability to accept arbitrary meta-data.  </s>
<s> A user then comes along and puts a MS Word document on the server.  </s>
<s> The server understands the Word document's format and is able to retrieve from it author, creation date, and revision information.  </s>
<s> The server is now free to make that information available to users who know nothing about Word or its format through the META* methods.  </s>
<s> For ease of conversation I would like to define the following terms as used below: Attribute - A piece of meta-data consisting of an attribute name and entries.  </s>
<s> Entry - One of a comma delimited list of values assigned to an attribute name.  </s>
<s> 2METAPOST Method 2.1Attribute-Specify Header AttributeSpecify = "Attribute-Specify" ":" #("name" "=" AttributeName "," #("value" "=" AttributeValue)) CRLF AttributeName = field-name AttributeValue = [field-value without commas or quoted string] 2.2Server-Supported Header ServerSupported = "Server-Supported" ":" 1#field-name CRLF 2.3Atomic Header AtomicHeader = "Atomic" ":" CRLF 2.4Explanation The METAPOST method is used to add an entry to an attribute.  </s>
<s> If the attribute does not exist then it will be created.  </s>
<s> If an Attribute-Specify header does not contain any entries and the attribute does not exist, and the attribute's definition allows for entryless attributes or if the server does not enforce the attribute's semantics, then the attribute is created with no entries.  </s>
<s> As specified for HTTP 1.1 headers, the attribute name is case insensitive.  </s>
<s> The server-supported header specifies that the request should only go through if the server supports the syntax and semantics of the specified attributes, which may or may not be listed in an accompanying Attribute-Specify.  </s>
<s> The Atomic header specifies the request should only go through if all the entries can be assigned as requested.  </s>
<s> If not, the entire request should fail.  </s>
<s> NOTE: The Server-Supported header seems to be a bit wasteful.  </s>
<s> It might be worth defining attribute names to have the form: ["req"] "\" field-name.  </s>
<s> The idea being that all attribute names would be prefixed by a "\".  </s>
<s> If a "req" is listed before the "\" then users of the attribute expect the server to provide some sort of behavior above and beyond what is provided by the META* methods.  </s>
<s> If the server does not recognize the attribute then it would refuse to METAPOST it.  </s>
<s> 2.5Example METAPOST http:\\foo HTTP/1.1  </s>
<s> Attribute-Specify: Name = 29348x, Value = "Jim Whitehead", Value = "Roy  </s>
<s> Fielding", Name = Xyz, Value = Ooooga!  </s>
<s> Atomic: Server-Supported: 29348x, LKHXZ This message requests that the entries "Jim Whitehead" and "Roy Fielding" be added to the 29348x attribute and that the entry Ooooga!  </s>
<s> Be added to the Xyz attribute.  </s>
<s> However, the request should only go through if the server supports the 29348x and LKHXZ attributes and only if all the entries can be successfully assigned.  </s>
<s> 2.6Response Codes A server may reject entries because they are not consistent with the definition of the attribute.  </s>
<s> In that case a 406 Not Acceptable should be returned.  </s>
<s> If the atomic header is included then all indicated assignments must succeed or all must be rejected with a 412 Precondition Failed.  </s>
<s> If the atomic header is not included then a 200 may be returned if at least one entry was successfully assigned.  </s>
<s> A web collection returned in the response will indicate which entries where successfully assigned.  </s>
<s> I recommend that the atomic header not be required by a server in order to be considered DAV compliant.  </s>
<s> Implementing atomic is extremely difficult.  </s>
<s> 3METADELETE Method The METADELETE method is used to remove one or more entries from an attribute.  </s>
<s> If an attribute-specify header is used without any entries then this is interpreted as meaning the header should be deleted.  </s>
<s> Note that this is a different interpretation for the same structure as used in METAPOST.  </s>
<s> 3.1Example METADELETE http://foo HTTP/1.1 Attribute-Specify: Name = blah, Value = x98 The previous will delete the x98 value from the blah attribute.  </s>
<s> METADELETE http://foo HTTP/1.1 Attribute-specify: blah Server-Supported: blah Will remove the blah attribute, but only if the server enforces the blah attribute syntax and semantics.  </s>
<s> 3.2Response Codes Same as METAPOST.  </s>
<s> 4METAGET Method The METAGET method is used to retrieve all the entries associated with an attribute.  </s>
<s> If entries are specified then the response will only include entries that match those listed.  </s>
<s> This mechanism is useful for quickly checking if an entry has already been set.  </s>
<s> The atomic header may not be used with the METAGET method.  </s>
<s> 4.1Example METAGET http:\\foo HTTP/1.1 Attribute-Specify: name = ydfh, name = blah, value = foobar Server-Maintained: ydfh, 29348x The server is being asked to return all entries associated with the ydfh attribute and to return the foobar entry of blah if it exists.  </s>
<s> However, these values should only be returned if the server supports the ydfh and 29348x attributes.  </s>
<s> 4.2Response Codes Same as METAPOST with the exception of atomic related errors.  </s>
<s> 5Link Attribute If META* is adopted then links become attributes.  </s>
<s> I propose they be defined as follows: Name = "Link" Entry = #(Source Dest Type *(";" link-extension)) Source = Specifier SP  </s>
<s> Dest = "Dest" "=" Specifier SP Specifier = " URI " | "SET" Type = "Type" "=" Token SP  </s>
<s> Links would be created, retrieved, and deleted using the META* commands.  </s>
<s> All previous descriptions of link behavior still hold.  </s>
<s> The current spec thus prevents behavior such as setting both URIs to SET. However I also propose removing the rule that either the source or destination must be equal to the Request-URI.  </s>
<s> This will enable annotation facilities.  </s>
<s> I have left the "Source" label off the initial URI in order to maintain the same format as the Link header given in the HTTP 1.1 spec.  </s>
<s> Yaron  </s>
<s> Yaron,  </s>
<s> Several approaches to representing and transporting metadata have recently been discussed (elsehwere).  </s>
<s> Syntactically these range from extensions of PICS (s-expressions) to the use of XML.  </s>
<s> What are the advantages of the syntax you are proposing?  </s>
<s> If I understand correctly your are proposing a flat namespace of attributes without any object-model behind it.  </s>
<s> I do not think this is a good idea.  </s>
<s> Choosing attribute names arbitrarily will eventually lead to name collisions.  </s>
<s> It is also conceivable that people will define "schemata" for metadata for various purposes (e.g. the Dublin Core).  </s>
<s> This would also allow the definition of default values.  </s>
<s> The schemata could be referred to via URLs (at least the URLs could name the schemata like in PICS services are named).  </s>
<s> BTW, PICS labels can already be requested and transported via HTTP.  </s>
<s> - Ora Ora Lassila, lassila@w3.org , http://www.w3.org/pub/WWW/People/Lassila Visiting Scientist (from Nokia Research Center) World Wide Web Consortium, MIT/LCS  </s>
<s> Yaron, I realize the need for a light HTTP oriented metadata method.  </s>
<s> I would make the suggestion that instead of using the method names of META* that some other name is used since at least in my world I would assume that a method with a name that general should be able to handle metadata in a general way.  </s>
<s> I.e. when we begin to to REAL metadata standards stuff in HTTP we're probably going to want to use those methods for more generalized stuff.  </s>
<s> Its similar to some current proposals for a new HTML tag to actually fix the META tag.  </s>
<s> I would also urge you to look at the application/directory MIME type as a way of doing "light" metadata but I think you have more of a desire to actually do it within HTTP  </s>
<s> itself, right?  </s>
<s> -MM  </s>
<s> Yaron gave some very good reasons why headers were not a good way to handle metadata.  </s>
<s> He mentioned namespace collisions, processing load, wasted bandwidth, etc.  </s>
<s> Despite understanding these problems, he goes ahead and recommends that headers be used for dealing with metadata in order to keep the model "light".  </s>
<s> He cites the example of small pieces of information such as modification dates to justify this decision.  </s>
<s> I agree with Yaron to a limited extent.  </s>
<s> Handling *all* metadata as resources is inappropriate.  </s>
<s> However, it is my considered technical opinion that handling *all* metadata as headers is just as inappropriate as handling *all* metadata as separate resources.  </s>
<s> Some descriptions, such as Content-length, Last-modified, Content-type, ... are best carried as headers.  </s>
<s> Other descriptions, such as detailed revision histories, provenance tracking, and bibliographic descriptions, are best carried as separate resources.  </s>
<s> WEB-DAV needs a metadata architecture that accommodates both.  </s>
<s> Furthermore,  </s>
<s> it is not that difficult.  </s>
<s> When we send resources (original or "metadata") between clients and servers we can use MIME headers for the "light" metadata about particular resources, while still allowing separate metadata packages to carry descriptions that are too heavyweight for headers.  </s>
<s> We can send those resources in multipart message bodies, and can use message/external-body if we want the client to know of the existence of some big package but don't want to clog the lines by actually sending it.  </s>
<s> If we can agree on an architecture that isn't all one way or the other, then we can advance to more meaningful arguments, like just what new headers (if any) we need to define, what packages (if any) we initially want to support, how (or whether) their elements can be used in both contexts, and how we can do queries on them.  </s>
<s> It seems to me that to make progress, this group needs to agree on a few simple points and stop arguing over them.  </s>
<s> Can we start by agreeing on two things:  </s>
<s> 1) Neither headers or separate resources meet all the requirements on metadata in WEB-DAV, so we will need a combined solution.  </s>
<s> 2) All communications between clients and servers will take the form of MIME messages, and frequently those messages will be multipart/related?  </s>
<s> The last seems uncontroversial to me, but then I have been accused of being an optimist :-).  </s>
<s> I hope that the former is also uncontroversial given the last few messages on this list.  </s>
<s> Assuming we agree that some metadata is handled by headers and some by separate resources, we can now discuss ways of editing it.  </s>
<s> For metadata held as resources, the GET, DELETE, and PUT (or POST) methods should suffice.  </s>
<s> For the smaller info carried as headers we may need methods such as you describe.  </s>
<s> I think the essential functionality of METAGET is already handled by the HEAD method.  </s>
<s> Something like METAPOST and METADELETE seems necessary.  </s>
<s> I'll skip detailed comments on the methods at this time, but there is one I just can't let go without remarks:  </s>
<s> I think that redefining existing parts of the HTTP spec, such as LINKs, is beyond the bounds of this WG.  </s>
<s> Furthermore, annotations can be handled under the existing constraints on LINKs.  </s>
<s> Later, Ron Daniel Jr. voice:+1 505 665 0597 Los Alamos National Lab http://www.acl.lanl.gov/~rdaniel  </s>
<s> Los Alamos, NM, USA, 87545  </s>
<s> Could you elaborate a bit on how you imagine using application/directory as a way of doing "light" metadata?  </s>
<s> Larry  </s>
<s> Sure.  </s>
<s> For those that aren't aware of the application/directory MIME type it is a product of the directory services ASID group within the IETF.  </s>
<s> The format is basically attribute/value with per attribute qualifiers seperated by semi-colons.  </s>
<s> Here's an example: Name;encoding=text/plain: Michael Mealling Image;value=url: http://www.foo.com/bla.gif Updated;value=date: 31/12/97 etc...  </s>
<s> The MIME headers are fairly generic except for the 'profile' attribute of the content-type.  </s>
<s> This is used to specify the profile or schema that the attributes and value in the body adhere to.  </s>
<s> WEBDAV would probably define a handfull of these to handle most operations.  </s>
<s> A profile gets to define a) the possible attributes, b) the possible values and c) the possible attribute qualifiers.  </s>
<s> Its still a simply attribute value encoding that is simply to parse but it is hooks to allow for handling things like character sets, encodings, schema specification, etc. -MM  </s>
<s> I agree.  </s>
<s> After reviewing many Web metadata proposals, including PICS, PICS-NG, Dublin Core, Warwick Framework, W3C position papers on a resources and relationships metadata model, W3C position papers on adding metadata to HTML, Murray Malone's REL/REV draft, and Web Collections, in addition to skimming the proceedings of the first IEEE Metadata conference (yes, Ora, we've done our homework :-), my view is there are two main varieties of metadata: "Small" chunk metadata: These include metadata items such as: - HTTP headers - short attribute-value pairs - typed links (e.g. HTTP links) While developing a stringent definition of "small" is most likely impossible, since the definition is arbitrary, and seems to be based on unstated assumptions about retrieval performance (e.g., retrieval of small chunk metadata should be "trivially" or "unnoticeably" fast), much metadata has a small chunk flavor to it.  </s>
<s> Characteristics of small chunk metadata include: fast retrieval speeds, no need for content negotiation, no requirements on ordering, no need for "trust" information (e.g., digital signature, author information, hash of contents, date of creation), and relatively simple value information.  </s>
<s> "Large" chunk metadata: These include metadata items such as instances of: - PICS, PICS-NG collections - Warwick collections - MARC records - Dublin Core records - discipline-specific metadata records - Web pages Like the smallness of small chunk metadata, the largeness of large chunk metadata is similarly difficult to define (a strong indicator that small and large are poor terms).  </s>
<s> Characteristics of large chunk metadata include: requirements on the ordering of fields, encoded trust information, pointers to metadata schema descriptions, complex data models, and multiple levels of containment.  </s>
<s> Large chunk metadata often contains several instances of small chunk metadata.  </s>
<s> Typically large chunk metadata is larger than small chunk metadata, although it is easy to develop classes of both for which this assertion does not hold.  </s>
<s> As a result, there is an assumption that large chunk metadata takes longer to transmit than small chunk metadata.  </s>
<s> Mapping of metadata to Web data model The mapping of metadata to the various data containers (resources, headers) in the Web data model varies depending on whether the metadata is stored on, in, or as a resource.  </s>
<s> 1.  </s>
<s> On resource.  </s>
<s> In this case, the metadata is stored with the resource, but is not part of the resource itself.  </s>
<s> Examples: HTTP links, HTTP headers, PICS labels (using the PICS-Label header).  </s>
<s> This is typically used for small chunk metadata.  </s>
<s> On resource metadata is typically retrievable in 1 request (a HEAD or GET). 2. Within resource.  </s>
<s> The metadata is embedded within the resource, and is a defined part of the description of the document type.  </s>
<s> Examples: HTML REL/REV, HTML META tag, various HTML metadata proposals, MS Word .DOC documents, Web Collections (?).  </s>
<s> Within resource metadata is retrievable in 1 request (GET).  </s>
<s> Within resource metadata has the advantage of being independent of access protocol, and portable (when the resource moves, it does too).  </s>
<s> Within resource metadata tends to be small chunk.  </s>
<s> 3. Is (whole) resource.  </s>
<s> The metadata is itself an entire resource.  </s>
<s> When the metadata is an entire resource, there usually exists a relationship (link) between the described and metadata (describing) resources.  </s>
<s> This bears a resemblance to entity-relationship or semantic data modeling database models.  </s>
<s> Examples: Web Collections, Warwick containers, Web pages.  </s>
<s> Typically large-chunk metadata ends up as whole resource metadata.  </s>
<s> Typically retrieval of whole resource metadata requires 2 requests (one to get the links, one to get the metadata).  </s>
<s> Relation to WEBDAV.  </s>
<s> Using this model of the mapping of metadata to the Web data model, the various WEBDAV proposals can be characterized.  </s>
<s> In draft-jensen-webdav-ext-00 (the proposal discussed at the Irvine meeting), all metadata was whole resource metadata, with the exception of the links used to hold the relationship between the described resource and the metadata resource.  </s>
<s> In Yaron's recent proposal, the pendulum swings to the other end, emphasizing a model where metadata is predominantly on resource metadata.  </s>
<s> While some might argue that his proposal makes all metadata on resource metadata, this is undoubtedly too strict an interpretation.  </s>
<s> Yaron will undoubtedly argue that whole resource metadata is still supported since links can still be defined and followed.  </s>
<s> However, now that we have investigated the predominantly whole resource, and predominantly on resource solutions of mapping metadata to the Web data model, I do feel we can agree with:  </s>
<s> Roadmap to the future:  </s>
<s> Since there are two main containers for data in the HTTP data model, headers and resources, and since we have seen arguments in favor of storing metadata in both of these places, it makes sense to develop a mechanisms in WEBDAV for storing metadata in both places.  </s>
<s> Alternatively, we might consider extending the places we can store metadata, and hence extend the HTTP data model.  </s>
<s> Sticking with just the HTTP data model, this would take the form of: In headers: - a means of adding a piece of metadata - a means of modifying a piece of metadata - a means of deleting a piece of metadata - a means of retrieving a piece of metadata - a means of querying for metadata These capabilities largely map to Yaron's recent proposal.  </s>
<s> As resources: - a means of creating a link to another resource - a means of creating, modifying, deleting, and retrieving a whole resource These capabilities map to the existing HTTP/1.1 specification.  </s>
<s> This also agrees with Ron Daniel:  </s>
<s> Links.  </s>
<s> I disagree in the case of LINKs, since they are underspecified in the current HTTP specification, are defined in an Appendix, and do not meet the needs of annotation services (since the source is implicitly the resource on which the link is defined).  </s>
<s> I think we should accept as a goal to be as compatibile as possible with HTTP/1.1 links, but meeting our requirements should come first.  </s>
<s> However, we do have an open issue.  </s>
<s> Are links simply metadata, or are they a special class of metadata?  </s>
<s> If there is a generic way to define and delete HTTP headers (e.g. METAPOST and METADELETE), and a link is simply an HTTP header called "Link", then do there need to be LINK and UNLINK methods at all?  </s>
<s> If links have semantics which differentiate them from other headers (e.g., LINKSEARCH) then it makes sense to have LINK and UNLINK headers, and even separate retrieval functions (such as in draft-jensen-webdav-ext-00 ).  </s>
<s> If they are simply headers, then LINK and UNLINK have no place (and HTTP should be renamed the Object-Oriented Transfer Protocol :-) - Jim  </s>
<s> Yaron and Jim: Metadata as headers would solve a lot of the metadata problems that have been worrying me about the earlier proposal based on links.  </s>
<s> If metadata are headers, problems of managing metadata go away: if you move a resource, its metadata will move with it.  </s>
<s> If you copy a resource, its metadata will get copied with it.  </s>
<s> If you delete a resource, its metadata will get deleted.  </s>
<s> There are no longer issues about referential integrity -- since two resources can't share the same metadata, you don't have to worry about unintentionally deleting metadata that is still in use.  </s>
<s> It used to be the case that you couldn't even tell by looking at a resource whether it was metadata or not -- using headers, that problem is gone.  </s>
<s> Of course by using resources linked to the objects they describe, you had some great benefits, too: the possibility of sharing metadata, the possibility of metadata itself having metadata, the possibility for a resource to have multiple sets of metadata maybe authored by different people maybe residing on different servers, etc.  </s>
<s> If we move toward a model that allows metadata to be stored either in headers or in resources linked to the object they describe, we need to be clear about the costs.  </s>
<s> For any metadata that is implemented as resources, the original problems of management still exist.  </s>
<s> Jim: Great analysis of the problem space!  </s>
<s> A nit that I think is a source of great confusion: Links are not really metadata.  </s>
<s> The link together with its destination resource is metadata.  </s>
<s> So although the link is *on* a resource, insofar as we implement metadata using links, the metadata is *partly* on the resource, and partly a separate resource.  </s>
<s> Just managing the links is not managing metadata.  </s>
<s> Managing the destination resource is part of the problem.  </s>
<s> Where a resource has links to many metadata resources, the problem becomes onerous.  </s>
<s> The fact that the destination resource does not have a link back to the resource (or resources) it describes makes preserving referential integrity extremely difficult.  </s>
<s> Searching links is not searching metadata.  </s>
<s> Searching links just tells you what metadata is available.  </s>
<s> Searching metadata requires you to follow the links to the destination resources and search those resources for a matching value.  </s>
<s> --Judy  </s>
<s> Name:Judith A. Slein E-Mail:slein@wrc.xerox.com  </s>
<s> MailStop:128-29E  </s>

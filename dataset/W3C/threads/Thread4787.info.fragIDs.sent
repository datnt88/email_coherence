<s> SUGGESTION 1: 7.4.7 fn:upper-case and 7.4.8 fn:lower-case How we can find what language to use?  </s>
<s> From default collation?  </s>
<s> It is not going to be flexible if from default collation.  </s>
<s> Possible solution- second optional parameter xml:lang  </s>
<s> SUGGESTION 2: 7.5 Functions Based on Substring Matching The rules are ambiguous if there are ignorable collation units.  </s>
<s> example '-' is ignorable for some collations.  </s>
<s> substring-before("a-b", "b") returns "a" or "a-"?  </s>
<s> Matching rules should be more precise and based on (e.g. minimal or maximal.  </s>
<s> For all positive i and j, there is no match at Q[s-i,e+j].)  </s>
<s> Igor Hersht XSLT Development IBM Canada Ltd., 8200 Warden Avenue, Markham, Ontario L6G 1C7  </s>
<s> A personal response, prior to any WG discussion of the comments:  </s>
<s> We made the decision to go for a language-independent mapping of lower-case upper-case and vice-versa; we felt that providing  </s>
<s> language-dependent mappings was outside the 80/20 cutoff.  </s>
<s> Remember that there is plenty of provision for additional functions to be provided outside the core library.  </s>
<s> I don't think we want to be too prescriptive in terms of the collation algorithms that vendors use.  </s>
<s> But I agree with you that the rules for  </s>
<s> substring-before and substring-after could be clearer.  </s>
<s> I would suggest that substring-before($s1, $s2) is defined as:  </s>
<s> substring($s1, 1, $n -1) where $n is the lowest integer that satisfies starts-with(substring($s1, $n), $s2) And substring-after($s1, $s2) is defined as: substring($s1, $n + string-length($s2)) where $n in the lowest integer that satisfies starts-with(substring($s1, $n), $s2) (these rules will need augmenting for the case where there is no match).  </s>
<s> I think the rules for starts-with, contains, and ends-with are unambiguous.  </s>
<s> Michael Kay  </s>
<s> Thank for your response.  </s>
<s> It makes perfect sense .  </s>
<s> I just have a different opinion on some issues.  </s>
<s> (It is just my private opinion).  </s>
<s> Then one has to remove notes from 7.4.7 fn:upper-case and 7.4.8 fn:lower-case where you are saying explicitly that fn:upper-case and 7.4.8 fn:lower-case are language dependent.  </s>
<s> You would need fn:upper-case fn:lower-case functionality for other staff (e.g. xsl:number) anyway.  </s>
<s> I don't also understand why we cannot permit people to have richer (i18n friendly) functionality.  </s>
<s> (It could be just permission set of languages could be implementation defend and a "default" could a language independent one)  </s>
<s> I would agree if it would be difficult to implement .  </s>
<s> Otherwise unambiguous implementable specs is a good idea.  </s>
<s> I don't understand the rational of using XSLT specific definitions for string matching if it has already has been defined by common Unicode specs.  </s>
<s> I think they are ambiguous starts-with("-a", " a") true a false?  </s>
<s> Igor Hersht XSLT Development IBM Canada Ltd., 8200 Warden Avenue, Markham, Ontario L6G 1C7 "Kay, Michael" wareag.com  </s>
<s> public-qt-comments@w3.org  </s>
<s> 01/13/2004 10:57 Subject: RE: [XQuery 1.0 and XPath 2.0 Functions and AM Operators] A personal response, prior to any WG discussion of the comments:  </s>
<s> We made the decision to go for a language-independent mapping of lower-case upper-case and vice-versa; we felt that providing language-dependent mappings was outside the 80/20 cutoff.  </s>
<s> Remember that there is plenty of provision for additional functions to be provided outside the core library.  </s>
<s> I don't think we want to be too prescriptive in terms of the collation algorithms that vendors use.  </s>
<s> But I agree with you that the rules for substring-before and substring-after could be clearer.  </s>
<s> I would suggest that substring-before($s1, $s2) is defined as:  </s>
<s> substring($s1, 1, $n -1) where $n is the lowest integer that satisfies starts-with(substring($s1, $n), $s2) And substring-after($s1, $s2) is defined as: substring($s1, $n + string-length($s2)) where $n in the lowest integer that satisfies starts-with(substring($s1, $n), $s2) (these rules will need augmenting for the case where there is no match).  </s>
<s> I think the rules for starts-with, contains, and ends-with are unambiguous.  </s>
<s> Michael Kay  </s>
<s> I think the rationale is: Firstly, we aren't insisting that all collations use the Unicode collation algorithm.  </s>
<s> Secondly, the Unicode TR is not rigorous enough.  </s>
<s> The "Searching" section is labeled as "informative", and it's written in the style of a discussion of options and possibilities, not a specification that products can conform to.  </s>
<s> However, we have been guided in writing these specifications by the Unicode work (which has gone on in parallel - it wasn't all there when we started) and this should continue.  </s>
<s> We could also probably align the terminology better - I think our collation units are probably the same thing as Unicode's collation elements (though perhaps we avoided "elements" as being a reserved word).  </s>
<s> Sorry, I meant that the rules were unambiguous given the existence of a function that maps a sequence of characters to a sequence of collation units (which is what the collation provides).  </s>
<s> Michael Kay  </s>

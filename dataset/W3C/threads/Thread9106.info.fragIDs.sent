<s> Hi, All!  </s>
<s> I have a question about line feed normalization in C14N.  </s>
<s> The spec says that : - All whitespace in character content is retained (excluding characters removed during line feed normalization) If an XML document must be converted to a node-set, XPath REQUIRES that an XML processor be used to create the nodes of its data model to fully represent the document.  </s>
<s> The XML processor performs the following tasks in order: 1. normalize line feeds 2. ...  </s>
<s> During discussion in xmlsec mailing list we came up with two possibilities: 1) All '\r' characters from the document should be removed when document is parsed by XML processor.  </s>
<s> 2) All '\r' should be converted to "&amp;#D;" by the parser.  </s>
<s> I would appreciate if someone can clarify this part of the specification.  </s>
<s> Thank you in advance, Aleksey Sanin  </s>
<s> Alexey, I am quite sure that "1. normalize line feeds" means what you can read in XML 1.0 Second Edition in Right, John?  </s>
<s> Liebe Gruesse/Regards, Gregor Karlinger [mailto:w3c-ietf-xmldsig-request@w3.org]  </s>
<s> On Behalf Of Aleksey Sanin Hi, All!  </s>
<s> I have a question about line feed normalization in C14N.  </s>
<s> The spec says that : - All whitespace in character content is retained (excluding characters removed during line feed normalization) If an XML document must be converted to a node-set, XPath REQUIRES that an XML processor be used to create the nodes of its data model to fully represent the document.  </s>
<s> The XML processor performs the following tasks in order: 1.normalize line feeds 2....  </s>
<s> During discussion in xmlsec mailing list we came up with two possibilities: 1) All '\r' characters from the document should be removed when document is parsed by XML processor.  </s>
<s> 2) All '\r' should be converted to "&amp;#D;" by the parser.  </s>
<s> I would appreciate if someone can clarify this part of the specification.  </s>
<s> Thank you in advance, Aleksey Sanin  </s>
<s> Gregor, Thanks for your response!  </s>
<s> I would also think this way but I am confused by the following quote from C14N spec: - All whitespace in character content is retained (excluding characters removed during line feed normalization) which makes me think that '\r' characters are deleted and not replaced.  </s>
<s> I was also told that Microsoft .NET implementation deletes '\r' characters (and this caused incompatibility with xmlsec).  </s>
<s> Aleksey  </s>
<s> My recollection has long gone stale on such nuances -- I hope John might remember better -- but I'd opt for the "conversion" option.  </s>
<s> Not only does the following say: To simplify the tasks of applications, the characters passed to an application by the XML processor must be as if the XML processor normalized all line breaks in external parsed entities (including the document entity) on input, before parsing, by translating both the two-character sequence #xD #xA and any #xD that is not followed by #xA to a single #xA character.  </s>
<s> but XPath says: The normalize-space function returns the argument string with whitespace normalized by stripping leading and trailing whitespace and replacing sequences of whitespace characters by a single space.  </s>
<s> I read the text that you cite from C14N: - All whitespace in character content is retained (excluding characters removed during line feed normalization) as not requiring the special (normative) removal of '\r', but to only (non-normatively) refer to the removal of '#xA' when ' #xD #xA' was replaced with '#xD'.  </s>

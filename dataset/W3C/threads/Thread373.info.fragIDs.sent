<s> Would it make sense to add the following snippet of code to Lexer.fixXMLPI(Node root) after the call to addStringLiteral("xml version=...") ?  </s>
<s> if (this.configuration.CharEncoding  </s>
<s> == Configuration.UTF8) addStringLiteral(" encoding=\"UTF8\""); else if (this.configuration.CharEncoding  </s>
<s> == Configuration.LATIN1) addStringLiteral(" encoding=\"ISO-8859-1\"");  </s>
<s> Could an encoding attribute also be added for ISO2022 or MACROMAN?  </s>
<s> Regards, Andy Quick  </s>
<s> I'm using JTidy to convert HTML files from an on-line Spanish Newspaper into clean XML, so that I can run an XSLT processor on them.  </s>
<s> The source documents are encoded using ISO-8859-1 (LATIN1) characters, but when I use the setCharEncoding method with the Configuration.LATIN1 argument and output XML, the prologue line looks as follows: ?xml  </s>
<s> version="1.0"?  </s>
<s> When I then try to apply XSL transformations, I get UTF-8 encoding errors.  </s>
<s> Apparently, the XML parsers that I've tried (Sun's and IBM's) assume UTF-8 if their is no encoding attribute specified.  </s>
<s> If I manually change the prologue line to be: ?xml  </s>
<s> version="1.0"  </s>
<s> encoding="ISO-8859-1"? the parsers are happy and the file is properly transformed.  </s>
<s> For Latin 1.  </s>
<s> But specifying utf-8 for XML is redundant: is the same thing as If you're using utf-8 encoding, you don't need to specify it.  </s>
<s> /Jelks  </s>
<s> For Latin 1.  </s>
<s> But specifying utf-8 for XML is redundant: is the same thing as If you're using utf-8 encoding, you don't need to specify it.  </s>
<s> /Jelks  </s>
<s> Would it make sense to add the following snippet of code to Lexer.fixXMLPI(Node root) after the call to addStringLiteral("xml version=...") ?  </s>
<s> if (this.configuration.CharEncoding  </s>
<s> == Configuration.UTF8) addStringLiteral(" encoding=\"UTF8\""); else if (this.configuration.CharEncoding  </s>
<s> == Configuration.LATIN1) addStringLiteral(" encoding=\"ISO-8859-1\""); Could an encoding attribute also be added for ISO2022 or MACROMAN?  </s>
<s> Regards, Andy Quick  </s>
<s> I'm using JTidy to convert HTML files from an on-line Spanish Newspaper into clean XML, so that I can run an XSLT processor on them.  </s>
<s> The source documents are encoded using ISO-8859-1 (LATIN1) characters, but when I use the setCharEncoding method with the Configuration.LATIN1 argument and output XML, the prologue line looks as follows: ?xml  </s>
<s> version="1.0"?  </s>
<s> When I then try to apply XSL transformations, I get UTF-8 encoding errors.  </s>
<s> Apparently, the XML parsers that I've tried (Sun's and IBM's) assume UTF-8 if their is no encoding attribute specified.  </s>
<s> If I manually change the prologue line to be: ?xml  </s>
<s> version="1.0"  </s>
<s> encoding="ISO-8859-1"? the parsers are happy and the file is properly transformed.  </s>

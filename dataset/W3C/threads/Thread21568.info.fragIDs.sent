<s> javascript:(function(){var atags,i,name,a,img,link ; anchs = document.getElementsByTagName('*');  </s>
<s> for(i=0; i anchs.length; ++i) { a = anchs[i] ; if (a.id || (a.tagName=="A" &amp;&amp; a.name)) {img=document.createElement("img"); img.src="http://www.nimbustier.net/images/ancre.png" ; img.style.border="none" ; img.alt="" ; if (a.id) {name = a.id;} else {name = a.name;}; if (a.tagName!="A") { link = document.createElement("a")  </s>
<s> ; } else {link=a; } ; link.href="#" + name ; link.appendChild(img); if (a.tagName!="A") { a.appendChild(link);} ; link.style.border  </s>
<s> = "1px solid black"; } } })();  </s>
<s> It makes appear an anchor image after every tag with an id or an anchor with a name, with a link to this anchor.  </s>
<s> Inspired from http://www.la-grange.net/2002/03/21-bookmarklets#W3CSpec  </s>
<s> Knonw Bugs: changing it, and if it does, create a separate link to the anchor Works well with Mozilla 9.9, not tested with others.  </s>
<s> Dominique Haza?l-Massieux - http://www.w3.org/People/Dom/ W3C's Webmaster  </s>
<s> "Dominique Haza?l-Massieux" dom@w3.org  </s>
<s> I use: javascript: document.body.onmousedown=function(e)  </s>
<s> { e= e || event; var x=e.pageX || e.offsetX; var y=e.pageY || e.offsetY; var neardif=100000; var curmatch=-1; da=document.anchors;  </s>
<s> if (da) for (var i=0;i da.length;i++) {; if (Compare(da[i],x,y) neardif) {; curmatch=i; neardif=Compare(da[i],x,y); }} { if (curmatch!=-1) {window.clipboardData.setData('text',location.href+"#"+(da[curmatch].id ?  </s>
<s> da[curmatch].id  </s>
<s> : da[curmatch].name))}}};  </s>
<s> Compare=function(el,x,y) {p1=GetPos(el);ydif=y-p1[1];if (ydif 0) return 10000; return ydif }; GetPos=function(el) { var _x=el.offsetLeft;  </s>
<s> var _y=el.offsetTop; while (el.offsetParent || el.offsetNode) { el=el.offsetParent  </s>
<s> || el.offsetNode; _x+=el.offsetLeft;  </s>
<s> _y+=el.offsetTop;  </s>
<s> }; return new Array(_x,_y); };void 0 In IE, for something similar, it creates a onmousedown handler, so that when you click anywhere on the page, it finds the nearest preceding anchor, and places a link to that anchor in the clipboard.  </s>
<s> Other than the clipboard part it works in Mozilla too.  </s>
<s> changing: window.clipboardData.setData('text',location.href+"#"+(da[curmatch].id ?  </s>
<s> da[curmatch].id  </s>
<s> : da[curmatch].name))  </s>
<s> to writing out the link the page is what you need for mozilla.  </s>
<s> It only does anchors, not any element with an id.  </s>
<s> Jim.  </s>
<s> Le ven 05/04/2002 ?  </s>
<s> 17:00, Dominique Haza?l-Massieux a ?crit  </s>
<s> :  </s>
<s> Updates: The bookmarklet doesn't work with versions of IE anterior to 6.x since document.getElementsByTagName('*')  </s>
<s> isn't interpreted correctly.  </s>
<s> For IE 6.x and following, due to a limitation of the length of a bookmark URI to 508 characters, you should use the shorten version below: javascript:(function(){var i,n,a,j,l;b=document.getElementsByTagName('*');for(i=0;i b.length;++i){a=b[i];if(a.id||(a.tagName=="A"&amp;&amp;a.name)){j=document.createElement("img");j.src="http://www.nimbustier.net/images/ancre.png";j.style.border="none";j.alt="";if(a.id){n=a.id;}else{n=a.name;};if(a.tagName!="A"){l=document.createElement("a");}else{l=a;};l.href="#"+n;l.appendChild(j);if(a.tagName!="A"){a.appendChild(l);};l.style.border="1px  </s>
<s> solid black";}}})(); [sorry for the long line, but that it should be easier to paste it directly in your browser that way] Dom Dominique Haza?l-Massieux - http://www.w3.org/People/Dom/ W3C/INRIA  </s>
<s> [Follow-up on This bookmarklet makes appear an image of anchor after every tag with an id or an anchor with a name; this image gives the link to the given anchor: javascript:(function(){var i,n,a,j,l;b=document.getElementsByTagName('*');for(i=0;i b.length;++i){a=b[i];if(a.id||(a.tagName=="A"&amp;&amp;a.name)){j=document.createElement("img");j.src="http://www.w3.org/2003/08/anchor";j.style.border="none";j.alt="";if(a.id){n=a.id;}else{n=a.name;};if(a.tagName!="A"){l=document.createElement("a");}else{l=a;};l.href="#"+n;l.appendChild(j);if(a.tagName!="A"){a.appendChild(l);};l.style.border="1px  </s>
<s> solid black";}}})(); Note that it doesn't work in Internet Explorer before version 6.0 due to the lack of interpretation of document.getElementsByTagName('*')  </s>
<s> (the only change compared to the previous version is to use a www.w3.org image rather than an image from my personal site).  </s>
<s> Dom Dominique Haza?l-Massieux - http://www.w3.org/People/Dom/ W3C/ERCIM  </s>

<s> Hi folks,  </s>
<s> I have installed the ZAnnot server o OS X (fairly easy to do) and on Windows  </s>
<s> (ridiculously easy).  </s>
<s> I will shortly have written up instructions for  </s>
<s> installation and configuration to make them run.  </s>
<s> But if anyone else has  </s>
<s> installed the ZAnnot server on Windows they might be able to help me out...  </s>
<s> I had no problem posting Annotations to it, but for some reason it will not  </s>
<s> return them to me.  </s>
<s> I tested using the ruby command-line annodemo tools at  </s>
<s> doesn't get anything.  </s>
<s> The same tools work fine to post to the server, and the  </s>
<s> annotations are shown in the server management interface, and on Moc OS X the  </s>
<s> same tools all work fine.  </s>
<s> I have only tested on Windows using localhost and  </s>
<s> annotating local files (I don't have a Windows machine that I can set up as  </s>
<s> an online server at the moment).  </s>
<s> Any help available?  </s>
<s> The very rough draft of instructions that I am working on is at if anyone wants a preview of an unstable and incomplete draft...  </s>
<s> cheers Chaals Post: 21 Mitchell street, FOOTSCRAY Vic 3011, Australia or W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France  </s>
<s> * Charles McCathieNevile charles@w3.org [2003-01-18 20:24-0500]  </s>
<s> Thanks, this is a good start.  </s>
<s> I'm trying to test this under Debian.  </s>
<s> Brief notes so far: apt-get install zope  </s>
<s> ...just worked.  </s>
<s> It sets up a user and runs the server for you too.  </s>
<s> Default Zope port: seems to be 9673 rather than 8080, currently at least.  </s>
<s> This confused me for a few minutes.  </s>
<s> aside:  </s>
<s> I was out of luck when I tried to reconfigure Zope by running:  </s>
<s> dpkg --configure zope  </s>
<s> I had to remove and reinstall it, deleting some files by hand, as the only  </s>
<s> quick way I could find to blank down the admin user I'd created and start afresh.  </s>
<s> apt-get remove zope rm -rf /var/lib/zope  </s>
<s> The reason I re-installed was for some reason, when I first set up an admin  </s>
<s> user I followed your guide and asked for a restriction to 'localhost' for domain, but the way my box is set up, that doesn't work and I couldn't log in as the Zope administrator.  </s>
<s> What I did next: action: selected 'acl_users' folder.  </s>
<s> msg: "there are no users defined."  </s>
<s> action: selected [Add...] button msg: "To add a new user, enter ... (user details)" action: I created a user 'annouser', and selected 'manager' from Roles, then [Add...] msg: The following users have been defined.  </s>
<s> Click on the name of a user to edit that user.  </s>
<s> So now everything _except_ the Annotations stuff is set up fine.  </s>
<s> There isn't a Debian package of ZAnnot that I'm aware of, so (via Google -- Charles can you add a link to the ZAnnot pages?) I follow the instructions in  </s>
<s> Here's what I did to install ZAnnot on top of my working Zope system: cd lib/python/Products/ cd /usr/lib/zope/lib/python/Products; wget http://www.zope.org/Members/Crouton/ZAnnot/ZAnnot-0.3.tgz tar -zxvf ZAnnot-0.3.tgz zopectl restart  </s>
<s> Then closing browser and restarting it, I log into http://localhost:9673/manage/ as the annouser I just created.  </s>
<s> I'm now at step: "3.  </s>
<s> Add an annotation server object" of the howto, and this is where I get lost.  </s>
<s> I don't know enough about Zope, ZANnot etc to know if my setup is OK.  </s>
<s> From the ZAnnot README I just unpacked: Setting up your annotation server Add an instance of the 'Annotation Server' object somewhere in your Zope site.  </s>
<s> That's it, you're ready to go!  </s>
<s> You may want to create accounts for users allowed to post annotations.  </s>
<s> See the Zope documentation for instructions on how to create and manage users.  </s>
<s> At this point, I can't see an 'Annotation Server' type in the 'Select type to add' form widget at http://localhost:9673/manage/ ...should it appear alongside 'File', 'Folder', 'DTML Document' etc etc? I've also tried restartign the server through the Zope Web interface.  </s>
<s> No joy.  </s>
<s> Nosing a bit further, under Control_Panel, 'Product Management', I find a list of Zope addons, ie. 'Products'.  </s>
<s> Helpfully, ZAnnot is listed as: ZAnnot (Broken product ZAnnot) ...complete with an icon indicating a broken installation.  </s>
<s> Selecting that gets me some useful debug information: Import Traceback Traceback (most recent call last): File "/usr/lib/zope/lib/python/OFS/Application.py", line 531, in import_product product=__import__(pname, global_dict, global_dict, silly) File "/usr/lib/zope/lib/python/Products/ZAnnot/__init__.py", line 1, in ?  </s>
<s> import ZAnnot File "/usr/lib/zope/lib/python/Products/ZAnnot/ZAnnot.py", line 15, in ?  </s>
<s> from AnnotRequestParser import AnnotRequestParser File "/usr/lib/zope/lib/python/Products/ZAnnot/AnnotRequestParser.py", line 8, in ?  </s>
<s> import xml.parsers.expat  </s>
<s> ImportError: No module named xml.parsers.expat  </s>
<s> At this point I realise I have no idea which version of Python Zope is using, there are a couple on the system.  </s>
<s> I assume 2.1 as that's what 'python' is: /usr/bin/python -v # /usr/lib/python2.1/site.pyc  </s>
<s> matches /usr/lib/python2.1/site.py  </s>
<s> So I do: apt-cache search python | grep -i xml ...to find likely looking packages, and correctly guess that: apt-get install python2.1-xml  </s>
<s> zopectl restart ....will do the business.  </s>
<s> Revisiting the control panel in Zope after it restarts, Anno stuff is OK and appears in the 'select type to add' dropdown.  </s>
<s> I successfully create a folder called 'anno' and a server inside it called 'server'.  </s>
<s> Seems OK so far, but I've not tested things further yet.  </s>
<s> Visiting  </s>
<s> the browser just hangs.  </s>
<s> Not sure if that is because there's no data there, because the access control settings are wrong, or some other reason.  </s>
<s> Anyway, I'm nearly there!  </s>
<s> Will revisit this later in the week.  </s>
<s> Any tips welcomed... cheers, Dan  </s>
<s> Presumably this is to do with the way debian is set up.  </s>
<s> I'll note it..  </s>
<s> Yep, did that about 10 minutes before your message :-)  </s>
<s> I suggested apt-getting python2.1-xml in my instructions.  </s>
<s> With minimal  </s>
<s> experience of debain packages and no test sytem I am open to all  </s>
<s> suggestions...  </s>
<s> If you configure your favourite annotea client to post anotations to and get them from http://localhost:9673/anno/server you should be able to annotate something, and then query for annotations on that thing and get the results.  </s>
<s> Unlike the W3C server I don't think the ZAnnot server provides a default HTML form interface - if you don't talk annotea to it you get no joy... cheers, and thanks for your results... chaals  </s>
<s> I put my windows machine online, and annotated a header on the W3C homepage.  </s>
<s> As always, the ZAnnot server handled it fine, and this time Amaya could find  </s>
<s> the annotation as well.  </s>
<s> So I am wondering what Amaya sends as the URI ift is  </s>
<s> looking for annotations for when they are of the form file://  </s>
<s> I next annotated http://www.example.org  </s>
<s> using the ruby annopost and tried to load the annotation in Amaya.  </s>
<s> It told me there was an orphan annotation, and then couldn't load it because it couldn't find annotest.w3.org (which must be hard-coded in there somewhere, because I haven't put it in any config stuff.  </s>
<s> Finally, I cannot delete my username - in the configuration box for Annotea User I keep deleting it and Amaya keeps putting it back.  </s>
<s> (and I still cannot get anything from the Zope server running on Windows using the ruby annoget tool, although it works fine on OS X.) cheers Chaals  </s>
<s> Post: 21 Mitchell street, FOOTSCRAY Vic 3011, Australia or W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France  </s>
<s> "Charles McCathieNevile" charles@w3.org wrote in message  </s>
<s> news:Pine.LNX.4.30.0301182018390.7127-100000@tux.w3.org...  </s>
<s> out...  </s>
<s> not  </s>
<s> it  </s>
<s> the  </s>
<s> the  </s>
<s> and  </s>
<s> as  </s>
<s> If you want me to chuck it onto a windows server, I'll offer up one of mine to the cause, and we can then have a publically available one to play against.  </s>
<s> Jim.  </s>
<s> * Jim Ley jim@jibbering.com [2003-01-19 16:40-0000]  </s>
<s> Sounds good to me.  </s>
<s> Soon we might have enough of these to start investigating  </s>
<s> service discovery and query routing between them...  </s>
<s> Dan  </s>
<s> That would be great Jim.  </s>
<s> The install is about a 5-minute process, and on windows it sets you up as the manager during the install so you just need to add the annotation server object, give it an id and title, then set the security properies.  </s>
<s> Cheers Chaals  </s>
<s> Post: 21 Mitchell street, FOOTSCRAY Vic 3011, Australia or W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France  </s>
<s> Charles,  </s>
<s> Your bug report is incomplete.  </s>
<s> As you're using your ruby tools, can you copy the result of your query?  </s>
<s> I can't help you much without that.  </s>
<s> If it says orphan annotation it means that your XPointer was invalid or obsolete.  </s>
<s> Do you mean Annotations rather than Annotea?  </s>
<s> That works for me.  </s>
<s> Did you press the "Apply" button?  </s>
<s> What are the access rights on your ~/.amaya/thot.rc  </s>
<s> file?  </s>
<s> -jose  </s>
<s> Well, I think I understand one bit of wierdness - the server isn't returning a context, or at least not always.  </s>
<s> But there are other oddities noted below... (I can't tell which are Amaya and which are ZAnnot and whether any are due to the annotools.  </s>
<s> More testing required :( cheers Chaals  </s>
<s> My annotation posted was on the document as a whole, got a 200 OK response from the server and appeared as a normal annotation in the server.  </s>
<s> When Amaya got to the page it went looking for an annotation server I had never asked it to look for.  </s>
<s> (This is the wierdest thing that happened) Testing it on a unix system does something a little less odd - it finds the annotation, (I made one using http://www.w3.org/ as an external body) but in trying to load it I get the following body 406 Not Acceptable Not Acceptable An appropriate representation of the requested resource /Overview.var  </s>
<s> could not be found on this server.  </s>
<s> Available variants: Overview.html , type text/html, charset utf-8  </s>
<s> Yep.  </s>
<s> I think I did.  </s>
<s> This is on a windows system, using a default amaya 7.1 release install.  </s>
<s> The oddd thing is it updates the servers when I change them without a problem - it just keeps putting back a username when I delete it.  </s>
<s> (I can't find a log of requests on the Zope server, and I don't have my windows machine handy to look at now - I will check these again later.  </s>
<s> My unix Amaya 7.1 (release distribution of source compiled under fink on Mac OS X) keeps proposing a username too.  </s>
<s> Post: 21 Mitchell street, FOOTSCRAY Vic 3011, Australia or W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France  </s>
<s> Sorry I haven't had a chance to respond to your emails.  </s>
<s> Busy week at work :( If your windows machine is online, would you be willing to give me an account so I could take a look at what might be going on?  </s>
<s> Thanks!  </s>
<s> --Brent  </s>
<s> "The programmer, like the poet, works only slightly removed from pure thought-stuff.  </s>
<s> He builds his castles in the air, from air, creating by exertion of the imagination.  </s>
<s> Few media of creation are so flexible, so easy to polish and rework, so readily capable of realizing grand conceptual structures."  </s>
<s> -- Frederick Brooks, Jr., The Mythical Man Month  </s>
<s> Brent,  </s>
<s> thanks for the response.  </s>
<s> I haven't got it online :( As near as I could tell, when there was no difference between the context and the thing being annotated it was just not returning a context, and so Amaya thought it was an orphan, but I am not sure about that.  </s>
<s> I have no idea why the annoget.rb  </s>
<s> wasn't working - that seeems to be windows wierdness, since the same code works fine under Mac OS X running ruby.  </s>
<s> I am hoping Jim Ley will set up a windows server with ZAnnot so we can test  </s>
<s> against that.  </s>
<s> (But other volunteers would be appreciated...) cheers Chaals  </s>
<s> Post: 21 Mitchell street, FOOTSCRAY Vic 3011, Australia or W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France  </s>
<s> Aha. My problem was using the development version of Ruby - for some reason  </s>
<s> my scripts don't work under the latest version.  </s>
<s> (And my second problem was some wierd de-install when I switched versions and it didn't work).  </s>
<s> (My Amaya keeps refusing to accept a blank annotations user option, but that's pretty minor)  </s>
<s> Cheers Chaals  </s>
<s> Post: 21 Mitchell street, FOOTSCRAY Vic 3011, Australia or W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France  </s>
<s> * Charles McCathieNevile charles@w3.org [2003-01-26 08:27-0500]  </s>
<s> Yup, I've had cgi/net troubles with the 1.7 Ruby dev't versions, rolling back to the latest stable worked for me (on windows/cygwin, fwiw).  </s>
<s> Dan  </s>
<s> "Charles McCathieNevile" charles@w3.org wrote in message news:Pine.LNX.4.30.0301260819490.14555-100000@tux.w3.org...  </s>
<s> reason  </s>
<s> Does this mean there's no longer a need for me to get a ZAnnot system installed?  </s>
<s> Jim.  </s>
<s> Well, we don't need it for figuring out why it doesn't seem to work, becuase it does work.  </s>
<s> But it would be nice to have one running to look at issues that arise from working with multiple servers.  </s>
<s> cheers chaals  </s>
<s> Post: 21 Mitchell street, FOOTSCRAY Vic 3011, Australia or W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France  </s>

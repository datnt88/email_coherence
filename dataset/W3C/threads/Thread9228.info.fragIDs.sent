<s> OK, basically it seems that we ought to do the following (DanC?) For each test case (in the form of a piece of RDF)... 1. Create serialised RDF as an attachment ("test1.rdf")  </s>
<s> 2. Create expected output (more below) as an attachment ("test1.out")  </s>
<s> these come in pairs.  </s>
<s> 3.  </s>
<s> Where we've got optional behaviour (x MAY do y) provide enumerated outputs (test1a.out,  </s>
<s> etc.)  </s>
<s> Expected output should be a list of triples that describe the expected output (in the following format) OR just "error" to indicate that the test case is an example of something that should be non-conforming (or deprecated?).  </s>
<s> A triple is represented as: triple(S, P, O)  </s>
<s> where S, P, O are any of: r("URI")  </s>
<s> a("ID")  </s>
<s> l("literal")  </s>
<s> (with the usual rules about placement of literals).  </s>
<s> r("URI") is a normal resource.  </s>
<s> l("literal") is a literal; a("ID") is an anonymous resource, which I think (with an eye on the future) that we ought to make explicitly different from r("#genid").  </s>
<s> Something conforms wrt the test case iff it interprets the RDF as producing* a set of triples identical with the sample output, up to reordering and the global renaming of anonymous resources.  </s>
<s> Re: anon resources - two elements a(X) and a(Y) should be considered to represent "the same anon resource" iff X=Y (lexically) - and the scope  </s>
<s> of the identity of an anon resource is the single test output attachment.  </s>
<s> Clear as mud of course - any real objections?  </s>
<s> Once I've had the nod, I'll submit the empty element proposal in that format (or even beforehand as an example if people prefer).  </s>
<s> jan * for the usual values of "producing" - implying, representing, etc.  </s>
<s> jan grant, ILRT, University of Bristol.  </s>
<s> http://www.ilrt.bris.ac.uk/ Goedel would be proud - I'm both inconsistent _and_ incomplete.  </s>
<s> generally: make it available via HTTP and give it the relevant license and availability/persistence.  </s>
<s> Sending stuff to this list grants the relevant license (as a consequence of the agreement folks executed when they joined the group; see the charter and W3C process for details).  </s>
<s> I'd like to say that it assures the relevant persistence, but actually, our list archives have been known to reshuffle the numbers occasionally.  </s>
<s> Sigh.  </s>
<s> So... sending stuff as attachments to this list should be sufficient, but I don't think it's strictly necessary; there are perhaps other ways to meet the above constraints.  </s>
<s> Yikes! optional behaviour?  </s>
<s> I should hope not; I should  </s>
<s> hope each RDF document means exactly one thing.  </s>
<s> But I guess  </s>
<s> we'll figure that out as we go...  </s>
<s> We have avoided "deprecated" so far (whew!); let's keep it that way as long as we can...  </s>
<s> I have some comments on the format itself; I think I'll send those separately... Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> I have a certain investment in S P O. The SWAP code (cwm, notation3) groks that format.  </s>
<s> There's precedent for URI in RFC2396; e.g.  </s>
<s> In many cases, different URI strings may actually identify the identical resource.  </s>
<s> For example, the host names used in URL are actually case insensitive, and the URL http://www.XEROX.com is equivalent to http://www.xerox.com .  </s>
<s> -- http://www.ietf.org/rfc/rfc2396.txt  </s>
<s> The swap/cwm/n3 stuff doesn't have a syntax for this; we've considered ?ID;  </s>
<s> I'd be willing to add code for that.  </s>
<s> How about just "literal"?  </s>
<s> There are a host of quoting and unicode issues; swap/cwmp/n3 follows python currently; I wonder how different it is from the string literal formats in Java; I'd be willing to go with that.  </s>
<s> 3.10.5  </s>
<s> String Literals (does ANSI-C have a unicode-capable string literal syntax?  </s>
<s> how about perl?) Of course, any decision on how to represent literals in expected results is also a decision to a whole pile of actual RDF issues: xml:lang, etc.  </s>
<s> Yes, it must be different.  </s>
<s> TimBL provided me with some convincing  </s>
<s> examples...  </s>
<s> I should find those and/or write them up...  </s>
<s> Right.  </s>
<s> It's too bad there's no way to reduce that to some sort/diff thingy, but there just isn't.  </s>
<s> It's inherently a graph-matching thing.  </s>
<s> We've been coding it up, but I'm not sure it's debugged.  </s>
<s> (see the includes built-in stuff Would an implementation in prolog fit on the front side of one page?  </s>
<s> that's if X=Y, not iff.  </s>
<s> If X  Y, they could still represent the same resource.  </s>
<s> Yes, they're still distinct terms, which is the relevant point for this excersise, but to persue the diversion, consider: mailto:connolly@w3.org  </s>
<s> http://example/vocab#ownedBy ?x1. mailto:connolly@w3.org  </s>
<s> http://example/vocab#ownedBy ?x2.  </s>
<s> If ownedBy is functional/unique/many-to-one, then ?x1 and ?x2  </s>
<s> represent/denote the same resource/object/thing.  </s>
<s> No real objections....  </s>
<s> I'm just exploring alternatives  </s>
<s> that are grounded in running code...  </s>
<s> And actually, now that I think about this a("ID") vs ?id  </s>
<s> stuff... we could actually use KIF syntax: (exists (?x1) (mailto\:connolly\@w3\.org http\:\/\/example/vocab\#ownedBy ?x1)  </s>
<s> I wrote a KIF parser a while ago... that code is pretty ugly; but it does have the relevant reference: [KIF] Knowledge Interchange Format draft proposed American National Standard (dpANS) NCITS.T2/98-004  </s>
<s> Last Modified: Thursday, 25-Jun-98 22:31:37 GMT There are other dialects of KIF; my notes on ANSI KIF and KIF v3 are in KIF as an RDF Schema (in progress Aug 2000) There are a few nitty gritty issues... some versions of KIF are case-insensitive, and they don't grok Unicode.  </s>
<s> I gather from Pay Hayes that those are being fixed, and we could anticipate those fixes.  </s>
<s> And while I'm on that train of thought, I could go with your triple(P, S, O) format, provided the details are consistent with real prolog implementations.  </s>
<s> Open source, easy-to-install-and-use implementations, like swi-prolog.  </s>
<s> Oh! I would, of course, be remiss if I did not propose and XML-based format.  </s>
<s> Perhaps we could implement the compare-expected-results thingy in XSLT... I was just playing around with Brian McBride's executable grammar; It produces: statement subjURI="http://example/someThing" objURI="http://example/someClass"/  </s>
<s> I don't like the term 'model' any more.  </s>
<s> I think  </s>
<s> what we've got here is abstract syntax.  </s>
<s> But you get the idea.  </s>
<s> (Brian: spec.xsl was missing a whole bunch of xsl:param/ s. Did it work without those somehow for you?  </s>
<s> what XSLT processor did you use?)  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> Ehh? What are the issues with sorting the triples and providing some algorithm for anonymous resource naming?  </s>
<s> [ :name "Aaron Swartz" ; :mbox mailto:me@aaronsw.com ; :homepage http://www.aaronsw.com  </s>
<s> ] is dc:author of  .  </s>
<s> You're welcome to give it a try, but I don't see any algorithm for naming the anonymous resources that's any simpler than graph matching.  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> I don't know what graph matching is, but what's wrong with:  </s>
<s> 1) Sort each anonymous node individually in form: #pred #obj ;  </s>
<s> 2) Remove line breaks and surround each anonnode with "[ " and " ]." 3) Combine with regular triples and sort You end up with something like: #subj #pred3 "aaa" .  </s>
<s> [ #pred1 "ob" ; #pred2 #obj ; ]. Am I missing something?  </s>
<s> [ :name "Aaron Swartz" ; :mbox mailto:me@aaronsw.com ; :homepage http://www.aaronsw.com  </s>
<s> ] is dc:author of  .  </s>
<s> e.g. http://www.agfa.com/w3c/euler/danc-result.n3 is the result of a graph matching (for anonymous resources) of onto The algorithm is pretty simple and can be found as part of the eval and unify methods of Jos De Roo, AGFA http://www.agfa.com/w3c/jdroo/  </s>
<s> I don't think you can do that in the general case;  </s>
<s> sometimes anonymous nodes are objects; they're  </s>
<s> not always subjects; see below...  </s>
<s> I think you're not taking into account cases like... [ #hairColor #brown ]. i.e.  </s>
<s> rdf:RDF xmlns="file:/home/connolly/,ex.n3#" xmlns:log="http://www.w3.org/2000/10/swap/log#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> Hmm, good point.  </s>
<s> OK, how about:  </s>
<s> [ #hairColor #brown ; is #hasCousin of #DanC ] .  </s>
<s> [ "Aaron Swartz" ; mailto:me@aaronsw.com ; http://www.aaronsw.com  </s>
<s> ]  </s>
<s> What I'm after is a format for producing output from parsers (for instance) that _doesn't_ require complicated handling; I don't want to have to debug my test-output generator or reader too!  </s>
<s> Triples are fine.  </s>
<s> A graph-matching algorithm might have a high cost theoretically, but if we're talking about test cases producing less than 50ish nodes, this shouldn't be a problem.  </s>
<s> The reason I used l("blah") rather than "blah", incidentally, is to permit the attachment of additional information l("blah","language").  </s>
<s> I don't really care what the syntax looks like* as long as it's trivial to produce.  </s>
<s> jan * only religious opinion is "SPO, not PSO" :-)  </s>
<s> jan grant, ILRT, University of Bristol.  </s>
<s> http://www.ilrt.bris.ac.uk/ Axioms speak louder than words.  </s>
<s> OK, it's worth spelling this out explicitly (I think DanC and I think the same thing, but mailing lists aren't the place for unspoken assumptions).  </s>
<s> RDF test cases are (at least, syntax-related ones) are dealing with the turning of RDF syntax into a graph.  </s>
<s> Thus above, I should have referred to "anonymous nodes" rather than  </s>
<s> "anonymous resources".  </s>
<s> Two elements a(X) and a(Y) should be considered to represent "the same anonymous node (in the resultant graph)" iff X=Y lexically.  </s>
<s> The question of an interpretive function turning nodes into resources/entities is left as part of the semantic layer; the test cases we're talking about don't yet require this.  </s>
<s> That I(a(X)) may equal I(a(Y)) doesn't really matter here.  </s>
<s> Thus, matching test outputs with the expected output is graph matching (unification while preserving the identity/distinction between pairs of nodes in each of the input graphs).  </s>
<s> Do we all agree?  </s>
<s> As to syntax, let's take a view and stick to it.  </s>
<s> I don't really care _what_ it looks like, so the formal proposal (given before) holds (use of r(), a() and l(), with the following amendment: l("blah") is a literal.  </s>
<s> We use java conventions for unicode characters.  </s>
<s> l("blah","foo") is a literal; foo is its xml:lang if one was specified.  </s>
<s> If everyone is happy (ie, has no objections on technical merits) then I'd rather we just go ahead and use this.  </s>
<s> I don't care if it'd be neater  </s>
<s> to use {{% %}} brackets around things - we can debate this endlessly.  </s>
<s> If someone out there has a preferred format that they've got a zillion test cases in, speak now or forever hold your peace*.  </s>
<s> jan * and use perl.  </s>
<s> jan grant, ILRT, University of Bristol.  </s>
<s> http://www.ilrt.bris.ac.uk/ Leverage that synergy!  </s>
<s> Ooh yeah, looking good!  </s>
<s> Now stretch - and relax.  </s>
<s> Me neither  </s>
<s> Its a while since I played with it.  </s>
<s> I was using Xalan I think.  </s>
<s> If I get my head above water, I'll have another look at it.  </s>
<s> Brian  </s>
<s> Er... I think the non-technical issues actually dominate, in this case.  </s>
<s> This is primarily a practical engineering decision.  </s>
<s> I agree that technically, i.e. in theory, we could use lots of things.  </s>
<s> But I don't agree to your proposal because it's not backed by running code.  </s>
<s> I have a preferred format that I have a zillion test cases in: RDF/notation3.  </s>
<s> I'm happy to discuss alternatives that are backed by running code.  </s>
<s> I pefer python.  </s>
<s> I'm also happy with the XSLT-based proposals  </s>
<s> I've seen.  </s>
<s> I'm willing to look at a proposal written in perl; I'll hold my nose ;-) On behalf of W3C (esp. the I18N WG), I'm somewhat obliged to prefer an XML-based format, unless there are good reasons to use something else.  </s>
<s> Meanwhile, I do think there are good reasons: (a) because XML is so hard to read that it unduely increases the cost of debugging the tests and (b) because using XML might hide some of the RDF issues that are close to XML.  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> Fine. How do I name anonymous "thing"s in n3?  </s>
<s> It wasn't on the WG reading list :-)  </s>
<s> If I can do that and there's a simple (ie, sed) transformation between triple(s, p, o) and some well-defined subset of n3 then I'm happy.  </s>
<s> jan jan grant, ILRT, University of Bristol.  </s>
<s> http://www.ilrt.bris.ac.uk/ HP-unix: Open Sauce product, available in 57 distributions.  </s>
<s> We don't want to spend forever on this.  </s>
<s> Jan has made a proposal for a simple triple based syntax.  </s>
<s> DanC has said he'd prefer something N3 compatible.  </s>
<s> I'm assuming that for clarity we'd be restricting test cases to the simplest S P O. form of N3 - I'd hate for anything to be unclear because we are not sure what N3 means exactly.  </s>
<s> If thats the case, there is very little difference between the two, and there may well be an advantage to going with a format that N3 processers can slurp in directly.  </s>
<s> If:  </s>
<s> o DanC were to propose a way of augmenting "S P O." to represent anonymous nodes.  </s>
<s> o We have an issue #rdfms-xmllang questioning representing the xml:lang attribute as part of the literal.  </s>
<s> If the outcome of that lang attributes are part of the literal value then we'll augment this syntax to include a lang attribute in a literal.  </s>
<s> would that meet our needs?  </s>
<s> Brian  </s>
<s> I've put an 'alpha' version of an RDF namespace parser up at  </s>
<s> It looks for the namespace of the files elements and attributes , and  </s>
<s> tables them.  </s>
<s> If needed it will convert uncolonized attributes, and  </s>
<s> unqualified namespace declarations into quaified declarations, and colonized atts.  </s>
<s> (It does not deal with empty unqualified namespace declarations (i.e. xmlns="") yet.).  </s>
<s> I have not yet tested it on any  </s>
<s> 'torture' files, (Can any one give be the URL of such a file?), but it  </s>
<s> should work on any smaller files.  </s>
<s> It's built on top of the MSXML parser.  </s>
<s> I would be glad of any feed back, or whether a stand alone version (Java,VB or C) would be useful.  </s>
<s> frank boumphrey  </s>
<s> Perhaps we should not take this all on at once, but I'm hoping that the format we choose is usable with standard tools (diff/sort) and provides a canonical version useful for other things (digital signing, transport, etc.).  </s>
<s> Personally, I'm not much in the mood for coding and debugging a graph matching tool.  </s>
<s> However, I can write a script to output the format I suggest in only a couple of lines and code already exists to read it (the various N3 parsers).  </s>
<s> Aaron Swartz me@aaronsw.com | RSS Info AIM: JediOfPi | ICQ: 33158237| news and information on the RSS format  </s>
<s> I believe that it's: #name :- [ anonymous node ] .  </s>
<s> Aaron Swartz me@aaronsw.com | RSS Info AIM: JediOfPi | ICQ: 33158237| news and information on the RSS format  </s>
<s> For something more RDF-centric, Dan Connolly has built an XSLT file to fix  </s>
<s> broken RDF files: You can use it with the W3C's online XSLT service.  </s>
<s> An example is:  </s>
<s> /fixAttrs.xsl&amp;xmlfile=http://www.w3.org/2001/04rs22/confusedPrefixes.rdf  </s>
<s> But replace the confusedPrefixes file with any file available over HTTP to  </s>
<s> fix it.  </s>
<s> Dan, would you mind putting up an HTML form on the syntax hacking page for  </s>
<s> people to use?  </s>
<s> Also, why do the forms use POST instead of GET?  </s>
<s> Aaron Swartz me@aaronsw.com | The Info Network AIM: JediOfPi | ICQ: 33158237| the way you want the web to be  </s>
<s> I proposed a solution to this in: with amendment:  </s>
<s> I think this would be a very good choice.  </s>
<s> [ "Aaron Swartz" ; mailto:me@aaronsw.com ; http://www.aaronsw.com  </s>
<s> ]  </s>
<s> Actually, that smiley-point is well-made: this testing format shouldn't depend on all the RDF/n3 specs, code, and tutorials, which are in flux...  </s>
<s> Well, that sort of achieves the relevant effect, but it's complex to an extent that's not motivated for this usage.  </s>
<s> I was just chatting with TimBL, and I convinced him to add support for _:name While he's hacking on that, I'll re-state this proposal, independent of the N3 code and docs.  </s>
<s> We've got terms of the form _:namefor "anonymous" terms absURIref for URIs "lskdjf"for string literals.  </s>
<s> and statements of the form S P O. where S, P, and O are terms (S and P can't be literals in the expected results from any RDF 1.0 document.)  </s>
<s> I wrote a little perl hack to parse the format I'm proposing and, modulo string quoting cruft, turn it into triple(a(x), r(http:...), l("xyz")) format.  </s>
<s> given the test input from the expected results are in: which, when fed thru n3-simple.pl,  </s>
<s> produces: triple(r(http://www.w3.org/2000/10/swap/test/animal.rdf#Animal), r(http://www.w3.org/1999/02/22-rdf-syntax-ns#type), r(http://www.w3.org/2000/01/rdf-schema#Class)) triple(r(http://www.w3.org/2000/10/swap/test/animal.rdf#Animal), r(http://www.daml.org/2000/12/daml+oil#restrictedBy),  </s>
<s> a(a)) triple(a(a), r(http://www.w3.org/1999/02/22-rdf-syntax-ns#type), r(http://www.daml.org/2000/12/daml+oil#Restriction))  </s>
<s> triple(a(a), r(http://www.daml.org/2000/12/daml+oil#onProperty),  </s>
<s> r(http://www.w3.org/2000/10/swap/test/animal.rdf#parent)) triple(a(a), r(http://www.daml.org/2000/12/daml+oil#cardinality),  </s>
<s> l("2")) triple(a(a), r(http://www.w3.org/2000/01/rdf-schema#label), l("Animal")) which shows what we all knew: we can use either the n3-simple format or the prolog-ish triple() format.  </s>
<s> The interesting bit is to see which format is backed by a "do these graphs match?"  </s>
<s> code first.  </s>
<s> Preferably two independent implementations.  </s>
<s> cwm already does it for N3, modulo the _:name syntax (and modulo cwm bugs ;-) Jos, I gather your code can almost do the comparison too.  </s>
<s> Jan, have you hacked an implementation of graph matching for the triple() format yet?  </s>
<s> It seems like it should be about 50 lines of prolog.  </s>
<s> Maybe I'll take a whack at it... Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> er...  </s>
<s> I did.  </s>
<s> $Revision: 1.8 $ of $Date: 2001/05/24 15:34:30 $ Oops... that form only works for getting rid of collection sugar.  </s>
<s> But there's a link to a form that works for any combination of transformation and input, so I'll fix this next time I'm mucking in there, rather than swapping in all the context just now.  </s>
<s> Huh? They don't, to my knowledge.  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> aaron For something more RDF-centric, Dan Connolly has built an XSLT  </s>
<s> file to fix  </s>
<s> broken RDF files: /aaron  </s>
<s> Yes. I saw that, but quick scan of the XSLT file suggests that this  </s>
<s> just fixes attributes in the RDF namespace.  </s>
<s> (i may be wrong).  </s>
<s> We also need to be able to fix attributes in other namespaces.  </s>
<s> Frank  </s>
<s> and  </s>
<s> and  </s>
<s> any  </s>
<s> but it  </s>
<s> to fix  </s>
<s> 04rs22 /fixAttrs.xsl&amp;xmlfile=http://www.w3.org/2001/04rs22/confusedPrefixes.r df  </s>
<s> HTTP to  </s>
<s> page for  </s>
<s> view source shows (at line 70): For my own enlightenment, is there any reason why 'GET' is preferred in RDF?.  </s>
<s> I always use 'POST' in my hacking.  </s>
<s> Frank  </s>
<s> and  </s>
<s> and  </s>
<s> any  </s>
<s> but it  </s>
<s> to fix  </s>
<s> 04rs22 /fixAttrs.xsl&amp;xmlfile=http://www.w3.org/2001/04rs22/confusedPrefixes.r df  </s>
<s> HTTP to  </s>
<s> page for  </s>
<s> Why is this?  </s>
<s> Other attributes have no clear meaning and are probably best ignored.  </s>
<s> Aaron Swartz me@aaronsw.com | RSS Info AIM: JediOfPi | ICQ: 33158237| news and information on the RSS format  </s>
<s> Yes, Dan kindly changed it after my post.  </s>
<s> The reason GET is preferred is  </s>
<s> because GET and POST have a semantic meaning, and before trying to add more semantics to the Web we should do our best to maintain the ones that are already there.  </s>
<s> GET is meant to be used for any action that has no side effects -- thus, any client should be able to request, prefetch, etc. it without worry.  </s>
<s> POST should only be used for actions which have some sort of effect -- unsubscribing someone from a mailing list, etc.  </s>
<s> For more on this and other bits of theory to the Web, see Tim Berners-Lee's Axioms of Web Architecture: [ "Aaron Swartz" ; mailto:me@aaronsw.com ; http://www.aaronsw.com  </s>
<s> ]  </s>
<s> Yes  </s>
<s> How would we handle relative URI's, e.g.: Brian  </s>
<s> I'd suggest just using relative URIs e.g.: Alternately, we could define a base URI: [ "Aaron Swartz" ; mailto:me@aaronsw.com ; http://www.aaronsw.com  </s>
<s> ]  </s>
<s> I'm proposing that they get absolutized in the expected results; in this case: The input to the test is an XML document, and one of the properties of an XML document is its base URI.  </s>
<s> (I suppose some tests might have syntax errors at the XML level; but in that case, there are no expected results anyway.) This might be somewhat tedious: if/when we move the tests, we have to updated the expected result; copying them to local disk has to be done in such a way that the test harness remembers where it came from; etc.  </s>
<s> But I think the alternatives are all worse.  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> let me jump in here with XML base! - for the most part it's an ideal spec.  </s>
<s> Short, snappy, and while it says a bit about where xml bases come from, it leaves what they do to other documents.  </s>
<s> It would be ideal to expect xml:base to operate under these circumstances.  </s>
<s> jan grant, ILRT, University of Bristol.  </s>
<s> http://www.ilrt.bris.ac.uk/ Whose kung-fu is the best?  </s>

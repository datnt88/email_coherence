I'd like to clarify something that the Annotea protocols are unclear on. 
Is it necessary to include the text for an annotation's body in the RDF sent to the server to update the annotation? 
Say you just want to update the type of an annotation, but not update the text in the body. 
If updates require the body of the annotaton, then to update the just the type you must (1) GET the annotation (2) GET the body text from the url embedded in the annotation (3) POST the update, complete with the same body text However, if including the body in the update RDF was optional, then you could skip step 2. This seems like a useful optimization to me. 
I was going to test an update w/o body information to see if it works on annotest.w3.org, but the server seems to be down. 
So does anyone know offhand if the update w/o body will work? 
Thanks, Doug 
In principle it seems to me that you should be able to PUT the updated annotation information, with the reference to the text as given by a query that would return the annotation. 
As I read the protocol you SHOULD use PUT to update an annotation, only using POST to have the server create one with new URIs for the annotation and its body, although this isn't a MUST for some reason I don't understand that comes out as "implementation magic". 
cheers Chaals 
SWAD-E http://www.w3.org/2001/sw/Europe ------------ WAI http://www.w3.org/WAI W3C, 2004 Route des Lucioles, 06902 Sophia Antipolis Cedex, France 
Indeed, once the server was up I tried this out and it worked. 
Good call. 
Yes, both annozilla and amaya use the POST method with ?replace_source instead of PUT to update annotations. 
As far as annozilla is concerned, I'm not certain that the XMLHttpRequest object has PUT implemented yet. 
POST seems to be more commonly available to clients. 
Doug 
I submitted a patch to Mozilla which made XMLHttpRequest accept DELETE as well as GET and POST, I think it should also have allowed PUT. 
Matthew Wilson 
Hello Doug, Your question arrives just in time. 
I think I said in a recent post that we're updating the Annotea protocols. 
The motivation is to remove these ambiguities and also to document the reply protocol. 
The last section we're completing before making the draft available is the one concerning annotations update. 
We noticed this discrepancy between the protocol description (use PUT) and what we do in Amaya (POST with ?replace_source). 
What probably happened is that because of a time delay we used POST instead of PUT in Amaya and then forgot to finish that work. 
The latest version of Amaya (7.1) still uses POST for update. 
As our server seems to support both PUT and POST for updating annotations, we were considering implementing the PUT also in Amaya and use it as the only method for updating Annotations. 
I'd like to have the opinion of other Annotea client developers to know: 1. 
If they're using PUT or POST to update annotations. 
And, if yes, 2. When doing a PUT, do they do a single PUT of both metadata and the body content, or a PUT directly to either resource that has been modified (eventually two PUTS if both pieces of data have been modified). 
The direction we're taking is to do a PUT directly to the resource that was modified (metadata or body). 
If the developers want to keep the POST method for updating annotations, we can also include it in the document. 
In the current draft both methods are documented, but we were not sure if we should retain them there. 
This having been said, if there is still some discussion on this point, we may as well publish the draft as it is and have everyone discuss it on the list. 
-jose 

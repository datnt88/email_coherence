<s> I have still a problem.  </s>
<s> I set up the annotea server exactly as it is described in the tutorial.  </s>
<s> I use a maschine with red hat linux and an apache webserver.  </s>
<s> I can watch the annotea-site with a normal browser but every time i post a new Annotation i get this error message: : Unknown Exception blew its mind.  </s>
<s> perl error: Can't call method "setRdfPrefix" on an undefined value at ../../../W3C/Rdf/CGIApp.pm  </s>
<s> line 227.  </s>
<s> W3C::Util::Exception thrown at /usr/local/perl/modules/W3C/Annotations/CGI/annotate:357 annotate::execute(...) at /usr/local/perl/modules/W3C/Annotations/CGI/annotate:180 (eval) at /usr/local/perl/modules/W3C/Annotations/CGI/annotate:170 Status: 500 died with Can't call method "flush" without a package or object reference at /usr/local/perl/modules/W3C/Annotations/CGI/annotate line 181.  </s>
<s> Session-id: 1010051952.98223  </s>
<s> I watched the CGIApp.pm but i could not find an error cause i am not so familiar with the programs source code.  </s>
<s> Then i watched the /tmp/annotate.log and this is what i got (i cut two rows and changed the server-names and ip adresses): annotate cgi 1010051952.98223  </s>
<s> Thu Jan 3 10:59:12 CET 2002 w3c_annotate=%3C%3Fxml%20version%3D%221.0%22%3F%3E%0D%0A%3Cr%3ARDF%20xmlns%3Ar%3D%22http%3A%2F%2F www.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%0D%0A%20%20%20%20%20%20%20xmlns%3Aa%3D%22http%3A%2F%2F www.w3.org%2F2000%2F10%2Fannotation-ns........(i cut it here) w3c_resource=http%3A%2F%2Fwww.annotea.myserver.de%2Fannotations%2Fattribution%2F1010051938.610320 w3c_rdfUri=http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23 w3c_submit=POST%20new%20annotation annotate env 1010051952.98223  </s>
<s> Thu Jan 3 10:59:12 CET 2002 QUERY_STRING= SERVER_ADDR=213.146.160.187  </s>
<s> CONTENT_TYPE=application%2Fx-www-form-urlencoded HTTP_ACCEPT_LANGUAGE=de%2Cen SERVER_PROTOCOL=HTTP%2F1.0 HTTP_CONNECTION=Keep-Alive POST_VARS=w3c_annotate%3D%253C%253Fxml%2Bversion%253D%25221.0%2522%253F%253E%250D%250A%253Cr%253ARDF%2 Bxmlns%253Ar%253D%2522http%253A%252F%252Fwww.w3.org%252F1999%252F02%252F22-rdf-syntax-ns%2523%2522%250D %250A%2B%2B%2B%2B%2B%2B%2Bxmlns%253Aa%253D%2522http%253A%252F%252Fwww.w3.org.......(i cut it here) SERVER_SIGNATURE=%3CADDRESS%3EApache%2F1.3.12%20Server%20at%20www.annotea.myserver.de%20Port%2080%3C%2FADDRESS%3E%0A  </s>
<s> HTTP_REFERER=http%3A%2F%2Fwww.annotea.myserver.de%2Fannotations%2F  </s>
<s> REMOTE_PORT=1564 HTTP_USER_AGENT=Mozilla%2F4.51%20%5Bde%5DC-CCK-MCD%20QXW03200%20%20%28Win98%3B%20I%29 HTTP_ACCEPT=image%2Fgif%2C%20image%2Fx-xbitmap%2C%20image%2Fjpeg%2C%20image%2Fpjpeg%2C%20image%2Fpng%2C%20%2A%2F%2A GATEWAY_INTERFACE=CGI%2F1.1 HTTP_HOST=www.annotea.myserver.de  </s>
<s> SERVER_SOFTWARE=Apache%2F1.3.12%20%28Unix%29%20PHP%2F4.0.5%20FrontPage%2F4.0.4.3 SERVER_ADMIN=info%40myserver.de REMOTE_USER=annotea REMOTE_ADDR=65.57.51.69 SCRIPT_NAME=%2Fannotations SERVER_NAME=www.annotea.myserver.de  </s>
<s> HTTP_ACCEPT_ENCODING=gzip DOCUMENT_ROOT=%2Fusr%2Flocal%2Fperl%2Fmodules%2FW3C%2FAnnotations%2F REQUEST_URI=%2Fannotations UNIQUE_ID=PDQrbtWSoLoAAC8PQIk REQUEST_METHOD=POST CONTENT_LENGTH=1987 SCRIPT_FILENAME=%2Fusr%2Flocal%2Fperl%2Fmodules%2FW3C%2FAnnotations%2FCGI%2Fannotate PATH=%2Fsbin%3A%2Fusr%2Fsbin%3A%2Fbin%3A%2Fusr%2Fbin%3A%2Fusr%2FX11R6%2Fbin AUTH_TYPE=Basic SERVER_PORT=80 I hope the information is sufficient.  </s>
<s> If someone needs more information, ask me.  </s>
<s> Please send me all things that might could help me, cause at the moment i don't know where to continue my error-search.  </s>
<s> Markus H.  </s>
<s> Looks to me like it's not making a connection to the database.  </s>
<s> I'll add some code to make it look for this problem and give a more usefull error message.  </s>
<s> In the mean time, have a look at the code and see if the problem is as i diagnosed.  </s>
<s> W3C/Rdf/CGIApp connects to the database: eval { die $W3C::Rdf::CGIApp::USE_EPHEMORAL_DB if ($self- {EPHEMORAL_DB}); my $conf= new W3C::Util::Properties('../../../Conf/rdf.prop'); $self- {RDF_DB} = $self- {RDF_DB} = new W3C::Rdf::ObjectDB(-errorHandler = $self- {ERROR_HANDLER}, -lazyReification = 1, -properties = '../../../Conf/rdf.prop',  </s>
<s> -atomDictionary = $self- {-atomDictionary}); }; if ($@) { if (my $ex = &amp;catch('W3C::Util::Exception')) { push (@{$self- {PRE_MESSAGES}}, $ex- getMessage); push (@{$self- {PRE_MESSAGES}}, 'switching to ephemoral DB'); } elsif ($@ ne $W3C::Rdf::CGIApp::USE_EPHEMORAL_DB) { push (@{$self- {PRE_MESSAGES}}, "got die($@)"); push (@{$self- {PRE_MESSAGES}}, 'switching to ephemoral DB'); $self- {RDF_DB} = $self- {RDF_DB} = new W3C::Rdf::RdfDB(-errorHandler = $self- {ERROR_HANDLER}, -lazyReification = 1, -atomDictionary = $self- {-atomDictionary}); If it can't connect to the persistent database, it's supposed to connect to an in-memory data store (not good for storing data, but good for diagnostics).  </s>
<s> This should show the message "switching to ephemoral DB" when you GET the annotations page with an HTML browser (like Netscape).  </s>
<s> -eric (eric@w3.org)  </s>
<s> Feel free to forward this message to any list for any purpose other than email address distribution.  </s>
<s> We (well, Eric Prud'hommeaux) are looking into your problem, but it will help to know exactly what sources you are trying to run.  </s>
<s> Did you extract them from our cvs archive?  </s>
<s> If so, when.  </s>
<s> (And, you should know that the latest versions in CVS might not be consistent at any given instant, so if you did do an update from cvs we'll want to know the date.)  </s>
<s> Thank you very much for your help.  </s>
<s> I downloaded the perllibs from your cvs archive at 31th of october 2001.  </s>
<s> I use red hat linux 7.1(Kernel 2.4.2-2), apache webserver 1.3.12 and mysql Ver 11.13 Distrib 3.23.36  </s>
<s> Because you said that there might be a problem with the database, i checked all the following things: -the property file rdf.prop is in: /usr/local/perl/modules/Conf/ ( the libraries are in /usr/local/perl/modules/W3C/Rdf) - in the rdf.prop i changed the AnnotateServer to another name(is it ok to choose it freely?...it's the same name as the mysql user i added) I can login to the mysql-database on the command line with the annotea user and watch the rdf database:  </s>
<s> Tables_in_rdf | AboutContainers | AttributionClosures | Attributions | ContainerSubjects | Containers | Descriptions | DomainDetails | Fragments | GenIds | MappedNodes | MappedStatements | RdfIds | Statements | Strings | TypeClosures | Uris |  </s>
<s> I hope some of these informations will help you.  </s>
<s> Shall i download and install the new perllibs from your cvs archive?  </s>
<s> I will now continue my search for the problem... Markus  </s>
<s> Cause i have still the same problem i downloaded the new perllib files from the CVS archive and installed them new.  </s>
<s> But when i executed the command "perl Makefile.PL" in the perl/modules/W3C/Database directory there was an error: "...Basekit.pm  </s>
<s> : No such file or directory at (eval9) line 6" So i copied the Basekit.pm form the Util directory and all worked.I don't know if this is correct?  </s>
<s> The second error occured when i execute the "perl Makefile.PL" in the Rdf directory: "The following files are missing in your kit: TKVisualizer/Toy.pm Visualizer.pm Writing Makefile for W3C::Rdf:Parser" I installed the the Makefile, but i didn't find Toy.pm and Visualizer.pm .  </s>
<s> These files are not in the package.  </s>
<s> Where can i get these files?  </s>
<s> Or are they unimportant.  </s>
<s> Markus H.  </s>

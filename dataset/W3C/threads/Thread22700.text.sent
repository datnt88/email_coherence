The XML spec states that PI targets should be valid XML Names, but never 'xml' in any case combination. 
Should createProcessingInstruction raise INVALID_CHARACTER_ERR when called with a 'xml' target? 
Or doesn't the DOM API enforce this rule? 
Maybe this should be clarified in the spec, it could do with an explicit statement. 
Martijn Pieters Software Engineer mailto:mj@digicool.com 
Digital Creations http://www.digicool.com/ 
Creators of Zope http://www.zope.org/ 
The specification could do with a clarification, especially if existing implementations could agree. 
I believe that some implementations may be using processing instructions named "xml" to represent XML declarations and text declarations that look just like a PI using the reserved xml name. 
Others clearly do not. 
Ray Whitmer rayw@netscape.com 
At this time, the DOM spec does not enforce this rule. 
Some DOMs are in fact (ab)using PIs as a stopgap representation for the XML Declaration and Text Declaration, pending the official solution expected in DOM Level 3. There are definitely borderline cases where the DOM does not continuously enforce well-formedness. 
Some of them are deliberate, to allow flexibility for editing or for reapplying the DOM to non-XML documents; some are untested for performance reasons. 
One of the things we're looking at in Level 3 is adding operations that will allow users to request that a node or subtree be tested against a stricter set of well-formedness rules. 
Joe Kesselman / IBM Research Hi Ray, The W3C FAQ on DOM states that implementations that do that are in the wrong; so setting in stone that createProcessingInstruction shouldn't accept 'xml' as a target would not create more confusion. 
Future implementations can then more easily avoid the pitfall. 
Martijn Pieters Software Engineer mailto:mj@digicool.com 
Digital Creations http://www.digicool.com/ 
Creators of Zope http://www.zope.org/ 
But we haven't yet given them a better alternative, and I believe we aren't ready to make a more explicit restriction until we've done so. 
As a long-term plan, checking for this would be a good thing. 
When that check will be added to the DOM spec, and when that check will actually be performed, are yet to be determined. 
Probable answers at this time are "DOM Level 3" and "only on demand". 
(I believe we did actually discuss this question before releasing DOM Level 2, and the consensus was that enforcing this in the factory method would have been premature at best. 
I'd have to dig into the archives to find an explicit citation, and I'd rather not make that effort unless someone thinks I'm misremembering...) Joe Kesselman / IBM Research Thanks for the explanation. 
I personally think our DOM should raise the exception, but I won't be the one that makes that decision. 
Martijn Pieters Software Engineer mailto:mj@digicool.com 
Digital Creations http://www.digicool.com/ 
Creators of Zope http://www.zope.org/ 

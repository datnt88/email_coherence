<s> All, I could really use some help getting Tidy to run in our unusual environment.  </s>
<s> I am using Microsoft's Visual J++ (Version 6.0) on Windows NT.  </s>
<s> The first problem I had was trying to "shell out", calling tidy.exe via Runtime.getRuntime().exec().  </s>
<s> Unfortunately, when this statement is executed, the process which is created "hangs".  </s>
<s> That is, on the subsequent  </s>
<s> waitFor() call, the process never returns.  </s>
<s> Note that I have successfully used this technique to call other Windows executables.  </s>
<s> At first, I thought  </s>
<s> that maybe the problem was in the parameters I was passing to tidy.exe.  </s>
<s> For  </s>
<s> example, I thought that maybe the input filename was not being passed in correctly and that tidy was waiting for input via standard in.  </s>
<s> That would certainly explain the hanging.  </s>
<s> However, I have stepped through the debugger  </s>
<s> and I am confident I am passing the parameters correctly.  </s>
<s> Next, I tried calling a batch file from Java, that in turn calls Tidy.  </s>
<s> Unfortunately, a similar problem occurs, but this time the batch file "hangs" at the place where Tidy is invoked.  </s>
<s> Any ideas on why the process is  </s>
<s> hanging?  </s>
<s> Any suggestions on how to get the process to complete?  </s>
<s> For my third attempt to solve this problem, I downloaded JTidy.  </s>
<s> I was encouraged to see that a java version of tidy existed and I could avoid the  </s>
<s> "shelling out" and hanging problems I was seeing above.  </s>
<s> Unfortunately, when  </s>
<s> I try invoking the parse() method of the Tidy object, I get a java.lang.IllegalAccessError with the following stack trace: java.lang.IllegalAccessError: org/w3c/tidy/ParserImpl: field _parseHead is inaccessible at org/w3c/tidy/ParserImpl$ParseHTML.parse (ParserImpl.java)  </s>
<s> at org/w3c/tidy/ParserImpl.parseDocument (ParserImpl.java)  </s>
<s> at org/w3c/tidy/Tidy.parse (Tidy.java)  </s>
<s> I did report the java.lang.IllegalAccessError error to this list back in December 2000, and Gary Peskin kindly responded.  </s>
<s> He said that he had seen this error in Microsoft JVMs before.  </s>
<s> Gary suggested I try turning off the jit, which I think I did, but I am not 100% sure.  </s>
<s> I can't figure out if I have the Just In Time option set or not.  </s>
<s> If I go to Tools- Options and select "Debugger".  </s>
<s> The "Just-In-Time debugger" checkbox is checked.  </s>
<s> I tried unselecting the checkbox, re-compiling, and re-running, but that did not help.  </s>
<s> Next, I went to the Compiler tab of my project's properties and tried both -nojit and /nojit, but neither had an effect.  </s>
<s> Interestingly, if  </s>
<s> I put in garbage for a compiler option, it still compiles with any error messages, so I'm not sure if I am doing this correctly.  </s>
<s> I can't figure out  </s>
<s> how to configure J++ to show me the actual compile/run commands it uses, so  </s>
<s> I really can't confirm if I am using the jit option or not.  </s>
<s> Does anyone have specific instructions on how to turn off the just-in-time compiler for  </s>
<s> Microsoft's J++ or how to configure it to display the compile and run commands?  </s>
<s> Then again, I'm not even sure changing this setting will help-recall it was just a suggestion from Gary.  </s>
<s> Does anyone know how to get  </s>
<s> around this java.lang.IllegalAccessError?  </s>
<s> I have successfully used JTidy from Borland's JBuilder.  </s>
<s> Thus, I am contemplating writing a tidy wrapper in JBuilder and trying to somehow call  </s>
<s> it from J++.  </s>
<s> However, I'd rather solve one of the above problems before I head down this path, and I ask for your help.  </s>
<s> Sincerely, Michael S. Goldberg mgoldberg@yet2.com  </s>
<s> Hi, Michael -- I believe that subsequent reports of the IllegalAccessError have revealed that the problem can be fixed simply by recompiling the code.  </s>
<s> The source is downloaded with the java version and there are not too many .java  </s>
<s> files.  </s>
<s> It seems like this had to do with some sort of compiler incompatibility with the compiler that we used to create the .class  </s>
<s> files.  </s>
<s> It should be fixed for future releases but this should get you by for now.  </s>
<s> HTH, Gary  </s>
<s> Thanks a million, Gary! Recompiling did the trick.  </s>
<s> I can now use JTidy from Microsoft's J++.  </s>
<s> A couple of points to note for future reference: 1) I received a compile error in Tidy.java.  </s>
<s> According to the compiler, a catch block was unreachable because the statement inside the try block did not throw the exception being caught.  </s>
<s> The code is probably right, and the exception is probably thrown with a later version of Java, like 1.2 or 1.3.  </s>
<s> Microsoft's J++ appears to be based on one of the older Java versions, like 1.1.  </s>
<s> I suspect the exception was not thrown in the java version on which J++ is based.  </s>
<s> I simply commented out the offending catch block and was able to recompile.  </s>
<s> 2) When I packaged up my recently-compiled class files, I needed to include the lone properties file in the zip package, which I missed the first time.  </s>
<s> Recompiling the JTidy source in J++ and repeating the above two steps is not difficult, but if anyone else needs to do it and would like to skip it, I would be happy to share the zip file I created with anyone who requests it (via e-mail, as I do not always monitor this list).  </s>
<s> Thanks again, Michael Hi, Michael -- I believe that subsequent reports of the IllegalAccessError have revealed that the problem can be fixed simply by recompiling the code.  </s>
<s> The source is downloaded with the java version and there are not too many .java  </s>
<s> files.  </s>
<s> It seems like this had to do with some sort of compiler incompatibility with the compiler that we used to create the .class  </s>
<s> files.  </s>
<s> It should be fixed for future releases but this should get you by for now.  </s>
<s> HTH, Gary  </s>
<s> environment.  </s>
<s> subsequent  </s>
<s> thought  </s>
<s> For  </s>
<s> debugger  </s>
<s> is  </s>
<s> the  </s>
<s> when  </s>
<s> (ParserImpl.java)  </s>
<s> if  </s>
<s> out  </s>
<s> so  </s>
<s> for  </s>
<s> get  </s>
<s> call  </s>

<s> I should also point out the option of a hybrid encoding.  </s>
<s> Use a simple binary structure with fixed-length ASCII character strings for protocol keywords.  </s>
<s> You get all the advantages of binary encoding, and a protocol dump is at least partially useful.  </s>
<s> Secure Shell 2 has a different interesting hybrid characteristic -- it uses length-counted text strings for extensibility-oriented feature lists.  </s>
<s> A nice idea.  </s>
<s> Is it common in standards?  </s>
<s> Binary data in textual encodings seems to be a problem.  </s>
<s> How is this usually handled?  </s>
<s> Base64 is of course an option.  </s>
<s> MIME uses, if I understand it rightly, the convention that CRLF --boundary text CRLF is end marker of a binary body part.  </s>
<s> Not very neat.  </s>
<s> I have looked at the XML specs, and not found any good way of putting binary data into XML either.  </s>
<s> Have I missed something?  </s>
<s> To indicate the end of binary data with an octet-length value before the binary data seems to me the neatest way, but it seems not to be very popular in standards.  </s>
<s> Jacob Palme jpalme@dsv.su.se (Stockholm University and KTH) for more info see URL: http://www.dsv.su.se/~jpalme  </s>
<s> Only the embarrassed groans of many people in the XML community.  </s>
<s> :-)  </s>
<s> --Paul Hoffman, Director --Internet Mail Consortium  </s>
<s> XML is a text format.  </s>
<s> As such, it can be transcoded by mail gateways.  </s>
<s> If you label something as and it gets transcoded to EBCDIC, the binary data won't survive.  </s>
<s> The web can easily include binary data, it's done all the time with images, just use a link instead of putting things inline :-).  </s>
<s> Regards, Martin.  </s>
<s> #-#-# Martin J. Du"rst, World Wide Web Consortium #-#-# mailto:duerst@w3.org  </s>
<s> http://www.w3.org  </s>
<s> If you want to include everything in one document, I assume you would then use multipart/related?  </s>
<s> Another alternative I have been thinking of would be to use base64 encoding of binary data.  </s>
<s> Jacob Palme jpalme@dsv.su.se (Stockholm University and KTH) for more info see URL: http://www.dsv.su.se/~jpalme  </s>
<s> If by link you mean an URL, I can see problems with it.  </s>
<s> If you want to send secret data, you may not wish part of the data to be available through an URL - not even if that URL contains a password.  </s>
<s> Jacob Palme jpalme@dsv.su.se (Stockholm University and KTH) for more info see URL: http://www.dsv.su.se/~jpalme  </s>
<s> This is one possibility.  </s>
<s> The problem with this is the boundaries, but I guess it should be possible to construct boundaries that cannot appear in XML (such as something like   ]] ]] or something along these lines).  </s>
<s> [I'm just checking this with some XML experts].  </s>
<s> Yes indeed.  </s>
<s> Regards, Martin.  </s>
<s> #-#-# Martin J. Du"rst, World Wide Web Consortium #-#-# mailto:duerst@w3.org  </s>
<s> http://www.w3.org  </s>
<s> I should also point out the option of a hybrid encoding.  </s>
<s> Use a simple binary structure with fixed-length ASCII character strings for protocol keywords.  </s>
<s> You get all the advantages of binary encoding, and a protocol dump is at least partially useful.  </s>
<s> Secure Shell 2 has a different interesting hybrid characteristic -- it uses length-counted text strings for extensibility-oriented feature lists.  </s>
<s> Hasn't happened much in the IETF, mostly because the apps area has a text bias and lower level areas have a binary bias.  </s>
<s> The PNG spec (RFC 2083) uses four-letter ASCII labels for chunks, although that's not IETF standards track.  </s>
<s> Length-counting has two problems: (1) It completely falls apart when common newline or charset conversions are applied.  </s>
<s> (2) It requires that you know the size of the object in advance, or that you use a complex chunking technique such as that used by SMTP BDAT.  </s>
<s> For wire protocols, (1) isn't much of an issue and (2) can often be tolerated.  </s>
<s> In my experience, the length-counted literals in IMAP are less error-prone and more efficient than the dot-stuffing in POP and SMTP (mostly because dot-stuffing creates a rarely used codepath and is intrusive when working with a canonical CRLF MIME mailstore).  </s>
<s> But (2) causes serious problems for mailstores that don't use canonical CRLF MIME format.  </s>
<s> For textual data formats, I think MIME got it right (a lot of smart people spent a lot of time on MIME).  </s>
<s> In fact, well constructed MIME boundaries make for a very nice Boyer-Moore search so you can find the end of the object in sub-linear time.  </s>
<s> For binary data formats, a length-counted chunking solution is most common.  </s>
<s> - Chris  </s>

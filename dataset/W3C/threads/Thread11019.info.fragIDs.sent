<s> That is not the issue I was worried/concerned about.  </s>
<s> One reason contextual links (html's A , TEI XREF &amp; XPTR ) are the primary hyperlink style implimented in today's software is that it is very easy to figure out what the start for the hyperlink is, trivial even.  </s>
<s> Using contextual links, you only need to traverse the document when the user explicitly asks for it, and thus a small delay is acceptable.  </s>
<s> Using ilink style links means that the document load also incurs a similar penalty _for_every_ilink_ just to figure out what parts of the document are anchors.  </s>
<s> The BOS defines which documents must be processed to ensure that all anchors have been located.  </s>
<s> As an simple example, if you have three documents, A, B, C, where you are loading document A, but B and C are in A's BOS, then all three documents must be processed in order to determine what parts of A are anchors.  </s>
<s> This is one of the reasons HyTime has not already replaced HTML.  </s>
<s> As Steven Newcomb is fond of saying, how does an anchor "know" it is an anchor?  </s>
<s> In order to answer that question, every thing that _might_ point at it must be resolved and _all_ ilinks must be processed to determine if _any_ use that object as an anchor.  </s>
<s> All _relevant_ ilinks must be examined.  </s>
<s> This (currently undefined) notion of relevance is the key to defining what we want.  </s>
<s> We can define the set of relevant ilinks by definining a set of relevant documents, and then saying that ilinks in that set of documents must be processed with respect to a given starting point.  </s>
<s> We have several possible definitions of the set of relevant documents (the XML BOS, as I think we might call it) on the table at the moment: 1. (Steve N.) The HyTime BOS.  </s>
<s> This means that all documents declared in entity declarations are potentially relevant (though some control can be explicitly provided to reduce this set).  </s>
<s> Indirection is supported via entity declarations.  </s>
<s> The user must explicitly 2. (Steve D., Jon Bosak) Some particular document mentioned as an associate document.  </s>
<s> I'm not sure if more than one "link database document" can be associated as relevant.  </s>
<s> Indirection in the creation of such sets is not supported.  </s>
<s> 3. (David D.) A particular set of documents declared by pulling in "associated" documents explicitly requested by the user.  </s>
<s> (The user must explicitly ask for a document to enter this set, but may use indirection to manage sets if desired).  </s>
<s> 4. (Martin Bryan).  </s>
<s> I'm least sure about what Martin wants but I think he'd prefer a mechanism that enforced indirection in specifying the set of relevant documents.  </s>
<s> 5. (Derek).  </s>
<s> The "relevant document set" is always just the current document.  </s>
<s> (no direction, or indirection).  </s>
<s> I like ilinks, but having worked on developing software to implement HyTime, they are not easy.  </s>
<s> Carefull restrictions should be made to reduce overhead.  </s>
<s> As I said, ilinks are definitely harder than simple 1-way embedded links!  </s>
<s> The way to make implementing ilinks easy is to simehow guarantee that an application has parsed every ilink before it encounters any of that ilink's endpoints.  </s>
<s> Then one need only keep a dictionary of ilinks sorted by address, and track addresses as you parse, checking each new address in the ilink database as you go.  </s>
<s> That said, I don't think this is actually a very good way to implement ilinks.  </s>
<s> For one thing, the constraints on authors are hard to explain, and for another, we will need to hard-wire the rules about when entity references are resolved, in order to enable authors to tell if they are making a forward reference or not.  </s>
<s> The other way is simply to parse all the relevant documents, saving the ilinks.  </s>
<s> Then one can bounce through the list of ilinks, applying any endpoints found in the relevant document set to the applications intenral representation of the documents.  </s>
<s> I think this is, for a multiple document model, the esentials of Lee's in-memory condition.  </s>
<s> Note that the latter strategy can combine with the first strategy -- you need delay processing an ilink only until you parse the document it applies to.  </s>
<s> For a browser, this means that incremental displays may not show all links immediately, depending on when the ilink is actually processed.  </s>
<s> The only way to avoid this is to somehow require that all ilinks be processed first.  </s>
<s> Given the structural orientation of XML, and the kinds of location address we are proposing, I think that it is not a hardship for applications to have to keep a representation of their documents in memory.  </s>
<s> So the second strategy makes the author's life much easier, and still has an easy implementation strategy (process the ilink pool after bringing all documents into memory), as well a nicer but harder one (combining on-the-fly ilink resolution with a a final cleanup pass).  </s>
<s> I thin I just managed to say the exact same thing twice, so I'll try again, as a proposal: A XML Hyperlinking processor should ("is required"?) to notify the application of all anchors of hyperlinks only if the anchor and the hyperlink are declared in teh same XML document.  </s>
<s> External resurces, as provided-by/restricted-by the BOS (and any other constraining mechanism we choose to define), may be used to locate the anchor.  </s>
<s> The problem with the above proposal is that it breaks the usefulness of ilinks for annotations.  </s>
<s> I am not very happy about this, and would be happy to hear a better solution.  </s>
<s> I think we need to allow the processing of multiple documents at a time.  </s>
<s> I don't see that this is hard for any but the simplest of applications...  </s>
<s> This kind of simplification make ilinks useful only for a few things.  </s>
<s> No solution to the annotation problem is going to be based on single-document parsing, and that could be one of the real selling points of XML (for people other than Terry, who would rather not have this feature).  </s>
<s> I worry that a XML hyperlink processor will need to keep a complete representation of every document in the BOS around because any part of the BOS might use some other part as an anchor.  </s>
<s> yes, that is why we need to be careful about defining the XML BOS.  </s>
<s> I think we should have indirection, but that only an explicit request by the author/publisher should add a document to the XML BOS.  </s>
<s> Another possibility is to define the BOS as a ordered list of documents such that if a hyperlink processor where to process the documents in order it would not need to report anchors (though it should report a path to the anchor) which are located in documents earlier in the ordered list of documents (which is the BOS).  </s>
<s> Thus, once a document is processed, the hyperlink processor only needs to keep around some representation of locator/addressing elements which might be used by later documents.  </s>
<s> Hyperlinks and anchors in the earlier documents will have already been passed to the application (or stored somehow) and are not neccessary for the hyperlink processor to process the later documents.  </s>
<s> As I said above, I think this makes it too difficult to define of what ilinks take effect, and also will require us to make a much more constrained and "procedural" definition of XML parsing strategies in order to support making the author's life more difficult.  </s>
<s> I don't think keeping a data structure around and updating it later is an insurmountably difficult problem.  </s>
<s> Model/View/Controller and other update strategies have been around for decades, and are easier than background formatting and processing of documents anyway.  </s>
<s> *David* since you were the one who responded to my previous post, does this at least make sense to you?  </s>
<s> Have I explained why I want to restrict the power of ilinks?  </s>
<s> I understand, but I had (in my own mind) already discarded that kind of strategy as too limiting, and not enough easier to make the limitations palatable.  </s>
<s> So I understand, but I'm not convinced yet.  </s>
<s> -- David I am not a number.  </s>
<s> I am an undefined character.  </s>
<s> David Durand dgd@cs.bu.edu \ david@dynamicDiagrams.com  </s>
<s> Boston University Computer Science \ Sr. Analyst --------------------------------------------\ http://dynamicDiagrams.com/ MAPA: mapping for the WWW \__________________________  </s>
<s> That's a misrepresentation of my point of view and of what I've written.  </s>
<s> I don't want to forbid all annotation functionality to the world, I want only to be able to control how my documents may be annotated and transcluded, in those cases where I have a legal right to do so.  </s>
<s> And in this I have plenty of company.  </s>
<s> On another point, "XML BOS" is no help at all.  </s>
<s> Hytime invented "BOS"; let's let BOS remain a Hytime term and avoid having to explain how an "XML BOS" differs from a Hytime BOS every time we use the term.  </s>
<s> Regards, Terry Allen Fujitsu Software Corp. tallen@fsc.fujitsu.com  </s>
<s> "In going on with these experiments, how many pretty systems do we build, which we soon find outselves obliged to destroy?" - Benjamin Franklin A Davenport Group Sponsor: http://www.ora.com/davenport/index.html  </s>
<s> No misrepresentation or offense intended.  </s>
<s> I think I had a mild misunderstanding (I thought at one point, that you were opposed to annotation without a mechanism for controlling it), coupled with a tendancy to type faster than I think.  </s>
<s> Hey, I already tried that tack, but BOS seems to be sticking.  </s>
<s> While it may be confusing to use BOS at all, we must qualify it, if we use it.  </s>
<s> If anyone else has a better term to suggest, I'm game, but neither of my other suggestions (companion documents, document working set) met with any general acceptance.  </s>
<s> -- David I am not a number.  </s>
<s> I am an undefined character.  </s>
<s> David Durand dgd@cs.bu.edu \ david@dynamicDiagrams.com  </s>
<s> Boston University Computer Science \ Sr. Analyst --------------------------------------------\ http://dynamicDiagrams.com/ MAPA: mapping for the WWW \__________________________  </s>

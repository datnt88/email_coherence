<s> # DAV compliant # resources MUST maintain the consistency of the HTTP URL namespace.  </s>
<s> Is there a definition of what 'the consistency of the HTP URL namespace' means?  </s>
<s> It's not defined anywhere, and this sentence only gives an example.  </s>
<s> This does appear to be an omission in the specification.  </s>
<s> By consistency, we meant: No gaps: Given HTTP URL U, for all unique HTTP URL Ux, where Ux is constructed from U by removing all characters to the right of a "/", Ux MUST  </s>
<s> be the HTTP URL of a WebDAV collection.  </s>
<s> So, if there is an HTTP URL: Then MUST be HTTP URLs of WebDAV collection resources.  </s>
<s> There are two ways to maintain this consistency when a new resource is created: a) create intermediate collections automatically b) refuse to create a resource if intermediate collections do not yet exist.  </s>
<s> The example in Section 4.3 implies we were recommending option b).  </s>
<s> Also, consistency implies: 100% containment: Given HTTP URL U, U MUST be a member URL of the collection  </s>
<s> whose URL, Uc, is contructed by removing the trailing path segment of U. Exception: when U is the top-level resource, "/", of a namespace (i.e., the first slash after the domain name in an HTTP URL), it belongs to no collection, since it is the URI of the root collection.  </s>
<s> - Jim  </s>
<s> H From w3c-dist-auth-request@w3.org Thu Sep 10 11:53:20 1998 H Resent-Message-Id: 199809101845.OAA13039@www19.w3.org H MMDF-Warning: Parse error in original version of preceding line at paris.ics.uci.edu  </s>
<s> H From: Jim Whitehead ejw@ics.uci.edu  </s>
<s> H Date: Thu, 10 Sep 1998 11:32:02 -0700 H X-Priority: 3 (Normal) H X-MSMail-Priority: Normal H Importance: Normal H Subject: Namespace consistency H H  # DAV compliant H  # resources MUST maintain the consistency of the HTTP URL namespace.  </s>
<s> H H  Is there a definition of what 'the consistency of the HTP URL namespace' H  means?  </s>
<s> It's not defined anywhere, and this sentence only gives an example.  </s>
<s> H H This does appear to be an omission in the specification.  </s>
<s> H H By consistency, we meant: H H No gaps: Given HTTP URL U, for all unique HTTP URL Ux, where Ux is H constructed from U by removing all characters to the right of a "/", Ux MUST  </s>
<s> H be the HTTP URL of a WebDAV collection.  </s>
<s> H H So, if there is an HTTP URL: H H http://www.foo.bar.org/a/b/c  </s>
<s> H H Then H H http://www.foo.bar.org/a/b/  </s>
<s> H http://www.foo.bar.org/a/  </s>
<s> H  </s>
<s> H MUST be HTTP URLs of WebDAV collection resources.  </s>
<s> H H There are two ways to maintain this consistency when a new resource is H created: H H a) create intermediate collections automatically H b) refuse to create a resource if intermediate collections do not yet exist.  </s>
<s> H H The example in Section 4.3 implies we were recommending option b).  </s>
<s> H H Also, consistency implies: H H 100% containment: Given HTTP URL U, U MUST be a member URL of the collection H whose URL, Uc, is contructed by removing the trailing path segment of U. H Exception: when U is the top-level resource, "/", of a namespace (i.e., the H first slash after the domain name in an HTTP URL), it belongs to no H collection, since it is the URI of the root collection.  </s>
<s> H H - Jim H  </s>
<s> So if I have a personal webspace, ... .. and I choose I create a "WebDAV collection" in my space, ..  </s>
<s> .. am I in violation of the rules above since the URL of my personal space  </s>
<s> is NOT of and by itself the URL of a collection?  </s>
<s> Howard S. Modell Comptg Sys.Progr-Analyst/4 POBox 3707, m/s 4A-25, Boeing ISDS howard.s.modell@boeing.com  </s>
<s> Seattle, WA 98124-2207  </s>
<s> Well, actually, the URL of http://warlok.ds.boeing.com/~howie/ is a correct URL for a collection, since it has a trailing slash.  </s>
<s> But, what you're probably asking is whether the resource identified by  </s>
<s> The implication of the requirement in section 4.3 (no namespace gaps) combined with the requirement in section 4.1 that namespaces must behave as DAV collections even if they weren't created with WebDAV, is that yes, the resource identified by http://warlok.ds.boeing.com/~howie/  </s>
<s> needs to be of type WebDAV collection if http://warlok.ds.boeing.com/~howie/a/b/c is WebDAV-compliant.  </s>
<s> - Jim  </s>
<s> Actually no, http://foo/bar does NOT have to be a collection just because IF http://foo/bar is DAV compliant and IF http://foo/bar/blah/ exists and is DAV compliant THEN http://foo/bar must be a collection.  </s>
<s> However, IF http://foo/bar is NOT DAV compliant and IF http://foo/bar/blah/ exists and is DAV compliant THEN there is no requirement on http://foo/bar.  </s>
<s> The reason the requirement runs this way is that often what appears to be a single namespace is in fact a whole mishmash of mapped namespaces owned by separate servers.  </s>
<s> So even though http://foo/bar/blah may be on a DAV compliant server there is no guarantee that http://foo/bar is on a DAV compliant server.  </s>
<s> Thus our requirements for namespace consistency are predicated on the parent being DAV compliant.  </s>
<s> Yaron  </s>
<s> From: Jim Whitehead [mailto:ejw@ics.uci.edu]  </s>
<s> Sent: Friday, September 11, 1998 5:02 PM Subject: RE: Namespace consistency  </s>
<s> Yaron and Jim seem to disagree on the nature of the requirement, so it sounds like this needs to get worked out.  </s>
<s> Must the intermediaries also be DAV compliant?  </s>
<s> Well, for one level it doesn't matter, but suppose: 1) http://foo/bar is DAV compliant 2) http://foo/bar/a/b/c/blah/ exists and is DAV compliant 3) then must http://foo/bar/a/b be a (DAV-compliant) collection?  </s>
<s> This would leave out the possibility that http://foo/bar/a might be some kind of mapping?  </s>
<s> Or is it that "exists" needs elaboration to except that case where it's a redirection?  </s>
<s> I agree that this is the implication of the protocol as it stands.  </s>
<s> I would like to raise an objection to it, as it would prohibit one from supporting DAV methods on anything smaller than the full namespace of a server.  </s>
<s> It is often useful for various subtrees of a server's namespace to support  </s>
<s> different sets of methods (sometimes via cgi scripts, without assistance from the server maintainer) and there is no benefit to this restriction (unlike the one requiring internal consistency).  </s>
<s> I have been meaning to complain about this for a while but didn't because it seems to be trivial.  </s>
<s> I was having a hard time imagining anyone being so picky as to insist on this point (and, perhaps, denying me the covetted "100 % Pure DAV" sticker for my server?) but perhaps it's better to face it now.  </s>
<s> In fact, this very issue has been raised in some discussions internal  </s>
<s> to Xerox.  </s>
<s> People have said to me "We would like to support DAV methods in this subtree but we don't want to support them on the root but the protocol says we MUST do it, so can we still use DAV?".  </s>
<s> So Howie isn't the only one  </s>
<s> worrying about it.  </s>
<s> I say, strike the restriction.  </s>
<s> Based on my experiences as a webmaster, I'd agree.  </s>
<s> I really don't see any prospect of webmasters wanting to have only root-based subtrees (like better with others if it can be restricted to non-root-based subtrees.  </s>
<s> Not that some servers won't want to be set up using DAV for all document management -- just that some (probably the majority) will not use DAV for all document management, for various political/social/technical reasons.  </s>
<s> Mark Leighton Fisher Thomson Consumer Electronics fisherm@indy.tce.com  </s>
<s> Indianapolis, IN "Browser Torture Specialist, First Class"  </s>
<s> I agree.  </s>
<s> If we do, then even someone with an ordinary ISP account could run  </s>
<s> DAV on their account, given a CGI implementation.  </s>
<s> Also, consider that DAV is a potential security risk (depending on the implementation, of course), so there will be people who want to have only some areas of their server run DAV extensions.  </s>
<s> |John (Francis) Stracke |My opinions are my own.|Both candidates | |Software Retrophrenologist|=======================/are better than a| |Netscape Comm.  </s>
<s> Corp. |megalomaniac mutant lab mouse bent on | |francis@netscape.com  </s>
<s> |world domination...but it's pretty close.|  </s>
<s> New area code for work number: 650  </s>
<s> It should be possible to configure a DAV server to have a document root contained in "collection" that is not DAV compliant.  </s>
<s> For example, I use the Java Web Server's doc.root of c:\some-path\public-html and set the doc.root for my authoring web server to be c:\some-path\public-html\dav.  </s>
<s> This keeps the  </s>
<s> authoring server and the production server out of each other's way, but uses the same file system root for both.  </s>
<s> Other configurations are possible.  </s>
<s> The -08 spec does not prevent this, it only leaves it as a server option.  </s>
<s> Yeah, but then you can't use the same URI for authoring as for browsing, in which case you might as well author via FTP.  </s>
<s> |John (Francis) Stracke |My opinions are my own.|S/MIME supported | |Software Retrophrenologist|=========================================| |Netscape Comm.  </s>
<s> Corp. |Beware of wizards, for you are crunchy | |francis@netscape.com  </s>
<s> | and good with ketchup.  </s>
<s> | New area code for work number: 650  </s>
<s> I am quite happy to alter the language of the -08 spec.  </s>
<s> so that the correct meaning of these requirements is expressed, rather than the virus-like behavior that the spec.  </s>
<s> can be read to imply, which people object to.  </s>
<s> What I read from this rough consensus on the list is people would like the language to read that a parent of a resource does not have to be a WebDAV-collection.  </s>
<s> However, if the parent of a WebDAV resource is itself WebDAV compatible, then it has to be a WebDAV collection.  </s>
<s> A couple of questions: 1) Should there be a policy for whether the parent of a resource must exist?  </s>
<s> So, if http://foo/bar/blah exists, and is DAV-compliant, must resource My answer: Since we're not requiring the parent of a DAV resource to be a DAV collection, there is no guarantee that a client will be able to retrieve  </s>
<s> a listing of the other resources at a given level in the HTTP URL hierarchy.  </s>
<s> Due to this, there isn't much of a difference between getting a 501 Not Implemented for an existing resource that doesn't support PROPFIND, or getting a 404 Not Found for a non-existing resource -- either way the client won't be able to get an index.  </s>
<s> So, my answer is that we shouldn't require a DAV-compliant resource to have a parent resource.  </s>
<s> 2) Larry Masinter's question (intermediate collections):  </s>
<s> My answer: I think we should require all collections below a DAV-compliant resource to also be DAV-compliant.  </s>
<s> So, while it's OK to not be  </s>
<s> DAV-compliant looking up a hierarchy tree, looking down the tree from a  </s>
<s> DAV-compliant location should always be DAV-compliant.  </s>
<s> This way DAV clients  </s>
<s> will be able to get listings of the members of a collection once they're in a DAV compliant portion of the namespace while going down the namespace hierarchy, providing a less confusing user experience than if the behavior of the namespace changed from level to level.  </s>
<s> - Jim  </s>
<s> Fine with me.  </s>
<s> (Don't care much either way.)  </s>
<s> Strongly agree.  </s>
<s> So a DAV-compliant resource can't be, say, a CGI script?  </s>
<s> Even in  </s>
<s> 'advanced DAV'?  </s>
<s> If I have http://a/b/c/ and I want to add a CGI such that 'd.cgi' computes a query, you might have http://a/b/c/d?e .  </s>
<s> Now, is http://a/b/c/d.cgi  </s>
<s> a 'member' of http://a/b/c/ ?  </s>
<s> Larry  </s>
<s> My reading of the DAV spec is that both Jim's statement (the parents of a DAV resource do not have to be a DAV resource) and Larry's language (the child of a DAV resource doesn't have to be a DAV resource) are BOTH correct and BOTH supported by the spec.  </s>
<s> The language in the spec is phrased as "If a resource is DAV compliant THEN ....." In the particular case Larry lists my understanding of the spec is that if member of http://a/b/c EVEN THOUGH it isn't itself DAV compliant.  </s>
<s> The requirement for listing is only on http://a/b/c because it is DAV compliant but this puts no onus on http://a/b/c/d.cgi  </s>
<s> to be DAV compliant.  </s>
<s> Yaron  </s>
<s> From: Larry Masinter [mailto:masinter@parc.xerox.com]  </s>
<s> Sent: Monday, September 14, 1998 8:44 PM Subject: RE: Namespace consistency  </s>
<s> Hmm, I he did say all _collections_ below a DAV compliant resource, not all resources of any kind.  </s>
<s> But since 'collection' is a term defined by DAV, what would it mean to be a 'collection' that is not 'DAV'.  </s>
<s> Jim, did you mean 'resource', or did you mean 'namespace' (in the HTTP sense, not XML).  </s>
<s> I was assuming he meant 'namespace'.  </s>
<s> On the other hand, what about the stronger claim (that all resources within a collection must be DAV compliant).  </s>
<s> It's not unreasonable.  </s>
<s> What does it mean to do PROPFIND on collection a/b/c, discover that it includes resource a/b/c/d, but that one can't do PROPFIND on a/b/c/d?  </s>
<s> Of course it can be a CGI script.  </s>
<s> That's one reason that DAV has source  </s>
<s> links.  </s>
<s> What do you see that would prohibit this?  </s>
<s> I don't understand what you mean by 'indirectly' enough to speak to that, but if a PROPFIND on http://a/b/c/d includes http://a/b/c/d.cgi, then d.cgi is a member of a/b/c.  </s>
<s> Otherwise, not, because there is no other DAV way to traverse the URL namespace except by issuing PROPFINDs.  </s>
<s> That could be very difficult to implement, though.  </s>
<s> If http://foo/bar/baz.cgi is a CGI script, then http://foo/bar/baz.cgi/quux.html is a perfectly legal URI as far as the protocol's concerned.  </s>
<s> If descendants of DAV collections must be DAV, then baz.cgi must implement all DAV methods in order for quux.html to be compliant.  </s>
<s> Of course, the server's DAV implementation can provide helper code for baz.cgi to use, but it could still get pretty nasty.  </s>
<s> |John (Francis) Stracke |My opinions are my own.|S/MIME supported | |Software Retrophrenologist|=========================================| |Netscape Comm.  </s>
<s> Corp. |"The avalanche has already started.  </s>
<s> It is| |francis@netscape.com  </s>
<s> | too late for the pebbles to vote." -Kosh| New area code for work number: 650  </s>
<s> I've been meaning to get back to this comment all week.  </s>
<s> Using the same URI for authoring as for browsing should not be considered an "advantage" of WebDAV.  </s>
<s> In fact, it isn't an advantage at all.  </s>
<s> The real advantage  </s>
<s> of WebDAV is that it is able to respond accurately when a user attempts to modify a derived resource instead of the source, and is able to control access to its namespace via an authentication mechanism that is not based on login names.  </s>
<s> Assuming the URI would be the same for both authoring and retrieving of resources is contrary to good site design, wherein the name assigned to a resource is independent of its implementation.  </s>
<s> The Web is not a distributed file system, a fact that has a whole set of advantages and disadvantages.  </s>
<s> However, I'd hope that a WebDAV capable system would not puke and die if it was given a redirect to the source resource that happened to be an ftp URL.  </s>
<s> I'm not saying that clients should be required to support such authoring modes, but there are countless reasons why it would be a good idea.  </s>
<s> ....Roy  </s>
<s> Of *course* it is!  </s>
<s> If you have an authoring tool that's integrated with your browser (at least to the extent of being able to send it "go to this URI" commands), that's going to make it a *lot* easier to test the content you've developed.  </s>
<s> If the browser can't use the same URI as the authoring tool, then you're going to have to do the translation by hand (which is essentially what I have to do with Netscape Composer today, since my ISP doesn't support HTTP PUT), or else teach the authoring tool to remap URIs that it sends to the browser (possible, but messy).  </s>
<s> |John (Francis) Stracke |My opinions are my own.|  </s>
<s> S/MIME supported | |Software Retrophrenologist|===========================================| |Netscape Comm.  </s>
<s> Corp. |Id est fabula nostra, et non mutabimus eam!| |francis@netscape.com  </s>
<s> | --House Falconguard and Affiliated Scum | New area code for work number: 650  </s>
<s> Give me a break, John.  </s>
<s> The Source URL is a link provided by WebDAV.  </s>
<s> If you are doing authoring on a resource, the user agent is already aware of both the retrieval interface (seeing the results) and the source interface (seeing the content from which the retrieval is derived).  </s>
<s> If they are the same thing, then it may be the same URL, or it may not.  </s>
<s> If they are not the same thing, then it won't be the same URL.  </s>
<s> Either way, the browser is going to be told to retrieve "a URL" by the Composer.  </s>
<s> This can all be done automatically by any sensible implementation of WebDAV once at least one of those two URLs are entered by the user to start the authoring process.  </s>
<s> The server will tell you the rest.  </s>
<s> ....Roy  </s>

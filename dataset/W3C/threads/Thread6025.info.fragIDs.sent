<s> The OASIS Web Services Reliable Messaging TC has recently started to discuss the issue of describing RM interfaces in WSDL (see the long "WSDL for WSRM" thread in the June and July archives at http://lists.oasis-open.org/archives/wsrm/ - you might remember that the original WS-Reliability submission only dealt with SOAP, not WSDL).  </s>
<s> It might be a good idea to rely on what the RM groups come up with, instead of replicating their work here.  </s>
<s> Ugo  </s>
<s> From: Assaf Arkin [mailto:arkin@intalio.com]  </s>
<s> Sent: Friday, July 18, 2003 2:11 PM public-ws-chor@w3.org  </s>
<s> Subject: Re: Grounding Choreographies (the atoms) - WAS Simple Choreograph y composition suggestion  </s>
<s> Assaf I agree that we need to agree on terminology, e.g. roles vs  </s>
<s> agents, I have  </s>
<s> no strong views on which is better.  </s>
<s> I also like the idea of using WSDL interfaces, however I can see some issues, for example: 1.  </s>
<s> Both the RM specs use SOAP to send their acknowledgement  </s>
<s> messages and  </s>
<s> retries.  </s>
<s> So, for example, if you had a WSDL definition that  </s>
<s> defined a PO as  </s>
<s> input and generated a PO Response as output, then how would  </s>
<s> the other RM  </s>
<s> messages be defined in the WSDL?  </s>
<s> Out-of-band.  </s>
<s> You have one WSDL interface covering the operation you are trying to perform.  </s>
<s> The PO request and PO response.  </s>
<s> That's the input to the service and the output from the service.  </s>
<s> You have another WSDL interface covering the ack/resend/etc.  </s>
<s> That one is defined by the RM protocol.  </s>
<s> It is implemented by the RM Service.  </s>
<s> The RM Service is used in combination with the PO service, but as an out-of-band interaction that is used only if a particular protocol is chosen.  </s>
<s> From the pespective of the application you send a PO request and receive a PO response.  </s>
<s> The recevier's protocol handler recognizes the RM protocol and uses the RM Service's endpoint to send back and ack.  </s>
<s> This has three obvious benefits: 1.  </s>
<s> You define the RM interface exactly once.  </s>
<s> You don't need to define specific operations, messages, etc each time you use RM.  </s>
<s> More reusability.  </s>
<s> 2. You can decide if/when/which RM protocol to use without having to change the interface definition.  </s>
<s> The protocol selection is carried in the message.  </s>
<s> 3.  </s>
<s> You can combine many different protocols in that way.  </s>
<s> Now, for just using RM it's possible to come up with some MEP that would be generally efficient.  </s>
<s> But the out-of-band model has more efficiency.  </s>
<s> For example, if could ack multiple messages together, or request multiple resends together.  </s>
<s> If you try to combine RM + coordination + security context, your MEP would be hairy to define.  </s>
<s> But in this model you can easily turn these protocol features on &amp; off without having to create all the possible MEPs.  </s>
<s> 2. If you then wanted to layer an MEP on top of this which included additional "signal" messages where each signal message was  </s>
<s> also sent using  </s>
<s> RM protocols then how would these be included in the WSDL?  </s>
<s> Because you're making the protocol signals orthogonal to the actual WSDL interface, you let the protocol handler make the appropriate decisions which signals to make.  </s>
<s> This allows it not only support ack/resend (easy), but also to couple that with multiple-message acks, is-alive pings, flow control, combining/splitting messages, etc.  </s>
<s> And you can combine any number of protocols like that.  </s>
<s> The RM would typically be used for the duration of a single operation, while a coordination protocol would involve multiple operations.  </s>
<s> Establishing a security context (single sign-on) would do both since the context may last longer than one operation, but may expire and be re-established before all operations are completed.  </s>
<s> So that scheme seems to be the most efficient one in my opinion, and also allows for proper layering of different protocols (business and technical).  </s>
<s> arkin  </s>
<s> 3. How would you provide support for 1 and 2 above in WSDL  </s>
<s> in a way which  </s>
<s> allowed a single basic definition of the "business"  </s>
<s> choreography, e.g. you  </s>
<s> send a PO and get a PO response back, even though you could  </s>
<s> get variations  </s>
<s> in the actual signals and RM protocol used as well as the  </s>
<s> physical message  </s>
<s> format used?  </s>
<s> I'm not saying it can't be done, I just don't know how.  </s>
<s> Regards David -----Original Message----- From: Assaf Arkin [mailto:arkin@intalio.com]  </s>
<s> Sent: Friday, July 18, 2003 1:14 PM public-ws-chor@w3.org  </s>
<s> Subject: Re: Grounding Choreographies (the atoms) - WAS Simple Choreograph y composition suggestion It all boils down to terminology.  </s>
<s> I'm not suggesting any,  </s>
<s> just pointing  </s>
<s> out a problem.  </s>
<s> If we say "roles" and the WSA says "agents" then there's a  </s>
<s> mismatch.  </s>
<s> If  </s>
<s> the WSA defines an architecture in terms of agents  </s>
<s> interacting, but a  </s>
<s> choreography can't involve agents (that would be an  </s>
<s> orchestration) then  </s>
<s> we might have a problem there.  </s>
<s> We need to raise this and work out a terminology that is consistent across the board.  </s>
<s> So going back to Frank's original e-mail, either I didn't understand what was said, or we need to better align the usage of terminology between the two groups.  </s>
<s> As for what the interaction is, I much prefer if we talk in terms of WSDL interfaces.  </s>
<s> Then we won't have to go down into the  </s>
<s> details of HTTP,  </s>
<s> ack/resend, etc.  </s>
<s> When you express everything in terms of  </s>
<s> WSDL interface  </s>
<s> you are talking about these roles/agents interacting with  </s>
<s> each other.  </s>
<s> The protocol may end up using HTTP, it may include  </s>
<s> additional signals  </s>
<s> for RM, out-of-band signals for coordination, establish security context, whatever.  </s>
<s> Since this is already taken care of by other specifications  </s>
<s> that you can  </s>
<s> plug-in, I would much prefer to focus solely on use of WSDL  </s>
<s> interfaces.  </s>
<s> arkin  </s>
<s> Assaf My take is that strictly speaking, a choreography is "A  </s>
<s> definition of the  </s>
<s> sequence and conditions in which a set of interactions  </s>
<s> occur between two  </s>
<s> roles".  </s>
<s> Where *interactions* include both individual (e.g. HTTP)  </s>
<s> messages as well  </s>
<s> as  </s>
<s> higher level concepts such as a single "reliably delivered  </s>
<s> message" which  </s>
<s> actually requires several HTTP message to implement, or at  </s>
<s> a even higher  </s>
<s> level, concepts such as a "Request for Quote".  </s>
<s> Also roles can include, at a low level, general concepts  </s>
<s> such as a "sender"  </s>
<s> and "receiver" which could be appropriate when defining the  </s>
<s> choreography  </s>
<s> associated with a RM protocol, or such business level  </s>
<s> concepts such as  </s>
<s> "buyer" and "seller" when defining a business level  </s>
<s> protocol/choreography.  </s>
<s> In both cases roles defined in the choreography are  </s>
<s> abstract and need to be  </s>
<s> mapped to the physical instances which will often, but  </s>
<s> needn't be - as  </s>
<s> Martin mentioned, web services.  </s>
<s> If we say that  </s>
<s> Choreographies *always* have  </s>
<s> to be *between* web services then it precludes the  </s>
<s> choreography being used  </s>
<s> by something that is not a web service, which I don't think  </s>
<s> we want to do.  </s>
<s> My $0.02c.  </s>
<s> David  </s>
<s> "Those who can, do; those who can't, make screenshots" Assaf Arkin arkin@intalio.com  </s>
<s> Intalio Inc. www.intalio.com  </s>
<s> The Business Process Management Company (650) 577 4700 This message is intended only for the use of the Addressee and may contain information that is PRIVILEGED and CONFIDENTIAL.  </s>
<s> If you are not the intended recipient, dissemination of this communication is prohibited.  </s>
<s> If you have received this communication in error, please erase all copies of the message and its attachments and notify us immediately.  </s>
<s> That's exactly my point ;-) I hope that they would consider not just RM, but how other protocols can be integrated into the stack.  </s>
<s> The original reliance on SOAP was a bit disappointing, since it resulted in a simple protocol but less usable stack.  </s>
<s> WS-RM, WS-Tx and WS-SC all take that model into consideration, so you can use a mixture of all three (and of course other protocols) without severely complicating your WSDL definitions.  </s>
<s> arkin  </s>
<s> I haven't followed the TC discussion, but as I've said before, Reliable messaging != MEPs, IMO.  </s>
<s> Adding acknowledgement traffic to the message descriptions at the WSDL layer just complicates and obscures the data traffic (e.g. SOAP payload).  </s>
<s> RM is a QOS for message delivery; it's not a pattern of message exchange, nor should it be, at the WSDL layer.  </s>
<s> This is the tack taken so far by the WS-ReliableMessaging spec (which does consider WSDL).  </s>
<s> WS-Reliability is also at least considering this approach (see e.g. the proposal in "leave WSRM MEP information out of the WSDL").  </s>
<s> The idea of sending acks "out of band" to a separate set of endpoints is interesting but hasn't been considered so far for RM, AFAIK.  </s>
<s> --Jon  </s>
<s> From: Assaf Arkin [mailto:arkin@intalio.com]  </s>
<s> Sent: Friday, July 18, 2003 2:11 PM public-ws-chor@w3.org  </s>
<s> Subject: Re: Grounding Choreographies (the atoms) - WAS Simple Choreograph y composition suggestion  </s>
<s> Assaf I agree that we need to agree on terminology, e.g. roles vs  </s>
<s> agents, I have  </s>
<s> no strong views on which is better.  </s>
<s> I also like the idea of using WSDL interfaces, however I can see some issues, for example: 1.  </s>
<s> Both the RM specs use SOAP to send their acknowledgement  </s>
<s> messages and  </s>
<s> retries.  </s>
<s> So, for example, if you had a WSDL definition that  </s>
<s> defined a PO as  </s>
<s> input and generated a PO Response as output, then how would  </s>
<s> the other RM  </s>
<s> messages be defined in the WSDL?  </s>
<s> 2. If you then wanted to layer an MEP on top of this which included additional "signal" messages where each signal message was  </s>
<s> also sent using  </s>
<s> RM protocols then how would these be included in the WSDL?  </s>
<s> 3. How would you provide support for 1 and 2 above in WSDL  </s>
<s> in a way which  </s>
<s> allowed a single basic definition of the "business"  </s>
<s> choreography, e.g. you  </s>
<s> send a PO and get a PO response back, even though you could  </s>
<s> get variations  </s>
<s> in the actual signals and RM protocol used as well as the  </s>
<s> physical message  </s>
<s> format used?  </s>
<s> I'm not saying it can't be done, I just don't know how.  </s>
<s> Regards David -----Original Message----- From: Assaf Arkin [mailto:arkin@intalio.com]  </s>
<s> Sent: Friday, July 18, 2003 1:14 PM public-ws-chor@w3.org  </s>
<s> Subject: Re: Grounding Choreographies (the atoms) - WAS Simple Choreograph y composition suggestion It all boils down to terminology.  </s>
<s> I'm not suggesting any,  </s>
<s> just pointing  </s>
<s> out a problem.  </s>
<s> If we say "roles" and the WSA says "agents" then there's a  </s>
<s> mismatch.  </s>
<s> If  </s>
<s> the WSA defines an architecture in terms of agents  </s>
<s> interacting, but a  </s>
<s> choreography can't involve agents (that would be an  </s>
<s> orchestration) then  </s>
<s> we might have a problem there.  </s>
<s> We need to raise this and work out a terminology that is consistent across the board.  </s>
<s> So going back to Frank's original e-mail, either I didn't understand what was said, or we need to better align the usage of terminology between the two groups.  </s>
<s> As for what the interaction is, I much prefer if we talk in terms of WSDL interfaces.  </s>
<s> Then we won't have to go down into the  </s>
<s> details of HTTP,  </s>
<s> ack/resend, etc.  </s>
<s> When you express everything in terms of  </s>
<s> WSDL interface  </s>
<s> you are talking about these roles/agents interacting with  </s>
<s> each other.  </s>
<s> The protocol may end up using HTTP, it may include  </s>
<s> additional signals  </s>
<s> for RM, out-of-band signals for coordination, establish security context, whatever.  </s>
<s> Since this is already taken care of by other specifications  </s>
<s> that you can  </s>
<s> plug-in, I would much prefer to focus solely on use of WSDL  </s>
<s> Assaf My take is that strictly speaking, a choreography is "A  </s>
<s> definition of the  </s>
<s> sequence and conditions in which a set of interactions  </s>
<s> occur between two  </s>
<s> roles".  </s>
<s> Where *interactions* include both individual (e.g. HTTP)  </s>
<s> messages as well  </s>
<s> as  </s>
<s> higher level concepts such as a single "reliably delivered  </s>
<s> message" which  </s>
<s> actually requires several HTTP message to implement, or at  </s>
<s> a even higher  </s>
<s> level, concepts such as a "Request for Quote".  </s>
<s> Also roles can include, at a low level, general concepts  </s>
<s> such as a "sender"  </s>
<s> and "receiver" which could be appropriate when defining the  </s>
<s> choreography  </s>
<s> associated with a RM protocol, or such business level  </s>
<s> concepts such as  </s>
<s> "buyer" and "seller" when defining a business level  </s>
<s> protocol/choreography.  </s>
<s> In both cases roles defined in the choreography are  </s>
<s> abstract and need to be  </s>
<s> mapped to the physical instances which will often, but  </s>
<s> needn't be - as  </s>
<s> Martin mentioned, web services.  </s>
<s> If we say that  </s>
<s> Choreographies *always* have  </s>
<s> to be *between* web services then it precludes the  </s>
<s> choreography being used  </s>
<s> by something that is not a web service, which I don't think  </s>
<s> we want to do.  </s>
<s> My $0.02c.  </s>
<s> David  </s>
<s> "Those who can, do; those who can't, make screenshots" Assaf Arkin arkin@intalio.com  </s>
<s> Intalio Inc. www.intalio.com  </s>
<s> The Business Process Management Company (650) 577 4700 This message is intended only for the use of the Addressee and may contain information that is PRIVILEGED and CONFIDENTIAL.  </s>
<s> If you are not the intended recipient, dissemination of this communication is prohibited.  </s>
<s> If you have received this communication in error, please erase all copies of the message and its attachments and notify us immediately.  </s>
<s> Come to think of it, it doesn't have to be a separate endpoint in the sense of a SOAP address, but a separate endpoint in the sense of a separate channel.  </s>
<s> You don't want to override each interface with RM-specific operations just so you can use RM with that interface.  </s>
<s> Doing so would not allow you to select protocols independently of the interface definition.  </s>
<s> But you can expect the same SOAP address to receive different messages targeting different operations in different interfaces.  </s>
<s> So one address may represent two different endpoints, one for business-level operations and one for RM operations (and even more for coordination, security, etc).  </s>
<s> But if we define service to be address+interface, then even though two services use the same address they are still two separate endpoints (or some other more applicable term).  </s>
<s> arkin  </s>

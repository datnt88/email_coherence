<s> Section 13.3.1  </s>
<s> of the spec says:  </s>
<s> 13.3.1  </s>
<s> DAV:unreserved This property of a checked-out resource indicates whether the DAV:activity-set of another checked-out resource associated with the version history of this version-controlled resource can have an activity that is in the DAV:activity-set property of this checked-out resource.  </s>
<s> The activity feature adds a checkout precondition:  </s>
<s> (DAV:one-checkout-per-activity-per-history): If there is a request activity set, unless DAV:unreserved is specified, another checkout from a version of that version history MUST NOT select an activity in that activity set.  </s>
<s> Should this precondition also cover the case where the checkout request includes an activity and specifies DAV:unreserved, but the checkout  </s>
<s> should fail because a checked-out resource already exists, with  </s>
<s> DAV:unreserved false, and a DAV:activity-set value that contains the checkout request activity?  </s>
<s> Thanks, Alison.  </s>
<s> Either interpretation is OK with me.  </s>
<s> Do you (or anyone else) want this to be added?  </s>
<s> Cheers, Geoff Alison wrote on 03/12/2004 01:04:43 PM:  </s>
<s> (DAV:one-checkout-per-activity-per-history): If there is a request activity set, unless DAV:unreserved is specified, another checkout from a version of that version history MUST NOT select an activity in that activity set.  </s>
<s> The 13.3.1  </s>
<s> description of DAV:unreserved is more restrictive than DAV:one-checkout-per-activity-per-history enforces.  </s>
<s> The description only allows for one checked-out resource for the activity, if that checked-out resource has DAV:unreserved false.  </s>
<s> The precondition however allows for multiple checked-out resources for the activity, where at most one of these has a DAV:unreserved property of false.  </s>
<s> Given existing implementations of 3253 which may only enforce the precondition rather than the description, I would suggest that the description of DAV:unreserved is lined up with the precondition.  </s>
<s> That is, at most one reserved (DAV:unreserved false) checked out resource for an activity, but any number of unreserved (DAV:unreserved true) checked out resources for the same activity.  </s>
<s> Alison.  </s>
<s> (DAV:one-checkout-per-activity-per-history): If there is a request activity set, unless DAV:unreserved is specified, another checkout from a version of that version history MUST NOT select an activity in that activity set.  </s>
<s> I believe the point of a reserved checkout was to ensure that the  </s>
<s> checkin would succeed.  </s>
<s> But if we allow a reserved checkout to succeed when there are currently unreserved checkouts against that activity, if any of the unreserved checkouts are checked in, the subsequent checkin of the reserved checkout will fail.  </s>
<s> So doesn't that imply we should either: - disallow a reserved checkout if there is already an unreserved checkout or - disallow the checkin of an unreserved checkout if there is a reserved checkout  </s>
<s> Cheers, Geoff Alison wrote on 03/18/2004 08:08:27 AM:  </s>
<s> The second option looks better to me, i.e.  </s>
<s> - disallow the checkin of an unreserved checkout if there is a reserved checkout  </s>
<s> as I think the first condition would need to be: - disallow a reserved checkout if there is already an unreserved checkout, and disallow an unreserved checkout if there is already a reserved checkout.  </s>
<s> which restricts parallel development.  </s>
<s> Alison.  </s>
<s> OK, that makes sense to me.  </s>
<s> I'll make this update to both RFC-3253bis as well as JSR-147, if there are no objections.  </s>
<s> Cheers, Geoff Alison wrote on 03/22/2004 06:46:49 AM:  </s>
<s> checkout  </s>
<s> Would it also be clearer if the precondition: DAV:one-checkout-per-activity-per-history was renamed to DAV:one-reserved-checkout-per-activity-per-history?  </s>
<s> Alison.  </s>
<s> We could make this change for JSR-147 (and I will do so), but for backward compatibility, we should leave the name of this precondition alone for RFC-3253.  </s>
<s> Cheers, Geoff Alison wrote on 03/22/2004 09:12:25 AM:  </s>

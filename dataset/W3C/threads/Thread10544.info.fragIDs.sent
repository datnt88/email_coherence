<s> I see several claims in the RDF Core WG mailing list archives to the effect that the lexical space of XML Schema datatypes is not well-defined.  </s>
<s> However, when I look at http://www.w3.org/TR/xmlschema-2/,  </s>
<s> I see very specific definitions of the value space of XML Schema datatypes.  </s>
<s> For example http://www.w3.org/TR/xmlschema-2/#decimal states 3.2.3.1 Lexical representation decimal has a lexical representation consisting of a finite-length sequence of decimal digits (#x30-#x39) separated by a period as a decimal indicator.  </s>
<s> If totalDigits is specified, the number of digits must be less than or equal to totalDigits.  </s>
<s> If fractionDigits is specified, the number of digits following the decimal point must be less than or equal to the fractionDigits.  </s>
<s> An optional leading sign is allowed.  </s>
<s> If the sign is omitted, "+" is assumed.  </s>
<s> Leading and trailing zeroes are optional.  </s>
<s> If the fractional part is zero, the period and following zero(es) can be omitted.  </s>
<s> For example: -1.23, 12678967.543233,  </s>
<s> +100000.00,  </s>
<s> 210.  </s>
<s> This appears to me to be completely well-defined.  </s>
<s> In particular, leading and trailing spaces are *NOT* allowed in the lexical representation of the XML schema decimal datatype.  </s>
<s> I agree that this reads unambiguously.  </s>
<s> Unfortunately there is also other wording in the same document which suggests an alternative interpretation: to wit, the inclusion of the whiteSpace facet as a constraining facet on xsd:integer, which is meaningless if one understands the above text strictly in the way you suggest.  </s>
<s> And even more regrettably, there is ample evidence in the text of the document that it is not intended to be read quite so strictly, viz. it is internally incoherent if so read.  </s>
<s> Overall, therefore, I think that the situation is ambiguous, or at least underdetermined.  </s>
<s> In any case, we have decided to ask the XSD WG to rule on the matter and will include a test case illustrating their ruling.  </s>
<s> NB: In XML Schema whitespace processing is performed before any checking of whether a string belongs to a lexical space.  </s>
<s> Thus any aspect of whitespace processing is irrelevant to the question of what strings belong to the lexical space of an XML Schema datatype.  </s>
<s> This might affect the test case, however, which is written in XML.  </s>
<s> Pat IHMC(850)434 8903 or (650)494 3973 home 40 South Alcaniz St.(850)202 4416 office FL 32501(850)291 0667 cell phayes@ihmc.us  </s>
<s> http://www.ihmc.us/users/phayes  </s>
<s> From: pat hayes phayes@ihmc.us  </s>
<s> Subject: Re: comment on current deliberations in RDF Core concerning the lexical space of XML Schema datatypes Date: Fri, 12 Sep 2003 23:45:43 -0700  </s>
<s> I see several claims in the RDF Core WG mailing list archives to the effect that the lexical space of XML Schema datatypes is not well-defined.  </s>
<s> However, when I look at http://www.w3.org/TR/xmlschema-2/,  </s>
<s> I see very specific definitions of the value space of XML Schema datatypes.  </s>
<s> For example http://www.w3.org/TR/xmlschema-2/#decimal states 3.2.3.1 Lexical representation decimal has a lexical representation consisting of a finite-length sequence of decimal digits (#x30-#x39) separated by a period as a decimal indicator.  </s>
<s> If totalDigits is specified, the number of digits must be less than or equal to totalDigits.  </s>
<s> If fractionDigits is specified, the number of digits following the decimal point must be less than or equal to the fractionDigits.  </s>
<s> An optional leading sign is allowed.  </s>
<s> If the sign is omitted, "+" is assumed.  </s>
<s> Leading and trailing zeroes are optional.  </s>
<s> If the fractional part is zero, the period and following zero(es) can be omitted.  </s>
<s> For example: -1.23, 12678967.543233,  </s>
<s> +100000.00,  </s>
<s> 210.  </s>
<s> This appears to me to be completely well-defined.  </s>
<s> In particular, leading and trailing spaces are *NOT* allowed in the lexical representation of the XML schema decimal datatype.  </s>
<s> I am unaware of any ambiguities in the XML Schema documents in this area.  </s>
<s> It is certainly the case that different values for the whiteSpace facet may change the value space for datatypes derived from string, but this does not raise any ambiguity.  </s>
<s> The following text in XML Schema Part 1 makes the entire processing painfully clear in my view Part 1 - 2.2.1.2 Simple Type Definition A simple type definition is a set of constraints on strings and information about the values they encode, applicable to the normalized value of an attribute information item or of an element information item with no element children.  </s>
<s> Informally, it applies to the values of attributes and the text-only content of elements.  </s>
<s> Part 1 - 3.1.4  </s>
<s> White Space Normalization during Validation Throughout this specification, [Definition:] the initial value of some attribute information item is the value of the [normalized value] property of that item.  </s>
<s> Similarly, the initial value of an element information item is the string composed of, in order, the [character code] of each character information item in the [children] of that element information item.  </s>
<s> [Definition:] The normalized value of an element or attribute information item is an initial value whose white space, if any, has been normalized according to the value of the whiteSpace facet of the simple type definition used in its validation: preserve No normalization is done, the value is the normalized value replace All occurrences of #x9 (tab), #xA (line feed) and #xD (carriage return) are replaced with #x20 (space).  </s>
<s> collapse Subsequent to the replacements specified above under replace, contiguous sequences of #x20s are collapsed to a single #x20, and initial and/or final #x20s are deleted.  </s>
<s> There you have it.  </s>
<s> Simple type definitions work on normalized values, which are the result of white space processing.  </s>
<s> Peter F. Patel-Schneider  </s>
<s> I thought it was really clear too, but when I went to trace the line of reasoning in the text of the spec, I found this oddness: "integer has the following ?constraining facets?: whiteSpace -- http://www.w3.org/TR/xmlschema-2/#integer "[Definition:] A constraining facet is an optional property that can be applied to a datatype to constrain its ?value  </s>
<s> space?." -- http://www.w3.org/TR/xmlschema-2/#dt-constraining-facet  </s>
<s> So the whitespace facet constrains the *value space* of integer somehow?  </s>
<s> Maybe that's spurious (I just sent a message to xmlschema-comments seeking clarification).  </s>
<s> But I hope it makes it more clear why the RDF Core WG deliberates the way it does.  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>

<s> Hi! It seems that I should not use HTML Tidy on pages that containg Javascript?  </s>
<s> Or am I misunderstanding something here?  </s>
<s> (The HTML Tidy version that I'm using is "HTML Tidy for Windows (vers 1st August 2002)".  </s>
<s> Thanks in advance, Daniel Here is the test case in question: The original file (test1.htm):  </s>
<s> !-- function preload() { //v3.0 var doc=document; if(doc.images){  </s>
<s> if(!doc.MM_p) doc.MM_p=new Array();  </s>
<s> var i,j=doc.MM_p.length,a=preload.arguments;  </s>
<s> for(i=0; i a.length; i++)  </s>
<s> if (a[i].indexOf("#")!=0){ doc.MM_p[j]=new Image; doc.MM_p[j++].src=a[i];}}  </s>
<s> //-- body topmargin="0" leftmargin="0" marginheight="0" marginwidth="0" background="bg.gif"  </s>
<s> onLoad="preload('img1.gif','img2.gif','img3.gif','img4.gif','img5.gif','  </s>
<s> img6.gif','img7.gif','img8.gif');"  </s>
<s> HTML Tidy's output: 2002), see www.w3.org" !--  </s>
<s> function preload() { //v3.0 var doc=document; if(doc.images){  </s>
<s> if(!doc.MM_p) doc.MM_p=new Array();  </s>
<s> var i,j=doc.MM_p.length,a=preload.arguments;  </s>
<s> for(i=0; i body topmargin="0" leftmargin="0" marginheight="0" marginwidth="0"  </s>
<s> background="bg.gif" onload="preload('img1.gif','img2.gif','img3.gif','img4.gif','img5.gif','  </s>
<s> img6.gif','img7.gif','img8.gif');"  </s>
<s> HTML Tidy was invoked with the following config file: indent-spaces: 2 wrap: 0 wrap-attributes: no wrap-script-literals: no wrap-sections: yes wrap-asp: yes wrap-jste: yes wrap-php: yes literal-attributes: no tab-size: 8 markup: yes quiet: no tidy-mark: yes indent: no indent-attributes: no hide-endtags: no input-xml: no output-xml: no output-xhtml: no  </s>
<s> output-html: no add-xml-pi: no add-xml-decl: no assume-xml-procins: no raw: yes uppercase-tags: no uppercase-attributes: no bare: no clean: no logical-emphasis: no word-2000: no drop-empty-paras: yes drop-font-tags: no drop-proprietary-attribute: no enclose-text: no enclose-block-text: no add-xml-space: no fix-bad-comments: yes split: no break-before-br: no numeric-entities: no quote-marks: no quote-nbsp: yes quote-ampersand: yes write-back: no keep-time: yes show-warnings: yes show-body-only: no new-inline-tags: names new-blocklevel-tags: names new-empty-tags: names new-pre-tags: names char-encoding: ascii input-encoding: latin1 output-encoding: ascii ncr: yes doctype: auto fix-backslash: yes gnu-emacs: no fix-uri: yes lower-literals: yes hide-comments: no indent-cdata: no force-output: no show-errors: 6 ascii-chars: yes join-classes: no join-styles: yes escape-cdata: no repeated-attributes: -last output-bom: auto replace-color: no accessibility-check: 0  </s>
<s> Thank you, Allan.  </s>
<s> I just tried your suggestion and it produced the same error.  </s>
<s> (if it didn't, it would have been too easy... ;-)) I believe this is a Tidy bug - unless I'm told that I did something wrong in my config file.  </s>
<s> Thanks again, Daniel Daniel; Tidy might be detecting an anchor ( A... ) in the middle of your javascript component.  </s>
<s> Try adding a space:  </s>
<s> var i,j=doc.MM_p.length,  </s>
<s> a=preload.arguments;  </s>
<s> for(i=0; i a.length; i++)  </s>
<s> If this is true, then Tidy needs to learn better how to scipt these components.  </s>
<s> Allan  </s>
<s> onload="preload('img1.gif','img2.gif','img3.gif','img4.gif','img5.gif','  </s>
<s> I didn't see anything unusual in your config.  </s>
<s> I did fix one script parsing  </s>
<s> bug in the library version.  </s>
<s> I just tried it, and it worked for me.  </s>
<s> Until we go live with that version, you can get it from my Tidy page at take it easy,  </s>
<s> Charlie  </s>
<s> Charlie,  </s>
<s> Thank you!  </s>
<s> I just downloaded the version you mentioned below, tested it and... it worked!  </s>
<s> Please note however, that for this to work I had to change "i a.length" to "i  a.length" (a space between ' ' and 'a').  </s>
<s> I can live with that  </s>
<s> Also, the new tidy did not recognize 3 options from the latest release on source forge: Config: unknown option: add-xml-pi  </s>
<s> Config: unknown option: raw  </s>
<s> Config: unknown option: drop-proprietary-attribute  </s>
<s> Are you planning on deprecating those?  </s>
<s> Regards, Daniel On Wed, 02 Oct 2002 12:25:44 -0400, "Charles Reitzel" creitzel@rcn.com  </s>
<s> said:  </s>
<s> danibe_@speedymail.org  </s>
<s> Glad to hear it.  </s>
<s> And, yup, that's by design.  </s>
<s> Use it's synonym, add-xml-decl  </s>
<s> Not sure about that one.  </s>
<s> Isn't that char-encoding: raw?  </s>
<s> I think you just need an "s" on the end: drop-proprietary-attributes  </s>
<s> Yes take it easy, Charlie  </s>

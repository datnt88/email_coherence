<s> Jeremy Carroll has sent an interesting analysis of the fragments spec and its relation to this issue to rdf-comments.  </s>
<s> Brian  </s>
<s> Well, that's an interesting and informative tour of the  </s>
<s> relevant specs, but I don't see any proposed solution.  </s>
<s> Did I read it too quickly?  </s>
<s> Or was I expecting too much?  </s>
<s> Dan Connolly, W3C http://www.w3.org/People/Connolly/  </s>
<s> I take that as an invitation to sketch a strawman.  </s>
<s> The goal is to define what value is created by production [6.34].  </s>
<s> I think in M&amp;S a literal is basically a string, rather than a complex structure (xml:lang notwithstanding).  </s>
<s> I take the key part of the syntax clarification to be that RDF/XML is defined over infoset.  </s>
<s> I would define being a legal value for production 6.34 by means of a document edit operation that replaces the RHS of production 6.34 by a string.  </s>
<s> Such a string is a legal value according to that production if it leaves the infoset or the XPath nodeset unchanged.  </s>
<s> More formally: RDF processors MAY represent values from production [6.34] as any string of XML markup which when inserted into the input document in the place of the right hand side of the production does not change the XML Infoset of the document.  </s>
<s> RDF processors which do this are RECOMMENDED, but not required, to use the actual string from the source document.  </s>
<s> RDF processors MAY represent values from production [6.34] as any string of XML markup which when inserted into the input document in the place of the right hand side of the production does not change the XPath nodeset of the document, and which can be inserted between the two tags a and /a to form an XML document.  </s>
<s> RDF processors which do this are RECOMMENDED, but not required, to use the canonical form of the document subset according to [XML Canonicalization].  </s>
<s> RDF processors MUST represent values from production [6.34] according to one of the two methods above.  </s>
<s> RDF processors MUST indicate which of the two is performed.  </s>
<s> RDF document writers are cautioned that the first of these two methods can lead to XML fragments that are incomplete through missing namespaces or unexpandable references {sorry words need editing}, and hence if maximum portability is required for an RDF document all namespace bindings needed within an XML literal should be included within it, and no entity or character references other than the predefined character references should be made.  </s>
<s> RDF document writers are cautioned that RDF processors are not required to map identical xml literals to the same string but may use a non-deterministic algorithm considering issues such as attribute order and whether to reperesent an empty element as one tag or two.  </s>
<s> Hence, equality between literals, and between models, may not work in the way expected.  </s>
<s> If it is known that one of the RECOMMENDED representations is used then equality will work.  </s>
<s> I think there are still a load of issues with such an approach; but hope that it is a starting point.  </s>
<s> It will be interesting to see what the fragments group have to say.  </s>
<s> Jeremy  </s>

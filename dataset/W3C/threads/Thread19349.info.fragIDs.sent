<s> There is an error in the code that handles the Backspace key.  </s>
<s> Here is how to recreate it: 1) Create a new HTML document 2) Type some text 3) Hit the Enter key 4) Hit the Backspace key  </s>
<s> Notice the placement of the cursor; it is one space to the left of where it should be.  </s>
<s> I looked at the code for TtcDeletePreviousChar(...) which handles this case.  </s>
<s> There is a flag called moveAfter that causes the undesired cursor movement.  </s>
<s> The problem is that I don't completely understand the conditions that sets this flag.  </s>
<s> Can anyone shed some light on this for me?  </s>
<s> Code from TtcDeletePreviousChar(...): /* delete the current selection instead of the previous char */ CloseTextInsertion (); /* by default doen't change the selection after the delete */ moveAfter = FALSE if (pViewSel- VsBox != NULL) moveAfter = (pViewSel- VsBox- BxAbstractBox- AbLeafType != LtText || pViewSel- VsBox- BxAbstractBox- AbVolume == 0); ContentEditing (TEXT_SUP); if (moveAfter) TtcPreviousChar (document, view); Thanks again, Bryon McDowell bryon.mcdowell@cai.com  </s>
<s> I guess this problem was already solved in the CVS version.  </s>
<s> It didn't come from this piece of code but from the function LocateSelectionInView The variable moveAfter is set to TRUE when the current selection points to a box which is neither a text nor an empty box.  </s>
<s> If you have " b AAAAA /b a xxxx,/a BBBB" and the anchor is selected, the instruction "ContentEditing (TEXT_SUP)" removes the current contents of the selection ( a xxxx,/a ) then moves the selection to the beginning of the next element (BBBB).  </s>
<s> As it's a delete previous we have to call the function TtcPreviousChar for moving to the end of the previous element ( b AAAAA /b )  </s>
<s> Irene.  </s>
<s> Oops I didn't test exactly that case.  </s>
<s> You're right, when the Backspace deleted the last paragraph of the document, the new selection was misplaced.  </s>
<s> This is the bug fix: if (pViewSel- VsBox != NULL) moveAfter = (pViewSel- VsBox- BxAbstractBox- AbLeafType != LtText pViewSel- VsBox- BxAbstractBox- AbVolume == 0); ContentEditing (TEXT_SUP); - if (moveAfter) + if (moveAfter &amp;&amp; + pViewSel- VsBox &amp;&amp; pViewSel- VsIndBox  pViewSel- VsBox- BxNChars) TtcPreviousChar (document, view); Irene.  </s>

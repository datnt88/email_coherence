Hi! DOM2 CR section 8.10 [1] says that if you apply the surroundContents method to the following range (stars marking range start and end): An exception should be thrown. 
However, if you follow the steps described a bit further up in the same section you would get the following DOM tree: Which I think is the most useful result. 
Is there a reason that an exception should be thrown? 
Also, the CR says that all children of the new node should be deleted before the node is inserted. 
Couldn't it be useful to allow attribute nodes to remain. 
In other words allowing operations like: Before: After: [1] http://www.w3.org/TR/DOM-Level-2/range.html#Level-2-Range-Surrounding / Jonas Sicking I've been out for a week, so this may already have been answered, but: before The DOM doesn't consider Attrs to be children. 
Unless I'm missing something, they shouldn't be affected. 
Joe Kesselman / IBM Research Sorry, you're right about that. 
But I still havn't got any answer to my first question; Why is an exception raised when doing surroundContents on the following tree (* marks range start and end): (see longer explaination in my previous post) / Jonas Sicking surroundContents is a convenience function designed for use with well-formed subtrees. 
Given that, the fix-ups that occur when you go through the steps seem to not be intuitive. 
If you really want to be able to, in effect, surround a non-well-formed subtree, you can go through the steps and let the automatic fix-ups happen. 
Hopefully the results won't then seem as non-intuitive. 
Attributes aren't children of an element. 
They are assoicated with an element. 
Lauren 

<s> According to rfc2616, section 14.14:  </s>
<s>  </s>
<s> The value of Content-Location also defines the base URI for the  </s>
<s> entity.  </s>
<s> I tested that with Amaya, and it uses the request URI instead of the one given in Content-Location.  </s>
<s> See http://lists.w3.org/Archives/Public/www-qa/2002Sep/0043.html for a better description.  </s>
<s> (I can make a server configuration available, if needed).  </s>
<s> Yves Lafon - W3C "Baroula que barouleras, au ti?u toujou t'entourneras."  </s>
<s> Normally, I fixed that bug in the last release 6.3.  </s>
<s> I tested with amaya 6.3 windows and the problem is still there.  </s>
<s> Yves Lafon - W3C "Baroula que barouleras, au ti?u toujou t'entourneras."  </s>
<s> Okay I read probably too quickly your message and we're not speaking about the same use of Content-Location.  </s>
<s> I have a resource available at "http://www.example.com/news/latest.html"  </s>
<s> The server is smart enough to serve it with a Content-Location header with a value of: "http://www.example.com/news/archived/2002/09/09/news.html"  </s>
<s> The page is pointing to the previous news with a relative link of According to RFC2616 [1] Section 14.14:  </s>
<s>  </s>
<s> The value of Content-Location also defines the base URI for the entity.  </s>
<s> If I resume the suggested change: - a relative link from that page should be resolved as relative to the Content-Location  </s>
<s> instead of the current URI. - a Save of this page should use the Content-Location.  </s>
<s> - a link from another page to that page should use also the Content-Location.  </s>
<s> By example a link from http://www.example.com/D1.htm with the Content-Location should generate the relative link "D2.htm"  </s>
<s> In this case, why not forget the actual requested URI.  </s>
<s> Yves,  </s>
<s> This sounds quite problematic.  </s>
<s> I understand using Content-Location for  </s>
<s> solving Content-Negotiation problems when publishing.  </s>
<s> However, using it as a Base URI is akin to making an unexplicit redirection.  </s>
<s> This sounds problematic for an editor, and even when following links.  </s>
<s> In the case of an editor, which URL should you use then when making a link?  </s>
<s> The one given in the Content-Location?  </s>
<s> If you do so, then you may break Content-Negotiation (e.g., linking to image.svg  </s>
<s> intead of image, if image exists in many formats).  </s>
<s> When following links, you would then follow them relative to the Content-Location.  </s>
<s> For example, if open a document at www.example.org  </s>
<s> that has a content location value of www.w3.org/, then the next relative URL you'd browse from there would be taken directly from www.w3.org and that's the URL we would show in the address field, just like with a redirection.  </s>
<s> This sounds confusing.  </s>
<s> If the server is able to add a Content-Location header that points elsewhere than where the document actually is, it may be as easy to make a redirection to the actual location of the document.  </s>
<s> Can you give us some specific examples where this may be useful?  </s>
<s> Thanks!  </s>
<s> -jose  </s>
<s> Content-Location is indicating where the real resource is.  </s>
<s> In the case I  </s>
<s> described, you have http://www.example.com/news.html that have the semantic of "latest URI" and "news of 9/9/2002", so it is not about solving conneg issues, it's a matter of semantic of URI.  </s>
<s> Regarding Base URI resolving, RFC2616 has authority on this and say that the Base URI is the one given in the Content-Location.  </s>
<s> If it is relative, it is then computed from the request URI and this relative URI.  </s>
<s> When you create a link, you are already in the document, unless you want to edit and follow links from the linked doc, you don't even have to compute the real URI for it.  </s>
<s> But if you are creating a relative link, then yes you should compute it according to the base URI (it can be displayed in the "add link" box, to tell the user that it is not the same as the URI displayed in the location box).  </s>
<s> Well, it is not confusing, links are opaque, so linking to the new site directly won't make any difference for the user.  </s>
<s> No, a redirection does have the same semantic!  </s>
<s> See the example above for an example of why Content-Location may be semantically important.  </s>
<s> Thanks, Yves Lafon - W3C "Baroula que barouleras, au ti?u toujou t'entourneras."  </s>
<s> Yes  </s>
<s> Yes (as it will make easier the ETag checking also).  </s>
<s> The fact that the other page is served with a Content-Location is orthogonal.  </s>
<s> If I take your example: Content-Location=http://www.example.com/news/archived/2002/09/09/D1.htm  </s>
<s> If you want to link http://www.example.com/D2.htm  </s>
<s> (that has a specific semantic), the relative link from D1 to D2 should be ../../../../../D2.htm, regardless of the Content-Location of D2, as semantic.  </s>
<s> So deferencing the targeted resource is not needed and only the first two points should be implemented.  </s>
<s> In fact, just one thing needs to be modified, the computation of the base URI of the document.  </s>
<s> As explained in another email, the requested URI has a specific semantic which may be different from the URI in the Content-Location.  </s>
<s> Thanks, Yves Lafon - W3C "Baroula que barouleras, au ti?u toujou t'entourneras."  </s>
<s> Yves, Thanks for clearing this up.  </s>
<s> I just commited into CVS some new code to use the Content-Location header for doing RFC2616 Base URI resolving inside Amaya.  </s>
<s> We'll test it a bit more and see if it's ready for the forthcoming release.  </s>
<s> -jose  </s>

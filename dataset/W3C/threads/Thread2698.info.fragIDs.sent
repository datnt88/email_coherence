<s> A small problem to overcome...  </s>
<s> We already know the caching problems with 1.0 but.... Firstly, assume that no proxy server is used.  </s>
<s> A browser send a a request using HTTP 1.1 protocol.  </s>
<s> The response it receives from the web server is also HTTP 1.1.  </s>
<s> This can be proven viewing the logs provided by a packet sniffer.  </s>
<s> The document received by the browser contains 1.1 header for cache control.  </s>
<s> The cache control instructions basically force the brower to do a get each time the user requests the page.  </s>
<s> Now... add a proxy server.  </s>
<s> I had to modify the Windows registry so that the browser would issue a 1.1 request to the web server (via the proxy).  </s>
<s> The browser sends a 1.1 request, but receives a 1.0 response - this is from the same web server, and I am using the same browser.  </s>
<s> What appears to happen is that the proxy server downgrades the protocol identifier (at least in the response back to the web browser) and forwards the response containing the 1.1 cache control headers to the browser.  </s>
<s> The browser now interprets the response using the 1.0 instructions and the end result is that the page is caches.  </s>
<s> If I ask for the same page again (and not using a forced GET) the page is retrieved from the cache as no GET request is captured by the packet sniffer.  </s>
<s> I have different browser that upon receipt of a response that indicates a 1.0 response, but contains 1.1 headers seems to disregard the protocol identifier in the response and processes each header instruction received.  </s>
<s> The end result is that even though the protocol identifier says it is 1.0, when a GET is issued, the page is requested from the web server.  </s>
<s> Note that in the example given above the same web page was requested, from the same web server.  </s>
<s> We know that a proxy server downgrades the response, but that affects the way the response is also handled by the browser.  </s>
<s> Questions: 1. What meaning (other than the obvious) is attached to the protocol identifier (e.g. HTTP/1.0) that is contained in a browser request or response?  </s>
<s> 2. How strictly should a web browser use the protocol identifier in processing a response from a web server?  </s>
<s> Thanks, Tim C.  </s>
<s> 1. What meaning (other than the obvious) is attached to the protocol identifier (e.g. HTTP/1.0) that is contained in a browser request or response?  </s>
<s> See RFC 2145.  </s>
<s> "Use and Interpretation of HTTP Version Numbers", J. C. Mogul, R. Fielding, J. Gettys, H. Frystyk, May 1997.  </s>
<s> HTTP request and response messages include an HTTP protocol version number.  </s>
<s> Some confusion exists concerning the proper use and interpretation of HTTP version numbers, and concerning interoperability of HTTP implementations of different protocol versions.  </s>
<s> This document is an attempt to clarify the situation.  </s>
<s> Read it carefully, and your questions should be answered.  </s>
<s> A proxy that converts an HTTP/1.1 request message to an HTTP/1.0 request is almost certainly legal.  </s>
<s> I would be more worried (well, "pissed off" is more accurate) about an HTTP/1.0 proxy that does NOT label its messages as HTTP/1.0. 2. How strictly should a web browser use the protocol identifier in processing a response from a web server?  </s>
<s> Whenever an HTTP protocol header could be misinterpreted if you are using the wrong version of the protocol spec, then the browser should be very cautious about using it if the version number seems to be inconsistent.  </s>
<s> The HTTP/1.1 spec (RFC 2616) documents a number of specific cases.  </s>
<s> -Jeff  </s>
<s> Do you know whether the proxy server is a *1.1* proxy?  </s>
<s> More than likely it is not.  </s>
<s> Therefore the proxy won't know about HTTP/1.1, will send requests as HTTP/1.0 requests because it doesn't know better, and treat responses accordingly.  </s>
<s> And that is why, as Jeff Mogul has already remarked, the browser should be cautious about how it interprets Dave Kristol HTTP/1.1 headers.  </s>

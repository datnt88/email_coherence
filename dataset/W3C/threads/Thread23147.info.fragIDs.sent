<s> Dear DOM WG!  </s>
<s> Some methods may raise several types of exceptions.  </s>
<s> It can be situations where more then one exceptional conditions are met at the same time.  </s>
<s> Is it described anywhere how to determine exceptions' precedence?  </s>
<s> For example if I try to call insertBefore method on a readonly node with newChild being the node created from a different document, which exception should be raised: NO_MODIFICATION_ALLOWED_ERR or WRONG_DOCUMENT_ERR?  </s>
<s> Thanks. Yours sincerely, Vadim.  </s>
<s> When more than one exception is possible, then it doesn't matter which one your implementation chooses to throw, as long as it raises one of them.  </s>
<s> "NO_MODIFICATION_ALLOWED_ERR or WRONG_DOCUMENT_ERR" is the answer.  </s>
<s> Since you're in a programming error case (i.e. the application tried to an illegal action), it doesn't which exception your implementation will throw.  </s>
<s> Philippe  </s>
<s> This, I'm sure, is going to irk developers using DOM3.  </s>
<s> If the precedence is being left undefined so that browser-authors can determine the best error to throw on a case-by-case basis, leaving it out of the scope of the document until, perhaps, DOM4, then I suppose I understand; you can only accomplish so much in one standard.  </s>
<s> But at some point developers will want to be able to predict for any set of errors what one error they will receive.  </s>
<s> Otherwise, a try/catch in a language like Java or Javascript is going to produce varying results for the same error browser to browser.  </s>
<s> This is sure to be a sore spot for developers once DOM3 proliferates.  </s>
<s> -Chris "SoopahMan" Moschini  </s>
<s> This has been in DOM since DOM Level 1 and we don't plan to render current implementations non-conformant.  </s>
<s> The program is in fault since it's trying to do an invalid operation.  </s>
<s> If more than one valid case applies, the program needs to be fixed imho.  </s>
<s> Philippe  </s>
<s> It seems to me that current implementations are automatically non-comformant with higher DOM levels unless they change, since they won't have any of the new methods or interfaces.  </s>
<s> It seems to me that specifying the behavior of existing methods more tightly, but in a way that is compatible with earlier specs, is no worse.  </s>
<s> It might even make sense as a feature you could test for.  </s>
<s> Leaving things up to the implementation is in practice no favor to implementors.  </s>
<s> For browser-hosted implementations at least, it is often necessary to copy the behavior of the browser with the biggest market share at the time a given feature became popular.  </s>
<s> So if the spec says a behavior is implementation-defined, but existing apps (read: real-world web pages) depend on one specific behavior, then the looseness of the spec only makes life more difficult for implementors.  </s>
<s> I'm not saying this necessarily applies to exceptions.  </s>
<s> In fact, it almost certainly doesn't, because ECMAScript code on web pages almost never checks for exceptions at all.  </s>
<s> But it's important to keep this principle in mind when choosing what to leave as implementation-defined behavior.  </s>
<s> I realize, of course, that not all DOM implementations are browser-hosted.  </s>
<s> But this subset is very important to the web and worth considering.  </s>
<s> Regards, Maciej  </s>
<s> Oh, agreed - but we don't live in a perfect world.  </s>
<s> An order of precedence - perhaps ordered by severity - would be helpful to help browsers fail consistently.  </s>
<s> I've used several imperfect browsers in my day... .  </s>
<s> -Chris "SoopahMan" Moschini  </s>

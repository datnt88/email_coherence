<s> Basically, DOM Level 2 left what we had done in Level 1 unchanged.  </s>
<s> createEntity and createNotation, and whether it makes sense to allow importing these nodes, will be addressed as part of DOM Level 3's Content Model work.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> I'm looking at the following section:  </s>
<s> What is see is that the Level 2 specification says [unlike what you stated]  </s>
<s> that: Entity nodes can be imported, however ... Notation nodes can be imported, however ...  </s>
<s> That means for me to build a conforming implementation, I would need to support importing entities and notations, however meaningless that capability is.  </s>
<s> If the decision to allow importing these nodes is truly  </s>
<s> deferred until DOM Level 3, then I recommend the following change to that section:  </s>
<s> Entity nodes cannot be imported.  </s>
<s> Notation nodes cannot be imported.  </s>
<s> That way, a conforming implementation can take the easy way out, and the current API won't break if in the future you decide that there is a sensible reason to allow these nodes to be imported.  </s>
<s> Keith keshlam@us.ibm.com  </s>
<s> Basically, DOM Level 2 left what we had done in Level 1 unchanged.  </s>
<s> createEntity and createNotation, and whether it makes sense to allow importing these nodes, will be addressed as part of DOM Level 3's Content Model work.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> stated]  </s>
<s> On reflection: I believe we decided on that because it's easier to support  </s>
<s> this capability now, in anticipation of Level 3, then to change it later.  </s>
<s> Some folks have complained loudly when an operation that used to be an  </s>
<s> error stopped being an error, believe it or not.  </s>
<s> It may or may not be meaningless in Level 2 but I think this falls in the category of "easy (it really is), harmless, and you're going to have to do in in Level 3 anyway."  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> Easy: Yeh, it's always easy to do, but most of my costs are in maintenance, and not in implementation, so that argument isn't terribly convincing.  </s>
<s> Harmless:It does increase maintenance costs for my implementation, so I cannot really say it is harmless.  </s>
<s> It introduces a mildly ugly extrusion in an otherwise smooth surface.  </s>
<s> You are going to have to do it in Level 3 Anyway: Again, not convincing, as I'd rather not design, develop or test dead code, and basically that is what that code will be until Level 3 comes out.  </s>
<s> Your last statement is an argument for putting createEntity() and createNotation() in DOM Level 2. Developers are going to have something  </s>
<s> like these methods anyway just to implement importNode() in Level 2, and they are going to have to do something like it in Level 3 anyway.  </s>
<s> I'd prefer that, or the alternative that these nodes cannot be imported [just as DocumentTypes cannot be imported], rather than the middle road.  </s>
<s> Anticipating the level 3 change could be perilous.  </s>
<s> You've made some decisions about where the functionality is supported that you cannot change when you add the rest of the system.  </s>
<s> I look at the DOM Core as being a three-tiered API.  </s>
<s> The first tier is implementation specific details [i.e. the data structures that store the information], the next tier are critical API methods that use the first tier, [i.e., Element.getName()], and the next layer are convenience API methods that can be implemented completely in terms of the second tier.  </s>
<s> A method like importNode() looks like a 3rd tier method.  </s>
<s> It can be 90% implemented without any knowledge of the first tier.  </s>
<s> What I'm complaining about is that last 10%.  </s>
<s> If there is a way to avoid importing Notation or Entity nodes, or create them from the Document interface, then I've got it, otherwise, I end up relying on implementation specific details in the first tier.  </s>
<s> The decision [as currently specified], has already been made that importing a Notation or Entity is done in the Document.  </s>
<s> However, these Nodes, don't exist in the Document per se, but rather in the DocumentType.  </s>
<s> Why force that decision now, especially in light of the fact that you want to be able to do it right in Level 3. I think that overcoming the momentum for supporting a new feature [importing the Notation and Entity nodes] will be easier than trying to move the import feature for those nodes to the DocumentType [where it seems more likely that it belongs].  </s>
<s> Keith  </s>
<s> P.S.Is this issue a dead horse yet, or is there still a chance to change the DOM?  </s>
<s> ;-) keshlam@us.ibm.com  </s>
<s> stated]  </s>
<s> On reflection: I believe we decided on that because it's easier to support this capability now, in anticipation of Level 3, then to change it later.  </s>
<s> Some folks have complained loudly when an operation that used to be an error stopped being an error, believe it or not.  </s>
<s> It may or may not be meaningless in Level 2 but I think this falls in the category of "easy (it really is), harmless, and you're going to have to do in in Level 3 anyway."  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> It is somewhat easier, architecturally, to add a new method than to change behavior of an existing method.  </s>
<s> And it is a bit less clear where the factory methods for these nodetypes should reside; that's going to depend on how the data structures for Content Models are organized.  </s>
<s> But I do grant your point that asking the Document to replicate these might not be optimal.  </s>
<s> We did consider the alternative of saying that these can not be imported yet, and decided that changing that in Level 3 was going to be more contentious than including them in Level 2. I'm not absolutely wedded to that conclusion -- we may wind up introducing new node types in the future, in which case we'd be in the same position of having to decide whether to extend importNode() to handle them.  </s>
<s> "Is it dead?"  </s>
<s> "Well, it was coughing up blood last night."  </s>
<s> -- Monty Python We're in Candidate Recommendation phase.  </s>
<s> Officially, that means that the decisions have been made, and only changes which are required to overcome _serious_ design flaws are really on the table.  </s>
<s> If it isn't likely to impede future development of the DOM, and doesn't create an unacceptable impact on impelemntability or performance, then officially it shouldn't be on the table.  </s>
<s> We had to make that promise in order to get folks to commit to building and testing early implementations, which is what the CR phase is really for.  </s>
<s> But it's always worth raising the question; that kind of feedback is also what CR is for.  </s>
<s> Right now, I still put this in the "mostly harmless" category -- the only special knowledge needed is in how to access you own implementation's constructors/factories for these objects, and while nobody else may have that information you (as implementor) certainly do.  </s>
<s> It'll be almost unused right now, I grant, but it's only a few lines.  </s>
<s> That's not an overwhelmingly strong opinion.  </s>
<s> I've been chiding someone else for "a foolish consistancy"; maybe this is mine.  </s>
<s> But since it doesn't seem to be actively harmful, my inclination is to stick with status quo.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> The issue of having importNode work for Entity and Notation nodes seems similar (to me) to the ones w.r.t. having cloneNode work for those node types in DOM level 1 (and Document and DocumentType nodes, which also don't have create methods in DOM level 1).  </s>
<s> I recall that we discussed clarifying that this feature (cloneNode of un-creatable nodes types) would be implementation dependant.  </s>
<s> Whatever happened about that?  </s>
<s> Maybe the same type of wording be used for importNode of un-creatable node types in DOM level 2?  </s>
<s> Kim. Kim Adamson-Sharpe, Sr. Software Developer, SoftQuad (West), www.softquad.com  </s>
<s> 604-585-8394 ext.  </s>
<s> 311 (kim@sqwestXnospamX.bc.ca or kim@sqXnospamX.com)  </s>
<s> It's not in the latest version of the spec, which suggests that either we didn't agree on it or it got lost between discussion and publication.  </s>
<s> Time to dig into the archives and look for a supporting statement...  </s>
<s> If we did reach that agreement, then I agree it should probably apply to both methods.  </s>
<s> Personally, I perfer to avoid "implementation dependent" whenever possible.  </s>
<s> It tends to lead to help-desks having to spend time defending your choice... and no matter which choice you make, some user will be trying to interchange code with an implementation that decided differently.  </s>
<s> But this might be enough of an edge case for that not to be a problem.  </s>
<s> Joe Kesselman / IBM Research  </s>

<s> Hi,  </s>
<s> Changing the value of a default attribute (Attr.specified  </s>
<s> = false) will change it to a specified attribute, as does cloning and importing.  </s>
<s> However, although the specification does have something to say on the subject of changing the prefix of a default attribute, it isn't clear wether or not the specified flag should be set to 'true' by the implementation.  </s>
<s> I infer that the specified flag should stay false; but I'd like to hear a confirmation about this.  </s>
<s> Martijn Pieters  </s>
<s> Software Engineer mailto:mj@digicool.com  </s>
<s> Digital Creations http://www.digicool.com/  </s>
<s> Creators of Zope http://www.zope.org/  </s>
<s> Good point; I think we completely missed that.  </s>
<s> My reading is that this depends on whether the default came from a DTD or a namespace-aware schema language.  </s>
<s> If it came from a DTD, the default is bound to the specific QName.  </s>
<s> Therefore, changing the prefix should be roughly equivalent to removing the existing attribute and instantiating a new one with the new name... and there should be two results.  </s>
<s> The first is that this Attr object should now be considered Specified.  </s>
<s> The other is that the default should be reasserted under the original QName.  </s>
<s> If it came from a namespace-aware source (which, please note, we are still in the process of defining), the prefix is irrelevant to the document structure (it's just a serialization hint) and changing it does not need to have any effect on whether it's considered the default.  </s>
<s> However, it's fair to say that changing the prefix implies that you intend a specific serialization, so I think it's reasonable to say that explicitly setting the prefix does make the Attr become Specified.  </s>
<s> Note, however, that here the specified Attr overlays the default rather than appearing alongside it, since it really is the same conceptual value as far as the schema is concerned.  </s>
<s> This is personal opinon, subject to confirmation or rejection by the rest of the DOM committee.  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> This is interesting.  </s>
<s> I would assume that once the default Attr is in the tree, it has received a namespaceURI.  </s>
<s> Changing the prefix will not change said namespaceURI.  </s>
<s> In other words, the Attr is no longer bound by its qualified name, but by it's namespaceURI and localname.  </s>
<s> If this wasn't the case, the reasserted default Attr Node would receive the same namespaceURI, thus representing the same attribute.  </s>
<s> This would result in an Element Node with inconsistent contents; you don't know which Attr would be returned on a attributes.getNamedItemNS() or getAttributeNS() call, for instance.  </s>
<s> Okay, I created an issue in our issue tracker on this, until an official statement has been made on the issue.  </s>
<s> Martijn Pieters  </s>
<s> Software Engineer mailto:mj@digicool.com  </s>
<s> Digital Creations http://www.digicool.com/  </s>
<s> Creators of Zope http://www.zope.org/  </s>
<s> Has there been any progress on this issue?  </s>
<s> It has been 3 weeks since this was brought up.  </s>
<s> Martijn Pieters  </s>
<s> Software Engineer mailto:mj@digicool.com  </s>
<s> Digital Creations http://www.digicool.com/  </s>
<s> Creators of Zope http://www.zope.org/  </s>
<s> Yes but we're still catching up the resolutions from our meeting partly because I wasn't available.  </s>
<s> Be patient a little more.  </s>
<s> Thank you, Philippe  </s>

<s> I've tried posting several messages to this list, none have made it yet.  </s>
<s> Here's another try: I'm confused.  </s>
<s> What is the purpose of using nodes to hold collections of  </s>
<s> elements (the DocumentType externalSubset, internalSubset,  </s>
<s> elementDefinitions, etc.).  </s>
<s> Is this just a convernience mechanism for implementors?  </s>
<s> Is it even possible to implement correctly?  </s>
<s> How can an ElementDefinition belong to both the external subset and the elementDefinitions node?  </s>
<s> Jeff Mackay Vtopia, Inc.  </s>
<s> A node can have children, so the "collections" such as the external and internal subsets are stored as the set of children of the Node off of DocumentType.  </s>
<s> I don't follow ... What are you referring to in the DOM spec that is unclear?  </s>
<s> Thanks, Mike Champion  </s>
<s> But in reality, the "container" nodes aren't really nodes.  </s>
<s> Which means that  </s>
<s> a node in the DOM doesn't always translate into a "node" in the document.  </s>
<s> Wouldn't it make more sense just to use a node iterator (or a NodeList, or for entity, attribute, and notation definitions a NamedNodeList) instead?  </s>
<s> unclear?  </s>
<s> The spec isn't very clear (or I'm just being dense).  </s>
<s> A DocumentType can  </s>
<s> have an internal and external subset which would contain all the declarations found in the corresponding physical subset.  </s>
<s> But wouldn't each ElementDefinition also be found as children of the node returned by  </s>
<s> DocumentType.getElementTypes?  </s>
<s> Also, there are no methods to retrieve an element definition by name.  </s>
<s> To do that, I'd have to iterate through the children each time I needed an element definition...  </s>
<s> A NodeIterator would make sense here ... I'll bring this up in the WG.  </s>
<s> I'll revisit the wording here and make sure it is clearer and matches the WG's sense of how this should work.  </s>
<s> This also makes sense to me ... I'll bring it up.  </s>
<s> Thanks for the suggestions, Mike Champion  </s>
<s> that  </s>
<s> This would also apply to attribute values in the Core specification.  </s>
<s> It appears that all occurrences of NodeList in previous versions of the spec were replaced with Node.  </s>
<s> But that is not the case with the HTML interfaces (which still uses NamedNodeList and possibly NodeList).  </s>
<s> Does the WG plan to align the XML and HTML interfaces (at least in terms of the NodeIterator interface)?  </s>
<s> Actually, a NodeIterator is not sufficient.  </s>
<s> I understand the rationale behind the NodeIterator.  </s>
<s> And I believe it is good for applications needing "read" access to the DOM.  </s>
<s> However, I believe that the NodeIterator should have replaced the NodeEnumerator--not NodeList and NamedNodeList.  </s>
<s> Both are still necessary, for DOM implementations, for parsers, and for applications needing "write" access to a model.  </s>
<s> On a related note--there should never be any read-only attributes on any of the DOM interfaces.  </s>
<s> If the goal of the DOM is interoperability, then the specification MUST be complete enough so that implementations NEVER need to rely on implementation-specific methods when creating an object model from a document fragment.  </s>
<s> If the goal is to eliminate implementation dependencies from clients, then the interfaces don't need to be as complete.  </s>
<s> The best example of this problem is that there is no Node.setParentNode method--with no setParentNode method, I can't take a node parsed by implementation a and move it to a document parsed by implementation b There may be other areas that need the same modification.  </s>
<s> If this isn't the intent, then it isn't a problem.  </s>
<s> But it sure does litter implementations and parsers with unnecessary casts.  </s>
<s> Some other comments: For anything "keyed" by name: attributes, attribute definitions, element declarations, notation declarations, entity declarations, a NamedNodeList is necessary.  </s>
<s> It may be helpful, at least for XML documents, to be able to look up the definition/declaration for an element, entity, notation, etc.  </s>
<s> For example, Element (or an XMLElement interface) could have a getElementDefinition method, Attribute (or an XMLAttribute interface) could have a getAttributeDefinition method, EntityReference could have a getEntityDeclaration method.  </s>
<s> This would simplify some pretty common tasks.  </s>
<s> The Node interface should have an append(Node child) method.  </s>
<s> insertBefore(child, null) is not intuitive.  </s>
<s> Also, the append method wouldn't need to throw an exception--which makes creation of a document from scratch much easier (don't need to catch all those pesky NotMyChildExceptions that will never be thrown anyway).  </s>
<s> Ok, that's enough for now... Jeff Mackay Vtopia, Inc. url: http://www.vtopia.com/  </s>
<s> e-mail: jmackay@vtopia.com  </s>

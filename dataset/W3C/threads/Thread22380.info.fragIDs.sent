<s> On Thu, 23 Sep 1999 18:47:39 +0200, Arnaud Le Hors (lehors@w3.org)  </s>
<s> the latest DOM Level 2 working draft is now available to the public at: We are hoping that this will be close to the final spec.  </s>
<s> So comments are more then ever invited and should be sent to this list.  </s>
<s> I will make sure we do not leave your comments unanswered.  </s>
<s> Have a look at the status section on the cover page for more information.  </s>
<s> I had been making some notes of DOM1 and DOM2 errata while I was looking at the drafts over the summer, since I didn't want to spam the list for every tiny error I found.  </s>
<s> The release of the WD into last call (surprisingly fast, to me) has prompted me to clean up my list, add a few more items, and send it to the list.  </s>
<s> If any of the comments are unclear, please ask me what I meant.  </s>
<s> I don't really want to explain all of them in full detail when most of them are probably quite clear (although perhaps my grammar fails at some points, since I wrote them rather fast).  </s>
<s> I originally kept these lists in separate files, so the references are numbered by section.  </s>
<s> -David In general, I think the DOM2 Core and HTML sections should have detailed change lists from DOM Level 1 (a quick summary of what's been added and and a detailed list of what's been changed or clarified).  </s>
<s> This would be very useful.  </s>
<s> DOM2 CORE DOMImplementation::hasFeature [1] should enumerate all the possible values for feature.  </s>
<s> Some of the sections specify them, but some do not.  </s>
<s> Perhaps the chapters should all specify the feature as well.  </s>
<s> [1] http://www.w3.org/TR/1999/WD-DOM-Level-2-19990923/core.html#ID-102161490  </s>
<s> DOM2 HTML  </s>
<s> Since DOM2 has ways of handling multiple documents, why not have methods in DOM1 HTML that are like the DOM Level 0 methods for frames?  </s>
<s> My memory of those interfaces is a little fuzzy, so I can't really describe them.  </s>
<s> I could try and find out more if you're interested.  </s>
<s> You should state that the following are 0-based (if they are): * HTMLOptionElement::index (which makes a few other things 0-based since they refer to it, i.e., HTMLSelectElement::selectedIndex and the index argument to HTMLSelectElement::remove()) * HTMLTableCellElement::cellIndex * HTMLTableRowElement::rowIndex * HTMLTableRowElement::sectionRowIndex  </s>
<s> 2.1, 3d paragraph - Does the DOM2 HTML not guarantee interoperability when the strict DTD is used?  </s>
<s> I think it should.  </s>
<s> 2.5.1 - what happens if the attributes are unspecified and they have no default value?  </s>
<s> I assume "" for those that are DOMString, but what about boolean and number?  </s>
<s> 2.5.1 - In the table, "e. g., border" is very misleading for the one-value value list example.  </s>
<s> There is no boolean border attribute.  </s>
<s> How about "e.g., disabled"?  </s>
<s> 2.5.4 - These elements are missing the X'ed attributes, and thus aren't really fit for HTMLElement (at least in 4.0 Strict): T C I L L T A A D I L S N I Attr.  </s>
<s> D E S G R Elem.  </s>
<s> BR X X PARAM X X X X HR X X HEAD X X X TITLE X X X BASE X X X X X META X X X STYLE X X X SCRIPT X X X X X HTML X X X What happens when these attributes are accessed or set?  </s>
<s> HTMLSelectElement::add() - what happens when element is not an HTMLOptionElement?  </s>
<s> when before is not in the list?  </s>
<s> can element be an HTMLOptGroupElement? can before?  </s>
<s> The definition of HTMLTextArea::defaultValue doesn't explicitly say that changing the defaultValue changes the child text Node of the element.  </s>
<s> I think it should, to be equivalent to the defaultValue, defaultChecked, and defaultSelected attributes.  </s>
<s> How does HTMLTableCellElement.cellIndex deal with rowspans and colspans?  </s>
<s> That is, is it the child number of the cell within its row or is it the column where the cell starts?  </s>
<s> Similarly, how does rowIndex treat TFOOT?  </s>
<s> Does it give the index in document tree order or display order?  </s>
<s> Similarly, what exactly do the index parameters in the following functions mean: * HTMLTableElement::insertRow * HTMLTableElement::deleteRow  </s>
<s> * HTMLTableSectionElement::insertRow * HTMLTableSectionElement::deleteRow  </s>
<s> * HTMLTableRowElement::insertCell * HTMLTableRowElement::deleteCell  </s>
<s> Also, the following fixed error should probably be added to the DOM1 Errata (I was working on a list of DOM1 errors): HTMLOptionElement::selected should not be readonly.  </s>
<s> I think this is clear from the prose in the errata, but it should be stated for those using the IDL  </s>
<s> DOM2 StyleSheets See my previous message [1] about why a major part of this section competes with rather than complements the stylesheet linking methods defined in HTML4 and xml-stylesheet.  </s>
<s> [1] http://lists.w3.org/Archives/Public/www-dom/1999JulSep/0032.html  </s>
<s> DOM2 CSS CSSStyleDeclaration::cssText shouldn't have "{" and "}" since it is used for HTMLElement::style.  </s>
<s> Thus "including" should be changed to "excluding" in [1].  </s>
<s> There are messy issues with the border-color property.  </s>
<s> See  </s>
<s> I think the following statement in [2] is unnecessary because the special system font shorthand values *can* be decomposed (and must, since some of the equivalent longhand properties can be changed, leaving  </s>
<s> others intact).  </s>
<s> I think it should be removed: If the value of a shorthand property can not be decomposed into its component longhand properties, as is the case for the font property with a value of "menu", querying for the values of the component longhand properties should return the empty string.  </s>
<s> Furthermore, I think it would be good if [2] explicitly said that querying a longhand property when a corresponding shorthand property has set the value of that longhand property should return the appropriate value rather than the empty string.  </s>
<s> That seems to be implied, but not clearly so.  </s>
<s> [1] http://www.w3.org/TR/1999/WD-DOM-Level-2-19990923/css.html#CSS-CSSStyleDeclaration-cssText [2] http://www.w3.org/TR/1999/WD-DOM-Level-2-19990923/css.html#CSS-CSS2Properties  </s>
<s> DOM2 EVENTS * In 6.6.2, UIEvent::detail in relation to mouse events seems vague.  </s>
<s> What is it for the mouseup and mousedown?  </s>
<s> When is it incremented, exactly?  </s>
<s> * In 6.6.2, what do the different values of button mean?  </s>
<s> * In 6.6.3, keyCode and charCode are listed in the "Context Info" for all event types, but nothing else is listed in the "Context Info" even though other things are valid.  </s>
<s> * The meaning of relatedNode [1] on the mouseout Mouse Event should be explicitly stated.  </s>
<s> My guess is that it should contain the node into which the mouse has moved.  </s>
<s> However, this node may or may not be receiving a mouseover event because of that movement (i.e., it won't if it's the parent).  </s>
<s> Should it be null in those cases?  </s>
<s> * what is the point of MutationEvent::relatedNode?  </s>
<s> The only thing it is used for duplicates event.target.parent.  </s>
<s> (It could be more useful if it were used for more of the events, I think.) Or are there some things missing in "Context Info" sections?  </s>
<s> (It seems that this is the case from the description of relatedNode [2].) * When are mousemove events fired?  </s>
<s> If the mouse moves while it is over a p (pElem) inside a div (divElem) inside body (bodyElem), do you get three mousemove events (one with event.target==pElem, one with event.target==divElem, and one with event.target==bodyElem) or just one on the most deeply nested element?  </s>
<s> Having three can be useful for out-of-flow children, but that's a lot of events (especially with bubbling), so I'm not sure if that is what is meant.  </s>
<s> * If an event is at the target, are both capturing and non-capturing event listeners called?  </s>
<s> Is event.eventPhase AT_TARGET in both cases?  </s>
<s> * Is the order of events for keypresses: keydown, (keypress,)* keyup, keypress Or is it: keydown, [ (keypress,)+ keyup | keyup, keypress ] Or is it UA-dependent?  </s>
<s> I think this should be explicitly stated (even if it's UA-dependent).  </s>
<s> * In what order are onmouseout/onmouseover fired when the pointer moves simultaneously out of one node and into another?  </s>
<s> What about when it moves simultaneously into two nodes (parent/child) or out of two?  </s>
<s> [1] http://www.w3.org/TR/1999/WD-DOM-Level-2-19990923/events.html#Events-MouseEvent-relatedNode [2] http://www.w3.org/TR/1999/WD-DOM-Level-2-19990923/events.html#Events-MutationEvent-relatedNode  </s>
<s> DOM2 ECMAScript bindings Are the ECMA bindings for {add,remove}EventListener correct?  </s>
<s> Should it take a function pointer or an EventListener object?  </s>
<s> L. David Baron Sophomore, Harvard (Physics) dbaron@fas.harvard.edu  </s>
<s> Links, SatPix, CSS, etc. URL: http://www.fas.harvard.edu/~dbaron/  </s>
<s> WSP CSS AC URL: http://www.webstandards.org/css/  </s>
<s> Many well-thought-out and well organised comments on the Level 2 draft specification... Thanks for all the work in collecting these and sending them in.  </s>
<s> We'll be looking at the comments closely and incoporating what we can.  </s>
<s> There will be a "disposition of comments" made once we've gone through them all.  </s>
<s> thanks again, Lauren  </s>
<s> For the moment, the HTML and the CSS specification don't have any statement about the correct syntax of style attributes.  </s>
<s> This issue should be discussed by the CSS WG :  </s>
<s> The border-color gets his value from the color property when the border property doesn't contain a color, but the value of the color is the _specified_ value of the color property and not the value in the style sheet.  </s>
<s> Since we don't compute the inheritance in the CSS OM (except for the computed style delcaration), the border color should be empty.  </s>
<s> Unfortunately, this is not true, see the font shorthand property definition in CSS2 : [ [ 'font-style' || 'font-variant' || 'font-weight' ]? 'font-size' [ / 'line-height' ]? 'font-family' ]  </s>
<s> caption | icon | menu | message-box | small-caption | status-bar | inherit  </s>
<s> caption, icon, menu, message-box, small-caption and status-bar are not supported by the longhand properties.  </s>
<s> Regards, Philippe.  </s>
<s> David, Thanks for the comments and suggestions.  </s>
<s> Responses and clarifications are detailed below.  </s>
<s> One of the items under consideration for DOM Level 3 is a "Views and Formatting" section that will possibly cover, among other issues, the browser "window" object.  </s>
<s> I believe the new section will cover the Level 0 frames methods.  </s>
<s> I'll make the 0-base explicit.  </s>
<s> The claim is that not all implementations need to enforce the strict DTD.  </s>
<s> Any program that makes the assumption that the strict DTD is in use may not work across all implementations.  </s>
<s> You're right - the empty string for string values and false for booleans.  </s>
<s> For numbers, the default value will depend on the attribute in question.  </s>
<s> For the size attribute of HTMLSelectElement (the only HTML attribute for which we return a numerical value), the default value is 0. I'll add these clarifications to the spec.  </s>
<s> Fair enough.  </s>
<s> I'll change the spec.  </s>
<s> Since there's nothing that precludes the modification or access of these attributes (or any other attribute) for an arbitrary element, the conveniences provided in HTMLElement translate to setAttribute() and getAttribute() calls for these elements.  </s>
<s> Since the DOM doesn't enforce HTML validity, the method does not throw an exception if the element is not an HTMLOptionElement.  </s>
<s> The method is equivalent to Node::appendChild() on the HTMLSelectElement if before is NULL.  </s>
<s> It is equivalent to a Node::insertBefore() on the parent of before for any type of element.  </s>
<s> The method should throw a DOMException with error code NOT_FOUND_ERR if the before parameter is not a descendant of the HTMLSelectElement.  </s>
<s> I'll add the relevant prose and add the exception to the IDL for the method, after confirming this with the other co-editors.  </s>
<s> True. I'll change the spec.  </s>
<s> The cellIndex is the child number of the cell within its row in doucment tree order.  </s>
<s> I'll make this more explicit in the spec.  </s>
<s> The rowIndex attribute is the index in document tree order.  </s>
<s> The index is relative to all TR elements in the table in document order, regardless of the existence or absence of table sections.  </s>
<s> The index is relative to all TR elements in that table section in document order.  </s>
<s> The index is relative to all TD and TH element in that table row in document order.  </s>
<s> You're correct.  </s>
<s> I'll change the spec.  </s>
<s> Thanks again!  </s>
<s> --Vidur  </s>
<s> For these issues, the DOM WG decide to leave the current draft as it is.  </s>
<s> The special system font shorthand issue: In [1] "system fonts can only be specified with this property, not with 'font-family' itself, so 'font' allows authors to do more than the sum of its subproperties."  </s>
<s> You can't set a longhand font property to a system value.  </s>
<s> And if we allow to return a system value on a longhand font property, then the following example will throw an exception if the shorthand font property (on myElement2) has a system value: myElement1.style.fontSize  </s>
<s> = myElement2.style.fontSize;  </s>
<s> The border-color issue: We can't invent a new value for this case.  </s>
<s> The border-color will be only effective in the computed style but the specified style will give you an empty string.  </s>
<s> Regards, Philippe.  </s>
<s> [1] http://www.w3.org/TR/REC-CSS2/fonts.html#font-shorthand Philippe Le Hegaret - http://www.w3.org/People/LeHegaret/ World Wide Web Consortium (W3C), DOM Activity Lead  </s>

<s> Bug report Date: August 30, 2003 Version: Amaya 8.0 Amaya has a bug in rendering dynamically generated images.  </s>
<s> If a web author creates a php script that returns one of serveral png images, Amaya will display the first image, but Amaya then caches the image and won't accept any new version  </s>
<s> that the php script generates.  </s>
<s> For example, take this PHP file: ------------- imgrotate.php  </s>
<s> ----------------- ?php  </s>
<s> error_reporting(E_ALL); // Create the list of files to display.  </s>
<s> $imgfiles = array ( 'btnaboutus.png', 'btncontact.png',  </s>
<s> 'btnhome.png',  </s>
<s> 'btnlogin.png',  </s>
<s> // rot.txt must already exist and be world writable.  </s>
<s> // The file contains only a single number.  </s>
<s> $count = file('rot.txt');  </s>
<s> $count = (intval($count[0]) + 1) % count($imgfiles); `echo $count  rot.txt`; $file = $imgfiles[$count]; header ('Content-Type: image/png'); header ('Cache-control: no-cache'); header ("X-Debug-Info: count=$count, file=$file"); passthru("cat $file"); ?  </s>
<s> ------------- end --------------------- Put the address of this file into the location bar and hit enter to go to the page.  </s>
<s> Each time you click refresh, you get the same image.  </s>
<s> 'imgrotate.php,'  </s>
<s> rotates over four png images.  </s>
<s> Because the content is always going to change, caching is disabled in the HTTP header, but that does not disuade Amaya from caching the first file it gets anyway.  </s>
<s> Amaya caches the image even if Amaya's cache is disabled using the 'Settings/Cache...' dialog.  </s>
<s> By the way, the problem goes away when the image file is loaded from another page as part of an IMG tag.  </s>
<s> The bug is only seen when the location bar is used to access the image rotating script.  </s>
<s> Was my bug report received?  </s>
<s> On Sunday 31 August 2003 09:23, Gary Petersen eloquently expounded:  </s>
<s> On Wed, 3 Sep 2003 03:52:02 -0500  </s>
<s> Sorry I probably trough away your previous message by error, due to a lot of spams I receive each day.  </s>
<s> Amaya has a local images cache by document to avoid Web access when the source view and the formatted view of the document are synchronized.  </s>
<s> But I'm not sure, it's the cause of your problem.  </s>
<s> Could you point me to an URI where I can make a real test?  </s>
<s> Irene. Ir?ne Vatton INRIA Rh?ne-Alpes INRIA ZIRST e-mail: Irene.Vatton@inria.fr 655 avenue de l'Europe  </s>

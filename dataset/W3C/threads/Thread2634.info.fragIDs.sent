<s> Hey,  </s>
<s> Since we're talking about proxies.... Im curious to know what others think the right thing according to the intent of the 1.1 spec to do is in this situation:  </s>
<s> If you have two chained proxy servers: client - proxy1 - proxy2 - origin server If proxy 2 challenges for proxy-authentication (in its realm), should the challenge go back to the client if proxy1 doesnt intend to satisfy the challenge ?  </s>
<s> My understanding was that the intent was that this situation was to be covered.  </s>
<s> By this I mean a client can auth to a proxy up the chain.  </s>
<s> The spec is somewhat ambiguous, it says the proxy-auth headers are hop-by-hop, but then mentions that chained proxy-auth can work.  </s>
<s> My understanding has always been that proxy authentication is strictly hop-by-hop.  </s>
<s> So proxy1 should not bump the authentication request up to the client.  </s>
<s> After all, it's proxy1 that has a trust relationship with proxy2, whereas the client may have no such relationship.  </s>
<s> Dave Kristol  </s>
<s> My recollection matchs DaveK's ... it was acknowledged at the time that the proxy auth was hop-hop only and as I recall the WG rejected an attempt to extend the protocol to accurately allow for proxy authentication thru another proxy.  </s>
<s> I believe there are cases where Josh's scenario would be valuable but it isn't what was defined.  </s>
<s> Dave Morris  </s>
<s> Specifically, RFC 2616 says: The HTTP access authentication process is described in "HTTP Authentication: Basic and Digest Access Authentication" [43].  </s>
<s> Unlike WWW-Authenticate, the Proxy-Authenticate header field applies only to the current connection and SHOULD NOT be passed on to downstream clients.  </s>
<s> However, an intermediate proxy might need to obtain its own credentials by requesting them from the downstream client, which in some circumstances will appear as if the proxy is forwarding the Proxy-Authenticate header field.  </s>
<s> The HTTP access authentication process is described in "HTTP Authentication: Basic and Digest Access Authentication" [43] .  </s>
<s> Unlike Authorization, the Proxy-Authorization header field applies only to the next outbound proxy that demanded authentication using the Proxy- Authenticate field.  </s>
<s> When multiple proxies are used in a chain, the Proxy-Authorization header field is consumed by the first outbound proxy that was expecting to receive credentials.  </s>
<s> A proxy MAY relay the credentials from the client request to the next proxy if that is the mechanism by which the proxies cooperatively authenticate a given request.  </s>
<s> I don't see anything ambiguous about that.  </s>
<s> Proxy authentication appears to be chained if the credentials are chained, but that is no different than saying it is hop-by-hop.  </s>
<s> Being hop-by-hop does not imply that the proxy cannot clue one side of the hop based on the other side's info.  </s>
<s> The reason it is specified this way has been discussed many times before.  </s>
<s> ....Roy  </s>

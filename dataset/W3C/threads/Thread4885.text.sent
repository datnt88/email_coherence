XQuery 1.0: An XML Query Language W3C Working Draft 12 November 2003 A.2.2 Lexical Rules Many states have transitions on patterns that aren't valid for that state. 
That is, for a query to put the lexer in the given state with the remaining input matching the given pattern, the query would have to have a syntax error. 
By accepting the erroneous pattern, the lexer delays detection of the syntax error. 
Specifically, I believe the following patterns are erroneous in the given states. 
DEFAULT OPERATOR "global" IntegerLiteral DecimalLiteral DoubleLiteral QName NAMESPACEKEYWORD KINDTEST StringLiteral SCHEMACONTEXTSTEP START_TAG END_TAG -Michael Dyck Hi again Michael. 
I agree. 
I'm looking at ways to mechanically detect this kind of thing, but in the meantime will work on the fixes you've provided. 
I'll send out an official response when I'm satisfied that this is fully fixed. 
-scott public-qt-comments-request@w3.org wrote on 01/23/2004 03:58:04 AM: Hi Michael. 
Your last call comment in [1] has been given the ID qt-2004Jan0242-01. 
This is the official response from the XQuery and XSLT working groups. 
All your suggested fixes concerning the removal of patterns from lexical recognition states have been implemented except for the removal of "," from the DEFAULT state (this broke the test "deep-equal(/,foo)", though no others). 
Thank you for raising the comment. 
I would be grateful if you would confirm that this provides an adequate resolution. 
-scott [1] Yup. -Michael Dyck 

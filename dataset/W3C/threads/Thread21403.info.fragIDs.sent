Hi, I'm trying to send the character encoding when posting an annotation, and the W3 annotest.w3.org/annotations server fails to parse it correctly. 
When I send the request parameter 'Content-Type' as: the server responds with status 500 and an error message something like: p http://annotest.w3.org/annotations was unable to interpret parameter ?xml 
version: "1.0"? 
Setting the content type back to just 'application/xml' generates the correct behavior again. 
It seems like the server should be able to handle character encodings, and 
from the HTTP 1.1 RFC this looks like the correct way to do it. 
So I guess 
this is a bug? 
thanks, Doug BTW, I also tried out a few other character encoding types, and got the same error. 
Hi, 
Has anyone had a chance to look at annotest.w3.org yet to check out the 'Content-Type' bug, whereby the server generates an error if the Content-Type request parameter sent to it includes a charset? 
I'm looking to put out a version of the annotations service (used by annozilla 0.4), but before doing so would like to know whether or not I can send the character encoding in the content type. 
It looks to me like this is the valid way of specifying character encoding according to the HTTP RFC. 
Thanks, Doug 
Hello Doug, We are working on this problem. 
Eric patched the server and we were testing it, but other things crept it and this got sidetracked. 
I hope we can get it ready this week. 
Only some more testing was needed. 
-jose 
Yes, my apologies also. 
The new server addresses this bug. 
It was related to the content-type. 
The CGI.pm that comes with perl interprets all data as script parameters ala GET /script?parm1=val1&amp;parm2=val2 
HTTP/1.1 or POST /script content-length: 24 content-type: application/x-www-form-urlencoded parm1=val1 parm2=val2 However, we're using it on some data that is not urlencoded: POST /script HTTP/1.1 content-type: application/xml ?xml... ... I wrote a wrapper that figures out when to let CGI.pm see the body (former case) when when not to (latter, non url-encoded data). 
In the currently deployed server, it looks for a content-type == "application/xml". 
The server we are preparing to deploy expects "application/xml" optionally followed by charsets and other rifraff. 
We should have this server deployed in another (guessing here) couple weeks. 
-eric office: +1.617.258.5741 
NE43-344, MIT, Cambridge, MA 02144 USA cell: +1.857.222.5741 (eric@w3.org) 
Feel free to forward this message to any list for any purpose other than email address distribution. 

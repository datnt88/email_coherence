I followed the instructions on 
to install the Annotea Annotation Server. 
Obviously the access controll is not OK. 
When I try to access I get the following error message: 
pre failed to execute $self- {USER_RECORDS} = new W3C::Annotations::DBMUserRecords(-errorHandler = $self, -type = 'dbm', -file 
= '/etc/httpd/annotea/users');: W3C::Util::Exception thrown at /usr/local/perl/modules/W3C/Annotations/CGI/access:123 W3C::Annotations::CGI::Access::new(...) at /usr/local/perl/modules/W3C/Annotations/CGI/access:75 (eval) at /usr/local/perl/modules/W3C/Annotations/CGI/access:68 W3C::Annotations::CGI::Access::main(...) at /usr/local/perl/modules/W3C/Annotations/CGI/access:64 I created /etc/httpd/annotea/users with dbmmanage /tmp/users add test test I can read it by ./ddb 
ifd=/etc/httpd/annotea/users idelim=: odelim=: test:test Maybe I shoud use the users and groups files of apache instead of creating it myself? 
I have problems in interpreting the error message above. 
Can you please help me? 
Thank you very much. 
Daniel Daniel Engler University of Berne daniel.engler@philo.unibe.ch 
This mail sent through IMP at http://mail.unibe.ch 
I changed the Line in Annotations.access.prop: from auth.database.parms: 
-type = 'dbm', -file = '/etc/httpd/annotea/users' to auth.database.parms: 
-type = 'db', -file = '/etc/httpd/annotea/users' 
this works but now I find the following lines in httpd/error_log 
[Fri Jun 13 22:11:01 2003] [error] [client 130.92.151.140] (2)No such file or directory: could not open dbm auth file: /etc/apache/conf/users [Fri Jun 13 22:11:01 2003] [error] [client 130.92.151.140] 
DBM user daniel.engler@philo.unibe.ch 
not found: /usr/local/perl/modules/W3C/Annotations/CGI/annotate please help 
Sorry for the delay, please see the Authentication Required section [1] of the annotations HOWTO. 
[1] http://www.w3.org/1999/02/26-modules/User/Annotations-HOWTO.html#Prob_authRequired 
-eric office: +1.617.258.5741 
NE43-344, MIT, Cambridge, MA 02144 USA cell: +1.857.222.5741 (eric@w3.org) 
Feel free to forward this message to any list for any purpose other than email address distribution. 
it looks like, as is the default, apache is looking in /etc/apache/conf/users. 
-eric office: +1.617.258.5741 
NE43-344, MIT, Cambridge, MA 02144 USA cell: +1.857.222.5741 (eric@w3.org) 
Feel free to forward this message to any list for any purpose other than email address distribution. 
/etc/apache/conf/users is OK! I can define new users: then I can see the new user in /etc/apache/conf/users [svr_annotea] /usr/local/perl/modules/W3C/Database/bin # ./ddb 
ifd=/etc/apache/conf/users idelim=: odelim=: daniel.engler@philo.unibe.ch:d5wdwPF4r7CbA:2:0:3:dgr3gds4:daniel.engler@philo.unibe.ch:Engler:Daniel:1055549573:1055549547 
I CAN'T post Annotations: without parameter returns empty RDF (I think thats OK) with POST Parameter results in Access Error: [svr_annotea] /usr/local/perl/modules/Conf # tail /var/log/httpd/error_log [Tue Jun 24 16:32:15 2003] [error] [client 130.92.151.137] (2)No such file or directory: could not open dbm auth file: /etc/apache/conf/users [Tue Jun 24 16:32:15 2003] [error] [client 130.92.151.137] 
DBM user daniel.engler@philo.unibe.ch 
not found: /usr/local/perl/modules/W3C/Annotations/CGI/annotate but there is a file! and access can write it (see above) [svr_annotea] /usr/local/perl/modules/Conf # ls -l /etc/apache/conf/users -rw-rw-rw- 1 wwwrun www 12288 Jun 14 02:14 /etc/apache/conf/users my .prop 
files [svr_annotea] /usr/local/perl/modules/Conf # cat annotate.prop 
auth.database.parms: 
-type = 'db', -file = '/etc/apache/conf/users' [svr_annotea] /usr/local/perl/modules/Conf # cat Annotations.access.prop 
email.from=daniel.engler@philo.unibe.ch 
html.navbar=" a href="http://www.w3.org/" img src="http://www.w3.org/Icons/WWW/w3c_home" alt="W3C" class="W3CIcon" border="0" / /a a href="/" img src="/Icons/pen3.png" 
alt="Annotea" width="150" height="110" border="0" / /a " auth.database.parms: 
-type = 'db', -file = '/etc/apache/conf/users' auth.admin.user:daniel.engler@philo.unibe.ch in there are tree names of Annoations.access.prop. 
Which one is correct? 
[svr_annotea] /usr/local/perl/modules/Conf # ls -1 Annotations.access* 
Annotations.access Annotations.access.prop 
Annotations.access.prop.prop 
Dear all, I just written an XSL stylesheet that tries to attach icons and links for annotations to a XHTML document. 
There are a number of problems still, not least the fact that my stylesheet does not always produce valid HTML (and it may be that because of this, this task is doomed to ulitimate failure) but it seems to work well enough for it to be of some immediate uses, and it may well be of interest to others here. 
The stylesheet is at http://www.mat.bham.ac.uk/R.W.Kaye/annotation2xsl.xsl You'll probably want to download http://www.mat.bham.ac.uk/R.W.Kaye/pencil.png 
too. 
There are instructions in the code itself. 
Currently, to use it, download the rdf containing the annotation(s) from the annotation server and also download the actual document itself from the web using wget or whatever. 
Then run XSLT twice: 1. annotation2xsl.xsl on the rdf doc to produce a second xsl stylesheet 2. the new stylesheet is the one that transforms the actual document. 
There are various configuration variables you will need to set to your taste, and you may want to set up all of the above in a nice command line script or cgi script or something. 
Comments welcome. 
Best wishes Richard Kaye 
Dear all, I am still developing these scripts. 
I have now written a CGI script that takes the output from a simple form (submitted using http GET) and adds annotations to the document requested from an annotation server. 
It then returns the annotated document, which has been altered so that the href in the a href="..." tags now point to the same CGI script (with suitable parameters) so that when the user clicks this hyperlink he/she sees another document annotated by the same server. 
The main advantage is that this will work with any browser. 
(I have a screen shot of it working in konqueror at As far as I know konqueror on its own doesn't understand annotations :-) Another advantage is that since all the info is passed to the CGI script via the http://blah.com/blah.cgi?param1=value&amp;param2=value syntax, by using this syntax in the "href" of your own hyperlinks in your own (X)HTML, you can make hyperlinks that will send the reader to a specific document with annotations taken from a specific annotation server. 
It is all transparent to the reader, and no special configuration to the browser is required. 
The downsides include the fact that some server-side processing is required. 
(Perhaps this can be justified as providing some useful service to a client. 
-- I think it can in my case.) The other downside is that at the moment there are lots of ways that the scripts will fail, or at least fail to produce good HTML. 
For example, if the target document uses the base tag the hyperlinks won't be right, and quirky documents or annotations will confuse things a lot. 
(E.g., the current version of the script produces odd results if the document has an annotation of an a tag.) Nevertheless, I *still* think there are some useful ideas here and would be glad for other people's comments. 
Files: The main XSL stylesheet: (updated since last post) The CGI script: The graphics: 
A simple driver form to get things started: You'll need at least mod_perl, LibXML, LibXSLT and libtidy if you want to get things working at your end. 
Best wishes to all annotators Richard 
I should add that the getannotateddoc.html 
form above should be up-and-running if you want to try it out with your browser. 
(Sensible usage only please.) The extra software is needed only for the server side of course. 
Richard 

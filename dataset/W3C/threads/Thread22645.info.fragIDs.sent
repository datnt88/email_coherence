<s> Consider the following JavaScript syntax:  </s>
<s> var x = document.createRange();  </s>
<s> x.setStart(document.getElementsByTagName("p")[0],0);  </s>
<s> x.setEnd(document.getElementsByTagName("p")[0],1);  </s>
<s> x.insertNode(document.getElementsByTagName("div")[0]);  </s>
<s> Suppose that the document does not contain any div elements.  </s>
<s> What exception should be thrown?  </s>
<s> Do you  </s>
<s> have to check for existence of the node before you insert it?  </s>
<s> Thanks, Dylan Schiemann Do You Yahoo!? Get personalized email addresses from Yahoo! Mail - only $35 a year!  </s>
<s> http://personal.mail.yahoo.com/  </s>
<s> Typically, that kind of construct would raise a binding-specific array-index-out-of-range exception.  </s>
<s> JavaScript just returns 'undefined' on an out of range array lookup, so the exception that would be raised is that same as that which would be raised by x.insertNode(null); ...which, per the DOM Core spec, is an implementation-specific exception: # Implementations should raise other exceptions under other circumstances.  </s>
<s> # For example, implementations should raise an implementation-dependent # exception if a null argument is passed.  </s>
<s> -- http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-17189187 paragraph 2 HTH, Ian Hickson )\ _. - ._.) fL Invited Expert, CSS Working Group /. `- ' ( `--' The views expressed in this message are strictly `- , ) -  ) \ personal and not those of Netscape or Mozilla.  </s>
<s> ________ (.' \) (.' -' ______  </s>
<s> Fairly Simple Question, How do I make sure I don't get a null pointer exception (when the XML document has companyname /companyname using this code.  </s>
<s> Documentation states this should be a null value But  </s>
<s> if (companyname.item(i).getFirstChild().getNodeValue()  </s>
<s> != null) {  </s>
<s> NodeList companyname = doc.getElementsByTagName("companyname");  </s>
<s> String CompanyName =  </s>
<s> companyname.item(i).getFirstChild().getNodeValue();  </s>
<s> out.print(CompanyName + " br "); Doesn't do the trick And all resources on internet with good tutorials using JSP/DOM/XML are  </s>
<s> welcome.  </s>
<s> regards, Tom Dylan Schiemann  </s>
<s> Consider the following JavaScript syntax:  </s>
<s> var x = document.createRange();  </s>
<s> x.setStart(document.getElementsByTagName("p")[0],0);  </s>
<s> x.setEnd(document.getElementsByTagName("p")[0],1);  </s>
<s> x.insertNode(document.getElementsByTagName("div")[0]);  </s>
<s> Suppose that the document does not contain any div elements.  </s>
<s> What exception should be thrown?  </s>
<s> Do you  </s>
<s> have to check for existence of the node before you insert it?  </s>
<s> Thanks, Dylan Schiemann Do You Yahoo!? Get personalized email addresses from Yahoo! Mail - only $35 a year!  </s>
<s> http://personal.mail.yahoo.com/  </s>
<s> You are using a error prone technique to access a text node by assuming that the companyName element will always have one text node as its content and no more.  </s>
<s> Unfortunately, there are several error conditions that can make this technique crash.  </s>
<s> Below is an effective way to iterate through all children of a node, and grabbing the content of their text nodes(and text nodes only): Element companyName = ..... NodeList childNodes = companyName.getChildNodes();  </s>
<s> String name = ""; for (int i=0; i  name.getLength();  </s>
<s> i++) { if (childNodes.item(i).getNodeType()  </s>
<s> == TEXT_NODE) { name = name + childNodes.item(i).getNodeValue();  </s>
<s> At this point the 'name' variable will contain the content of all of the text nodes, or will be empty if no text nodes were present.  </s>
<s> Remember: Application developers using the DOM should never assume anything.  </s>
<s> You should *always* do Node type checking, and *never* rely on the position of a node in context for anything(as there is no guarantee that it will be constant).  </s>
<s> Hope this helps, Eric Lawson Isogen International  </s>
<s> are  </s>
<s> Of  </s>
<s> Are you sure companyname.item()  </s>
<s> isn't null?  </s>
<s> Are you sure companyname.item().getFirstChild()  </s>
<s> isn't null?  </s>
<s> You should probably test those before testing companyname.item  </s>
<s> ().getFirstChild().getNodeValue().  </s>
<s> Work it through.  </s>
<s> The use of [0] to access a NodeList in ECMAScript is officially defined as equivalent to the item() method.  </s>
<s> getElementsByTagName() will return an empty nodelist if it doesn't find anything.  </s>
<s> So your first risk is that there are no p elements.  </s>
<s> If that's true, the item(0)/[0] returns null.  </s>
<s> The definition of Range.setStart and Range.setEnd says this parameter MUST NOT be null.  </s>
<s> We don't actually say what exception gets thrown if it is.  </s>
<s> That may or may not be an erratum.  </s>
<s> I take it to mean that a system-specific null pointer error will be thrown eventually.  </s>
<s> Note _eventually_; it may be discovered only when you try to access the mis-configured Range.  </s>
<s> But one could certainly justify HIERARCHY_REQUEST_ERR (null is never a legal child) or INVALID_NODE_TYPE_ERR.  </s>
<s> Assuming the first p is found -- and note that you are only checking that one! -- you search for a div .  </s>
<s> (You aren't searching within that p , but anywhere within the document... which seems odd, but OK.) You may not find it; in that case you're trying to insert null into the range.  </s>
<s> That's a nonsensical operation, and we should throw an exception.  </s>
<s> Again, we don't specify which.  </s>
<s> I would expect a null pointer exception, but one could certainly justify HIERARCHY_REQUEST_ERR (null is never a legal child) or INVALID_NODE_TYPE_ERR.  </s>
<s> This is definitely in the range of "If it hurts when you do that, stop doing that."  </s>
<s> Joe Kesselman / IBM Research  </s>
<s> Joseph,  </s>
<s> yes it would be null .  </s>
<s> it would be peferctly possible that the companyname tag in the xml would be like so no date is in there .  </s>
<s> or that the companyname tag would simply not be there in my xml file i have a bunch of attributes defined to company so simple example but any of these can be empty or not existing.  </s>
<s> since I am getting nullpointer exceptions and i thought I am testing it using if (companyname.item(i).getFirstChild().getNodeValue()  </s>
<s> != null) apparantly that is not enough.  </s>
<s> Regards, Tom Tom Leuntjens Fairly Simple Question, How do I make sure I don't get a null pointer exception (when the XML document has companyname /companyname using this code.  </s>
<s> Documentation states this should be a null value But if (companyname.item(i).getFirstChild().getNodeValue()  </s>
<s> != null) { NodeList companyname = doc.getElementsByTagName("companyname");  </s>
<s> String CompanyName = companyname.item(i).getFirstChild().getNodeValue();  </s>
<s> out.print(CompanyName  </s>
<s> + " br "); Doesn't do the trick And all resources on internet with good tutorials using JSP/DOM/XML are welcome.  </s>
<s> regards, Tom -----Original Message----- Dylan Schiemann Consider the following JavaScript syntax: var x = document.createRange();  </s>
<s> x.setStart(document.getElementsByTagName("p")[0],0);  </s>
<s> x.setEnd(document.getElementsByTagName("p")[0],1);  </s>
<s> x.insertNode(document.getElementsByTagName("div")[0]);  </s>
<s> Suppose that the document does not contain any div elements.  </s>
<s> What exception should be thrown?  </s>
<s> Do you have to check for existence of the node before you insert it?  </s>
<s> Thanks, Dylan Schiemann Do You Yahoo!? Get personalized email addresses from Yahoo! Mail - only $35 a year!  </s>
<s> http://personal.mail.yahoo.com/  </s>
<s> Nope, and it never is, this is a simple javascript problem because there are no children to the item (say) then companyname.item(i).getFirstChild()  </s>
<s> evaluates to null.  </s>
<s> therefore you have null.getNodeValue()  </s>
<s> != null That is not allowed, null has no methods.  </s>
<s> You need to test every single object before calling a method/accessing a property.  </s>
<s> if (companyname &amp;&amp; companyname.item  </s>
<s> &amp;&amp; companyname.item(i)  </s>
<s> &amp;&amp; companyname.item(i).getFirstChild()  </s>
<s> &amp;&amp; companyname.item(i).getFirstChild().getNodeValue())  </s>
<s> Would be what you want to do.  </s>
<s> (yes I know it's long...) Jim.  </s>
<s> You have to check if element document.getElementsByTagName("p")  </s>
<s> exists or it will crash when you try to get document.getElementsByTagName("p")[0]  </s>
<s> since you can not get an array value from a null pointer.  </s>
<s> the same applies to document.getElementsByTagName("div")  </s>
<s> Find the best deals on the web at AltaVista Shopping!  </s>
<s> I have a similar situation.  </s>
<s> I can retrieve the value of element(p) using document.getElementsByTagName("p").  </s>
<s> I can parse my XML using xerces DOMParser and retrieve the element value.  </s>
<s> If my XML is based on a DTD which contains more than 2 child dtds, still i can successfully parse the XML and retrieve the element value using document.getElementsByTagName("p")  </s>
<s> ONLY some indefinite number of times before my applcation hangs.  </s>
<s> After this point I can still parse the xml but invoking the same method document.getElementsByTagName("p")  </s>
<s> results in NULL POINTER EXCEPTION.  </s>
<s> Could you please elaborate on this aspect as soon as you can.  </s>
<s> I think this is very abnormal behaviour for the DOM(document ) methods to work for an indefinite amount of time.  </s>
<s> System crashes after running normally for an indefinite amount of time, even with case of XML based on dtd containing 3 child dtds.  </s>
<s> Would you please elaborate on this aspect as soon as you get a chance, thanks, Andrew Americo Albuquerque  </s>
<s> You have to check if element document.getElementsByTagName("p")  </s>
<s> exists or it will crash when you try to get document.getElementsByTagName("p")[0]  </s>
<s> since you can not get an array value from a null pointer.  </s>
<s> the same applies to document.getElementsByTagName("div")  </s>
<s> Find the best deals on the web at AltaVista Shopping!  </s>

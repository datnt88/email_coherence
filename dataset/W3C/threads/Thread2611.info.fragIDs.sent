Something's come up in the CGI RFC discussion, and I'm hoping you can clarify. 
RFC 2396 contains the following bits: 
absoluteURI = scheme ":" ( hier_part | opaque_part ) URI-reference = [ absoluteURI | relativeURI ] [ "#" fragment ] 
but 2616 says: 
Location = "Location" ":" absoluteURI 
Does this mean that "Location" values cannot include fragments? 
Yes. Oops. 
draft-bos-http-redirect-00.txt seems to assume a fragment 
is allowed in redirects. 
The HTTP syntax should be 
Location = "Location" ":" absoluteURI [ "#" fragment ] 
The CGI syntax also allows relative references, since those are interpreted internally by the server (unlike HTTP). 
....Roy 
I suppose this belongs in the errata, although we might need to explain the circumstances under which a fragment identifier is appropriate. 
From: Larry Masinter 
I'll update the errata page. 
When would it not be appropriate? 
I can't think of a case... but then it's Monday morning. 
Well, let's see. 
- I don't think it's appropriate to have a fragment with a 201 Created response, e.g., to a POST. 
- I don't know what it would mean to return a fragment with a 300 Multiple Choices, since the choice decision is intended to be made on resource characteristics and not fragment characteristics (?). 
- I think we're mainly concerned with 301/302/303/307, but I don't think 
it makes sense to POST to a URI with a fragment. 
- I don't think it's appropriate to return a fragment with 305 Use Proxy. 
In addition, we should specify the behavior in the case where 
there was a fragment with the original URI, e.g., where /resource1 redirects to is 'fragment1' discarded? 
Do you find fragment2 and then find fragment1 within it? 
We don't have fragment combination rules. 
Larry 
Might it mean "make your choice based on resource characteristics, then use the 
fragment on your next request"? 
|John Stracke | My opinions are my own | S/MIME &amp; HTML OK | |francis@ecal.com|============================================| |Chief Scientist | NT's lack of reliability is only surpassed | 
|eCal Corp. | by its lack of scalability. 
-- John Kirch | 
but 2616 says: 
Does this mean that "Location" values cannot include fragments? 
Does this mean that we (in the CGI work) can assume that fragments are legal in our overload definition of Location? 
#ken P-)} Ken Coar http://Web.Golux.Com/coar/ 
Apache Software Foundation http://www.apache.org/ 
"Apache Server for Dummies" http://ASFD.MeepZor.Com/ 
If it is that a CGI script can set the location header field with a value 
containing a fragment then yes. 
Btw, I have seen several servers sending relative Location header field values. 
This does make sense but does it break any existing applications we know of? 
Regarding allowing fragments, I believe the same is the case for Content-Location: Content-Location = "Content-Location" ":" ( absoluteURI | relativeURI ) should be Content-Location = "Content-Location" ":" ( absoluteURI | relativeURI ) [ "#" fragment ] 
I don't like introducing a lot of "sanity rules" for when they are allowed and when not. 
I think that proxy redirection (305 Use Proxy) is the only one that shouldn't be allowed. 
Henrik Frystyk Nielsen frystyk@microsoft.com 
No, that would be incorrect. 
The reference in Content-Location must be to a resource, not a fragment of a resource representation. 
....Roy 
The fragment (or view) is a function of the media type of the representation chosen and hence does not have to be defined the same way across the set of representations available for content negotiation of any particular resource. 
For example, a fragment in HTML pointing to page 3 does not have to be defined the same way for PS. 
It is therefore functionally correct that Content-Location can contain a fragment. 
The problem is of course that HTTP servers currently do not see the fragment under normal circumstances because clients do not send it but this is the same as for the Location header field. 
In fact, I consider this a bug in HTTP :) Henrik Frystyk Nielsen, 
A fragment is a fragment of a media type. 
Content-Location refers to the resource, not the representation of the resource as a media type. 
A resource is not a media type, and therefore a fragment is not appropriate for this field. 
This is different from Location because Location is redirecting the user agent to a different view, not identifying the resource included in the message. 
....Roy 
From: Rodent of Unusual Size Ken.Coar@Golux.Com 
I don't understand the question; I looked at: and it looks ok to me. 
In what way do you consider it to be overloaded? 
Scott Lawrence Director of R &amp; D lawrence@agranat.com 
Agranat Systems, Inc. Embedded Web Technology http://www.agranat.com/ 

<s> When I'm about to refresh a lock, can I then send exactly the same request as I sent when I locked the resource?  </s>
<s> I've tried this  </s>
<s> with IIS-5 and Sharemation, but the response I get is '423 Locked'.  </s>
<s> The only things that differs are, the If header and any cookies  </s>
<s> that may have been set.  </s>
<s> According to the spec.  </s>
<s> I doesn't have to send exactly the same request, but it doesn't say that I can't.  </s>
<s> To get it to work I excluded the body of the lock request, as the spec.  </s>
<s> say's I can.  </s>
<s> Chap 7.8 Refreshing Write Locks  </s>
<s> 'However, a client may submit a LOCK method with an If header but without a body.  </s>
<s> This form of LOCK MUST only be used to "refresh" a  </s>
<s> lock.' Can I rely on that if I send the Lock request without the body, that all servers will see this as a Lock refresh?  </s>
<s> /Rickard Falk  </s>
<s> Nope.  </s>
<s> You must supply the If: header which contains the locktokens of the locks that you wish to refresh.  </s>
<s> You must also submit an empty body to perform a refresh.  </s>
<s> If you supply a body, then the server will think you are  </s>
<s> attempting to create a new lock; if either of the locks are exclusive, then it will punt.  </s>
<s> Similar to IIS5 and Sharemation, mod_dav (and Apache 2.0 :-) will return a 423 if you attempt to LOCK a resource without supplying the necessary If: header and empty body on a refresh.  </s>
<s> Cheers, -g Greg Stein, http://www.lyra.org/  </s>
<s> I know that I have to send the If header, but where does the spec.  </s>
<s> say that a refresh request must be sent without the body?  </s>
<s> In chapter 7.8 it only say that the client 'may' send it without the body, not that a lock refresh must be without a body.  </s>
<s> It states  </s>
<s> that a Lock request without a body must only be used as a refresh lock request.  </s>
<s> Is my interpretation wrong?  </s>
<s> What I would like to se is something like: 'A client MUST NOT submit a body on a LOCK request, that is intended to "refresh" a lock.' /Rickard Falk  </s>
<s> From: Greg Stein [mailto:gstein@lyra.org] Sent: den 11 juli 2000 11:22 Subject: Re: Refreshing locks  </s>
<s> By my interpretation of RFC 2518, it is OK for a client to submit a body with the lock refresh.  </s>
<s> But, since existing servers are disallowing this, it might make sense to codify this practice.  </s>
<s> I've added this to the issues list.  </s>
<s> That seems to describe the current behavior of servers.  </s>
<s> - Jim  </s>

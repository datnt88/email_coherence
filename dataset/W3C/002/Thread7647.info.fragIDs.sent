<s> Hello all, I have a question regarding WebDAV responses --  </s>
<s> Are responses for specific methods required to be multistatus?  </s>
<s> I suppose GET or HEAD requests will not result in a multistatus reponse; the RFC even gives examples for LOCK where the response is a 200 OK.  </s>
<s> But can other requests like PROPFIND result in a non-multistatus response, say in a situation where a single resource is being queried?  </s>
<s> The PROFIND section 8.1 in the RFC says that "servers MUST support returning a response [..] that contains a multistatus XML element", but later in the same section it says "a request to retrieve the value of a property which does not exist is an error and MUST be noted, **if** the response uses a  </s>
<s> multistatus XML element..." (emphasis mine).  </s>
<s> The last "if" makes it unclear whether clients should be prepared to accept PROPFIND (or other) responses that are not multistatus.  </s>
<s> I apologize if this question has been answered before on this list.  </s>
<s> Thanks, Kaushik  </s>
<s> Are responses for specific methods required to be multistatus?  </s>
<s> I apologize if this question has been answered before on this list.  </s>
<s> I believe it has been discussed.  </s>
<s> I believe I brought it up and the conclusion was that PROPPATCH and PROPFIND must return multistatus and take no shortcuts.  </s>
<s> The reasoning behind this was that it made things more predictable for the client and really wasn't any harder for the server.  </s>
<s> If it's not already on the issues list, a clarification of this should be added to that list.  </s>
<s> I would disagree.  </s>
<s> I think that it is quite valid to return something like 403 (Forbidden) or 401 (Authorization required) as a response.  </s>
<s> Heck, you could also return something like 412 or 301, too.  </s>
<s> In each of these cases, the 3xx or 4xx applies to the Request-URI.  </s>
<s> If a status code ever applies to a URI *other* than the Request-URI (say, caused by a Depth: header), then a 207 (Multistatus) MUST be returned.  </s>
<s> Cheers, -g Greg Stein, http://www.lyra.org/  </s>
<s> In my initial query I had assumed that 4xx or 3xx are valid.  </s>
<s> I meant to ask about successful responses -- whether they must be 207, or whether a 200 could be expected as well.  </s>
<s> To paraphrase: Are 200 responses for PROPFIND allowed?  </s>
<s> Thanks, Kaushik  </s>
<s> Nope.  </s>
<s> If a PROPFIND succeeds, then it is going to be returning properties.  </s>
<s> Therefore, it must return a 207 which contains the multistatus element.  </s>
<s> Sure, it is theoretically possible to state that the 200 has the XML body, but that's not what was defined.  </s>
<s> PROPFIND returns 207 on success.  </s>
<s> Cheers, -g Greg Stein, http://www.lyra.org/  </s>
<s> I would disagree.  </s>
<s> I think that it is quite valid to return something like 403 (Forbidden) or 401 (Authorization required) as a response.  </s>
<s> Heck, you could also return something like 412 or 301, too.  </s>
<s> In each of these cases, the 3xx or 4xx applies to the Request-URI.  </s>
<s> If a status code ever applies to a URI *other* than the Request-URI (say, caused by a Depth: header), then a 207 (Multistatus) MUST be returned.  </s>
<s> I've jogged my memory a abit.  </s>
<s> The discussion I mentioned only discussed PROPSTAT responses.  </s>
<s> As I said, the conclusion was that shortcuts would not be taken.  </s>
<s> The multistatus had to be fully populated and follow a standard formula.  </s>
<s> There was a bit of discussion of if a fully populated MULTISTATUS response was really merited for a pure 200 response.  </s>
<s> (Although consistant, it seemed like a bit of a pain to parse through all the XML just to find out everything was okay.) The thread seemed to conclude mildly in favor of not making an exception for 200.  </s>
<s> As I said, this was just PROPPATCH.  </s>
<s> PROPFIND was not discussed in that thread.  </s>
<s> And it doesn't discredit what Greg says.  </s>
<s> (It *is* reasonable to just return a single status for some situations.) That thread just valued a predictable response more highly.  </s>
<s> The conclusion didn't seem to be strongly held.  </s>
<s> If you're writing a client, you'd better handle it both ways.  </s>
<s> And we should make sure this hits the issues list and that the issues list gets processed.  </s>
<s> J.  </s>

<s> Hi Folks,  </s>
<s> Since some of you have done IE5 interoperability testing successfully I  </s>
<s> was wondering if you could help me out.  </s>
<s> When I do try to access my  </s>
<s> WebDAV server and open it as Web Folder, IE sends the following  </s>
<s> request:  </s>
<s> OPTIONS / HTTP/1.1 and my response is: HTTP/1.1 200 OK Date: Tue, 20 Jan 1998 20:52:29 GMT Accept-Ranges: none  </s>
<s> Allow: OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, COPY, MOVE, MKCOL,  </s>
<s> PROPFIND, PROPPATCH Public: OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, COPY, MOVE, MKCOL,  </s>
<s> PROPFIND, PROPPATCH DAV: 1, 2  </s>
<s> But right after this my guess is IE thinks I am a frontpage server  </s>
<s> instead of WebDAV Server and sends the following request:  </s>
<s> "GET /_vti_inf.html  </s>
<s> HTTP/1.1", and after that POST something and so on.  </s>
<s> How do I workaround this, should I be sending redirector or something.  </s>
<s> Any help would be deeply appreciated.  </s>
<s> Thanks, Imran Do You Yahoo!? Get your free @yahoo.com  </s>
<s> address at http://mail.yahoo.com  </s>
<s> IE5 trys FrontPage first, then falls back to DAV.  </s>
<s> Just return 404 for the GET /_vti_inf.html.  </s>
<s> IE will follow that up with a POST /_vti_bin/shtml.exe/_vti_rpc, which you should also return 404 on.  </s>
<s> In other words, don't do anything special, but let your standard GET/POST processing handle the failure.  </s>
<s> IE5 will do another OPTIONS, followed by a PROPFIND, right after those two (failed) requests.  </s>
<s> What surprises me is why you haven't seen the PROPFIND already.  </s>
<s> How is your server built, such that you didn't return 404 for the GET/POST?  </s>
<s> Can you tell us a bit more about your server?  </s>
<s> Cheers, -g Greg Stein, http://www.lyra.org/  </s>
<s> I do return 404 on GET.  </s>
<s> I haven't implemented POST so i need to put some stub for POST, or maybe even a 501 (Method not implemented).  </s>
<s> I guess you are right if I do normal processing it should be ok.  </s>
<s> I was just debugging on the server side and expected PROPFIND after OPTIONS and since I saw GET/POST, I thought maybe I am doing something wrong.  </s>
<s> I think once I handle POST it should be ok.  </s>
<s> Thanks, Imran  </s>
<s> Do You Yahoo!? Get your free @yahoo.com  </s>
<s> address at http://mail.yahoo.com  </s>
<s> Urk. IE 5 is finicky.  </s>
<s> I recommend getting a TCP packet snooper and watching the interaction between IE 5 and a server that does speak its brand of WebDAV.  </s>
<s> One thing I've noticed in doing this kind of sniffing is that there's a header that you can return with OPTIONS: MS-Author-Via: DAV that may help.  </s>
<s> IE 5.0 Beta didn't like default namespaces; I haven't tested to see if IE 5 has fixed that yet.  </s>
<s> I'm not sure, but I think it needs to have the status tag come before the prop in a propstat.  </s>
<s> Be prepared for its upload.  </s>
<s> When you drop something into Web Folders, it first does a HEAD on the prospective location, then does a PUT with Content-Length: 0, and then another PUT with the actual file.  </s>
<s> %% Max Rible %% max@glyphica.com  </s>
<s> %% http://www.amurgsval.org/~slothman/  </s>
<s> %% %% "Before enlightenment: sharpen claws, catch mice.  </s>
<s> %% %% After enlightenment: sharpen claws, catch mice." - me %%  </s>
<s> Thanks that really helps and gives me the behaviour I want (no junky frontpage stuff).  </s>
<s> Interesting, MS-Author-Via must be a proprietary header that allows probably MS DAV servers to distinguish themselves from Frontpage server and other third-party DAV servers.  </s>
<s> So my guess is that you sniffed the packets between either Exchange and IE, or IIS 5.0 and IE. --Imran  </s>
<s> Do You Yahoo!? Get your free @yahoo.com  </s>
<s> address at http://mail.yahoo.com  </s>

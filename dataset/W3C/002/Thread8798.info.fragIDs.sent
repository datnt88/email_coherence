<s> Hi all, I'm confused by the following points.  </s>
<s> Could someone clarify this?  </s>
<s> 1. If an XML Signature Application accepts a DOM node as an input XML document in which it create a ds:Signature element, the Section 4.3.3.2 and 4.3.3.3 of XML DSIG spec implicitly defines that the input DOM node have to be the result of well-formed processing of the octet stream of the document.  </s>
<s> 2. If an XML Signature Application accepts an octet stream as an input XML document in which it create a ds:Signature element, the Section 4.3.3.2 and 4.3.3.3 of XML DSIG spec implicitly defines that it have to parse the input octet stream via well-formed processig.  </s>
<s> If the above is true:  </s>
<s> 3. Without any DTD/Schema definitions, how an XML Signature Appilcation does identify a node via barename XPointers or an id() function contained in XPointer expressions in dereferencing Same-Document URI-References?  </s>
<s> Do I miss some important points?  </s>
<s> Takuya Mori moritaku@bx.jp.nec.com / tk-mori@isd.nec.co.jp Internet Solution Platform Development Div., NEC Solutions, Tokyo Japan  </s>
<s> Hi Takuya --On Mittwoch, 10. Oktober 2001 16:02 +0900 Takuya Mori  </s>
<s> You're right: If you do not have a DTD or Schema, the Parser cannot identify Attributes of Type ID. What I did in my application [1] is that I can select Id attributes in elements from XML Signature space, because even without Schema, you know that an "Id" Attribute in an Element from Signature namespace _is_ of type ID, so you can catch them.  </s>
<s> If the user tries to identify IDs from other elements, my software does not catch them  </s>
<s> without tricks, but if the user helps me (uses my registerElementById(Element element, String idValue)), the parser can even find these elements.  </s>
<s> Christian [1] utils/IdResolver.java?rev=1.2&amp;content-type=text/vnd.viewcvs-markup  </s>
<s> Hi, r/tk-mori@isd.nec.co.jp/2001.10.10/16:02:48  </s>
<s> Sections 4.3.3.2 and 4.3.3.3 refer *only* to the reference processing model; that is, processing the target of a dsig:Reference element.  </s>
<s> They do not say anything, explicit or implicit, about the document in which a signature is created.  </s>
<s> Indeed,see section 3.1.2 of the processing rules (signature generation):  </s>
<s> Note, if the Signature includes same-document references, [XML] or  </s>
<s> [XML-schema] validation of the document might introduce changes that break the signature.  </s>
<s> Consequently, applications should be careful to consistently process the document or refrain from using external contributions (e.g., defaults and entities).  </s>
<s> " [ http://www.w3.org/Signature/Drafts/xmldsig-core/Overview.html ] This clearly states that parsing of the signature document itself is application-specific, and may be validating or well formed.  </s>
<s> Merlin Baltimore Technologies plc will not be liable for direct, special, indirect or consequential damages arising from alteration of the contents of this message by a third party or as a result of any virus being passed on.  </s>
<s> In addition, certain Marketing collateral may be added from time to time to promote Baltimore Technologies products, services, Global e-Security or appearance at trade shows and conferences.  </s>
<s> This footnote confirms that this email message has been swept by Baltimore MIMEsweeper for Content Security threats, including computer viruses.  </s>
<s> Hi merlin, Thank you for your clarification.  </s>
<s> merlin said:  </s>
<s> Note, if the Signature includes same-document references, [XML] or  </s>
<s> I skipped over the note you cited.  </s>
<s> Takuya Mori moritaku@bx.jp.nec.com / tk-mori@isd.nec.co.jp Internet Solution Platform Development Div., NEC Solutions, Tokyo Japan  </s>
<s> Hi Christian, Thank you for your comment.  </s>
<s> We are also using such kind of tricks.  </s>
<s> And my concern is it is somewhat ugly that Id resolution is required for well-formed processed documents.  </s>
<s> Takuya Mori moritaku@bx.jp.nec.com / tk-mori@isd.nec.co.jp Internet Solution Platform Development Div., NEC Solutions, Tokyo Japan  </s>
<s> You're right.  </s>
<s> It's an ugly trick, but the only one that exists.  </s>
<s> Imagine you're creating a document from scratch and you want to define IDs.  </s>
<s> I asked the xerces-user mailing list and what I got was that there is no way in DOM to define that an attribute is of type ID during document creation.  </s>
<s> But I got a hint that Xerces allows this tricky thing to set IDs during creation: ((org.apache.xerces.dom.DocumentImpl) doc).putIdentifier(idValue, element); So well, that seems to work.  </s>
<s> Christian  </s>

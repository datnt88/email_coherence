<s> We've been talking about whether or not we should specify how to do correlation, so I thought it would be a good idea to suggest some alternative ways of doing correlation together with their "pros and cons" so that we can, hopefully, make some type of objective decision on what, if anything, to do.  </s>
<s> Note that this problem does not apply just to correllation, but also how you identify the choreography type being performed, and the specific message (interaction) within a choreography type that a message represents - although I don't always mention this specifically in the descriptions below.  </s>
<s> So here are the five options I've thought of ... HEADER ONLY CORRELATION Put the correlation, choreography type, etc, in a header on the message (e.g. a SOAP header) Advantages: 1.  </s>
<s> Independent of the payload - works with any message format 2. Works with message payloads that do not contain any data that can be used for correlation, etc 3. Independent of the application that is processing the payload 4. Simple correlation mechanism Disadvantages: 1.  </s>
<s> If there is data in the payload that can also be used, then it might be inconsistent 2. Correlations might not be simple if there are many overlapping threads.  </s>
<s> BODY ONLY CORRELATION Use information for correlation, choreography type, etc. contained in the body of a message, e.g. an order Id in an order document.  </s>
<s> Advantages: 1. Re-uses "real" often, business derived, data.  </s>
<s> 2. No duplication or inconsistency possible Disadvantages: 1. Requires that the content and structure of the payload is understood before correlation, etc. can be done or checked 2. Ties correlation to a particular message format - means generalized correlation mechanisms can't be used 3. Requires the application does the correlation, choreography type checking etc, instead of payload-independent middleware doing instead BODY WITH HEADER REFERENCES Use information in the body (as in Body Only Correlation) but also provide "pointers" of some kind in a header (e.g. a SOAP header) which points to the where within the body the correlation information is contained.  </s>
<s> This is, I believe, the BPEL suggested approach.  </s>
<s> Advantages: 1. Potential for a generalized approach - payload-independent software can follow the references to find the data being referenced 2. Removes the need for the application to do correlation Disadvantages: 1.  </s>
<s> The different types and formats of the data being referenced and the payloads being used will significantly adds to the complexity of following message paths.  </s>
<s> 2. Probably restricted to XML payloads.  </s>
<s> For example if the payload was a PDF file then this would not work (no flames please for not requiring use of XML 3. Possible performance problems - especially if the message payloads are large.  </s>
<s> 4. Only works if the message is not encrypted.  </s>
<s> If the payload is encrypted then it might not be possible to resolve the reference BODY WITH HEADER COPY Use information in the body (as in Body Only Correlation) but this time *copy* the information from the body into a SOAP header.  </s>
<s> Advantages: 1.  </s>
<s> Independent of the message format 2. Removes the need for the application to do the correlation 3. No performance problems as payload does not need to be examined 4. The payload can be encrypted and only the data required for correlation copied to the header.  </s>
<s> Disadvantage: 1. Probably need to map the payload data (e.g. integer) to a standard external one in the header (e.g. string) 2. Duplicate data with potential for inconsistencies between the body and header versions of the correlation data BODY AND HEADER SEPARATE Use information in the body, but with separate, independently created, correlation, etc id's in the header Advantages: 1.  </s>
<s> Independent of the message format 2. No need for the application to do the correlation 3. No need to map between body and header formats 4. Same approach whether or not the body contains data that can be used for correlation 5. Header correlation information need bear no resemblance to the payload equivalent which may be encrypted 6.  </s>
<s> No performance problems as payload does not need to be examined Disadvantages: 1. Potential for inconsistencies between the header and body mechanisms for correlation 2. Does correlation twice in two different ways - in the header AND in the body.  </s>
<s> I hope I've thought of all the options - are there any more?  </s>
<s> I also hope I've covered all the advantages/disadvantages fairly - any comments?  </s>
<s> Now which is aprpoach is "best"?  </s>
<s> One of them?  </s>
<s> Some of them?  </s>
<s> All of them !!! Thoughts anyone ... I'll save mine for later ... David PS Should I copy this to the BPEL list?  </s>
<s> Director, Standards Strategy Commerce One 4440 Rosewood Drive, Pleasanton, CA 94588, USA Tel/VMail: +1 (925) 520 4422; Cell: +1 (925) 216 7704 mailto:david.burdett@commerceone.com mailto:david.burdett@commerceone.com  ; Web:  http://www.commerceone.com  </s>
<s> David, I don't think the BPEL correlation mechanism corresponds to your "body with header references" case.  </s>
<s> Assuming a SOAP binding is used, and depending on the particular SOAP binding chosen, BPEL correlation sets could correspond to "header only correlation", or "body only correlation", or a combination of the two.  </s>
<s> This is because a BPEL correlation set is a collection of Properties (globally unique names) which are individually mapped to WSDL message parts.  </s>
<s> In the case of SOAP binding, each one of those WSDL parts could end up either in the SOAP header or in the SOAP body, depending on how the binding is defined.  </s>
<s> Ugo We've been talking about whether or not we should specify how to do correlation, so I thought it would be a good idea to suggest some alternative ways of doing correlation together with their "pros and cons" so that we can, hopefully, make some type of objective decision on what, if anything, to do.  </s>
<s> Note that this problem does not apply just to correllation, but also how you identify the choreography type being performed, and the specific message (interaction) within a choreography type that a message represents - although I don't always mention this specifically in the descriptions below.  </s>
<s> So here are the five options I've thought of ... HEADER ONLY CORRELATION Put the correlation, choreography type, etc, in a header on the message (e.g. a SOAP header) Advantages: 1.  </s>
<s> Independent of the payload - works with any message format 2. Works with message payloads that do not contain any data that can be used for correlation, etc 3. Independent of the application that is processing the payload 4. Simple correlation mechanism Disadvantages: 1.  </s>
<s> If there is data in the payload that can also be used, then it might be inconsistent 2. Correlations might not be simple if there are many overlapping threads.  </s>
<s> BODY ONLY CORRELATION Use information for correlation, choreography type, etc. contained in the body of a message, e.g. an order Id in an order document.  </s>
<s> Advantages: 1. Re-uses "real" often, business derived, data.  </s>
<s> 2. No duplication or inconsistency possible Disadvantages: 1. Requires that the content and structure of the payload is understood before correlation, etc. can be done or checked 2. Ties correlation to a particular message format - means generalized correlation mechanisms can't be used 3. Requires the application does the correlation, choreography type checking etc, instead of payload-independent middleware doing instead BODY WITH HEADER REFERENCES Use information in the body (as in Body Only Correlation) but also provide "pointers" of some kind in a header (e.g. a SOAP header) which points to the where within the body the correlation information is contained.  </s>
<s> This is, I believe, the BPEL suggested approach.  </s>
<s> Advantages: 1. Potential for a generalized approach - payload-independent software can follow the references to find the data being referenced 2. Removes the need for the application to do correlation Disadvantages: 1.  </s>
<s> The different types and formats of the data being referenced and the payloads being used will significantly adds to the complexity of following message paths.  </s>
<s> 2. Probably restricted to XML payloads.  </s>
<s> For example if the payload was a PDF file then this would not work (no flames please for not requiring use of XML ! ) 3. Possible performance problems - especially if the message payloads are large.  </s>
<s> 4. Only works if the message is not encrypted.  </s>
<s> If the payload is encrypted then it might not be possible to resolve the reference BODY WITH HEADER COPY Use information in the body (as in Body Only Correlation) but this time *copy* the information from the body into a SOAP header.  </s>
<s> Advantages: 1.  </s>
<s> Independent of the message format 2. Removes the need for the application to do the correlation 3. No performance problems as payload does not need to be examined 4. The payload can be encrypted and only the data required for correlation copied to the header.  </s>
<s> Disadvantage: 1. Probably need to map the payload data (e.g. integer) to a standard external one in the header (e.g. string) 2. Duplicate data with potential for inconsistencies between the body and header versions of the correlation data BODY AND HEADER SEPARATE Use information in the body, but with separate, independently created, correlation, etc id's in the header Advantages: 1.  </s>
<s> Independent of the message format 2. No need for the application to do the correlation 3. No need to map between body and header formats 4. Same approach whether or not the body contains data that can be used for correlation 5. Header correlation information need bear no resemblance to the payload equivalent which may be encrypted 6.  </s>
<s> No performance problems as payload does not need to be examined Disadvantages: 1. Potential for inconsistencies between the header and body mechanisms for correlation 2. Does correlation twice in two different ways - in the header AND in the body.  </s>
<s> I hope I've thought of all the options - are there any more?  </s>
<s> I also hope I've covered all the advantages/disadvantages fairly - any comments?  </s>
<s> Now which is aprpoach is "best"?  </s>
<s> One of them?  </s>
<s> Some of them?  </s>
<s> All of them !!! Thoughts anyone ... I'll save mine for later ... David PS Should I copy this to the BPEL list?  </s>
<s> Director, Standards Strategy Commerce One 4440 Rosewood Drive, Pleasanton, CA 94588, USA Tel/VMail: +1 (925) 520 4422; Cell: +1 (925) 216 7704  </s>
<s> David, I would cc the bepl list just yet.  </s>
<s> They are not the only ones looking at correlation.  </s>
<s> I think we need to get a bit further down the track and then decide how best to handle the issue.  </s>
<s> We might decide we can do it all.  </s>
<s> We might decide to be more abstract and pass requirements down to another W3C group.  </s>
<s> We might find that W3C has no group looking at the problem in the way that we require it to be looked at.  </s>
<s> It's too much in the air just yet.  </s>
<s> I think a concise requirement of set of them on this topic, with use cases in support, would do much to help focus us on the issues at hand and from there to the solutions.  </s>
<s> I think what you have written is a good start on the solutions space and I can certainly imagine some use cases in support of the various options.  </s>
<s> Just my hasty (on the train comments) ;-) Cheers Steve t  </s>
<s> This email is confidential and may be protected by legal privilege.  </s>
<s> If you are not the intended recipient, please do not copy or disclose its content but delete the email and contact the sender immediately.  </s>
<s> Whilst we run antivirus software on all internet emails we are not liable for any loss or damage.  </s>
<s> The recipient is advised to run their own antivirus software.  </s>
<s> From the outside, but with my SOAP 1.2 hat on, I'd say go for a feature, i.e. SOAP header block, if this is at all possible.  </s>
<s> There is potential that your correlation header gets reused by other applications/specifications, and the only real way to achieve this is to use a SOAP header.  </s>
<s> This would also give you two extra advantages: 1) Ability to later delegate correlation processing to a separate intermediary (if that makes sense).  </s>
<s> 2) Ability to easily upgrade the correlation header in the future (new namespace, mustUnderstand).  </s>
<s> Ugo Thanks for the clarification.  </s>
<s> What you are saying is that BPEL allows correlation to be done in multiple different ways.  </s>
<s> This in turn means that in each BPEL definition you need to specify how it is going to be done.  </s>
<s> You could also have multiple different ways being used in the same BPEL definition or between partners.  </s>
<s> Is this right?  </s>
<s> I will also include this in a later version of my note once we have more feedback.  </s>
<s> Finally, do you think there is any benefit in having a standard way of doing the "header only correlation" if you want to do it.  </s>
<s> David David, I don't think the BPEL correlation mechanism corresponds to your "body with header references" case.  </s>
<s> Assuming a SOAP binding is used, and depending on the particular SOAP binding chosen, BPEL correlation sets could correspond to "header only correlation", or "body only correlation", or a combination of the two.  </s>
<s> This is because a BPEL correlation set is a collection of Properties (globally unique names) which are individually mapped to WSDL message parts.  </s>
<s> In the case of SOAP binding, each one of those WSDL parts could end up either in the SOAP header or in the SOAP body, depending on how the binding is defined.  </s>
<s> Ugo -----Original Message----- We've been talking about whether or not we should specify how to do correlation, so I thought it would be a good idea to suggest some alternative ways of doing correlation together with their "pros and cons" so that we can, hopefully, make some type of objective decision on what, if anything, to do.  </s>
<s> Note that this problem does not apply just to correllation, but also how you identify the choreography type being performed, and the specific message (interaction) within a choreography type that a message represents - although I don't always mention this specifically in the descriptions below.  </s>
<s> So here are the five options I've thought of ... HEADER ONLY CORRELATION Put the correlation, choreography type, etc, in a header on the message (e.g. a SOAP header) Advantages: 1.  </s>
<s> Independent of the payload - works with any message format 2. Works with message payloads that do not contain any data that can be used for correlation, etc 3. Independent of the application that is processing the payload 4. Simple correlation mechanism Disadvantages: 1.  </s>
<s> If there is data in the payload that can also be used, then it might be inconsistent 2. Correlations might not be simple if there are many overlapping threads.  </s>
<s> BODY ONLY CORRELATION Use information for correlation, choreography type, etc. contained in the body of a message, e.g. an order Id in an order document.  </s>
<s> Advantages: 1. Re-uses "real" often, business derived, data.  </s>
<s> 2. No duplication or inconsistency possible Disadvantages: 1. Requires that the content and structure of the payload is understood before correlation, etc. can be done or checked 2. Ties correlation to a particular message format - means generalized correlation mechanisms can't be used 3. Requires the application does the correlation, choreography type checking etc, instead of payload-independent middleware doing instead BODY WITH HEADER REFERENCES Use information in the body (as in Body Only Correlation) but also provide "pointers" of some kind in a header (e.g. a SOAP header) which points to the where within the body the correlation information is contained.  </s>
<s> This is, I believe, the BPEL suggested approach.  </s>
<s> Advantages: 1. Potential for a generalized approach - payload-independent software can follow the references to find the data being referenced 2. Removes the need for the application to do correlation Disadvantages: 1.  </s>
<s> The different types and formats of the data being referenced and the payloads being used will significantly adds to the complexity of following message paths.  </s>
<s> 2. Probably restricted to XML payloads.  </s>
<s> For example if the payload was a PDF file then this would not work (no flames please for not requiring use of XML 3. Possible performance problems - especially if the message payloads are large.  </s>
<s> 4. Only works if the message is not encrypted.  </s>
<s> If the payload is encrypted then it might not be possible to resolve the reference BODY WITH HEADER COPY Use information in the body (as in Body Only Correlation) but this time *copy* the information from the body into a SOAP header.  </s>
<s> Advantages: 1.  </s>
<s> Independent of the message format 2. Removes the need for the application to do the correlation 3. No performance problems as payload does not need to be examined 4. The payload can be encrypted and only the data required for correlation copied to the header.  </s>
<s> Disadvantage: 1. Probably need to map the payload data (e.g. integer) to a standard external one in the header (e.g. string) 2. Duplicate data with potential for inconsistencies between the body and header versions of the correlation data BODY AND HEADER SEPARATE Use information in the body, but with separate, independently created, correlation, etc id's in the header Advantages: 1.  </s>
<s> Independent of the message format 2. No need for the application to do the correlation 3. No need to map between body and header formats 4. Same approach whether or not the body contains data that can be used for correlation 5. Header correlation information need bear no resemblance to the payload equivalent which may be encrypted 6.  </s>
<s> No performance problems as payload does not need to be examined Disadvantages: 1. Potential for inconsistencies between the header and body mechanisms for correlation 2. Does correlation twice in two different ways - in the header AND in the body.  </s>
<s> I hope I've thought of all the options - are there any more?  </s>
<s> I also hope I've covered all the advantages/disadvantages fairly - any comments?  </s>
<s> Now which is aprpoach is "best"?  </s>
<s> One of them?  </s>
<s> Some of them?  </s>
<s> All of them !!! Thoughts anyone ... I'll save mine for later ... David PS Should I copy this to the BPEL list?  </s>
<s> Director, Standards Strategy Commerce One 4440 Rosewood Drive, Pleasanton, CA 94588, USA Tel/VMail: +1 (925) 520 4422; Cell: +1 (925) 216 7704 mailto:david.burdett@commerceone.com mailto:david.burdett@commerceone.com  ; Web:  http://www.commerceone.com  </s>
<s> David, Please keep in mind that BPEL does not have the concept of header vs. body.  </s>
<s> It only talks about WSDL message parts.  </s>
<s> It's only at the time when WSDL interfaces are bound to particular endpoint (which BPEL does not describe in any detail) that, depending on the binding protocol, the concepts of header vs. body might emerge.  </s>
<s> It is also conceivable that the processing model associated with headers and bodies varies depending on the binding protocol.  </s>
<s> For instance, SOAP headers have particular significance in relation to the concepts of SOAP Intermediaries and SOAP Modules.  </s>
<s> Other protocols might have processing models for headers that are different than the one in SOAP.  </s>
<s> Ugo Ugo Thanks for the clarification.  </s>
<s> What you are saying is that BPEL allows correlation to be done in multiple different ways.  </s>
<s> This in turn means that in each BPEL definition you need to specify how it is going to be done.  </s>
<s> You could also have multiple different ways being used in the same BPEL definition or between partners.  </s>
<s> Is this right?  </s>
<s> I will also include this in a later version of my note once we have more feedback.  </s>
<s> Finally, do you think there is any benefit in having a standard way of doing the "header only correlation" if you want to do it.  </s>
<s> David -----Original Message----- David, I don't think the BPEL correlation mechanism corresponds to your "body with header references" case.  </s>
<s> Assuming a SOAP binding is used, and depending on the particular SOAP binding chosen, BPEL correlation sets could correspond to "header only correlation", or "body only correlation", or a combination of the two.  </s>
<s> This is because a BPEL correlation set is a collection of Properties (globally unique names) which are individually mapped to WSDL message parts.  </s>
<s> In the case of SOAP binding, each one of those WSDL parts could end up either in the SOAP header or in the SOAP body, depending on how the binding is defined.  </s>
<s> Ugo -----Original Message----- We've been talking about whether or not we should specify how to do correlation, so I thought it would be a good idea to suggest some alternative ways of doing correlation together with their "pros and cons" so that we can, hopefully, make some type of objective decision on what, if anything, to do.  </s>
<s> Note that this problem does not apply just to correllation, but also how you identify the choreography type being performed, and the specific message (interaction) within a choreography type that a message represents - although I don't always mention this specifically in the descriptions below.  </s>
<s> So here are the five options I've thought of ... HEADER ONLY CORRELATION Put the correlation, choreography type, etc, in a header on the message (e.g. a SOAP header) Advantages: 1.  </s>
<s> Independent of the payload - works with any message format 2. Works with message payloads that do not contain any data that can be used for correlation, etc 3. Independent of the application that is processing the payload 4. Simple correlation mechanism Disadvantages: 1.  </s>
<s> If there is data in the payload that can also be used, then it might be inconsistent 2. Correlations might not be simple if there are many overlapping threads.  </s>
<s> BODY ONLY CORRELATION Use information for correlation, choreography type, etc. contained in the body of a message, e.g. an order Id in an order document.  </s>
<s> Advantages: 1. Re-uses "real" often, business derived, data.  </s>
<s> 2. No duplication or inconsistency possible Disadvantages: 1. Requires that the content and structure of the payload is understood before correlation, etc. can be done or checked 2. Ties correlation to a particular message format - means generalized correlation mechanisms can't be used 3. Requires the application does the correlation, choreography type checking etc, instead of payload-independent middleware doing instead BODY WITH HEADER REFERENCES Use information in the body (as in Body Only Correlation) but also provide "pointers" of some kind in a header (e.g. a SOAP header) which points to the where within the body the correlation information is contained.  </s>
<s> This is, I believe, the BPEL suggested approach.  </s>
<s> Advantages: 1. Potential for a generalized approach - payload-independent software can follow the references to find the data being referenced 2. Removes the need for the application to do correlation Disadvantages: 1.  </s>
<s> The different types and formats of the data being referenced and the payloads being used will significantly adds to the complexity of following message paths.  </s>
<s> 2. Probably restricted to XML payloads.  </s>
<s> For example if the payload was a PDF file then this would not work (no flames please for not requiring use of XML ! ) 3. Possible performance problems - especially if the message payloads are large.  </s>
<s> 4. Only works if the message is not encrypted.  </s>
<s> If the payload is encrypted then it might not be possible to resolve the reference BODY WITH HEADER COPY Use information in the body (as in Body Only Correlation) but this time *copy* the information from the body into a SOAP header.  </s>
<s> Advantages: 1.  </s>
<s> Independent of the message format 2. Removes the need for the application to do the correlation 3. No performance problems as payload does not need to be examined 4. The payload can be encrypted and only the data required for correlation copied to the header.  </s>
<s> Disadvantage: 1. Probably need to map the payload data (e.g. integer) to a standard external one in the header (e.g. string) 2. Duplicate data with potential for inconsistencies between the body and header versions of the correlation data BODY AND HEADER SEPARATE Use information in the body, but with separate, independently created, correlation, etc id's in the header Advantages: 1.  </s>
<s> Independent of the message format 2. No need for the application to do the correlation 3. No need to map between body and header formats 4. Same approach whether or not the body contains data that can be used for correlation 5. Header correlation information need bear no resemblance to the payload equivalent which may be encrypted 6.  </s>
<s> No performance problems as payload does not need to be examined Disadvantages: 1. Potential for inconsistencies between the header and body mechanisms for correlation 2. Does correlation twice in two different ways - in the header AND in the body.  </s>
<s> I hope I've thought of all the options - are there any more?  </s>
<s> I also hope I've covered all the advantages/disadvantages fairly - any comments?  </s>
<s> Now which is aprpoach is "best"?  </s>
<s> One of them?  </s>
<s> Some of them?  </s>
<s> All of them !!! Thoughts anyone ... I'll save mine for later ... David PS Should I copy this to the BPEL list?  </s>
<s> Director, Standards Strategy Commerce One 4440 Rosewood Drive, Pleasanton, CA 94588, USA Tel/VMail: +1 (925) 520 4422; Cell: +1 (925) 216 7704  </s>
<s> Dear David et al, Are you familiar with and have you considered the UN/CEFACT ATG work on a Generic Header?  </s>
<s> (Not necessarily recommending, just suggesting you might take a look if you are not already familiar with this work.) Best Regards, Tony Tony Fletcher Technical Advisor Choreology Ltd. 68, Lombard Street, London EC3V 9L J UK Mobile: Web: http://www.choreology.com/  </s>
<s> www.choreology.com  </s>
<s> CohesionsT Business transaction management software for application coordination Work: tony.fletcher@choreology.com Home: amfletcher@iee.org  </s>
<s> On Behalf Of Burdett, David We've been talking about whether or not we should specify how to do correlation, so I thought it would be a good idea to suggest some alternative ways of doing correlation together with their "pros and cons" so that we can, hopefully, make some type of objective decision on what, if anything, to do.  </s>
<s> Note that this problem does not apply just to correllation, but also how you identify the choreography type being performed, and the specific message (interaction) within a choreography type that a message represents - although I don't always mention this specifically in the descriptions below.  </s>
<s> So here are the five options I've thought of ... HEADER ONLY CORRELATION Put the correlation, choreography type, etc, in a header on the message (e.g. a SOAP header) Advantages: 1.  </s>
<s> Independent of the payload - works with any message format 2. Works with message payloads that do not contain any data that can be used for correlation, etc 3. Independent of the application that is processing the payload 4. Simple correlation mechanism Disadvantages: 1.  </s>
<s> If there is data in the payload that can also be used, then it might be inconsistent 2. Correlations might not be simple if there are many overlapping threads.  </s>
<s> BODY ONLY CORRELATION Use information for correlation, choreography type, etc. contained in the body of a message, e.g. an order Id in an order document.  </s>
<s> Advantages: 1. Re-uses "real" often, business derived, data.  </s>
<s> 2. No duplication or inconsistency possible Disadvantages: 1. Requires that the content and structure of the payload is understood before correlation, etc. can be done or checked 2. Ties correlation to a particular message format - means generalized correlation mechanisms can't be used 3. Requires the application does the correlation, choreography type checking etc, instead of payload-independent middleware doing instead BODY WITH HEADER REFERENCES Use information in the body (as in Body Only Correlation) but also provide "pointers" of some kind in a header (e.g. a SOAP header) which points to the where within the body the correlation information is contained.  </s>
<s> This is, I believe, the BPEL suggested approach.  </s>
<s> Advantages: 1. Potential for a generalized approach - payload-independent software can follow the references to find the data being referenced 2. Removes the need for the application to do correlation Disadvantages: 1.  </s>
<s> The different types and formats of the data being referenced and the payloads being used will significantly adds to the complexity of following message paths.  </s>
<s> 2. Probably restricted to XML payloads.  </s>
<s> For example if the payload was a PDF file then this would not work (no flames please for not requiring use of XML 3. Possible performance problems - especially if the message payloads are large.  </s>
<s> 4. Only works if the message is not encrypted.  </s>
<s> If the payload is encrypted then it might not be possible to resolve the reference BODY WITH HEADER COPY Use information in the body (as in Body Only Correlation) but this time *copy* the information from the body into a SOAP header.  </s>
<s> Advantages: 1.  </s>
<s> Independent of the message format 2. Removes the need for the application to do the correlation 3. No performance problems as payload does not need to be examined 4. The payload can be encrypted and only the data required for correlation copied to the header.  </s>
<s> Disadvantage: 1. Probably need to map the payload data (e.g. integer) to a standard external one in the header (e.g. string) 2. Duplicate data with potential for inconsistencies between the body and header versions of the correlation data BODY AND HEADER SEPARATE Use information in the body, but with separate, independently created, correlation, etc id's in the header Advantages: 1.  </s>
<s> Independent of the message format 2. No need for the application to do the correlation 3. No need to map between body and header formats 4. Same approach whether or not the body contains data that can be used for correlation 5. Header correlation information need bear no resemblance to the payload equivalent which may be encrypted 6.  </s>
<s> No performance problems as payload does not need to be examined Disadvantages: 1. Potential for inconsistencies between the header and body mechanisms for correlation 2. Does correlation twice in two different ways - in the header AND in the body.  </s>
<s> I hope I've thought of all the options - are there any more?  </s>
<s> I also hope I've covered all the advantages/disadvantages fairly - any comments?  </s>
<s> Now which is aprpoach is "best"?  </s>
<s> One of them?  </s>
<s> Some of them?  </s>
<s> All of them !!! Thoughts anyone ... I'll save mine for later ... David PS Should I copy this to the BPEL list?  </s>
<s> Director, Standards Strategy Commerce One 4440 Rosewood Drive, Pleasanton, CA 94588, USA Tel/VMail: +1 (925) 520 4422; Cell: +1 (925) 216 7704 mailto:david.burdett@commerceone.com ; Web: http://www.commerceone.com  </s>
<s> In BPEL, there is no where in the incoming message indicating where to locate the correlation information.  </s>
<s> If the process instance specifying the correlation in its receive activity, then the BPEL engine will be able to know where to look for the correlation information according to the correlationSet definition in the containing scope .  </s>
<s> Rgds, Ricky  </s>
<s> Perhaps we can ground this discussion by thinking about how a choreography would be implemented.  </s>
<s> As I see it, we have three possible approaches to implementation: 1. Have choreography-aware services.  </s>
<s> If you're building on top of existing standards, then I believe this means that correlation information belongs in the message body and is interpreted by the services.  </s>
<s> This approach means that only choreography-aware applications can participate but does allow building on top of existing standards.  </s>
<s> 2. Use a choreography-aware "proxy" that interprets choreography information and invokes appropriate choreography-oblivious services to realise the choreography semantics.  </s>
<s> This proxy could use either header (assuming extensible headers) or body information, although body information would need to be stripped before passing onwards.  </s>
<s> I suspect this is where the majority of David's thoughts lie.  </s>
<s> 3. Use a choreography-aware infrastructure with services built/generated explicitly for that infrastructure.  </s>
<s> In this case, correlation belongs in the message header and would typically be interpreted by an engine/proxy on behalf of the services (this is the approach I use in my work).  </s>
<s> The second and possibly the first are required for compatibility with existing service infrastructures.  </s>
<s> I believe the latter is our future.  </s>
<s> I don't think we should be excluding any.  </s>
<s> Given this and other discussion, I don't think that the CDL should specify how correlation is achieved: it belongs in the technology bindings.  </s>
<s> Ciao, AndyB  </s>

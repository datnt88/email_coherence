<s> In the current Advanced Collections specification, the 409 (Conflict) status code is used for cases where the server cannot perform the client's request  </s>
<s> to place a resource at a specific position in a collection because the  </s>
<s> collection is unordered.  </s>
<s> In my opinion, this is a good case for introducing a new status code, say 425 (Unordered Collection).  </s>
<s> 409 is a sub-optimal choice because this status code is used by many existing WebDAV methods, as well as new methods in the advanced collections specification, for non-ordering related problems.  </s>
<s> Since a client can, if it knows the error is the result of the collection not being ordered, simply re-submit the request without the Position header, having this case clearly separated from other 409 cases would give the client this option.  </s>
<s> I'm not sure whether this code should also be used for other positioning errors (such as trying to place a resource after one that doesn't exist).  </s>
<s> I'm tending to think it should not.  </s>
<s> - Jim  </s>
<s> sounds OK to me.  </s>
<s> Jim Whitehead ejw@ics.uci.edu on 05/12/99 02:08:43 PM  </s>
<s> Please respond to ejw@ics.uci.edu  </s>
<s> Subject: New status code: unordered collection In the current Advanced Collections specification, the 409 (Conflict) status code is used for cases where the server cannot perform the client's request  </s>
<s> to place a resource at a specific position in a collection because the  </s>
<s> collection is unordered.  </s>
<s> In my opinion, this is a good case for introducing a new status code, say 425 (Unordered Collection).  </s>
<s> 409 is a sub-optimal choice because this status code is used by many  </s>
<s> existing WebDAV methods, as well as new methods in the advanced collections specification, for non-ordering related problems.  </s>
<s> Since a client can, if it knows the error is the result of the collection not being ordered, simply re-submit the request without the Position header, having this case clearly separated from other 409 cases would give the client this option.  </s>
<s> I'm not sure whether this code should also be used for other positioning errors (such as trying to place a resource after one that doesn't exist).  </s>
<s> I'm tending to think it should not.  </s>
<s> - Jim  </s>
<s> There are relatively few error codes and we should be very hesitant before  </s>
<s> handing out new ones.  </s>
<s> I think 409 is a good error code for this situation  </s>
<s> but obviously more data is needed.  </s>
<s> We should provide that additional data  </s>
<s> either as a header in the 409 response or in the body.  </s>
<s> If we are going to use the body then we do the world a great favor if we can come up with a single format so that multiple, independent, error conditions can be described.  </s>
<s> The most likely choice is XML but XML has a problem.  </s>
<s> It is  </s>
<s> illegal for an XML document to have more than one root.  </s>
<s> This means that if I want to return two error conditions in a single response which were created by two unrelated groups I can't return them in a single XML document because they have different roots.  </s>
<s> Therefore we seem to have three choices: 1 - Don't use XML.  </s>
<s> Nice thought but probably impractical for reasons that market marketoids heart's glow bright red. 2 - Use MIME Multipart to include multiple independent XML documents This will work but doesn't it just seem such a waste to have to  </s>
<s> throw in MIME multipart processing just because the XML guys made a silly  </s>
<s> mistake? 3 - Invent a global root element I'm a big fan of this solution.  </s>
<s> Let's just invent some universal root element (how about root ?) and declare that ALL XML returned in WebDAV  </s>
<s> error codes MUST go inside this element.  </s>
<s> Now we can throw in as many  </s>
<s> independent XML documents as we want and not have to worry about the single  </s>
<s> root problem.  </s>
<s> If we feel like being really neighborly we can even present  </s>
<s> this solution to other groups and maybe get all IETF XML to be put inside this element.  </s>
<s> Just a thought, Yaron  </s>
<s> I will be very boring here, and just agree vigorously with everything Yaron said.  </s>
<s> In particular, I believe Yaron's preference (choice three) is far superior to the alternatives.  </s>
<s> As for the default root name, I'd probably tend towards body myself (after all, it is the body of the response).  </s>
<s> Cheers, Geoff From: Yaron Goland yarong@microsoft.com  </s>
<s> There are relatively few error codes and we should be very hesitant before  </s>
<s> handing out new ones.  </s>
<s> I think 409 is a good error code for this situation  </s>
<s> but obviously more data is needed.  </s>
<s> We should provide that additional data  </s>
<s> either as a header in the 409 response or in the body.  </s>
<s> If we are going to use the body then we do the world a great favor if we can come up with a single format so that multiple, independent, error conditions can be described.  </s>
<s> The most likely choice is XML but XML has a problem.  </s>
<s> It is  </s>
<s> illegal for an XML document to have more than one root.  </s>
<s> This means that if I want to return two error conditions in a single response which were created by two unrelated groups I can't return them in a single XML document because they have different roots.  </s>
<s> Therefore we seem to have three choices: 1 - Don't use XML.  </s>
<s> Nice thought but probably impractical for reasons that market marketoids heart's glow bright red. 2 - Use MIME Multipart to include multiple independent XML documents This will work but doesn't it just seem such a waste to have to  </s>
<s> throw in MIME multipart processing just because the XML guys made a silly  </s>
<s> mistake? 3 - Invent a global root element I'm a big fan of this solution.  </s>
<s> Let's just invent some universal root element (how about root ?) and declare that ALL XML returned in WebDAV  </s>
<s> error codes MUST go inside this element.  </s>
<s> Now we can throw in as many  </s>
<s> independent XML documents as we want and not have to worry about the single  </s>
<s> root problem.  </s>
<s> If we feel like being really neighborly we can even present  </s>
<s> this solution to other groups and maybe get all IETF XML to be put inside this element.  </s>
<s> Just a thought, Yaron  </s>
<s> That sounds incredibly ambitious, but I like the general idea of a root-element for errors.  </s>
<s> It would be sufficient to limit ourselves to defining a root just for errors, so that we could do: 450 Misc.  </s>
<s> Error HTTP/1.1 blah: blah Of course, defining what error codes this would work on, sufficiently carefully in order to preserve true interoperability, sounds difficult... ah, if we could just do everything.  </s>
<s> Lisa  </s>
<s> Well, the reason 409 doesn't work well here is that it's used for several conditions, some of which the client can recover from by resumbitting the request, and some it should not.  </s>
<s> Um, I just want to ship the Adv.  </s>
<s> Col. specification.  </s>
<s> Since you yourself immortalized the phrase, "the spec's not ready till there's nothing left to cut", I hope you'll understand the desire to reduce the scope.  </s>
<s> neighborly  </s>
<s> we can even present this solution to other groups and maybe get all IETF  </s>
<s> XML  </s>
<s> to be put inside this element.  </s>
<s> Since, as you point out, this work might have applicability beyond just WebDAV, this suggests to me that it should be addressed in a separate Internet-Draft, perhaps even leading to a new WG. - Jim  </s>
<s> The problem is that the argument you make for allowing this new code is recursive.  </s>
<s> The next group will come and say they want to just ship and can't we wait to solve this number problem until the next group and so on and so on.  </s>
<s> We have to draw the line somewhere and I think the advanced collection spec is a fine place to draw that line.  </s>
<s> Yaron  </s>
<s> From: Jim Whitehead [mailto:ejw@ics.uci.edu]  </s>
<s> Sent: Tue, May 18, 1999 2:24 PM Subject: RE: New status code: unordered collection  </s>
<s> throw in as many independent XML documents as we want and  </s>
<s> worry about the single root problem.  </s>
<s> If we feel like being really  </s>
<s> we can even present this solution to other groups and maybe  </s>
<s> to be put inside this element.  </s>
<s> I agree.  </s>
<s> Besides, this shouldn't hold up the AdvCol spec too long, should it?  </s>
<s> It's fairly simple to specify (admittedly, it adds a little extra work to the client implementation; but not much--you've got to have an XML parser anyway).  </s>
<s> If we wind up doing a common root element, I like Lisa's DAV:errors element.  </s>
<s> |John Stracke | My opinions are my own | S/MIME &amp; HTML OK | |francis@ecal.com|============================================| |Chief Scientist | NT's lack of reliability is only surpassed | |eCal Corp. | by its lack of scalability.  </s>
<s> -- John Kirch |  </s>

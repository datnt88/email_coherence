<s> It includes the response to the Schema WG on the base64 type and my proposal for exclusive canonicalization.  </s>
<s> (The proposal might have a bug, and might be too "implementation specific" but that's because if something like that worked, that's how I would implement it with a few lines of code!  </s>
<s> smile/ .  </s>
<s> If it's decent, it can probably be generalized...) IETF W3C XML Signature WG 2001-July-30 Chairs: Donald Eastlake and Joseph Reagle Note Taker: Joseph Reagle [ascii] Participants * John M. Boyer, PureEdge * Blake Dournee, RSA * Donald Eastlake, Motorola * Merlin Hughes, Baltimore * Joseph Reagle, W3C * Angela Shi, RSA Status of documents  5 minutes Will request a Proposed REC review from W3C Director shortly (assuming base64 schema data type is satisfactorily resolved.) Base64 Datatype We receieved a response from the Schema WG, with four questions: 1.  </s>
<s> The base64Binary type has no line length restriction on its lexical forms.  </s>
<s> Response: Agree.  </s>
<s> 2. The lexical form of base64Binary data can contain any of the 65 characters in the "Base64 Alphabet", plus any characters recognized by the XML spec as whitespace.  </s>
<s> Response: Agree 3. Are XML Schema processors expected to enforce the rules about equals-signs and character count which are implicit in RFC 2045?  </s>
<s> Response: someone has to do it, all things being equal (assuming not too much of a burden on schema and recognizing applications that don't use schema validation will still have to check) we prefer schema enforce this. 4. what is the canonical form for base64Binary values?  </s>
<s> Respose: Option A: 76 characters from the base64 alphabet, then a newline sequence; repeat as needed; last line of more than 0, less than 76 characters, also terminated by newline sequence, XML Processing Model (XSLT and Schema) Reagle: Are people ok with Suggested additions to 3.0 Processing Rules section.  </s>
<s> Hughes, will look at it, but no one has any problems yet.  </s>
<s> Exclusive Canonicalization Reagle: I propose the requirement it be as or faster (or no more complex) than Canonical XML.  </s>
<s> (Discussion on whether the original position of the namespace declaration is available in the XPath data model: no).  </s>
<s> Boyer: the present processing requires you to look down as well.  </s>
<s> Hughes: does it in two passes  </s>
<s> ACTION Hughes: post data on performance of canonicalization versus parsing, and Canonical XML and Exclusive Canonicalization as presently specified.  </s>
<s> (Reagle: we might be barking up the wrong tree, might not be able to make it that much faster.)  </s>
<s> Eastlake: in present proposal, should we elevate the namespace appearence to the highest place possible?  </s>
<s> Boyer: that sounds costly.  </s>
<s> ACTION Reagle: write proposal akin to:  </s>
<s> 1. Create an empty ancestor_ns_stack of empty list of (prefix,value) pairs.  </s>
<s> 2. Canonicalize Element.  </s>
<s> 1.  </s>
<s> If element in subset.  </s>
<s> 2. Print it out it out 1. Render the start/endtags and element name.  </s>
<s> 2. In the start tag 1. Render the attributes.  </s>
<s> (No need to find ancestor xml:foo attributes).  </s>
<s> 2. For every namespace node in use within that element (by the element or its attributes) or within UnsuppressedNamespacePrefixList: 1.  </s>
<s> If the namespace nodes (prefix,value) is not in list on top of the ancestor_ns_stack then: Render the namespace node declaration using the prefix and namespace URI. 3. Append the list of rendered nodes to the list.  </s>
<s> 4. Push list on stack.  </s>
<s> 3. Do the children 4. Pop the ancestor_ns_stack Joseph Reagle Jr. http://www.w3.org/People/Reagle/ W3C Policy Analyst mailto:reagle@w3.org  </s>
<s> IETF/W3C XML-Signature Co-Chair http://www.w3.org/Signature W3C XML Encryption Chair http://www.w3.org/Encryption/2001/  </s>
<s> I've implemented [1] the proposal by creating an additional function _utilized that returns true for a given namespace node in an element (that is in the subset) if: 1.  </s>
<s> It's in the unsuppressedPrefixList 2. The element node.prefix is equal to the nsnode prefix.  </s>
<s> 3.  </s>
<s> Any attribute prefix is equal to the nsnode prefix.  </s>
<s> Then I add another conditional to the decision to render to see if it's been utilized.  </s>
<s> This is on the same order of magnitude as inclusive (an extra function call with 3 conditionals and a loop through the attributes), but doesn't require any look ahead in the document.  </s>
<s> It also keeps namespace declarations closer to where they're used.  </s>
<s> [1] http://dev.w3.org/cvsweb/2001/xmlsec-python/c14n.py?rev=1.10&amp;content-type=text/x-cvsweb-markup  </s>
<s> The following examples are evaluated with '(//.  </s>
<s> | //@* | //namespace::*)[ancestor-or-self::e7]'  </s>
<s> over a variant of example 3. e5 a:attr="out" b:attr="sorted" attr2="all" attr="I'm" xmlns:b="http://www.ietf.org"  </s>
<s> xmlns:a="http://www.w3.org" xmlns="http://example.org"/  </s>
<s> The inclusive canonical form is (note e7 exhibits xmlns:foo, and e9 exhibits xmlns:a): e7 xmlns="http://www.ietf.org"  </s>
<s> xmlns:a="http://www.w3.org" xmlns:foo="http://ww w.bar.org"  </s>
<s> The exclusive canonical form is (no xmlns:foo): If I remove the attribute a:foo, and instead qualify element e8: The exclusive canonical form is: Joseph Reagle Jr. http://www.w3.org/People/Reagle/ W3C Policy Analyst mailto:reagle@w3.org  </s>
<s> IETF/W3C XML-Signature Co-Chair http://www.w3.org/Signature W3C XML Encryption Chair http://www.w3.org/Encryption/2001/  </s>
<s> r/reagle@w3.org/2001.07.30/14:31:25  </s>
<s> Algorith \ Document size | 1.5KB | 18KB | 902KB non-validated parsing | 1.0 | 1.0 | 1.0 c14n | .44 | 0.52 | 0.84 exclusive c14n | .48 | 0.69 | 1.58 reaglonicalization | .36 | 0.42 | 0.82 Times down a column are measured relative to the parsing time; times across a row are independent; the large documents were quite repetitious.  </s>
<s> All the values are, of course, meaningless, except to possibly conclude that Reaglonicalization may be an acceptable substitute for Exclusive Canonicalization that fits Joseph's desired parameters (no slower than regular c14n).  </s>
<s> Merlin Baltimore Technologies plc will not be liable for direct, special, indirect or consequential damages arising from alteration of the contents of this message by a third party or as a result of any virus being passed on.  </s>
<s> In addition, certain Marketing collateral may be added from time to time to promote Baltimore Technologies products, services, Global e-Security or appearance at trade shows and conferences.  </s>
<s> This footnote confirms that this email message has been swept by Baltimore MIMEsweeper for Content Security threats, including computer viruses.  </s>

Hello All! 
I would like to clarfiy the question with the default namespace local name in C14N specificaion. 
The section 2.2 says (third bullet) that default namespace node xmlns="..." has an no (empty?) local name: An element's namespace nodes are sorted lexicographically by local name (the default namespace node, if one exists, has no local name and is therefore lexicographically least). 
And in the same time, section 3.2 ("Namespace Nodes" bullet) states that default namespace has local name "xmlns": Otherwise, process the namespace node */N/* in the same way as an attribute node, 
except assign the local name |xmlns| to the default namespace node if it exists (in XPath, the default namespace node has an empty URI and local name). 
Since the local names are used for namespace nodes sorting, this creates 
an interop issue because the namespaces nodes order would be different if default namespace node has empty or "xmlns" local name. 
And actually this issue was raised as an interop problem between XML Security Library and Python: Please note, that all examples in C14N specification (see element e5/ in example 3.3 and element e1/ in exmaple 3.7) and all interop tests for C14N itself and XMLDSig assume that default namespace node has an empty local name. 
Thus I also assume that this is the correct reading of the spec. 
Probably it would be a good idea to make a note about this issue in errata and may be clarify section 3.2. 
With best regards, Aleksey Sanin XML Security Library http://www.aleksey.com/xmlsec 
Hi Aleksey, The section that has the remark you don't like is 2.3, not 3.2. 
Section 2.2 identifies the information set derived from the input. 
Section 2.3 provides the processing model that says what to write out based on that information set. 
Specifically, the 'namespace nodes' bullet point you don't like is in a context which says "The text generated for a node is dependent on the node type and given in the following list:". 
Taken in this context, the bullet point seems to make sense. 
The bullet point is not intended to be taken out of context and moved to the prior section where the sorting of the input is described. 
For the purpose of output, we assign the local name 'xmlns' because it would be clearly wrong to output for the default namespace attribute an empty string followed by an equal sign and a quoted URI. 
Further, the text you quoted even clarifies what is going on by reminding the reader that, on input, the XPath data model uses an empty string for the local name. 
John Boyer, Ph.D. Senior Product Architect and Research Scientist PureEdge Solutions Inc. 
The issue here is not that the text is wrong, but that it can be made more explicit. 
I'll note that I got it wrong (and I've done two implementation of C14N and EXC-C14N), as did Joseph, who helped with the Python implementation that is referenced on the W3C web page. 
It may be as simple as adding "recall that" inside the parenthetical about XPath that appears in the bullet. 
Or changing the parenthetical that appears at the end of 2.3 to explicitly reference XPath. 
If you feel it's not worth it, then oh well: at least this thread is now in the searchable open literature. 
/r$ Rich Salz, Chief Security Architect DataPower Technology http://www.datapower.com 
XS40 XML Security Gateway http://www.datapower.com/products/xs40.html 
XML Security Overview http://www.datapower.com/xmldev/xmlsecurity.html 
Hi, John! 
Your explanation makes perfect sense and this is exactly how I understood the spec when I wrote the code. 
However, in both sections (sorry for 2.3 - 3.2 confusion :) ) we are talking about "local name of the default namespace node" and this might confuse people. 
Thisis why I think that it would probably be a good idea to put your explanation in the eratra and clearly state that section 2.2 describes local name for default namespace node for sorting purposes and section 2.3 says how to render local name for default namespace node. 
Aleksey Sanin XML Security Library http://www.aleksey.com/xmlsec 
Hi Rich and Aleksey, It couldn't hurt to add a clarification. 
Given the way it was read, if I were to write the sentence again now, it would seem that the best fix would be to change '...except assign the local name xmlns to the default namespace node...' to '...except write xmlns for the local name xmlns of the default namespace node if it exists...' Rich's suggestion to add 'recall that' to the parenthetic would also help. 
Up to now, Joseph has graciously helped with getting a clarification added (I don't have access to modify the errata document). 
Joseph, are you still able to do this? 
Thanks, John Boyer Hi, John! 
Your explanation makes perfect sense and this is exactly how I understood the spec when I wrote the code. 
However, in both sections (sorry for 2.3 - 3.2 confusion :) ) we are talking about "local name of the default namespace node" and this might confuse people. 
Thisis why I think that it would probably be a good idea to put your explanation in the eratra and clearly state that section 2.2 describes local name for default namespace node for sorting purposes and section 2.3 says how to render local name for default namespace node. 
Aleksey Sanin XML Security Library http://www.aleksey.com/xmlsec 
I believe Jose Kahan (copied) has now assumed Joseph's responsibilities wrt XML Signature. 
Regards, Ed 
Ed Simon (613) 726-9645 XMLsec Inc. Interested in XML Security Consulting and Training services? 
Visit "www.xmlsec.com". 
Now available! 
"Web Services Security" published by Osborne (ISBN 0072224711) 
Hi Rich and Aleksey, It couldn't hurt to add a clarification. 
Given the way it was read, if I were to write the sentence again now, it would seem that the best fix would be to change '...except assign the local name xmlns to the default namespace node...' 
to '...except write xmlns for the local name xmlns of the default namespace node if it exists...' Rich's suggestion to add 'recall that' to the parenthetic would also help. 
Up to now, Joseph has graciously helped with getting a clarification added (I don't have access to modify the errata document). 
Joseph, are you still able to do this? 
Thanks, John Boyer -----Original Message----- Hi, John! 
Your explanation makes perfect sense and this is exactly how I understood the spec when I wrote the code. 
However, in both sections (sorry for 2.3 - 3.2 confusion :) ) we are talking about "local name of the default namespace node" and this might confuse people. 
Thisis why I think that it would probably be a good idea to put your explanation in the eratra and clearly state that section 2.2 describes local name for default namespace node for sorting purposes and section 2.3 says how to render local name for default namespace node. 
Aleksey Sanin XML Security Library http://www.aleksey.com/xmlsec 
Hello, Ed, thanks for heads-up. 
I had not read the mail in this mailing list recently. 
I've to learn what's the correct procedure for updating the errate from the Procedure document and then I'll apply the changes. 
I will write back the list to tell you if I ran into problems or just to say that it has been done. 
I'm a bit busy right now, so I don't expect to do this before next week. 
Hope it can wait. 
-jose (still learning all these new tasks) 
Thanks for agreeing about a clarification, and I like your wording. 
/r$ Rich Salz, Chief Security Architect DataPower Technology http://www.datapower.com 
XS40 XML Security Gateway http://www.datapower.com/products/xs40.html 
XML Security Overview http://www.datapower.com/xmldev/xmlsecurity.html 
Hello John, Sorry for the delay. 
I can now add the errata. 
I suppose we're talking about [1]. 
Could you give me more context or a more complete text to add? 
For example, quoting the section of the spec and also giving the type of errata (I guess this is an editorial one). 
[1] http://www.w3.org/2002/07/xml-exc-c14n-errata 

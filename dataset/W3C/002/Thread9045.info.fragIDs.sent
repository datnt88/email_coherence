<s> The following XPath expressions are invalid according to XPath 1.0.  </s>
<s> We can not add a predicate to '('...')'.  </s>
<s> REC-xml-c14n-20010315: 2.1(//.  </s>
<s> | //@* | //namespace::*)[not(self::comment())] 3.7(//.  </s>
<s> | //@* | //namespace::*) self::ietf:e1 or (parent::ietf:e1 and not(self::text() or self::e2)) or count(id("E3")|ancestor-or-self::node()) = count(ancestor-or-self::node()) CR-xml-exc-c14n-20020212: 2.1(//.  </s>
<s> | //@* | //namespace::*)[ancestor-or-self::n1:elem1] 2.2(//.  </s>
<s> | //@* | //namespace::*)[ancestor-or-self::n1:elem2] In general, (//.  </s>
<s> | //@* | //namespace::*)[expr] must be (//.[expr] | //@*[expr] | //namespace::*[expr]) TAMURA Kent @ Tokyo Research Laboratory, IBM  </s>
<s> Hi Kent,  </s>
<s> Perhaps you are using an implementation that is not functioning properly.  </s>
<s> Your general complaint is that the following is illegal: '(' Expr ')' '[' PredicateExpr ']' The parse sequence below illustrates the legality of this XPath  </s>
<s> expression.  </s>
<s> Note that the XPath language is rooted by BNF rule #14.  </s>
<s> For each transformation, the notation -nn- means that BNF rule nn was used to get from the left hand side to the right hand side.  </s>
<s> Expr -14- OrExpr -21- AndExpr -22- EqualityExpr -23- RelationalExpr -24- AdditiveExpr -25- MultiplicativeExpr -26- UnaryExpr -27- UnionExpr -18- PathExpr -19- FilterExpr -20- FilterExpr Predicate -20- PrimaryExpr Predicate -15- '(' Expr ')' Predicate -08- '(' Expr ')' '[' PredicateExpr ']' From here it is easy to see that Expr can expand to //. | //@* | //namespace::* and that PredicateExpr can expand to things like not(self::comment()). Regards, John Boyer.  </s>
<s> Ph.D. Senior Product Architect PureEdge Solutions Inc.  </s>
<s> The following XPath expressions are invalid according to XPath 1.0.  </s>
<s> We can not add a predicate to '('...')'.  </s>
<s> REC-xml-c14n-20010315: 2.1(//.  </s>
<s> | //@* | //namespace::*)[not(self::comment())] 3.7(//.  </s>
<s> | //@* | //namespace::*) self::ietf:e1 or (parent::ietf:e1 and not(self::text() or self::e2)) or count(id("E3")|ancestor-or-self::node()) = count(ancestor-or-self::node()) CR-xml-exc-c14n-20020212: 2.1(//.  </s>
<s> | //@* | //namespace::*)[ancestor-or-self::n1:elem1] 2.2(//.  </s>
<s> | //@* | //namespace::*)[ancestor-or-self::n1:elem2] In general, (//.  </s>
<s> | //@* | //namespace::*)[expr] must be (//.[expr] | //@*[expr] | //namespace::*[expr]) TAMURA Kent @ Tokyo Research Laboratory, IBM  </s>
<s> In message "RE: XPath errors in specifications"  </s>
<s> I understand.  </s>
<s> Xalan-J 2.3 throws errors against such expressions and I overlooked [20] in the XPath 1.0.  </s>
<s> Thanks.  </s>
<s> TAMURA Kent @ Tokyo Research Laboratory, IBM  </s>

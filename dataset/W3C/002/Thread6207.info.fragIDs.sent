<s> Sandra, We still have the following problems... ibm/not-wf/P32/ibm32n09.xml still says: !DOCTYPE animal SYSTEM "ibm32i09.dtd"  </s>
<s> [ but it needs to say: !DOCTYPE animal SYSTEM "ibm32n09.dtd"  </s>
<s> [  </s>
<s> There is also the following problem discovered by the Xerces parser that I am not sure how to solve.  </s>
<s> Output Tests: ibm-valid-P28-ibm28v02.xml ibm-valid-P29-ibm29v01.xml ibm-valid-P29-ibm29v02.xml ibm-valid-P57-ibm57v01.xml ibm-valid-P58-ibm58v01.xml ibm-valid-P58-ibm58v02.xml ibm-valid-P70-ibm70v01.xml  </s>
<s> Xerces resolves and returns the complete path of systemIds for notation decls, where as the actual outputs do not and can not contain complete resolved paths for systemIds.  </s>
<s> Xerces appears to behave in accordance with the SAX API...  </s>
<s> notationDecl If a system identifier is present, and it is a URL, the SAX parser must resolve it fully before passing it to the application through this event.  </s>
<s> I am not sure what we can do at this point to support expected  </s>
<s> results files for documents that have absolute path names in  </s>
<s> their infoset.  </s>
<s> Does anyone have any thoughts or suggestions for how this issue can be addressed?  </s>
<s> Otherwise, I think that we would need to remove the expected results files for these tests.  </s>
<s> Regards, Glenn  </s>
<s> I will take care of the first one.  </s>
<s> Sandra  </s>
<s> Sandra I. Martinez National Institute of Standards and Technology 100 Bureau Drive, Stop 8970, Gaithersburg, Md.  </s>
<s> 20899 (301) 975-3579 sandra.martinez@nist.gov  </s>
<s> One thing that I should have mentioned is that SAX is certainly inconsistant with the Infoset specification on this point given this description from Notation information item: 2. [system identifier] The system identifier of the notation, as it appears in the declaration of the notation, without any additional URI escaping applied by the processor.  </s>
<s> If no system identifier was specified, this property has no value.  </s>
<s> However, if most people are testing conformance using the SAX API and the SAX implementations are "correct" then we cannot  </s>
<s> get the correct infoset to test expected results conformance.  </s>
<s> One idea that came to me would be to add a new attribute to the test suite descriptions similar to NAMESPACE that could be used by a SAX based test harness to identify those tests that cannot be compared with the expected output.  </s>
<s> Best Regards, Glenn  </s>
<s> The definition of the canonical forms (sun/cxml.html)  </s>
<s> specifies that the shortest possible relative URI should be output.  </s>
<s> This is inconsistent with the infoset - which is the way it is to allow for catalogues and redirection - but should be easily derivable from the value SAX returns.  </s>
<s> Why is this a problem now?  </s>
<s> Surely the test harnesses must have made this work in earlier releases?  </s>
<s> -- Richard  </s>
<s> My understanding is that the change to the Xerces parser to conform to the SAX API in this respect was relatively recent.  </s>
<s> It certainly was the case that when I last ran the conformance suite against Xerces myself this was not a problem, but that would have been about a year ago.  </s>
<s> I have long thought the SAX API is broken in this regard.  </s>
<s> Unless we want to change the Infoset spec and break the ability to do proper catalog resolution, I think we should leave things as is and have a note that says that people who use a tool that uses the broken SAX API will get different results.  </s>
<s> And we should tell the Xerces folks that their  </s>
<s> parser is broken.  </s>
<s> After all, that is what a test suite is for, isn't it?  </s>
<s> paul  </s>
<s> I agree that the test suite should not be changed.  </s>
<s> This isn't a parser API test, nor is it an infoset implementation test.  </s>
<s> The test suite requires a particular format, and the fact that it doesn't match what SAX returns merely means that the SAX test harness has to do some extra work.  </s>
<s> -- Richard  </s>

<s> 2518 is at best ambiguous, and a worst, contradictory on this topic.  </s>
<s> I would vote for (a) property not found.  </s>
<s> (b) is a possible interpretation, but an empty value violates the DTD for this property.  </s>
<s> The comment about "mandatory properties" in section 7.4 is not very useful, because "mandatory properties" is never defined in 2518.  </s>
<s> (c) violates the requirement in 8.1 that missing property errors be reported (d) is just obviously wrong (:-).  </s>
<s> Cheers, Geoff Hey everyone...  </s>
<s> The following posting about four months ago was not answered.  </s>
<s> Do we have an answer?  </s>
<s> Is this a general problem for properties?  </s>
<s> Let's hear what you think... BTW... I'd like to mention, but not necessarily recommend an option.  </s>
<s> See (d) below.  </s>
<s> Hi, if for some reason a server doesn't have one of these timestamps for a resource, what should it report on PROPFIND for these properties?  </s>
<s> a) Property not found (HTTP 404), b) Empty property (this seem to be backed by the wording in section 7.4 [1], but is reported as error by Adobe GoLive, c) Property silently suppressed (not reported at all) -- this seems to work with GoLive.  </s>
<s> d) Return a fixed but not correctly supported value.  </s>
<s> For example, always respond with 1/1/1990.  </s>
<s> In addition, how should the server behaviour upon a PROPFIND/propname on this resource?  </s>
<s> Julian  </s>
<s> Why would that be a violation?  </s>
<s> Well, there always is that question about whether foo /foo is a node with no children, or a node with a single empty string child.  </s>
<s> Since section 2.4 of the xml spec says: "All text that is not markup constitutes the character data of the document", and since I do not consider "nothing" to be "text", I go with the interpretation that says foo /foo contains no character data, and therefore does not match a #PCDATA declaration.  </s>
<s> Cheers, Geoff  </s>
<s> Why would that be a violation?  </s>
<s> Geoff, as far as I can tell, PCDATA is defined in: where it says: [Definition: An element type has mixed content when elements of that type may contain character data, optionally interspersed with child elements.]  </s>
<s> In this case, the types of the child elements may be constrained, but not their  </s>
<s> order or their number of occurrences: Note the "may".  </s>
<s> Besides, this would mean that with DTDs you can't have elements that are restricted to arbitrary text content, but may not be empty.  </s>
<s> This is clearly not the case.  </s>
<s> Finally: in doubt, try it with a validating parser.  </s>
<s> Yes, I'd agree that this clearly supports Julian's position that an empty element of the form " a /a " matches a #PCDATA DTD declaration.  </s>
<s> So I modify my rejection of choice b (i.e. returning an empty element) to be: The definition of DAV:creationdate states: "If present, it contains a timestamp of the moment when the resource was created".  </s>
<s> An empty value does not meet this requirement (although one could debate the meaning of "present").  </s>
<s> Cheers, Geoff Geoff, as far as I can tell, PCDATA is defined in: where it says: [Definition: An element type has mixed content when elements of that type  </s>
<s> may contain character data, optionally interspersed with child elements.]  </s>
<s> In this case, the types of the child elements may be constrained, but not their order or their number of occurrences: Note the "may".  </s>
<s> Besides, this would mean that with DTDs you can't have elements that are restricted to arbitrary text content, but may not be empty.  </s>
<s> This is clearly not the case.  </s>
<s> Finally: in doubt, try it with a validating parser.  </s>
<s> OK, so what's your suggestion then?  </s>
<s> a) or c)?  </s>
<s> My rationale for rejecting (c) was: "(c) violates the requirement in 8.1 that missing property errors be reported" So that leaves (a) as my choice for the most consistent interpretation of 2518.  </s>
<s> Cheers, Geoff OK, so what's your suggestion then?  </s>
<s> a) or c)?  </s>
<s> If mod_dav's backend repository does not support the property, then it operates according to (a) already (return a 404).  </s>
<s> I think that makes the most sense (obviously :-), and would continue to vote for that option.  </s>
<s> Cheers, -g  </s>
<s> Greg Stein, http://www.lyra.org/  </s>
<s> (I've seen the whole thread on this topic; this just seems to be the most appropriate message to respond to...)  </s>
<s> Amen.  </s>
<s> So do I.  </s>
<s> Actually I believe this language in section 7.4 is causing problems all over the place, and should become an issue in its own right (unless it's already in the lock-null resource issues elsewhere).  </s>
<s> As far as I can tell, it's the only place where the notion of "having no value" is suggested as a possibly different from and preferable to "not existing".  </s>
<s> The problem is this language ...Additionally the lock-null resource MUST have defined on it all mandatory DAV properties.  </s>
<s> Most of these properties, such as all the get* properties, will have no value as a lock-null resource does not support the GET method.  </s>
<s> First of all, as Geoff points out, there is no definition of "mandatory" properties anywhere.  </s>
<s> Second, this offhand "MUST have defined on it all mandatory DAV properties" is really bad language for a spec: the lock-null resource is either a resource (in which case the spec says elsewhere what MUST be true about it) or it's not (in which case this section should say explicitly how it MUST behave).  </s>
<s> Finally, the sentence starting "Most of these properties..." contradicts the example in 8.1.2, where a resource that doesn't support GET explicitly doesn't have the get* properties.  </s>
<s> I very much think the phrase "will have no value" was simply a think-o, and was meant to mean "will not be present on the resource".  </s>
<s> I really think we need to exorcise this language from the spec, and if we do there's no reason that I can see not to have (a) be the proper response when a specific property that's not present is asked for by name.  </s>
<s> This includes creationdate, which says in its description: The creationdate property should be defined on all DAV compliant resources.  </s>
<s> If present, it contains a timestamp of the moment when the resource was created (i.e., the moment it had non- null state).  </s>
<s> dan P.S. Yes I know that my own company's products are not consistent in their notions of what responses are appropriate for "mandatory" properties.  </s>
<s> But I don't think this paticular one is an issue where backwards-compatibility concerns should block fixing this ambiguity/self-contraduction in the spec: it may just be that older clients (some of which are Adobe's) will complain (hopefully not break) until they get upgraded.  </s>
<s> -d.  </s>
<s> P.P.S.  </s>
<s> I know there was discussion about the "empty vs. missing" property issue earlier, at least on dav-dev, but I don't have access to the archives right now.  </s>
<s> Do we have an issue about this already?  </s>
<s> -d.  </s>

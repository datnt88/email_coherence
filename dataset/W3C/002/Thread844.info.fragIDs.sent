<s> Hi, I've got a problem tidying a html document when trying to output as xml.  </s>
<s> The problem is that a form is started in a table after the first tr but before that tr 's first td .  </s>
<s> Hence the following errors and warning.  </s>
<s> line 183 column 25 - Warning: missing /form before /td  </s>
<s> line 427 column 17 - Error: discarding unexpected /form line 498 column 9 - Error: discarding unexpected /form The HTML snippet looks like this: There are now several more tr s each with lots of td s and all of which start and end correctly.  </s>
<s> Finally the problem bit ends with: You will notice that form ends in apparently the correct position, that being before the /tr which, in turn is correctly placed before the /table .  </s>
<s> The problem seems to be the starting point of the form being before the first td .  </s>
<s> How can I make this get tidied.  </s>
<s> -- I am stuck!!  </s>
<s> Thanks guys, regards,  </s>
<s> ..matthew  </s>
<s> No, it isn't correct.  </s>
<s> Move form to precede table and /form to follow /table  </s>
<s> Thanks.  </s>
<s> I just worked this out a few minutes before your email arrived, but my problem is that I need to Tidy a lot of these pages - too many to do manually.  </s>
<s> Does anyone know how I can get HTML Tidy to tidy this without having to change it manually?  </s>
<s> What options could I use?  </s>
<s> Or, since I don't actually need any of the data in the forms, how I can remove them?  </s>
<s> Any other ideas?  </s>
<s> BTW: There are in fact 3 tables in the document that incorrectly have form after the start of table .  </s>
<s> Many thanks and regards, ..matthew  </s>
<s> * Matthew Stanfield [Wed, 11/06/2003 at 15:41 +0100]  </s>
<s> If your tags are on the same line, use sed sed s! table form ! form table !g else use awk.  </s>
<s> You can even remove the breakline between end and begin tags and use sed.  </s>
<s> It is a bit "brute force", but it should work.  </s>
<s> Jany  </s>
<s> Thanks.  </s>
<s> I believe sed and awk are UNIX commands.  </s>
<s> I use HTML Tidy in some screen scraping software I've written.  </s>
<s> The html is downloaded and tidied into xml using tidied using Charles Reitzel's .net  </s>
<s> Wrapper for HTML Tidy,  </s>
<s> then I run some xslt on the xml to extract the useful information.  </s>
<s> I don't want to have to run an extra non-tidy routine to tidy my data.  </s>
<s> Is there no way to achieve what I want from within Tidy?  </s>
<s> Thanks guys and regards, ..matthew  </s>
<s> Tidy does its best but it is too dangerous for it move the form start and end tags arbitrarily.  </s>
<s> To do that would require a much more in depth understanding of how a given page works.  </s>
<s> This problem is why it makes sense to allow form fields to directly reference the form rather than rely on being within a form element.  </s>
<s> This is one of the benefits of XForms.  </s>
<s> We just didn't realize the issue back in 1993 :-( Dave Raggett dsr@w3.org  </s>
<s> W3C lead for voice and multimodal.  </s>
<s> Thanks for the info.  </s>
<s> Dave.  </s>
<s> One possible way around this problem for me would be to remove all form tags, is there a way to tell Tidy to do this?  </s>
<s> All I really need is to get valid xml outputted.  </s>
<s> So if I could simply tell Tidy not to process form... and /form tags then I'd be sorted even if the input tags remained making the output invalid html -- I just want valid xml.  </s>
<s> Is this or something like it possible?  </s>
<s> If not I'm going to have to write my own supplementary tidy routine to do this.  </s>
<s> :-( Many thanks for your help everyone, regards,  </s>
<s> ..matthew  </s>
<s> PS. Dave -- Thanks for creating Tidy, it is very useful to me, and I appreciate your placing it in the public domain a lot.  </s>
<s> You could fairly easily modify Tidy to strip the form start and end tags, but this isn't a feature of the current code base as is.  </s>
<s> Dave Raggett dsr@w3.org  </s>
<s> W3C lead for voice and multimodal.  </s>
<s> Concerning there's a heuristic which sometimes help: 1. if there is a start-tag X inside an element E ... and X is not allowed inside E but E is allowed inside X and X is allowed inside E's parent then move X to just before E ... 2. if there is an end-tag /X inside an element E ... and X is not allowed inside E -- these two conditions but E is allowed inside X -- imply that X is not E and X is (now) E's parent then replace /X by /E /X E and flag the new E as generated by Tidy. 3. if you find E /E where E was generated by Tidy, quietly remove both E and /E .  </s>
<s> In the table/form case, we get * and rule 3 then quietly erases table /table  </s>
<s> The Word-2000 option helps to tidy an htm file generated by Microsoft Word.  </s>
<s> Is there any way I can similarly clean up an Excel generated htm file?  </s>
<s> Thanks, Sailesh  </s>
<s> Does `--force-output yes` help?  </s>

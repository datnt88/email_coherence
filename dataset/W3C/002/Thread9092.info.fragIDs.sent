Sorry to revive a dead topic, but it's been pointed out to me that the answer I received on this list might be erroneous. 
If anyone could quickly answer the following yes/no questions as well, I would appreciate it. 
Based on my readings of the specs (XML, Namespaces, XMLDSIG), my answers are in square brackets. 
1) Is it required that the Signature element have a namespace node with a value of "http://www.w3.org/2000/09/xmldsig#"? [No if the XML need only be well-formed and Yes otherwise] 
Yes. The Signature element must be bound to that namespace. 
This can look like this: Signature xmlns="http://www.w3.org/2000/09/xmldsig#"  ... /Signature ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
... /ds:Signature 
or even doc xmlns:ds="http://www.w3.org/2000/09/xmldsig#" ds:Signature .... /ds:Signature /doc In the latter case, there is no DOM node (no 'Attribute') in the ds:Signature element, but the namespace is in scope. 
I understand both of these example, in which the namespace is 
eitehr explicitly declared in the Signature element or inherited, 
but the XML DSIG DTD states the following: !ATTLIST Signature xmlns CDATA #FIXED 'http://www.w3.org/2000/09/xmldsig#' Id ID #IMPLIED 
And #FIXED means that if the xmlns is omitted, it will take the value of 
specified above. 
This would lead me to believe that the xmlns attribute 
does NOT explicitly need to be included or inherited. 
Although this does 
disturb me. 
Can anyone set me straight? 
Thanks! Terence 
--On Monday, September 30, 2002 8:05 AM -0700 "Spielman, Terence" 
If anyone could quickly answer the following yes/no questions as well, I would appreciate it. 
Based on my readings of the specs (XML, Namespaces, XMLDSIG), my answers are in square brackets. 
1) Is it required that the Signature element have a namespace node with a value of "http://www.w3.org/2000/09/xmldsig#"? [No if the XML need only be well-formed and Yes otherwise] 
Yes. The Signature element must be bound to that namespace. 
This can look like this: Signature xmlns="http://www.w3.org/2000/09/xmldsig#"  ... /Signature ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
... /ds:Signature 
or even doc xmlns:ds="http://www.w3.org/2000/09/xmldsig#" ds:Signature .... /ds:Signature /doc In the latter case, there is no DOM node (no 'Attribute') in the ds:Signature element, but the namespace is in scope. 
I guess that there is a bit confusion between the XML Information Set and the serialized form of XML: Given a document which does *not* explicitly 
specify the xmlns="http://www.w3.org/2000/09/xmldsig#" in a Signature 
element. 
If you parse this document, the namespace NODE *is* there, even if you don't see it in the serialized form (which is only octets). 
But the node (in the XPath data model) MUST be there. 
My personal opinion is that it's a bad idea to omit namespace declarations from an XML instance and to hope that the gaps are filled by a validating parser. 
Omitting things (like default attributes) and then creating signatures is not that nice, because a signature should be explicit on what was signed. 
The DTD above is included in the dsig spec as during the creation of this spec, schemas were not fully finished. 
Christian 
To reswap in the context, I went back and had a look at this thread: and the answers still seem reasonable, but let's have a look! 
smile/ 
1) Is it required that the Signature element have a namespace node with a value of "http://www.w3.org/2000/09/xmldsig#"? [No if the XML need only be well-formed and Yes otherwise] 
I agree with Christian that (1) the abstract representation (XPath/Information Set) item will always be associated with the namespace, and (2) that it isn't good to rely upon implicit defaults. 
However, one qualification on the XML Schema point. 
While we started out using a DTD, we did migrate to using schema's (because of these and related problems with DTDs) and, as the REC says, the schema is normative, not the DTD. 
We wanted to clearly place these element types in a namespace, but we didn't want to dicate exactly *where* those declarations have to appear. 
(For example, to accomodate your example in which the declaration appears in a ancestor). 
The best way we could represent this in the DTD was to use #FIXED. 
So the intent is to explicitly have the namespace explicitly somewhere in the hierarchy. 
OK, thanks! 
Terence 
From: Joseph Reagle [mailto:reagle@w3.org] 
Sent: Monday, September 30, 2002 11:48 AM 'w3c-ietf-xmldsig@w3.org' Subject: Re: Question on canonicalization and namespaces 
1) Is it required that the Signature element have a namespace node with a value of "http://www.w3.org/2000/09/xmldsig#"? [No if the XML need only be well-formed and Yes otherwise] 
Christian: Excellent point. 
As you point out, the presence of the xmlns attribute in the Signature element in the Information Set vs the serialized version means different things. 
If it happens to be ommited in the serialized (marshalled) XML, that does NOT exlude it from the Information Set. 
Although I agree the ommission would be considered a poor practice. 
Regardless, the presence or absence in the serialization is irrelevant in the context of the actual signature since the Signature element is not actually hashed, only the canonical version of the SignedInfo is subject to the crypto. 
Thanks for making me realize that my question was one primarily of style and not cryptographic significance! 
-Terence 
If anyone could quickly answer the following yes/no questions as well, I would appreciate it. 
Based on my readings of the specs (XML, Namespaces, XMLDSIG), my answers are in square brackets. 
1) Is it required that the Signature element have a namespace node with a value of "http://www.w3.org/2000/09/xmldsig#"? [No if the XML need only be well-formed and Yes otherwise] 
ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
... /ds:Signature 
or even doc xmlns:ds="http://www.w3.org/2000/09/xmldsig#" ds:Signature .... /ds:Signature /doc In the latter case, there is no DOM node (no 'Attribute') in the ds:Signature element, but the namespace is in scope. 

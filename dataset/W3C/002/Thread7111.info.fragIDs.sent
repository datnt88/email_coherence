<s> re I've been trying to nail down why I'm uneasy about this, and I think, in the end, that it is because the fragment identifiers proposed are not very robust against changes to the document.  </s>
<s> Perhaps this should even be a general principal for the design of fragment identifiers.  </s>
<s> With HTML, the location of A/name nodes is relatively robust, since they label the context.  </s>
<s> I don't think char= or line= are robust, and match='s robustness depends on the regular expression.  </s>
<s> The document doesn't really include any motivating examples, so I'm stuck with examples in my mind where one might want to make a reference to a text document and call out "section 7 of internet-draft blah"; doing so with a regular expression -- reliably -- is hard.  </s>
<s> Yet I have trouble imagining applications that really need 'char=' or even 'line=' without any matching capabilities.  </s>
<s> See, for example, Phelps &amp; Wilensky on 'robust hyperlinks and locations':  </s>
<s> Larry  </s>
<s> Larry Masinter scripsit:  </s>
<s> There's a tradeoff between robustness and the ability to point into frozen documents where the author has not politely scattered lots of ids for you.  </s>
<s> That's why XPointer supports both ids and Xanadu-style tumblers as the simple cases, along with the super-duper-XPath version that isn't yet ready for prime time.  </s>
<s> Real FORTRAN programmers can program FORTRAN John Cowan in any language.  </s>
<s> --Allen Brown jcowan@reutershealth.com  </s>
<s> I don't see what the tradeoff is, actually.  </s>
<s> The idea for pointing into 'frozen' documents without IDs is to supply context.  </s>
<s> This has been common practice in finding locations in plain text files for decades (`man patch`).  </s>
<s> The 'patch' command has been pretty reliable, in my experience, in figuring out where to apply a patch even when the original source file has been edited.  </s>
<s> So why shouldn't text/plain fragment identifiers employ some of the same mechanisms?  </s>
<s> A line number plus some bits of context would be useful; I don't see the use of character counts or general regular expressions, at least for the applications I can imagine.  </s>
<s> Larry  </s>
<s> Larry Masinter scripsit:  </s>
<s> I like that use of backquotes in plain text for incorporating something by reference!  </s>
<s> Diff format works for patches because there is no real need for pointers: adding highly verbose context (one or more lines) is only a small cost compared to the new content itself.  </s>
<s> Here we are trying to capture a location in a document that will fit into reasonable expectations about the size of URI references.  </s>
<s> Regular expressions are well-supported by libraries almost everywhere, and can be much more condensed than context lines.  </s>
<s> The basic advantage of character counts is that they are fast to compute and fast to reference, and would be handy for pointing into documents like RFCs that are truly and forever frozen.  </s>
<s> After fixing the Y2K bug in an application: John Cowan WELCOME TO censored jcowan@reutershealth.com DATE: MONDAK, JANUARK 1, 1900 http://www.ccil.org/~cowan  </s>
<s> Please do not consider line numbers a candidate form of matchable, here.  </s>
<s> The domain that 'patch' is applied to is nothing like (much more standardized than) the space of natural language texts that we need this to work with.  </s>
<s> Yes, but that class of documents represents a tiny fraction of the corpus we need to be able to index into.  </s>
<s> What are the mechanisms that introduce variation in character counts, and how often will they develop skew in routine handling of text/* data?  </s>
<s> claim: What we do has to work for marked text and plain text.  </s>
<s> At least in the lexicon application, what we need is something that finds unmarked points in the text inside a markup-language document-instance.  </s>
<s> A major domain of application for references into un-XML text is to merge comments on prior texts that originated in email.  </s>
<s> The text commented on will appear in different wrappings in different sources that were used as the basis for commenting.  </s>
<s> The original un-flowed message, the flowed digest version of the listserv that the message was addressed to, an HTML document from a web archive of the listserv, a reply to a message that quotes the text in question, Comments posted to a Wiki site initialized with the list archive, etc. Line numbers in something that the commentor has as plain text are unreliably associated with anything that the originator of the text felt was meaningful, outside of poetry where we a) can step up to XML markup or b) use enough [streaming] text context so that the pointing is effective without benefit of reference to line ends.  </s>
<s> Line number comparisons will lead to wrong results just too often for us to put any dependency on that mechanism.  </s>
<s> Character counts are only applicable in documents that have been [standardized] fit for digital signature.  </s>
<s> Yes, they are risky.  </s>
<s> IMHO too risky.  </s>
<s> And so are line numbers.  </s>
<s> One of the functions that we in W3C/WAI/PF are searching for is the right, widely understood, form of just-fuzzy-enough matching of terms in text so that a glossary entry, for example, can be matched to instances of the defined term without marking the instances.  </s>
<s> This is of interest both for pronunciation and interpretation aids or hints.  </s>
<s> One of the things that the third-party tool industry [which includes 'Assistive Technology' as used by the Access Board in the Section 508 regs] needs from the Internet is that XQuery/XPath, VoiceBrowserLexicon, LearningDisabledPictionaryLink, and WhereItSaysReferences[1] into plain text not all go off in different directions on the form and levels of this string-matching functionality.  </s>
<s> I believe that whatever we do with "where it says" URI-references should work a lot like what one would do when passing a friend a searchPattern.  </s>
<s> One of the terms in the search pattern would be a sequence of words in quotes so as to be matched as a consecutive word sequence.  </s>
<s> This would be unique in the document of interest.  </s>
<s> To this one would add a few more terms which are atypically common in the document, after the manner of the 'Robust Hyperlinks' work[2].  </s>
<s> These are added to the search pattern until the document of interest reliably appears at the head of the "quality of match ordered" list.  </s>
<s> That's the search-pattern version.  </s>
<s> In the presence of some more efficient key for a plain text scope such as ftp://ftp.ietf.org/rfc/rfc2822.txt  </s>
<s> ...the latter group of uniquifying search keys would be suppressed in deference to the scoping/locating URI.  </s>
<s> What we need is once again, as for references to time-range-delimited slices of temporal-media objects, is something that works like standard fieldnames for use in search patterns in search URIs.  </s>
<s> If our string-matching-for-whereItSays-location doesn't work much as it does in Internet search services, our users will be royally confused.  </s>
<s> Al [1] [2] http://www.cs.berkeley.edu/~phelps/Robust/papers/RobustHyperlinks.html  </s>

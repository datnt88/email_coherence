<s> Hi all, I'm Gino Tesei and I'm new both this mailing list and XML Signature Technology.  </s>
<s> I'm sorry in advance for possible technical inaccuracies.  </s>
<s> I'd like to have your opinions about the maturity of XML Signature Technology for real big projects with very strict legal reaquirements.  </s>
<s> Just two words to introduce a possible business scenario &amp; some functional requirements.  </s>
<s> Let say that the "big" Bank (BB) want to publish a set of services (Web Services) for "smaller" (SS) banks, for a set of business reasons.  </s>
<s> For instance, in our SOA conceptual model a possible service can be Pay with Credit Card  in cc_num .  </s>
<s> SS's customers have, hence, the possibility of paying with a their (normal) credit card, but SS don't communicate directly with Credit Card providers for all finer grained services to implement the above function (e.g. "is such a number a valid &amp; correct CC card number?" or "is such a valid CC card number related to the given customer?"), but use BB as "a proxy" service provider.  </s>
<s> Obviously, such a service will be not free :) ... Now, in order to get the non-repudiation capability we have to handle signatures.  </s>
<s> Possible options are handling signatures at application level (e.g. using J2SE support) or using XML Signature.  </s>
<s> Both solutions can work but (Applic Level) developers have to write code by their hands to handle digests, signatures, certs, ... it's suitable having a self made framework ... new business partners have to agree to such a "self made standard", ... (XML Signature) developers use a (Java?) implemetation of standard ... no a self made framework is required ... new business partners agree to XML Signature ... It's obvious that if XML Signature is mature enough (implementations robust, easy to use, integrated with IDEs or dev frameworks such as J2SE ... ) the latter is the best solution ...  </s>
<s> What's your opinion about such issues?  </s>
<s> What's new in six months?  </s>
<s> Thanks in advance.  </s>
<s> Gino Tesei Gino Tesei Senior Consultant Ekar - Altran Group Via G. Modena, 10 - 20129 MILANO, ITALY  </s>
<s> Hi Gino, My first impression to your question would be: "Why choose XML Signature to begin with?"  </s>
<s> XML Signature is great for situations where XML data must be selectively  </s>
<s> signed based on XML document  </s>
<s> subsets.  </s>
<s> The situation that you have described doesn't immediately point to a multi-hop signing environment with multiple intermediate signers.  </s>
<s> Alternatively, if you are in a situation where you want to authenticate function calls (e.g. a 'true' XML-based Web Service enviornment), you are 'stuck' with the W3C XML Signature in some form another (either the raw standard itself or its use in WS-Security Core).  </s>
<s> What types of document artifacts do you need to authenticate?  </s>
<s> Are these function call 'representations' or documents of some format?  </s>
<s> Of all the XML Security standards, XML Signature is certainly the most mature, but there are some important security concerns to be careful of, especially with regards to transformations.  </s>
<s> Blake Dournaee Senior Architect Sarvega, Inc.  </s>
<s> Gino, Of all the XML Security standards, XML DSIG is the oldest; it is also the cornerstone of almost all the others (e.g., WS-Security, signed SAML assertions, etc.)  </s>
<s> XML DSIG is being used in the real world for real financial transactions.  </s>
<s> For example RouteOne is doing online auto loan  </s>
<s> applications for some of the world's biggest auto manufacturers, and using XML DSIG to make binding commitments between lendor and customer.  </s>
<s> Their web site is http://www.routeone.com,  </s>
<s> although the site doesn't show that they're actually in production and they are; more details are available at Many vendors have XML DSIG libraries, and there are some open source packages in (at least) C and Java.  </s>
<s> These libraries don't free the application program of all the details -- securing keys, for example, is often a big concern.  </s>
<s> Several companies (mine included; see URLs below) have network devices that add XML security features as either a true network device, or a set of software running as a software proxy.  </s>
<s> XML DSIG, as supported by WS-Security (i.e., signing SOAP messages) is the way to go.  </s>
<s> There are still security issues (implementation, implications of canonicalization, etc.) that will need some analysis  </s>
<s> on your side.  </s>
<s> In six months, toolkits will be widespread, companies  </s>
<s> like mine will be more popular, and WS-I will have a draft profile that offers solid interop guidance on WS-Security and XML DSIG.  </s>
<s> Also, in the greater Boston area it will be cloudy with a chance of rain and temperatures around 68 Fahrenheit.  </s>
<s> :) Hope this helps.  </s>
<s> /r$ Rich Salz Chief Security Architect DataPower Technology http://www.datapower.com  </s>
<s> XS40 XML Security Gateway http://www.datapower.com/products/xs40.html  </s>
<s> XML Security Overview http://www.datapower.com/xmldev/xmlsecurity.html  </s>
<s> I would say 3D-Secure is a prime example of widely used protocol based on  </s>
<s> XML-Signature.  </s>
<s> Since 3D-Secure is all about credit-card processing, you  </s>
<s> might want to take a look at it.  </s>
<s> One can extend 3D-Secure to support the kind of transaction you described.  </s>
<s> Timeline might be a little longer than six months, but direct hardware support for 3D-Secure is coming.  </s>
<s> For example, a chip that can parse, encrypt, decrypt, canonicalize, sign, and validate XML would be very useful as well as marketable since the market has started to realize that XML/Crypto combo throw a wrench into Google-like approaches to scalability.  </s>
<s> Best, Don Park  </s>
<s> I thought about that, but unfortunately because they tag one of their "id" attributes as CDATA, and don't use legal ID-style naming.  </s>
<s> Therefore, while 3D-Secure is *very close* to XML DSIG, it's not conformant.  </s>
<s> :(  </s>
<s> /r$ Rich Salz Chief Security Architect DataPower Technology http://www.datapower.com  </s>
<s> XS40 XML Security Gateway http://www.datapower.com/products/xs40.html  </s>
<s> XML Security Overview http://www.datapower.com/xmldev/xmlsecurity.html  </s>
<s> I think that is just a bug in the 3D-Secure DTD which was pulled out of the spec before it was published.  </s>
<s> As to why anyone would generate invalid ID, I  </s>
<s> have no idea.  </s>
<s> Don Park  </s>
<s> From: Rich Salz [mailto:rsalz@datapower.com] Sent: Saturday, October 18, 2003 6:35 PM Subject: RE: How much XML Signature is mature?  </s>
<s> It was not pulled out.  </s>
<s> It's in the current official spec you can download from Visa's website.  </s>
<s> Moreover, I know that several people (including myself) contacted Visa guys about this  </s>
<s> problem but the response basically was "we don't care".  </s>
<s> As to why anyone would generate invalid ID, I have no idea.  </s>
<s> I haven't seen the code that does this but I bet that it generates N random bytes, base64 encodes them and result string is called "ID attribute".  </s>
<s> Of course, such strings could not be used as ID  </s>
<s> attributes (may start with number, may contain '+', etc.).  </s>
<s> Aleksey Sanin XML Security Library http://www.aleksey.com/xmlsec  </s>
<s> It's actual a slightly subtle point.  </s>
<s> It's disappointing; they refuse to fix it.  </s>
<s> /r$ Rich Salz Chief Security Architect DataPower Technology http://www.datapower.com  </s>
<s> XS40 XML Security Gateway http://www.datapower.com/products/xs40.html  </s>
<s> XML Security Overview http://www.datapower.com/xmldev/xmlsecurity.html  </s>
<s> I must have missed that.  </s>
<s> I think they care to a degree, but they probably decided that it wasn't important enough to change the spec at this point since most 3D-Secure implementations do not use validating parsers.  </s>
<s> They should have issued a  </s>
<s> 'heads-up' message to implementers so the problem can be contained for future fix though.  </s>
<s> If so, then I think there might have been some security concern raised that mandated use of random IDs.  </s>
<s> If so, then they should have at least replaced ID and IDREF in the DTD with CDATA.  </s>
<s> Don Park  </s>
<s> I am not sure I understand your point about validating parsers.  </s>
<s> The reason why there are resrtrictions for ID attributes are exactly the same as why there are restrictions for the variable names in all known to me programming languages.  </s>
<s> ID attribute might be included in a complex XPath/XPointer expression  </s>
<s> and you have to be able to understand what "123+123" means: is it "123" + "123" or this is an ID attribute.  </s>
<s> Aleksey  </s>
<s> I would re-phrase this a little bit: 3D-Secure specs are *very close* to XML, it's not conformant.  </s>
<s> Aleksey  </s>
<s> While I understand your point, ID syntax is a validation constraint, not a well-formedness constraint.  </s>
<s> 3D-Secure specs are *very close* to XML, it's not conformant.  </s>
<s> Please explain what you mean by "very close" and "not conformant" in more detail.  </s>
<s> As far as I know 3D-Secure is well-formed XML so you must have a different definition of what XML is.  </s>
<s> Best, Don Park  </s>
<s> 3D-Secure specs are *very close* to XML, it's not conformant.  </s>
<s> What I meant is that not only XML DSig but several other specs including XPath and XInclude  </s>
<s> were also broken by 3D Secure.  </s>
<s> Aleksey  </s>
<s> In other words, interop doesn't matter as long as you comply with their spec.  </s>
<s> That's a lousy attitude.  </s>
<s> If I weren't in polite company, I'd use a more fecal term.  </s>
<s> :)  </s>
<s> That's what they did -- their attribute is defined as CDATA.  </s>
<s> But then they use that attribute as the target of a dsig:Reference/@URI attribute, and that's non-conformant.  </s>
<s> According to the XPointer spec, "barewards" must be XML ID's, not XML CDATA.  </s>
<s> Several of us took a bit of time to explain this, including pointing to the relevant specs.  </s>
<s> They're attitude is "oh, well."  </s>
<s> Or, less charitably "too bad."  </s>
<s> It's a fairly small fix, just limiting the alphabet used to generate the attributes, and their unwillingness to fix it is surprising.  </s>
<s> Perhaps you could also mention this to them -- your voice might get more attention then some others.  </s>
<s> And you might want to mention to the hardware folks you alluded to that they should be careful about burning non-complaince into their silicon.  </s>
<s> :) Perhaps they could accept broken signatures, but makes sure that the reference targets they generate are compliant as XML ID attributes.  </s>
<s> /r$ Rich Salz Chief Security Architect DataPower Technology http://www.datapower.com  </s>
<s> XS40 XML Security Gateway http://www.datapower.com/products/xs40.html  </s>
<s> XML Security Overview http://www.datapower.com/xmldev/xmlsecurity.html  </s>
<s> I agree with that statement.  </s>
<s> Best, Don Park  </s>
<s> Unfortunately, I no longer have direct influence on the 3D-Secure protocol and don't know who their XML expert is at this point.  </s>
<s> Re hardware folks, I'll do what I can but I can't promise I'll jump up and down over this.  </s>
<s> IMHO, these issues are of little importance to Visa, issuers, and merchants because there are not enough incentives for them to correct these problems  </s>
<s> at this time.  </s>
<s> Why in the world would a merchant want to pull down their system for even ten minutes so XML experts can sleep at night?  </s>
<s> Yes, I am guilty of having a bad attitude.  </s>
<s> Maybe I got infected...  </s>
<s> Best, Don Park  </s>
<s> If you think that all possible code to support 3D Secure is already done and nobody working on this these days then you are wrong.  </s>
<s> Just search xmlsec library mailing list and see how many guys run into this problem in the last couple months.  </s>
<s> And as someone pointed out, the security implications of this error are not clear.  </s>
<s> Anyway, I think that Visa can invent *any* protocol they want.  </s>
<s> The only problem I have is that they state that this protocol is based on XML, XPath, XInclude, XML DSig and so on.  </s>
<s> As we already agreed, this is not the case.  </s>
<s> They just need to remove mention of XML DSig from their papers and  </s>
<s> everyone would be happy :)  </s>
<s> Aleksey Sanin XML Security Library http://www.aleksey.com/xmlsec  </s>
<s> Because maybe they'd like to avoid vendor lock-in?  </s>
<s> Because maybe, e.g., they'd like standard MSFT .NET tools to be able to verify 3DSecure signatures?  </s>
<s> Or IBM Websphere?  </s>
<s> Etc... /r$ Rich Salz Chief Security Architect DataPower Technology http://www.datapower.com  </s>
<s> XS40 XML Security Gateway http://www.datapower.com/products/xs40.html  </s>
<s> XML Security Overview http://www.datapower.com/xmldev/xmlsecurity.html  </s>
<s> Why did they use XML to begin with?  </s>
<s> Don, scratch Rich's suggestion -- why don't you just tell them to base64-encode SET, wrap it in some angle-brackets, and carry on as before.  </s>
<s> ;-) What the hell is the point of using XML specs if you don't intend it to interoperate?  </s>
<s> As someone who already has hardware that does XML crypto, I'm unimpressed that special breaking of the standard is required for either hardware support or security.  </s>
<s> Aleksey, actually, that's a good suggestion -- maybe the W3C would like to take this up?  </s>
<s> To the original questioner, this whole thread should provide much-needed confirmation that XML DSIG is so mature, that a whole bunch of people are already cranky about some implementations not being properly compliant, and others have had time to develop a bad attitude.  </s>
<s> That's a mark of a mature standard!  </s>
<s> \\ Eugene Kuznetsov, Chairman &amp; CTO \\ eugene@datapower.com  </s>
<s> \\ DataPower Technology, Inc. \\ http://www.datapower.com - XS40 XML Security Gateway  </s>
<s> I have to agree with this one also.  </s>
<s> *chuckle* Don Park  </s>
<s> Calculating the DigestValue over an Object URIThis has been a great discussion.  </s>
<s> I'd just add in reference to Gino's original note that, I would expect that the web service he describes to potentially encompass authorization, multi-reference and multiple digital signatures.  </s>
<s> Even noting that though XML Signature and SAML are comfortably mature, WS-Security is (hopefully) just about to give birth to its first official standards, it would be a pretty safe bet that using an XML Signature/WS-Security/SAML(?) architecture is going to be a lot less expensive and much more future-proof than a roll-your-own approach.  </s>
<s> (Note that everything I've said here is based on a very cursory and limited analysis; a real recommendation would be based on a much more thorough review of the particular situation.) Regards, Ed Ed Simon (613) 726-9645 XMLsec Inc. Interested in XML Security Consulting and Training services?  </s>
<s> Visit "www.xmlsec.com".  </s>
<s> Now available!  </s>
<s> "Web Services Security" published by Osborne (ISBN 0072224711) Hi all, I'm Gino Tesei and I'm new both this mailing list and XML Signature Technology.  </s>
<s> I'm sorry in advance for possible technical inaccuracies.  </s>
<s> I'd like to have your opinions about the maturity of XML Signature Technology for real big projects with very strict legal reaquirements.  </s>
<s> Just two words to introduce a possible business scenario &amp; some functional requirements.  </s>
<s> Let say that the "big" Bank (BB) want to publish a set of services (Web Services) for "smaller" (SS) banks, for a set of business reasons.  </s>
<s> For instance, in our SOA conceptual model a possible service can be Pay with Credit Card  in cc_num .  </s>
<s> SS's customers have, hence, the possibility of paying with a their (normal) credit card, but SS don't communicate directly with Credit Card providers for all finer grained services to implement the above function (e.g. "is such a number a valid &amp; correct CC card number?" or "is such a valid CC card number related to the given customer?"), but use BB as "a proxy" service provider.  </s>
<s> Obviously, such a service will be not free :) ... Now, in order to get the non-repudiation capability we have to handle signatures.  </s>
<s> Possible options are handling signatures at application level (e.g. using J2SE support) or using XML Signature.  </s>
<s> Both solutions can work but (Applic Level) developers have to write code by their hands to handle digests, signatures, certs, ... it's suitable having a self made framework ... new business partners have to agree to such a "self made standard", ... (XML Signature) developers use a (Java?) implemetation of standard ... no a self made framework is required ... new business partners agree to XML Signature ... It's obvious that if XML Signature is mature enough (implementations robust, easy to use, integrated with IDEs or dev frameworks such as J2SE ... ) the latter is the best solution ... What's your opinion about such issues?  </s>
<s> What's new in six months?  </s>
<s> Thanks in advance.  </s>
<s> Gino Tesei Gino Tesei Senior Consultant Ekar - Altran Group Via G. Modena, 10 - 20129 MILANO, ITALY  </s>
<s> As a belated aside, I'm not sure there's much the W3C could do.  </s>
<s> They never made any representation to me, (I didn't have contact with them, but heard of it from you!  </s>
<s> smile/ ), didn't ask to be listed on the site, didn't send in an interop report.  </s>
<s> So the W3C can't threaten removal from any of that stuff.  </s>
<s> *If* somewhere they claim they are conformant to W3C (r) specifications, perhaps a trademark issue could be raised there [1], but that has the potential of them simply removing "W3C" if they aren't inclined to do anything.  </s>
<s> [1] http://www.w3.org/Consortium/Legal/2002/trademark-license-20021231  </s>

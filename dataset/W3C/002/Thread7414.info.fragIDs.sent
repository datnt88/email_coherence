<s> If you have an opinion about whether or not DASL should support queries on structured properties *please* speak up in the DASL list, www-webdav-dasl@w3.org  </s>
<s> The rest of this email explains this further, and can be skipped if you already understand what DASL is and what a query on structured properties means for DASL.  </s>
<s> DASL is the search protocol for WebDAV, it allows one to find resources whose properties or content have values specified in the query, (e.g. find  </s>
<s> resources whose date modified is  19 Nov 1998 and whose text contains "Halloween".)  </s>
<s> WebDAV property values may be plain strings, but they may also be structured values (expressed as XML elements on the wire).  </s>
<s> The best  </s>
<s> example of the latter is the WebDAV lock discovery property, but those who have proposed WebDAV properties for Dublin Core metadata would likely also use structured values.  </s>
<s> DASL as currently defined provides means for searching string valued properties but not within structured properties.  </s>
<s> Thus one can not search for resources based on the value of the lockscope or owner within a lock.  </s>
<s> As a special concession to the need to search for collection/non-collection resources, it provides an ad-hoc test to determine whether a resource is a collection.  </s>
<s> Thus the current DASL requirements ID does not include a requirement for queries on structured properties.  </s>
<s> We could say there is a rough concensus that there is no requirement, but that would be based on having only one or two opinions, scarcely a mandate.  </s>
<s> We'd like to hear from more people one way or the other.  </s>
<s> In addition, if you think there *is* a requirement for queries on structured values, please if possible, describe the layout of the property values you expect to search, and the kinds of tests you think you'd need.  </s>
<s> For further information: The DASL home page is http://www.ics.uci.edu/pub/ietf/dasl/ (Archived) mail messages of greatest relevance are: Structure criteria for DASL queries (tries to "make (or reopen) the case for defining a structure criteria (also called "structured query") in DASL.")  </s>
<s> Should DASL have structure queries?  </s>
<s> (Attempt to provoke discussion on the need for structured queries) If you want to contribute to the design of DASL structured criteria, there are two proposals on the table right now, or you can add your own.  </s>
<s> Please see initial proposal for structure criteria (Davis's proposal for syntax for structured criteria) Querying WebDAV Hierarchical Properties -- The Proposal (Babich's proposal for structured query.) Some background on the above what kinds of structure criteria are needed?  </s>
<s> (lists the structural features that must be testable) Querying WebDAV Hierarchical Properties -- Motivation (Design rationale for the Babich proposal) Jim 650-812-4301  </s>
<s> and  </s>
<s> seem to imply that in order for DASL to be useful and effective, it must support structured searches.  </s>
<s> If DASL doesn't XQL probably will.  </s>
<s> Also, the  </s>
<s> content searches for HTML and XML documents would have to be structured to  </s>
<s> be useful.  </s>
<s> So the same mechanism can be use to search structure properties since they are XML elements (on the wire) too.  </s>
<s> Let me see if I understand you correctly.  </s>
<s> Are you saying that "the same mechanism" can be used to search over the metadata about the documents as over the document content?  </s>
<s> I don't think that follows from just observing that both have structure and can be queried using XML (lots of things have structure but that doesn't mean everything can be searched by the same mechanism; XML can be used to represent anything, as can ASCII, binary data, S-expressions, and so  </s>
<s> on); you would also need some deeper unity of model and implementation.  </s>
<s> I should have said that DASL is designed to be very extensible.  </s>
<s> My question had to do with the requirements for search in the base level DASL.  </s>
<s> There will certainly be possibility to define additional, more powerful search grammars.  </s>
<s> That said, DASL will certainly be of some non-zero value even without structured search.  </s>
<s> From information retrieval studies it is well known that the typical user query is very simple, e.g. just one word.  </s>
<s> Even without structured query, the base level query grammar in DASL will likely meet most, though not all, usage scenarios.  </s>
<s> We'd like to know whether there are specific, important needs it will not meet, urgent enough to justify the considerable effort to add structured query to this base level grammar.  </s>
<s> Since you mention XQL, that is one reason to *not* add it to DASL: perhaps it would be better to wait until XQL is done, then import it.  </s>
<s> true for structured documents, but the DASL charter for content-based search is to find words in text resources only, not in structured documents.  </s>
<s> So, e.g, no query for words that occur only in an H2 XML element, in the *base level* DASL query.  </s>
<s> Thanks for your quick response.  </s>
<s> Jim 650-812-4301  </s>
<s> I disagree with this statement.  </s>
<s> DASL as currently specified supports all sorts of useful queries.  </s>
<s> There are also some sorts of things that it can't do.  </s>
<s> Future versions SHOULD incorporate technology such as XQL, XSL, etc, in order to provide more sophisticated types of searches.  </s>
<s> The fundamental issue is- Given the many sorts of useful queries that DASL 1.0 as currently published can support, do we really want to wait for the W3C groups to solve the more complicated structured query problem, or should we move our current simple syntax forward without adding extra complexity and take advantage of our extensibility to do a 2.0 later once the various X*L technologies are finished?  </s>
<s> As an IETF activity, obviously we need the rough consensus of the community to proceed with this decision, so I'd like to continue this discussion to make sure as many people as possible are happy with this.  </s>
<s> Please let me know what your concerns are.  </s>
<s> Alex Hopmann Microsoft Corporation  </s>
<s> "... in order for DASL to be useful and effective, it must support structured searches."  </s>
<s> I disagree.  </s>
<s> It's obvious that that's not true.  </s>
<s> For example, neither SQL nor SQL 92 support structured data, let alone structured searches, and SQL is very widely used.  </s>
<s> Years of experience have shown that SQL is both useful and effective for many applications without the ability to define or query structures.  </s>
<s> Similarly, DASL would be very useful for many queries (including the most common queries) without the ability to query structures.  </s>
<s> (Of course, that doesn't imply that we should not add that ability in the future.  </s>
<s> I think we should.)  </s>
<s> "So the same mechanism can be use to search structure properties since they are XML elements (on the wire) too."  </s>
<s> I disagree with the implicit assumption behind this statement.  </s>
<s> The assumption is that the serialization format (i.e., XML)  </s>
<s> is somehow equivalent to the data model, or somehow forces  </s>
<s> the data model to be the same.  </s>
<s> As far as searching, it is irrelevant what the serialization format is.  </s>
<s> Multiple different protocols could be used to access the same data source if that were desirable.  </s>
<s> A binary serialization format would be much more efficient than XML, as one example.  </s>
<s> What matters for query is the data model.  </s>
<s> XML all by itself is not a data model.  </s>
<s> Conventions would have  </s>
<s> to be added, starting with data types.  </s>
<s> Then there is the  </s>
<s> whole question of metadata, central definition of data (as opposed to client program definition of data), administration of database schemas (retrieving and updating metadata), merging metadata when querying across multiple data sources, etc., none which are issues that XML or any other serialization format was intended to address directly.  </s>
<s> There are pros and cons for every design choice.  </s>
<s> For example, XML is a very good format for certain types of text based documents, and is a very poor format for others (e.g., image documents).  </s>
<s> Similarly, XML plus extensions wouldn't be the best property model.  </s>
<s> Alan Babich  </s>
<s> "... in order for DASL to be useful and effective, it must support structured searches."  </s>
<s> I disagree.  </s>
<s> It's obvious that that's not true.  </s>
<s> For example, neither SQL nor SQL 92 support structured data, let alone structured searches, and SQL is very widely used.  </s>
<s> Years of experience have shown that SQL is both useful and effective for many applications without the ability to define or query structures.  </s>
<s> Similarly, DASL would be very useful for many queries (including the most common queries) without the ability to query structures.  </s>
<s> (Of course, that doesn't imply that we should not add that ability in the future.  </s>
<s> I think we should.)  </s>
<s> The S in SQL stands for Structured Query Language.  </s>
<s> A table captures this structure and its format is defined by a schema.  </s>
<s> So I guess those years of experience support my claim.  </s>
<s> SQL is exactly analogous to XML and DTDs.  </s>
<s> But since XML is a tagged language, it carries an instance of the schema with each document.  </s>
<s> So it is very easy to formulate queries using tag and attribute names.  </s>
<s> That just what XSL patterns are.  </s>
<s> No DTD is required to do these queries.  </s>
<s> The DTD is only required to validate the document if needed.  </s>
<s> "So the same mechanism can be use to search structure properties since they are XML elements (on the wire) too."  </s>
<s> I disagree with the implicit assumption behind this statement.  </s>
<s> The assumption is that the serialization format (i.e., XML)  </s>
<s> is somehow equivalent to the data model, or somehow forces  </s>
<s> the data model to be the same.  </s>
<s> As far as searching, it is irrelevant what the serialization format is.  </s>
<s> Multiple different protocols could be used to access the same data source if that were desirable.  </s>
<s> A binary serialization format would be much more efficient than XML, as one example.  </s>
<s> What matters for query is the data model.  </s>
<s> The only assumption is I'm using is that if you have a web resource of type text/xml, and you have webdav properties returned by a server somehow as text/xml which is what PROPFIND is specified to do, you can use the same query mechanisms on both.  </s>
<s> Again XSL is a good example of such a thing.  </s>
<s> I have used it to render the results of a PROPFIND.  </s>
<s> I don't see what this has to do with serialization, data models, etc.  </s>
<s> They're just XML documents available to a client.  </s>
<s> XML all by itself is not a data model.  </s>
<s> Conventions would have  </s>
<s> to be added, starting with data types.  </s>
<s> Then there is the  </s>
<s> whole question of metadata, central definition of data (as opposed to client program definition of data), administration of database schemas (retrieving and updating metadata), merging metadata when querying across multiple data sources, etc., none which are issues that XML or any other serialization format was intended to address directly.  </s>
<s> XML is a language for describing structured data, and XML DTDs specify what constitutes valid structure.  </s>
<s> No it doesn't support primitive data types, and a lot of the other functions of a traditional DBMS, but client and/or server applications are free to provide these capabilities on an XML base.  </s>
<s> DCD and other DTD replacement proposals are also addressing some of these issues.  </s>
<s> There are pros and cons for every design choice.  </s>
<s> For example, XML is a very good format for certain types of text based documents, and is a very poor format for others (e.g., image documents).  </s>
<s> Similarly, XML plus extensions wouldn't be the best property model.  </s>
<s> The real power of DASL will come from being able to search for documents having properties or content that is more than just a regular expression.  </s>
<s> This restriction is what makes web searching and crawling so difficult with HTML.  </s>
<s> With XML, we'll have the real business data and meta-data (in WebDAV properties) to search on and can make much better searches.  </s>
<s> I think DASL should address this and not require special cases for what it can search.  </s>
<s> Alan Babich  </s>
<s> Just to keep the discussion of this thread in perspective, let it be clear that I (along with everyone else, apparently) believe that it would be a good thing for DASL to query hierarchical WebDAV properties -- *eventually*.  </s>
<s> If that's true, then the real issue of this e-mail thread is "on what release of DASL".  </s>
<s> I personally believe that we should wait for 1.x .  </s>
<s> Others believe that we should try to jam it into 1.0.  </s>
<s> Having clarified what I think is the real issue, I shall now attempt to unconfuse the *secondary* discussions about property models, the meaning of the word "structure", etc. .  </s>
<s> The S in SQL stands for Structured Query Language.  </s>
<s> A table captures this structure, and its format is defined by a schema.  </s>
<s> Jim and I apparently use different meanings for the word "structure".  </s>
<s> When I say "structure" in this thread, I mean specifically the hierarchical organization of values of WebDAV properties.  </s>
<s> In an RDBMS, that would map to hierarchical nesting of tables (i.e., a denormalized relational databases).  </s>
<s> It is a fact that no ANSI standard version of SQL through SQL 92 yet has the ability to define, let alone query, nested tables.  </s>
<s> (I believe SQL 92 is the most recent ANSI standard version of SQL.) Another interesting issue for query is repeated values.  </s>
<s> It is a fact that no ANSI standard version of SQL has arrays of integers, floating or fixed point numbers, or datetimes.  </s>
<s> SQL has strings and bitfields, but these are not treated as arrays of characters or arrays of bits.  </s>
<s> They are treated as a whole, i.e., they are treated as scalars.  </s>
<s> Standard SQL doesn't have arrays.  </s>
<s> Therefore, it is true that the "S" in "SQL" literally stands for "structured", but not structured in the sense of hierarchical WebDAV property values.  </s>
<s> In other words, the "S" in "SQL" means something like "the data is structured into tables with scalar valued columns".  </s>
<s> This meaning of "structure" is less general than WebDAV "structured property values", since standard SQL tables are flat.  </s>
<s> Therefore, the argument that the "S" in "SQL" stands for "structured" is irrelevant to the question of DASL querying "hierarchically structured" WebDAV properties.  </s>
<s> Of course, many of you have seen recent releases of commercial RDBMS's with the ability to defined nested tables (i.e., denormalized relational databases) and the ability to query them.  </s>
<s> They typically have arrays as well.  </s>
<s> These features are proprietary extensions to SQL, and are not part of the SQL standard.  </s>
<s> Denormalized relational databases are useful, but the point is that the acronym SQL was coined *many years ago*, and had nothing to do with nested tables when it was coined.  </s>
<s> These proprietary implementations should be called "SQL with proprietary extensions" to avoid semantic confusion.  </s>
<s> A denormalized RDBMS can, of course, represent hierarchical WebDAV properties directly using nested tables.  </s>
<s> In non normalized RDBMS's one typically achieves the effect of nested tables by using flat tables and a convention for joining on a "row instance" property.  </s>
<s> This is indirect representation of hierarchically structured property values, and the "S" in "SQL" does not refer to this particular schema definition technique (or any other).  </s>
<s> So I guess those years of experience support my claim.  </s>
<s> Quite the opposite.  </s>
<s> The confusion arises from our different meanings of the word "structure" as explained above.  </s>
<s> There are many, many more years of experience with SQL *without* nested tables (or arrays) that have proved its usefulness than there are months or a few of years of experience with the relatively recent releases of RDBMS's with proprietary extensions for nested tables (and arrays).  </s>
<s> Obviously, hierarchies were not a 1.0 feature of SQL, and didn't exist for very many years.  </s>
<s> This makes it very plausible that DASL could get away without queries on hierarchically structured values for its first release.  </s>
<s> With XML, we'll have the real business data and meta-data (in WebDAV properties) to search on and can make much better searches.  </s>
<s> This seems to conflate property values with metadata.  </s>
<s> A WebDAV resource has property *values* and, possibly, content.  </s>
<s> The metadata is information about the *form and meaning* of the property values -- data type (e.g., integer), maximum and minimum values, list of legal values, property name, domain of values (e.g., the subset of integers that are zipcodes), character set, natural language, whether string comparisons are case sensitive, a narrative description of what the property is and how it should be used, etc., etc. .  </s>
<s> All that is very different from the property values themselves.  </s>
<s> The metadata is analogous to the schema in an RDBMS.  </s>
<s> It is invariant now matter what values are in the columns of the rows.  </s>
<s> The usual paradigm is (1) suck up the metadata once when your client program starts up (if it's not already hardwired into your client application), and (2) send and receive property values and content from then on, not metadata.  </s>
<s> Searching on content is good.  </s>
<s> (Find documents containing "computer".) Searching on property values is good.  </s>
<s> (Find documents authored by "Joe".)  </s>
<s> You find resources (e.g., documents) in both cases.  </s>
<s> Searching metadata is a qualitatively different operation: (Find all the properties having data type "integer".  </s>
<s> Or find all the properties whose domain is "zipcode".  </s>
<s> Or find out all about the definition of the Author property.) Searching metadata is much less important that simply retrieving all of it at once for client program initialization purposes.  </s>
<s> Retrieval and maintenance of metadata is important, and there are a lot of issues to address including the property  </s>
<s> model.  </s>
<s> The normal cases are two: (1) High end document  </s>
<s> management systems have well defined schemas, and only the docbase administrator can change the schema, because organization and discipline are critical for enterprise wide applications.  </s>
<s> (2) Some low end systems have hard wired properties and don't allow clients to define additional properties.  </s>
<s> In both cases, the server has all the metadata -- it knows about all the properties, and enforces consistency (e.g, it won't allow the value of the Author property to be an integer).  </s>
<s> The rare case is that any old client can define any old property any old time any time it wants to.  </s>
<s> This would probably only be workable in a personal document management system, or a very small work group.  </s>
<s> Even in that case, it is not strictly necessary or even a good idea to send the metadata along with the data at the same time.  </s>
<s> The property metadata only has to be sent once no matter how many resources have or will have that property.  </s>
<s> The high end document management systems will have some protocol for the docspace administrator to update and define the metadata.  </s>
<s> If and when some WebDAV subcommittee defines such a protocol, that would be a general solution that could be used for any WebDAV server that allowed clients to define their own properties.  </s>
<s> We clearly can't take the time to address all these issues in DASL 1.0 .  </s>
<s> SQL is exactly analogous to XML and DTDs.  </s>
<s> But since XML is a tagged language, it carries an instance of the schema with each document.  </s>
<s> No, not "exactly".  </s>
<s> For one thing, XML can describe nested structures.  </s>
<s> ANSI standard SQL can not.  </s>
<s> Only the proprietary denormalized RDBMS's can.  </s>
<s> For another, the database schema is never factored out of a SQL database and stored separately.  </s>
<s> It is always embedded in the database.  </s>
<s> In contrast, the same DTD file could be shared by multiple XML documents.  </s>
<s> There are other differences as well.  </s>
<s> *More importantly*, the XML representation of the value of a WebDAV property indicates only *small part* of the metadata of the property -- the hierarchical structure of the value.  </s>
<s> The hierarchical structure of the value is nowhere near the whole metadata.  </s>
<s> (That is important for efficiency.  </s>
<s> DBMS's have known that for decades, which is why they do *not* store the entire metadata of the table with each row, nor do they send the complete metadata over the network with each creation of a new row or retrieval of a row).  </s>
<s> XML, even with DTD, can not even represent the most basic part of the metadata, the base data type, without adding some conventions to the protocol or formally extending XML to include data types.  </s>
<s> Data types are just the beginning of defining the metadata.  </s>
<s> Some people are erroneously conflating property value models with XML, conflating serialization formats with XML, and conflating metadata models with XML.  </s>
<s> These are all distinct.  </s>
<s> To untangle the confusion on those and other related issues would take far more time than DASL can afford on 1.0 .  </s>
<s> Fortunately, that is not necessary -- DASL is extremely useful for the most common types of queries that WebDAV needs to support.  </s>
<s> So what if DASL 1.0 can't do any possible query that anyone could ever think of?  </s>
<s> Why should DASL 1.0 have to?  </s>
<s> No standard or proprietary implementation of SQL can do all possible queries anyone has ever thought of, and SQL has been around a very, very long time.  </s>
<s> For example, in SQL 92 or 89, try to express "find the properties of the employee ranked tenth in decreasing order of salary *and no others*" in a single query.  </s>
<s> (Remember that if two people make the maximal salary, there is no employee ranked second.)  </s>
<s> You can't do that in SQL with a single query (assuming there is no preexisting salary rank column).  </s>
<s> (If you think you can, send me e-mail, and if you're right, I'll find a different example.)  </s>
<s> The list of queries SQL can NOT do is endless.  </s>
<s> Obviously, that didn't stop SQL from being extremely useful.  </s>
<s> Nor would the temporary absence of the ability to query hierarchical WebDAV property values stop DASL 1.0 from being extremely useful.  </s>
<s> Alan Babich  </s>
<s> Now that my illness is receding, I'm diving into this a bit.  </s>
<s> Mostly this is still on the XML property front.  </s>
<s> For the record, I think structured searching is pretty essential (it should be in the goals document, for instance).  </s>
<s> I also think it could be tabled for a 1.1 release, especially given the ongoing work on XML Querying, etc.  </s>
<s> We should not re-create a wheel here, and even simple searching has value.  </s>
<s> SQL is only useful with a database schema.  </s>
<s> We've so far not had any such thing, only assertions that servers might have their own (hardwired schemas) and that based on the XML data they see, they are free to transform client property requests to conform to these (non-public) schemas.  </s>
<s> This sounds like a disaster-in-waiting to me.  </s>
<s> I think that this is true, but in a trivial way, because we seem to be ignoring some critically important questions in the current view of things.  </s>
<s> _If_ we are only using XML as a "serialization format", then we still need a hard and fast definition of the data model that we are using it as a format for.  </s>
<s> Unless this is in the DASL document, we don't have a data model.  </s>
<s> We have discussed many situations where the string PROPATCHed and  </s>
<s> the value GETPROPed may be different.  </s>
<s> (dates, times, integers, Floats (with differing accuracies and decimal conversion algorithms?), etc.).  </s>
<s> If we intend to allow such things for servers, we need to be clear about when they can, or cannot, happen.  </s>
<s> If not, there's no way to know what is actually going to happen when you put a property at a server.  </s>
<s> I know that some feel that the only properties supported by servers will be hardwired in, but I doubt that that assumption can hold up:  </s>
<s> First of all, the current protocol is grossly overdesigned if clients aren't to be allowed to set arbitrary properties (that a server may _not_ have special support for).  </s>
<s> Secondly, we want this to be useful for metadata generally, and that means that it ought to be compatible with the formats in use for meta-data: at this point, very clearly, this will be XML, in a wide variety of metadata domains.  </s>
<s> Off the top of my head, I can think of at least the TEI (Text Enxcoding Initiative), the EAD (Encoded Archival Description), and Dublin Core -- and I know that there are others.  </s>
<s> So the encoding format argument seems already wobbly to me.  </s>
<s> There's a very simple data model for XML (multilingual strings, with labelled bracketings and attached, unordered attributes.  </s>
<s> Attributes get some people very excited, but that's fundamentally silly: they can easily be represented as a special case of containment (internally for servers more limited pure hierarchical data models): for instance any attribute name could be represented as a dummy element with a name beginning with "#".  </s>
<s> Since # is not a legal element name start character this is an easy reversible transformation.  </s>
<s> This is really only a problem for live properties, where servers already have the needed leeway.  </s>
<s> I think servers should be required to preserve all information in properties that they cannot interpret via the XML namespace mechanisms.. If the server is going to perform some selection process, then we need to specify what that is, and since that is essentially a modification of XML, we need a good justification as to why it's a good idea.  </s>
<s> These are all facilities that server might want to offer, and might not.  </s>
<s> They might make sense as additional layers and they might not.  </s>
<s> We don't need to solve those (potential) probolems to allow clients to request the attachment of arbitrary properties, and require servers to deliver them back unmodified (within the limits of XML).  </s>
<s> Servers can still reject such requests if that is their policy; but they should not be allowed to accept such a request and _modify the data_, either by ignoring or changing the information the client provides.  </s>
<s> [In fact, modification is OK, but only if we define the limits precisely -- I see no reason to limit the model from XML, and think that such an attempt will be confusing and silly.  </s>
<s> We chose a (good) notation for poperty values (certainly the one that is being used in all current metadata efforts I know about).  </s>
<s> We should just go ahead and admit that that's what we're doing.  </s>
<s> Since XML (potentially plus extensions) is being used in so many metadata efforts, I find the above statement rather odd.  </s>
<s> What do you know that Dublin Core, EAD, the digital libraries folks, and the TEI don't?  </s>
<s> -- David David Durand dgd@cs.bu.edu \ david@dynamicDiagrams.com  </s>
<s> Boston University Computer Science \ Sr. Analyst --------------------------------------------\ http://www.dynamicDiagrams.com/  </s>
<s> MAPA: mapping for the WWW \__________________________  </s>
<s> DASL does not introduce a data model, it uses WebDAV's.  </s>
<s> Unfortunately, other than some posts by a few of the WebDAV authors, there is nothing written about WebDAV's data model, and certainly no concensus about it.  </s>
<s> You are right to say this is a barrier.  </s>
<s> By "supported by servers" do you mean supported by PROPPATCH?  </s>
<s> If so, surely the WebDAV spec makes it clear that clients may set arbitrary 'dead' properties?  </s>
<s> Is there really any doubt about this?  </s>
<s> Also, as far as I know all three extant WebDAV implementations (mod_dav, PyDAV, and MS) support dead properties.  </s>
<s> Or did you mean "searchable by DASL"?  </s>
<s> Although that's harder, it's still not unreasonable.  </s>
<s> I would expect that some implementations of DASL will only support search of properties chosen by the server administrator (this allows for a easy and fast implementation on existing RDB technology) I expect others to allow search over *all* properties.  </s>
<s> The protocol says nothing about this, nor should it.  </s>
<s> best regards Jim 650-812-4301  </s>

2.2: Suggest changing "The manifest includes..." to "The manifest must support..." so as to permit other types of manifest. 
3.1.2: 
Assumes the manifest of locators model. 
Perhaps simply changing "XML-signatures apply ..." to "XML-signatures may apply..." would give the flexibility needed to accodate other models. 
3.1.2.1, 3.1.2.2, 3.1.2.3: I don't understand why these points are at the 
fourth level. 
Seems to me they should be move up one level in the outline. 
3.1.3 
&amp; 3.3.1: 
Suggest replacing "negotiation" with "calculation". 
I believe 
this refers to Diffie-Hellman and I think calculation is more accurate than 
negotiation. 
Might even want to change 3.1.3 
to be "...calculation of keying 
material such as Diffie-Hellman agreement." 
3.2.1: 
Suggest simply replacing "document" with "element" and dropping the 
boxed 
comment. 
3.2.2: 
Suggest replacing "required" with "mandatory to implement". 
3.3.3: 
I think behaviour in this case is application dependent. 
It would be 
good for applications to at least notice conflicts and be able to report 
them. 
Boxed comment at the end of 3.4: I don't see that packaging is that 
dependent on 
trust/semantic definitions. 
Since there are fragment and package WGs, why 
isn't 
coordination with them adequate? 
Donald Donald E. Eastlake, 3rd 17 Skyline Drive, Hawthorne, NY 10532 USA home: 65 Shindegan Hill Road, RR#1, Carmel, NY 10512 USA 
[Comments to an email from Don, that hasn't yet made it to the list.] 
Manifests that don't use URIs? 
If so, what would be the example? 
What other models are we speaking of? 
fourth 
level. 
S 
Ok, they've been promoted. 
believe 
keying 
Done. Richard if you object, say so. 
boxed 
Now reads, "An XML-signature must be a well-balanced XML region (as defined by XML-Fragment) that begins and ends with a signature element. 
[Charter]" 
ok. 
be 
them. 
Are you agreeing with the comment? 
Could you restate the requirement or 
comment? 
dependent on 
isn't 
(At 4.2. 
Package might start next year, and Boyer doesn't think the fragment work is sufficient, so I'm flagging these as particularly salient dependencies. 
Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
[Comments to an email from Don, that hasn't yet made it to the list.] 
Manifests that don't use URIs? 
If so, what would be the example? 
John The examples are forthcoming in the scenarios document. 
For one, the IMPP example in the copy of the woefully incomplete scenarios document you 
have already. 
/John 
What other models are we speaking of? 
John For example, having the signature directly sign the data by enveloping the data inside of the manifest. 
/John 
boxed 
Now reads, "An XML-signature must be a well-balanced XML region (as defined by XML-Fragment) that begins and ends with a signature element. 
[Charter]" John Fragments are still in working draft. 
Who knows, a fragment may change at some point in the future to include non-continuous regions /John 
dependent on 
isn't 
(At 4.2. 
Package might start next year, and Boyer doesn't think the fragment work is sufficient, so I'm flagging these as particularly salient dependencies. 
John I think that fragments are almost sufficient except they can't specify non-continuous regions. 
If they could, then the construction of a fragment would completely satisfy all of my concerns since they already capture the ancestor element information like tags, attributes and element depth. 
Deep in one of Richard's prior posts, it is suggested that the exclusion technique (which is what I really want) could be done as c14n parameters. 
I'd like this only if it were mandatory to implement so that all XML DSig compliant applications could understand the signatures I have to create every day. 
Another possibility is that someone mentioned to me that the recent overhaul of XPointer includes the ability to specify non-continuous regions of the XML resource. 
If this could be combined with fragments, then it would also be sufficient to solve the problems I raised previously about ancestor information and element order being captured in the signature. 
Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
Joseph, Comments follow... 
Agreed to some extent. 
Negotiation tends to imply some form of handshake (multiple exchanges) during establishement of the key. 
However, I think that 
"agreement" or "exchange" would be more accurate. 
The method that is used to 
establish the key is not necessarily based upon mathematics. 
Why not simply "An XML-signature must be a well-formed XML element" 
Richard D. Brown 
Joseph, john, 
This is an option that I have promoted since Boston meeting. 
Interesting enough, it looks pretty much like an RDF second basic abbreviation syntax. 
Before Simplification After Simplification ATTENTION: JUST FOR ILLUSTRATIVE PURPOSES... Establishing a parallel with RDF simplification might give us a solution to the problem raised by canonicalization of an embedded resource value (see previous email with David Solo). 
I have to think over that a bit more... Richard D. Brown 
that 
to 
I now use agreement. 
There is no definition of "well-formed XML element." 
Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
Joseph, Comment Follows... 
Fair. 
In that case, consider "An XML-signature must be an XML element as 
specified by the production labeled element in the XML specification." 
Richard D. 
But it's more than an element. 
I'm rather happy with the constrained definition from xml-fragment, is there a reason you oppose this? 
Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
Why is it more than an element? 
(I mean besides the procedures to be further 
defined) OK, we may provide some additional definition for packaging certificates, but the core of an XML-Signature consists of an XML element. 
Conversely, an XML fragment might comprise part of an element as well as spanning multiple elements (in part or in whole). 
Richard D. 
It might be nested elements. 
right, that is why I constrained the well-balance definition with beginning with an element. 
Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
Sure, but the top level, which consists of the signature element, remains an 
element according to the production given in the XML specification. 
element := EmptyElemTag | STag content ETag content := (element | CharData | Reference | CDSect | PI | Comment)* 
Richard D. 
an 
Ok, I'll buy that. 
Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
Ok, I've included to Don's suggest text. 
The resulting document is at [1] and will be officially published tomorrow. 
Then I'll update the ietf-draft and push this out to W3C chairs and XML plenary and start twisting arms to get commitments for review once we have a draft we are fairly comfortable with. 
[1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
Hi Joseph, Regarding [1], section 3.1.3, the requirement that an XML signature can apply to all or part of an XML document, it has turned out that much of the current draft scenarios document [2] is about securely addressing this requirement. 
From the scenarios, what became apparent was that the only solution which seemed to solve all of the problems was having the ability to explicitly list the portions of a resource that should be excluded. 
This allows me to create signatures that have document closure, retain ancestor information when necessary, and retain element order of non-continuous regions that must be signed. 
A letter from Brown (cited in [2]) suggested making this a parameter of the canonicalizer element. 
I favor this approach since c14n is only defined for XML resources anyway. 
However, I favor it as long as the exclude list (could be just a list of XPointers) is made part of the core behavior and part of the requirements. 
The security problems and shortcomings that would result if this were not a requirement are substantial and not application-specific. 
Further reasoning is given in [2] section 2.4. 
Please consider adding a requirement (or a subrequirement to requirement 3) that we provide a method of explicit exclusion of portions of XML resources. 
[1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html [2] http://www.w3.org/Signature/Drafts/xmldsig-scenarios-990818.html 
Thanks, John Boyer Software Development Manager UWI.Com -- The Internet Forms Company [mailto:w3c-ietf-xmldsig-request@w3.org]On 
Behalf Of Joseph M. Reagle Jr. 
Ok, I've included to Don's suggest text. 
The resulting document is at [1] and will be officially published tomorrow. 
Then I'll update the ietf-draft and push this out to W3C chairs and XML plenary and start twisting arms to get commitments for review once we have a draft we are fairly comfortable with. 
[1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 
Suggested Requirement: As a separate requirement or as a co-requirement of 3.1.3, 
XML Signatures must have the ability to indicate which portions of a resource should be excluded from the resource. 
Significance: LI Document Closure (the ability to assert that no changes were made to the document except for those elements explicitly listed as being omitted). 
LI Preservation of ancestor element information (XML allows elements to derive information from the tags and attributes of their ancestors; requirement 3.1.3 
permits signing part of an XML document. 
Hence, there must be a way to retain all information relevant to the part specified, including information carried by ancestors). 
LI Preservation of order of non-continuous element blocks (omitting elements is necessary; if it can only be done implicitly by non listing in a manifest, then the resulting signature does not capture the order in which the included elements appear in the document.) Options: LI The canonicalizer element could include a subelement 'exclude'. 
Any element of the resource being canonicalized that matches one of the locators in the exclude list would not be rendered to the message whose digest is to be computed. 
LI The exclude list could accompany the locator in the resource element. 
LI The fragment specification already accounts for ancestor information. 
It does not solve the document closure and element order problems. 
LI If the new XPointer spec now allows the ability to indicate non-continuous regions (must be verified), then that solves the element order problem, but not document closure and ancestor info. 
Once it is a requirement to sign a portion of a document, the resulting security problems are too great without this co-requirement. 
These must be mandatory to implement if signing partial documents is mandatory, and the latter is mandatory for operations like multiple overlapping signatures. 
See section 2.4 of [1] for more information on this topic. 
[1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html 
Thanks, John Boyer Software Development Manager UWI.Com -- The Internet Forms Company [mailto:w3c-ietf-xmldsig-request@w3.org]On 
Behalf Of Joseph M. Reagle Jr. 
Ok, I've included to Don's suggest text. 
The resulting document is at [1] and will be officially published tomorrow. 
Then I'll update the ietf-draft and push this out to W3C chairs and XML plenary and start twisting arms to get commitments for review once we have a draft we are fairly comfortable with. 
[1] http://www.w3.org/1999/08/xmldsig-requirements-990820.html Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org 
XML-Signature Co-Chair http://w3.org/People/Reagle/ 

<s> One of the topics discussed at Orlando -- both in the collections breakout session and in the WebDAV working group meeting -- was how to allow clients to access the properties of references.  </s>
<s> Based on those discussions, I propose to make the following changes to the collections specification: 1. Change the behavior of redirect references so that WebDAV methods (not just the old HTTP methods) get 302 responses.  </s>
<s> (There will still be some exceptions -- DELETE, MOVE, and COPY always get applied to the reference.)  </s>
<s> This makes it possible for non-referencing WebDAV clients to use references.  </s>
<s> 2. Replace the Re-Direct header with a No-Passthrough header that can be applied to any reference, direct or redirect.  </s>
<s> This header asks the server to apply the request to the reference itself, rather than to its target resource.  </s>
<s> Here's the background, for anyone who cares: As the spec is currently written, accessing the properties of a reference is a problem only for direct references.  </s>
<s> A PROPFIND applied to a redirect reference will return the properties of the reference, but applied to a direct reference it will return the properties of the target resource.  </s>
<s> (The Re-Direct header in the current spec addresses this problem for direct references.) However, the discussions have made it clear to me that the spec is inconsistent in its treatment of redirect references.  </s>
<s> Once it is made consistent, the same problem will arise for redirect references.  </s>
<s> Let me explain.  </s>
<s> The earliest draft of the collection spec had a very trivial implementation of indirect (now redirect) references.  </s>
<s> They were simply resources that had no content, and had a DAV:reftarget property that contained the URI of the target resource.  </s>
<s> To use an indirect reference, a client retrieved the value of DAV:reftarget, and submitted whatever request it liked to that URI.  </s>
<s> Any method that had the reference's own URI as the request-URI would be applied to the reference itself, not to its target.  </s>
<s> At the Redmond meeting, people pointed out that it is important for plain HTTP clients to be able to use references, even though they don't understand what references are.  </s>
<s> As a result, the spec was revised to require that servers respond to *HTTP* methods on indirect references with a 302 (Moved Temporarily) and the reftarget URI in the Location header.  </s>
<s> This is the origin of the new name for these references: redirect references.  </s>
<s> However, the spec still says that *WebDAV* methods applied to redirect references behave as in the original spec.  </s>
<s> They do not get a 302 response, but rather get applied to the reference itself.  </s>
<s> This is inconsistent and has the consequence that non-referencing WebDAV clients cannot use redirect references.  </s>
<s> The spec needs to change so that any non-referencing client can use redirect references to get to their targets.  </s>
<s> Any method that a non-referencing client might use should get a 302 response.  </s>
<s> (The exceptions will be DELETE, MOVE, and COPY, which get applied to the reference itself.)  </s>
<s> Once this change is made, the problem of how to get / set properties on the reference itself will be the same for both redirect and direct references.  </s>
<s> So there needs to be a header that applies to both.  </s>
<s> No-Passthrough seems like a reasonable name for this header, which means that the server should not pass the method through to the target resource, but should instead apply it to the reference.  </s>
<s> Although the immediate motivation for this header has to do with accessing properties, it seems generally useful to be able to apply *any* method to the reference.  </s>
<s> The No-Passthrough header can be used with any method on a reference.  </s>
<s> --Judy Judith A. Slein CR&amp;T/ADSTC jslein@crt.xerox.com  </s>
<s> 8*222-5169  </s>
<s> Making the behavior of redirect references consistent seems fine to me, the only thing I'd propose is to change the name of the header from No-Passthrough to Immediate, which to me more directly connotes the effect.  </s>
<s> When the Immediate header is T, the method affects the reference directly, not its target.  </s>
<s> Random thought: there is a weird correlation here between this No-Passthrough header and the "source link".  </s>
<s> For example, could No-Passthrough potentially be used to grab an ASP file rather than its execution result?  </s>
<s> Just popped into my head, so I thought I'd mention it.  </s>
<s> The source link does seem a bit nicer for security issues (because you secure based on URL rather than the presence of a header), but No-Passthrough seems handier for grabbing source (text or binary).  </s>
<s> -g Greg Stein, http://www.lyra.org/  </s>

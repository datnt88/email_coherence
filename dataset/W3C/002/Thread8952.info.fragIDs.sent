<s> xmldsig defined (and other security applications have adopted) the following useful type:  </s>
<s> However, the recent Schema Proposed REC [1] eliminated the "binary" type and  </s>
<s> creates "base64Binary" and "hexBinary" types.  </s>
<s> I think this is a good thing in general as we did the same ourselves, but now we have to make a decision.  </s>
<s> Signature can 1. persist with its CryptoBinary, which is now redundant and encourages the use of another type needlessly.  </s>
<s> The definition is now: 2. Remove the CryptoBinary type.  </s>
<s> On the namespace issue, my rule of thumb has been that if I'm not breaking processors or instances from one version of the spec to the next, then there's no need to change the namespace.  </s>
<s> This doesn't break any instances nor processors, but seems to be in a gray zone...  </s>
<s> So we could: A. Continue with #1 for legacy purposes but warn others to use xsd:base64Binary when appropriate.  </s>
<s> B. Remove CryptoBinary and change the dsig namespace.  </s>
<s> C. Remove CryptoBinary and not change the dsig namespace.  </s>
<s> Thoughts?  </s>
<s> [1] http://www.w3.org/TR/xmlschema-2/#base64Binary Joseph Reagle Jr. http://www.w3.org/People/Reagle/ W3C Policy Analyst mailto:reagle@w3.org  </s>
<s> IETF/W3C XML-Signature Co-Chair http://www.w3.org/Signature W3C XML Encryption Chair http://www.w3.org/Encryption/2001/  </s>
<s> I don't claim to be an expert on the digital signatures specification, but  </s>
<s> my quick reading of it suggests that CryptoBinary is not just any base64  </s>
<s> binary, it is specifically binary that results from applying the  </s>
<s> mechanisms of the digital signatures specification.  </s>
<s> If I am right about this, then I suggest that keeping the name is appropriate.  </s>
<s> We can expect the XPath version 2, as well as many non-W3C database mapping systems,  </s>
<s> will support queries based on type name.  </s>
<s> By specifically naming the digital signature type, you will allow behaviors to be applied to any information specifically coded in that manner.  </s>
<s> The fact that the XML schema validation mechanisms provided no additional direct checking is unimportant, I think.  </s>
<s> Higher level mechanisms can key on the type name  </s>
<s> and will know what to do.  </s>
<s> Noah Mendelsohn Voice: 1-617-693-4036 One Rogers Street Cambridge, MA 02142  </s>
<s> Thanks for your response Noah.  </s>
<s> I should've provided a reference, but there is really nothing more to CryptoBinary than the schema definition.  </s>
<s> It is that simple.  </s>
<s> It's used as the type for SignatureValue, DigestValue, X509SKI, X509Certificate, X509CRL, PGPKeyPacket, and all the DSA/RSA parameters.  </s>
<s> Consequently, it has to be generic, and given we decided to go base64 in xmldsig, it made sense to simplify things and just create a type for it.  </s>
<s> Even given what I said above, I'd be willing to take this as an argument not to eliminate it -- that's the direction I'm leaning towards anyways smile/ .  </s>
<s> Joseph Reagle Jr. http://www.w3.org/People/Reagle/ W3C Policy Analyst mailto:reagle@w3.org  </s>
<s> IETF/W3C XML-Signature Co-Chair http://www.w3.org/Signature W3C XML Encryption Chair http://www.w3.org/Encryption/2001/  </s>
<s> CryptoBinary and base64Binary are not exactly equivalent -- there are further restrictions on a CryptoBinary because it is a representation of a single bignum.  </s>
<s> From the latest DSIG draft, section 6.4, is this  </s>
<s> implicit definition of the CryptoBinary format:  </s>
<s> Arbitrary-length integers (e.g. "bignums") are represented in XML as octet strings.  </s>
<s> The integer value is first converted to a "big endian" bitstring.  </s>
<s> The bitstring is then padded with leading zero bits so that the total number of bits == 0 mod 8 (so that there are an integral number of octets).  </s>
<s> If the bitstring contains entire leading octets that are zero, these are removed (so the high-order octet is always non-zero).  </s>
<s> This octet string is then base64 [MIME] encoded.  </s>
<s> (The conversion from integer to octet string is equivalent to IEEE 1363's I2OSP [1363] with minimal length).  </s>
<s> There's no difference in the schema definition, at least as it is today, but there is a semantic difference.  </s>
<s> --bal xmlschema-dev-request@w3.org  </s>
<s> Thanks for your response Noah.  </s>
<s> I should've provided a reference, but there is really nothing more to CryptoBinary than the schema definition.  </s>
<s> base64  </s>
<s> It is that simple.  </s>
<s> It's used as the type for SignatureValue, DigestValue, X509SKI, X509Certificate, X509CRL, PGPKeyPacket, and all the DSA/RSA parameters.  </s>
<s> Consequently, it has to be generic, and given we decided to go base64 in xmldsig, it made sense to simplify things and just create a type for it.  </s>
<s> Even given what I said above, I'd be willing to take this as an argument not to eliminate it -- that's the direction I'm leaning towards anyways smile/ .  </s>
<s> Joseph Reagle Jr. http://www.w3.org/People/Reagle/ W3C Policy Analyst mailto:reagle@w3.org  </s>
<s> IETF/W3C XML-Signature Co-Chair http://www.w3.org/Signature W3C XML Encryption Chair http://www.w3.org/Encryption/2001/  </s>
<s> This is exactly the sort of thing I had in mind when I suggested that higher level application or library software could key on the "CryptoBinary" type name to do the additional validation.  </s>
<s> Indeed, I think that some have failed to notice that the schemas design in this respect anticipates layered families of type libraries and associated schema processors.  </s>
<s> Core compatibility is what we describe in the schema specification, and everyone must implement it compatibly.  </s>
<s> On the other hand, someone might want to propose a higher level standard for math-oriented processors that will additionally recognize and validate a library of math types including perhaps a "PrimeNumber" type (which might be declared in the schema as merely a nonnegative integer).  </s>
<s> When presented with the same schema and document, an ordinary XML schema processor would validate the content as an integer, and would correctly report its type name as PrimeNumber.  </s>
<s> Similarly, a processor, library, or application with knowledge of digital signatures could recognize and do the additional validation of "CryptoBinary".  </s>
<s> Processors which merely conform to the XML schemas recommendation would correctly validate the content as base64Binary and would correctly report the type of any such element as "CryptoBinary".  </s>
<s> So, I think this further supports the suggestion that the additional type be retained.  </s>
<s> Noah Mendelsohn Voice: 1-617-693-4036 One Rogers Street Cambridge, MA 02142  </s>
<s> Good point!  </s>
<s> Good enough then, thank you Brian and Noah.  </s>
<s> Joseph Reagle Jr. http://www.w3.org/People/Reagle/ W3C Policy Analyst mailto:reagle@w3.org  </s>
<s> IETF/W3C XML-Signature Co-Chair http://www.w3.org/Signature W3C XML Encryption Chair http://www.w3.org/Encryption/2001/  </s>
<s> Ok, as we discussed, this bignum encoding rule we created for RSA and DSA KeyValues should probably apply to all the CryptoBinary types.  </s>
<s> So I've moved the text in section 6.4 and associate it with the CryptoBinary type [1].  </s>
<s> The question then is there any definitions relying upon ds:CryptoBinary (i.e., SignatureValue, DigestValue, X509SKI, X509Certificate, X509CRL, PGPKeyPacket) that should be of xsd:base64Binary (or any other variant)?  </s>
<s> [1] 4.0.1  </s>
<s> The CryptoBinary Simple Type This specification defines the CryptoBinary simple type for representing arbitrary-length integers (e.g. "bignums") in XML as octet strings.  </s>
<s> The integer value is first converted to a "big endian" bitstring.  </s>
<s> The bitstring is then padded with leading zero bits so that the total number of bits == 0 mod 8 (so that there are an integral number of octets).  </s>
<s> If the bitstring contains entire leading octets that are zero, these are removed (so the high-order octet is always non-zero).  </s>
<s> This octet string is then base64 [MIME] encoded.  </s>
<s> (The conversion from integer to octet string is equivalent to IEEE 1363's I2OSP [1363] with minimal length).  </s>
<s> Schema Definition: Joseph Reagle Jr. http://www.w3.org/People/Reagle/ W3C Policy Analyst mailto:reagle@w3.org  </s>
<s> IETF/W3C XML-Signature Co-Chair http://www.w3.org/Signature W3C XML Encryption Chair http://www.w3.org/Encryption/2001/  </s>

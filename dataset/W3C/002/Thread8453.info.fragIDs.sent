<s> TO:w3c-ietf-xmldsig@w3.org  </s>
<s> Based on the recent discussion, I want to propose the following resolution for  </s>
<s> the detached/embedded and transform discussions.  </s>
<s> In the last version of the  </s>
<s> syntax, the notion was to allow either an object within the siginfo element or a reference to an external element.  </s>
<s> This introduced two problems (at least):  </s>
<s> one was the potential for nested c14n's where one alg applied to the object and  </s>
<s> the other to the sigInfo wrapper; and the other the fact that the processing  </s>
<s> for an embedded vs. detached signature were different (thus, one couldn't convert between the methods without breaking the signature).  </s>
<s> In order to address this, I'm proposing moving back to a variation on prior  </s>
<s> suggestions in which the sigInfo element always contains a single reference (a  </s>
<s> resource element) to the object being signed(which may be a manifest, a PDF  </s>
<s> file, etc.).  </s>
<s> The resource element in sigInfo contains the location, a set of  </s>
<s> transformations to be applied prior to digest calculation (e.g. c14n, exclusion, encoding), and the digest alg and value (calculated over the contents of the object element or the referenced document, but excluding the  </s>
<s> object start and end tags.  </s>
<s> An embedded object may be contained within the  </s>
<s> signature element, but not within siginfo.  </s>
<s> This approach allows switching between embedded and detached signatures without  </s>
<s> breaking the signature (as long as we get the digest computation rules right),  </s>
<s> and separates the c14n of sigInfo from the transformations applied to the object.  </s>
<s> It does impose the cost of an additional digest calculation in some  </s>
<s> instances.  </s>
<s> In addition to documenting and refining this (example below), I expect the draft for next Monday to also begin to define some of the keyInfo and algorithm  </s>
<s> structures.  </s>
<s> I should have the new draft out later this week.  </s>
<s> Dave P.S. My citicorp.com  </s>
<s> email address is currently in send-only mode (?), so send  </s>
<s> any replies to dsolo@alum.mit.edu  </s>
<s> Sample revised syntax: jhasodutoinwoiahsh  </s>
<s> for  </s>
<s> Part of my confusion related to the intermediate steps of content which have no representation in the syntax -- they area intermediate steps.  </s>
<s> prior  </s>
<s> reference (a  </s>
<s> PDF  </s>
<s> The resource element in sigInfo contains the location, a set of  </s>
<s> the  </s>
<s> the  </s>
<s> without  </s>
<s> right),  </s>
<s> some  </s>
<s> algorithm  </s>
<s> send  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>
<s> for  </s>
<s> Part of my confusion on all of this was that we are dealing with intermediate steps of content which have no representation in the syntax -- they are intermediate!  </s>
<s> However, in the data model they are clearly identified.  </s>
<s> object and  </s>
<s> processing  </s>
<s> Do these problems apply to the data-model/syntax [1] I've proposed?  </s>
<s> I don't think so: [1] http://www.w3.org/Signature/Drafts/xml-dsig-datamodel-990823.html  </s>
<s> Objects and References reference and object take content.inline and content.EB and yield *.result.  </s>
<s> This production occurs based on the parameters of the operations (hash, c14n, encoding, etc.).  </s>
<s> This intermediate results are not represented in the syntax explicitly.  </s>
<s> However, we do need a feature for distinguishing between signing the actual object (the encoded form) and content.inline.result  </s>
<s> (the decoded (processed) form.). See the [28]section on signing the native encoding of a packaged document.  </s>
<s> Joseph Reagle Jr. Policy Analyst mailto:reagle@w3.org  </s>
<s> XML-Signature Co-Chair http://w3.org/People/Reagle/  </s>

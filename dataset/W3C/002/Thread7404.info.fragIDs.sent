<s> I have just been looking at Section 2.8 (Sharing) of the Versioning spec, which proposes to add a new type of reference beyond those defined in the Advanced Collections spec.  </s>
<s> Since the 2 specs are being developed in parallel, and the Advanced Collections spec is far from being cast in concrete, it seems as if we should be able to adjust the referencing provisions of the Advanced Collections spec to satisfy the needs of Versioning.  </s>
<s> If PIN is the only method that needs to apply to the reference rather than its target, one solution might be to add PIN to the list of methods that do *not* get passed through for direct references.  </s>
<s> If the situation is more complex than this, we could add the semi-direct reference proposed in the Versioning spec to the Advanced Collections spec.  </s>
<s> However, it doesn't seem to me very useful to have both semi-direct and direct references.  </s>
<s> Since semi-direct references behave exactly like direct references by default, it may make more sense to keep just redirect and direct references, but to add a Ref-Behavior header for use with any request on a direct reference.  </s>
<s> If the header has a value of DAV:redirect, it makes the reference behave like a redirect reference -- the request affects the reference itself rather than its target.  </s>
<s> --Judy Judith A. Slein Xerox Corporation jslein@crt.xerox.com  </s>
<s> (716)422-5169 800 Phillips Road 105/50C Webster, NY 14580  </s>
<s> The PIN method can be used against the semi/direct resource or against the target.  </s>
<s> From my read of the advanced collections you specify the pass-through methods on creation not on usage.  </s>
<s> Or did I mis-read?  </s>
<s> Also I think we need to have something that can have namespace-level properties.  </s>
<s> It wasn't clear from the advanced collections paper if this was possible with direct references.  </s>
<s> Thanks, Chris I have just been looking at Section 2.8 (Sharing) of the Versioning spec,  </s>
<s> which proposes to add a new type of reference beyond those defined in the Advanced Collections spec.  </s>
<s> Since the 2 specs are being developed in parallel, and the Advanced Collections spec is far from being cast in concrete, it seems as if we should be able to adjust the referencing provisions of the Advanced Collections spec to satisfy the needs of Versioning.  </s>
<s> If PIN is the only method that needs to apply to the reference rather than its target, one solution might be to add PIN to the list of methods that do *not* get passed through for direct references.  </s>
<s> If the situation is more complex than this, we could add the semi-direct reference proposed in the Versioning spec to the Advanced Collections spec.  </s>
<s> However, it doesn't seem to me very useful to have both semi-direct and direct references.  </s>
<s> Since semi-direct references behave exactly like direct references by default, it may make more sense to keep just redirect and direct references, but to add a Ref-Behavior header for use with any request on a direct reference.  </s>
<s> If the header has a value of DAV:redirect, it makes the reference behave like a redirect reference -- the request affects the reference itself rather than its target.  </s>
<s> --Judy Judith A. Slein Xerox Corporation jslein@crt.xerox.com  </s>
<s> (716)422-5169 800 Phillips Road 105/50C Webster, NY 14580  </s>
<s> The collections spec is changing significantly -- a new draft will be out at the end of this week.  </s>
<s> Let me summarize what will be in it.  </s>
<s> Direct references were not in the spec until now, but will be in this week's version.  </s>
<s> For direct references, all methods affect the target resource *except* DELETE, MOVE, and COPY -- these affect the reference itself.  </s>
<s> This means that it is not possible to access properties of direct references with PROPFIND or PROPPATCH.  </s>
<s> For a few crucial DAV properties, response headers are defined so that they can be accessed with GET or HEAD.  </s>
<s> The list of methods that affect the reference is fixed, so the Pass-Through header is going away.  </s>
<s> So that's the current state, but it's certainly negotiable and could be changed to satisfy requirements from versioning.  </s>
<s> It sounds like just adding PIN to the list of methods that affect the reference is not helpful to you.  </s>
<s> We could think about either adding semi-direct references or making direct references behave the way you  </s>
<s> describe semi-direct.  </s>
<s> My preference would be for the latter: by default, any method on a direct reference would be passed through, but some header on the request would make the method affect the reference itself.  </s>
<s> I think we would still say that DELETE, MOVE, and COPY always affect the reference, never its target.  </s>
<s> --Judy Judith A. Slein Xerox Corporation  </s>
<s> jslein@crt.xerox.com  </s>
<s> (716)422-5169 800 Phillips Road 105/50C Webster, NY 14580  </s>
<s> My preference would be for the latter: by default, any method on a direct reference would be passed through, but some header on the request would make the method affect the reference itself.  </s>
<s> I think we would still say that DELETE, MOVE, and COPY always affect the reference, never its target.  </s>
<s> This seems like a reasonable approach.  </s>
<s> What expectations exist for direct references with respect to referential integrity?  </s>
<s> Chris  </s>
<s> The collections spec is changing significantly -- a new draft will be out at the end of this week.  </s>
<s> Let me summarize what will be in it.  </s>
<s> Direct references were not in the spec until now, but will be in this week's version.  </s>
<s> For direct references, all methods affect the target resource *except* DELETE, MOVE, and COPY -- these affect the reference itself.  </s>
<s> This means that it is not possible to access properties of direct references with PROPFIND or PROPPATCH.  </s>
<s> For a few crucial DAV properties, response headers are defined so that they can be accessed with GET or HEAD.  </s>
<s> The list of methods that affect the reference is fixed, so the Pass-Through header is going away.  </s>
<s> So that's the current state, but it's certainly negotiable and could be changed to satisfy requirements from versioning.  </s>
<s> It sounds like just adding PIN to the list of methods that affect the reference is not helpful to you.  </s>
<s> We could think about either adding semi-direct references or making direct references behave the way you  </s>
<s> describe semi-direct.  </s>
<s> My preference would be for the latter: by default, any method on a direct reference would be passed through, but some header on the request would make the method affect the reference itself.  </s>
<s> I think we would still say that DELETE, MOVE, and COPY always affect the reference, never its target.  </s>
<s> --Judy Judith A. Slein Xerox Corporation  </s>
<s> jslein@crt.xerox.com  </s>
<s> (716)422-5169 800 Phillips Road 105/50C Webster, NY 14580  </s>
<s> The current view is that the direct / redirect distinction is orthogonal to the strong / weak distinction.  </s>
<s> So we can tackle direct / redirect in the current draft, but leave strong references for later.  </s>
<s> The intent is not to say anything about strong references (referential integrity) in the current draft.  </s>
<s> It just looked like too hard a problem, and not an area where we could hoope to arrive at any consensus.  </s>
<s> The requirements do discuss it, however.  </s>
<s> Judy Judith A. Slein Xerox Corporation jslein@crt.xerox.com  </s>
<s> (716)422-5169 800 Phillips Road 105/50C Webster, NY 14580  </s>
<s> Excellent -- I think that is the best approach.  </s>
<s> That also makes me feel better about saying direct references can be used instead of the semi-direct ones (I was worried about the integrity statement in the current draft).  </s>
<s> Chris The current view is that the direct / redirect distinction is orthogonal to the strong / weak distinction.  </s>
<s> So we can tackle direct / redirect in the current draft, but leave strong references for later.  </s>
<s> The intent is not to say anything about strong references (referential integrity) in the current draft.  </s>
<s> It just looked like too hard a problem, and not an area where we could hoope to arrive at any consensus.  </s>
<s> The requirements do discuss it, however.  </s>
<s> Judy Judith A. Slein Xerox Corporation jslein@crt.xerox.com  </s>
<s> (716)422-5169 800 Phillips Road 105/50C Webster, NY 14580  </s>
<s> I agree with the choice of a special request header.  </s>
<s> I believe it is likely that the "PIN" method will be replaced with a property update, so the request header that would make GETPROP and PUTPROP refer to the reference itself rather than the reference target is a preferable (in addition to being more general) solution than any special handling of a "PIN" method.  </s>
<s> Cheers, Geoff From: "Slein, Judith A" JSlein@crt.xerox.com  </s>
<s> Date: Tue, 3 Nov 1998 09:28:11 -0500 My preference would be for the latter: by default, any method on a direct reference would be passed through, but some header on the request would make the method affect the reference itself.  </s>
<s> I think we would still say that DELETE, MOVE, and COPY always affect the reference, never its target.  </s>
<s> OK, I'll add it to the draft I'm preparing this week and we can have some discussions of interactions between versioning and referencing / collections at Orlando.  </s>
<s> --Judy Judith A. Slein CR&amp;T/ADSTC jslein@crt.xerox.com  </s>
<s> 8*222-5169  </s>
<s> Personally I prefer the use of a method here.  </s>
<s> Setting a property to change the behavior of the system is a bit strange.  </s>
<s> We did start this way, but it means that you must have namespace properties as well as resource properties.  </s>
<s> What do I mean by that.  </s>
<s> Well, I argue that the mechanism must be consistent even if you have a direct/indirect reference to another resource.  </s>
<s> Otherwise the client needs to do special processing.  </s>
<s> That means the PROPPATCH must be able to change the namespace URI's properties independent of the target URI's properties.  </s>
<s> It looks like Judith's team is willing to do this for direct references.  </s>
<s> However, what about indirect?  </s>
<s> We could say you can't do it.  </s>
<s> OK, but you are still setting a property that will effect other GET requests.  </s>
<s> It feels a little odd.  </s>
<s> Of course, this is what we are doing with the "default" workspace configuration.  </s>
<s> So we either need to change that to PIN or switch both to properties.  </s>
<s> It just seems cleaner to have a method and let the server do what is necessary to make the right thing happen.  </s>
<s> Chris I agree with the choice of a special request header.  </s>
<s> I believe it is likely that the "PIN" method will be replaced with a property update, so the request header that would make GETPROP and PUTPROP refer to the reference itself rather than the reference target is a preferable (in addition to being more general) solution than any special handling of a "PIN" method.  </s>
<s> Cheers, Geoff My preference would be for the latter: by default, any method on a direct reference would be passed through, but some header on the request would make the method affect the reference itself.  </s>
<s> I think we would still say that DELETE, MOVE, and COPY always affect the reference, never its target.  </s>

<s> It sounds like we're winding down on the locknull discussions, so here's the next issue.... Jim Amsden brought up the following issue.  </s>
<s> I don't have a record of us resolving it, so let's do that.  </s>
<s> The specification requires a lock to be refreshed if any method is executed, by anybody, on a locked resource.  </s>
<s> This can cause some performance problems.  </s>
<s> More importantly, the semantics of this refresh do not seem to be right -- why should a random GET by a third party cause all locks to be refreshed?  </s>
<s> The text in question seems to be:  </s>
<s> The timeout counter SHOULD be restarted any time an owner of the lock sends a method to any member of the lock, including unsupported methods, or methods which are unsuccessful.  </s>
<s> However the lock MUST be refreshed if a refresh LOCK method is successfully received.  </s>
<s> In section 9.8 of RFC2518.  </s>
<s> Also... contact information for the owner of the lock.  </s>
<s> The server has an activity-based timeout policy in place on this resource, which causes the lock to automatically be removed after 1 week (604800 seconds).  </s>
<s> in section 8.10.8  </s>
<s> seems to be alluding to the same behavior.  </s>
<s> Do we want to change 2518?  </s>
<s> J.  </s>
<s> And there's the issue associated with lock owner (not the owner element of the lock discovery which is a lock owner display name).  </s>
<s> Should the locked resource be accessed by any principal who has the lock token, or only the principal that issued the LOCK method to create the lock token.  </s>
<s> If any user can issue a PROPFIND to get the DAV:lockdiscovery and therefore the lock token, and then use that lock token to do anything to the locked resource, the usefulness of WebDAV locking would be limited.  </s>
<s> On the notion of refreshing locks, users create, refresh, and release locks.  </s>
<s> The less the server does on their behalf the better.  </s>
<s> Having timeouts on locks is fine, but let's keep it simple.  </s>
<s> A user locks a resource with a timeout that generally represents how long they expect to keep the lock and therefore limit access to the resource by others.  </s>
<s> To have this timeout reset on every successful method invocation would make lock timeouts very non-deterministic and much more difficult for users to predict what will happen when.  </s>
<s> I think locks timeouts should only be refreshed when the user says to refresh them.  </s>
<s> Jason Crawford 08/10/2001 cc: jamsden@us.ibm.com 02:41 PM From: Jason Crawford/Watson/IBM@IBMUS Subject: rfc2518 issue: LOCK_REFRESH_BY_METHODS(Document link: Jim Amsden) It sounds like we're winding down on the locknull discussions, so here's the next issue.... Jim Amsden brought up the following issue.  </s>
<s> I don't have a record of us resolving it, so let's do that.  </s>
<s> The specification requires a lock to be refreshed if any method is executed, by anybody, on a locked resource.  </s>
<s> This can cause some performance problems.  </s>
<s> More importantly, the semantics of this refresh do not seem to be right -- why should a random GET by a third party cause all locks to be refreshed?  </s>
<s> The text in question seems to be:  </s>
<s> The timeout counter SHOULD be restarted any time an owner of the lock sends a method to any member of the lock, including unsupported methods, or methods which are unsuccessful.  </s>
<s> However the lock MUST be refreshed if a refresh LOCK method is successfully received.  </s>
<s> In section 9.8 of RFC2518.  </s>
<s> Also... contact information for the owner of the lock.  </s>
<s> The server has an activity-based timeout policy in place on this resource, which causes the lock to automatically be removed after 1 week (604800 seconds).  </s>
<s> in section 8.10.8  </s>
<s> seems to be alluding to the same behavior.  </s>
<s> Do we want to change 2518?  </s>
<s> J.  </s>
<s> I agree with Jim.  </s>
<s> Timeouts should only be reset by an explicit request to do so, not as a side-effect of a request that uses the lock token.  </s>
<s> Cheers, Geoff  </s>
<s> And there's the issue associated with lock owner (not the owner element of the lock discovery which is a lock owner display name).  </s>
<s> Should the locked resource be accessed by any principal who has the lock token, or only the principal that issued the LOCK method to create the lock token.  </s>
<s> If any user can issue a PROPFIND to get the DAV:lockdiscovery and therefore the lock token, and then use that lock token to do anything to the locked resource, the usefulness of WebDAV locking would be limited.  </s>
<s> On the notion of refreshing locks, users create, refresh, and release locks.  </s>
<s> The less the server does on their behalf the better.  </s>
<s> Having timeouts on locks is fine, but let's keep it simple.  </s>
<s> A user locks a resource with a timeout that generally represents how long they expect to keep the lock and therefore limit access to the resource by others.  </s>
<s> To have this timeout reset on every successful method invocation would make lock timeouts very non-deterministic and much more difficult for users to predict what will happen when.  </s>
<s> I think locks timeouts should only be refreshed when the user says to refresh them.  </s>
<s> Jason Crawford 08/10/2001 cc: jamsden@us.ibm.com 02:41 PM From: Jason Crawford/Watson/IBM@IBMUS LOCK_REFRESH_BY_METHODS(Document link: Jim Amsden) It sounds like we're winding down on the locknull discussions, so here's the next issue.... Jim Amsden brought up the following issue.  </s>
<s> I don't have a record of us resolving it, so let's do that.  </s>
<s> The specification requires a lock to be refreshed if any method is executed, by anybody, on a locked resource.  </s>
<s> This can cause some performance problems.  </s>
<s> More importantly, the semantics of this refresh do not seem to be right -- why should a random GET by a third party cause all locks to be refreshed?  </s>
<s> The text in question seems to be:  </s>
<s> The timeout counter SHOULD be restarted any time an owner of the lock sends a method to any member of the lock, including unsupported methods, or methods which are unsuccessful.  </s>
<s> However the lock MUST be refreshed if a refresh LOCK method is successfully received.  </s>
<s> In section 9.8 of RFC2518.  </s>
<s> Also... contact information for the owner of the lock.  </s>
<s> The server has an activity-based timeout policy in place on this resource, which causes the lock to automatically be removed after 1 week (604800 seconds).  </s>
<s> in section 8.10.8  </s>
<s> seems to be alluding to the same behavior.  </s>
<s> Do we want to change 2518?  </s>
<s> J.  </s>
<s> Hey Geoff... Could you make an explicit proposal as to how the spec should change?  </s>
<s> BTW... I don't care if the server choses to do this or not.  </s>
<s> I doubt refreshing the lock creates a functional problem since I doubt a client would be written to wait for a time out and choke if it didn't unlock the resource.  </s>
<s> OTOH, I don't see the point in encouraging servers to refresh the lock either.  </s>
<s> If a server developer/administrator discovers a reason that this refreshing policy is good, they can use it, but we don't need to encourage it since it might be pointless and costly.  </s>
<s> So my recommendation would be to silent on this... or perhaps somehow express flexibility.  </s>
<s> Anyway, perhaps you could suggest what change to 2518 you'd like... :-) J.  </s>
<s> I'd just delete the paragraph in 9.8 that states: The timeout counter SHOULD be restarted any time an owner of the lock sends a method to any member of the lock, including unsupported methods, or methods which are unsuccessful.  </s>
<s> However the lock MUST be refreshed if a refresh LOCK method is successfully received.  </s>
<s> The last sentence is redundant, since it is already specified in the LOCK semantics.  </s>
<s> Cheers, Geoff Hey Geoff... Could you make an explicit proposal as to how the spec should change?  </s>
<s> BTW... I don't care if the server choses to do this or not.  </s>
<s> I doubt refreshing the lock creates a functional problem since I doubt a client would be written to wait for a time out and choke if it didn't unlock the resource.  </s>
<s> OTOH, I don't see the point in encouraging servers to refresh the lock either.  </s>
<s> If a server developer/administrator discovers a reason that this refreshing policy is good, they can use it, but we don't need to encourage it since it might be pointless and costly.  </s>
<s> So my recommendation would be to silent on this... or perhaps somehow express flexibility.  </s>
<s> Anyway, perhaps you could suggest what change to 2518 you'd like... :-) J.  </s>
<s> Sounds good to me Geoff.  </s>
<s> Do we have any other comments?  </s>
<s> Agreement?  </s>
<s> I'd just delete the paragraph in 9.8 that states: The timeout counter SHOULD be restarted any time an owner of the lock sends a method to any member of the lock, including unsupported methods, or methods which are unsuccessful.  </s>
<s> However the lock MUST be refreshed if a refresh LOCK method is successfully received.  </s>
<s> The last sentence is redundant, since it is already specified in the LOCK semantics.  </s>
<s> Cheers, Geoff  </s>
<s> Again. I'd like at least one more supportive comment before I file this one as resolved.  </s>
<s> Please pipe up.  </s>
<s> :-) I'd just delete the paragraph in 9.8 that states: The timeout counter SHOULD be restarted any time an owner of the lock sends a method to any member of the lock, including unsupported methods, or methods which are unsuccessful.  </s>
<s> However the lock MUST be refreshed if a refresh LOCK method is successfully received.  </s>
<s> The last sentence is redundant, since it is already specified in the LOCK semantics.  </s>
<s> Cheers, Geoff  </s>
<s> Agreed with Geoff.  </s>
<s> We never liked the statement anyway :-) (could be abused too easily for a start).  </s>
<s> Shaun Hall Xerox Europe  </s>
<s> I agree with the current consensus that LOCKs should not be refreshed on other methods.  </s>
<s> We don't do that.  </s>

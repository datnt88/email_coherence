<s> Hello all, I am working on a implementaion of a webdav server.  </s>
<s> The server is going to use a database for the repository.  </s>
<s> I have one issue that I am trying to clear up.  </s>
<s> Okay, I am apologizing now if I don't explain this very well....  </s>
<s> In the database, all the resources use a unique itemid instead of the original resource name.  </s>
<s> So for example a GET www.server.com/file1.txt will have to go through a name resolver so that the database request is used with the itemid.  </s>
<s> and a PUT www.server.com/file1.txt will place this file in the database, generating a unique itemid.  </s>
<s> This is all fine, and I had planned to just create this name resolver to handle all of this, but then I was looking at the href element.  </s>
<s> I want to use the itemid as the URI for the item, and the displayname dav property to have the client show the resource name.  </s>
<s> For example, say I do a propfind on the root collection with depth 1 PROPFIND www.server.com in the properties for one of the internal members  </s>
<s> Now the client uses the display name to display the file in the "explorer"  </s>
<s> view, but has the href to the actual URI for requests (GET, LOCK, etc.)  </s>
<s> This is how I think these to elements were meant to be used (or at least  </s>
<s> how they could be used).  </s>
<s> Am I correct in this, or way off base?  </s>
<s> If I am correct about how these two elements can be used, then my next  </s>
<s> problem is with PUT and MCKOL.  </s>
<s> For example  </s>
<s> PUT www.server.com/file2.txt  </s>
<s> My server would place this file in the database, generate the itemid, but.... how do I get the proper URI back to the client?  </s>
<s> The 201 status returned wouldn't allow me to show the client that the proper URI to request this file is actually www.server.com/itemid2  </s>
<s> The only way the client would be able to get the proper URI for this resource is to do a propfind depth 1 on the parent collection, and this does not appear to be the case for most of the clients I have tested.  </s>
<s> I think I know how this will turn out, but I was just wondering.  </s>
<s> Thanks, James Woods woodsja@us.ibm.com  </s>
<s> From: James Woods [mailto:woodsja@us.ibm.com]  </s>
<s> I am working on a implementaion of a webdav server.  </s>
<s> The server is going to use a database for the repository.  </s>
<s> In the database, all the resources use a unique itemid instead of the original resource name.  </s>
<s> So for example a GET www.server.com/file1.txt will have to go through a name resolver so that the database request is used with the itemid.  </s>
<s> and a PUT www.server.com/file1.txt will place this file in the database, generating a unique itemid.  </s>
<s> This is all fine, and I had planned to just create this name resolver to handle all of this, but then I was looking at the href element.  </s>
<s> I want to use the itemid as the URI for the item, and the displayname dav property to have the client show the resource name.  </s>
<s> For example, say I do a propfind on the root collection with depth 1 PROPFIND www.server.com in the properties for one of the internal members  </s>
<s> Now the client uses the display name to display the file in the "explorer"  </s>
<s> view, but has the href to the actual URI for requests (GET, LOCK, etc.)  </s>
<s> This is how I think these to elements were meant to be used (or at least how they could be used).  </s>
<s> Am I correct in this, or way off base?  </s>
<s> Everything is OK up to here.  </s>
<s> If I am correct about how these two elements can be used, then my next  </s>
<s> problem is with PUT and MCKOL.  </s>
<s> For example PUT www.server.com/file2.txt  </s>
<s> The argument to PUT (or MKCOL or GET or any other HTTP method) will always be a URL, not the displayname.  </s>
<s> So you would have to do the PUT to a URL with the itemid, which is a problem if you want the server to generate the dbid, rather than the client.  </s>
<s> My server would place this file in the database, generate the itemid, but.... how do I get the proper URI back to the client?  </s>
<s> You can't.  </s>
<s> PUT is required to take a URL, and required to create a resource at the specified URL, not some resource at some other server generated URL.  </s>
<s> The 201 status returned wouldn't allow me to show the client that the proper URI to request this file is actually www.server.com/itemid2  </s>
<s> The only way the client would be able to get the proper URI for this resource is to do a propfind depth 1 on the parent collection, and this does not appear to be the case for most of the clients I have tested.  </s>
<s> I think I know how this will turn out, but I was just wondering.  </s>
<s> This is probably how you thought it would turn out.  </s>
<s> If you want to have the server generated itemid's, you are better off using the "displayname" as the URL, and if you want to expose the itemid, expose it as a server defined live property value.  </s>
<s> Cheers, Geoff  </s>
<s> Note: as far as I remember, the MS webfolder client currently ignores the displayname and always use the last part of the URL.  </s>
<s> From: w3c-dist-auth-request@w3.org [mailto:w3c-dist-auth-request@w3.org]On  </s>
<s> Behalf Of Julian Reschke Sent: Friday, August 17, 2001 3:19 AM Subject: RE: usage of href XML element  </s>
<s> Nope, it does not ignore the displayname.  </s>
<s> It displays the display name.  </s>

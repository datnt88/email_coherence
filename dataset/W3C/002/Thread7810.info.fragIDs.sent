<s> My non-proposal is as follows: Modify RFC-2518 to: - remove depth locks, shared locks, and lock null resources  </s>
<s> - add a Target-Selector header for reliable access to a locked resource - make simple single resource locking mandantory.  </s>
<s> This will simplify the implementation of both clients and  </s>
<s> servers, captures the key functionality that is in use today while deferring the more speculative elements of the protocol.  </s>
<s> The reason this is a non-proposal is that I'm afraid that the energy that it would require to get this change accepted would detract from what I believe is a more time critical task, namely, producing the DeltaV versioning protocol.  </s>
<s> But as one last tilt against this particular windmill, I'll include a "diff" indicating how I would change 2518 "if I ran the zoo" (:-).  </s>
<s> Cheers, Geoff This is similar to "diff -c" format, i.e. the old text comes first, and then the new text.  </s>
<s> Lines deleted are marked with a "-".  </s>
<s> Lines added are marked with a "+".  </s>
<s> Lines changed are marked with an "!". *** Original Text *** Locking: The ability to keep more than one person from working on a !  </s>
<s> document at the same time.  </s>
<s> This prevents the "lost update problem," !  </s>
<s> in which modifications are lost as first one author then another !  </s>
<s> writes changes without merging the other author's changes.  </s>
<s> !  </s>
<s> Null Resource - A resource which responds with a 404 (Not Found) to !  </s>
<s> any HTTP/1.1 or DAV method except for PUT, MKCOL, OPTIONS and LOCK.  </s>
<s> !  </s>
<s> A NULL resource MUST NOT appear as a member of its parent collection.  </s>
<s> 6 Locking --- New Text --- Locking: The ability to keep more than one person from working on a !  </s>
<s> document at the same time.  </s>
<s> This prevents the "update merge problem," !  </s>
<s> in which two author concurrently change the same resource, resulting !  </s>
<s> in the need to merge the resulting documents.  </s>
<s> 6 Locking *** Original Text *** access to that resource.  </s>
<s> Using a lock, an authoring client can provide a reasonable guarantee that another principal will not modify a resource while it is being edited.  </s>
<s> In this way, a client can !  </s>
<s> prevent the "lost update" problem.  </s>
<s> !  </s>
<s> This specification allows locks to vary over two client-specified !  </s>
<s> parameters, the number of principals involved (exclusive vs. shared) !  </s>
<s> and the type of access to be granted.  </s>
<s> This document defines locking !  </s>
<s> for only one access type, write.  </s>
<s> However, the syntax is extensible, !  </s>
<s> and permits the eventual specification of locking for other access !  </s>
<s> types.  </s>
<s> !  </s>
<s> 6.1 Exclusive Vs. Shared Locks !  </s>
<s> The most basic form of lock is an exclusive lock.  </s>
<s> This is a lock !  </s>
<s> where the access right in question is only granted to a single !  </s>
<s> principal.  </s>
<s> The need for this arbitration results from a desire to !  </s>
<s> avoid having to merge results.  </s>
<s> !  </s>
<s> However, there are times when the goal of a lock is not to exclude !  </s>
<s> others from exercising an access right but rather to provide a !  </s>
<s> mechanism for principals to indicate that they intend to exercise !  </s>
<s> their access rights.  </s>
<s> Shared locks are provided for this case.  </s>
<s> A ! shared lock allows multiple principals to receive a lock.  </s>
<s> Hence any !  </s>
<s> principal with appropriate access can get the lock.  </s>
<s> !  </s>
<s> With shared locks there are two trust sets that affect a resource.  </s>
<s> !  </s>
<s> The first trust set is created by access permissions.  </s>
<s> Principals who ! are trusted, for example, may have permission to write to the !  </s>
<s> resource.  </s>
<s> Among those who have access permission to write to the !  </s>
<s> resource, the set of principals who have taken out a shared lock also !  </s>
<s> must trust each other, creating a (typically) smaller trust set !  </s>
<s> within the access permission write set.  </s>
<s> !  </s>
<s> Starting with every possible principal on the Internet, in most !  </s>
<s> situations the vast majority of these principals will not have write !  </s>
<s> access to a given resource.  </s>
<s> Of the small number who do have write !  </s>
<s> access, some principals may decide to guarantee their edits are free !  </s>
<s> from overwrite conflicts by using exclusive write locks.  </s>
<s> Others may !  </s>
<s> decide they trust their collaborators will not overwrite their work !  </s>
<s> (the potential set of collaborators being the set of principals who ! have write permission) and use a shared lock, which informs their !  </s>
<s> collaborators that a principal may be working on the resource.  </s>
<s> !  </s>
<s> The WebDAV extensions to HTTP do not need to provide all of the !  </s>
<s> communications paths necessary for principals to coordinate their !  </s>
<s> activities.  </s>
<s> When using shared locks, principals may use any out of !  </s>
<s> band communication channel to coordinate their work (e.g., face-to- !  </s>
<s> face interaction, written notes, post-it notes on the screen, !  </s>
<s> telephone conversation, Email, etc.) The intent of a shared lock is !  </s>
<s> to let collaborators know who else may be working on a resource.  </s>
<s> !  </s>
<s> Shared locks are included because experience from web distributed !  </s>
<s> authoring systems has indicated that exclusive locks are often too !  </s>
<s> rigid.  </s>
<s> An exclusive lock is used to enforce a particular editing !  </s>
<s> process: take out an exclusive lock, read the resource, perform !  </s>
<s> edits, write the resource, release the lock.  </s>
<s> This editing process !  </s>
<s> has the problem that locks are not always properly released, for !  </s>
<s> example when a program crashes, or when a lock owner leaves without !  </s>
<s> unlocking a resource.  </s>
<s> While both timeouts and administrative action ! can be used to remove an offending lock, neither mechanism may be !  </s>
<s> available when needed; the timeout may be long or the administrator !  </s>
<s> may not be available.  </s>
<s> !  </s>
<s> 6.2 Required Support !  </s>
<s> A WebDAV compliant server is not required to support locking in any !  </s>
<s> form.  </s>
<s> If the server does support locking it may choose to support !  </s>
<s> any combination of exclusive and shared locks for any access types.  </s>
<s> !  </s>
<s> The reason for this flexibility is that locking policy strikes to the !  </s>
<s> very heart of the resource management and versioning systems employed !  </s>
<s> by various storage repositories.  </s>
<s> These repositories require control !  </s>
<s> over what sort of locking will be made available.  </s>
<s> For example, some !  </s>
<s> repositories only support shared write locks while others only !  </s>
<s> provide support for exclusive write locks while yet others use no !  </s>
<s> locking at all.  </s>
<s> As each system is sufficiently different to merit !  </s>
<s> exclusion of certain locking features, this specification leaves !  </s>
<s> locking as the sole axis of negotiation within WebDAV.  </s>
<s> 6.3 Lock Tokens --- New Text --- access to that resource.  </s>
<s> Using a lock, an authoring client can provide a reasonable guarantee that another principal will not modify a resource while it is being edited.  </s>
<s> In this way, a client can !  </s>
<s> prevent the "update merge" problem.  </s>
<s> 6.3 Lock Tokens *** Original Text *** 7.1 Methods Restricted by Write Locks A write lock MUST prevent a principal without the lock from !  </s>
<s> successfully executing a PUT, POST, PROPPATCH, LOCK, UNLOCK, MOVE, !  </s>
<s> DELETE, or MKCOL on the locked resource.  </s>
<s> All other current methods, GET in particular, function independently of the lock.  </s>
<s> Note, however, that as new methods are created it will be necessary --- New Text --- 7.1 Methods Restricted by Write Locks A write lock MUST prevent a principal without the lock from !  </s>
<s> successfully executing a PUT, POST, PROPPATCH, LOCK, or UNLOCK !  </s>
<s> on the locked resource.  </s>
<s> A write lock on a collection MUST !  </s>
<s> prevent a principal without the lock from successfully creating !  </s>
<s> a new internal member or deleting an existing internal member !  </s>
<s> of that collection.  </s>
<s> All other current methods, GET in particular, function independently of the lock.  </s>
<s> Note, however, that as new methods are created it will be necessary *** Original Text *** 7.2 Write Locks and Lock Tokens !  </s>
<s> A successful request for an exclusive or shared write lock MUST result in the generation of a unique lock token associated with the !  </s>
<s> requesting principal.  </s>
<s> Thus if five principals have a shared write !  </s>
<s> lock on the same resource there will be five lock tokens, one for !  </s>
<s> each principal.  </s>
<s> 7.3 Write Locks and Properties --- New Text --- 7.2 Write Locks and Lock Tokens !  </s>
<s> A successful request for a write lock MUST result in the generation of a unique lock token associated with the !  </s>
<s> requesting principal.  </s>
<s> This lock token can then be specified in !  </s>
<s> a Target-Request header to reliably access the locked resource, !  </s>
<s> even if the locked resource has been MOVE'd or DELETE'd.  </s>
<s> 7.3 Write Locks and Properties *** Original Text *** Only dead properties and live properties defined to respect locks are guaranteed not to change while write locked.  </s>
<s> - 7.4 Write Locks and Null Resources - It is possible to assert a write lock on a null resource in order to - lock the name.  </s>
<s> - A write locked null resource, referred to as a lock-null resource, - MUST respond with a 404 (Not Found) or 405 (Method Not Allowed) to - any HTTP/1.1 or DAV methods except for PUT, MKCOL, OPTIONS, PROPFIND, - LOCK, and UNLOCK.  </s>
<s> A lock-null resource MUST appear as a member of - its parent collection.  </s>
<s> Additionally the lock-null resource MUST have - defined on it all mandatory DAV properties.  </s>
<s> Most of these - properties, such as all the get* properties, will have no value as a - lock-null resource does not support the GET method.  </s>
<s> Lock-Null - resources MUST have defined values for lockdiscovery and - supportedlock properties.  </s>
<s> - Until a method such as PUT or MKCOL is successfully executed on the - lock-null resource the resource MUST stay in the lock-null state.  </s>
<s> - However, once a PUT or MKCOL is successfully executed on a lock-null - resource the resource ceases to be in the lock-null state.  </s>
<s> - If the resource is unlocked, for any reason, without a PUT, MKCOL, or - similar method having been successfully executed upon it then the - resource MUST return to the null state.  </s>
<s> 7.5 Write Locks and Collections !  </s>
<s> A write lock on a collection, whether created by a "Depth: 0" or !  </s>
<s> "Depth: infinity" lock request, prevents the addition or removal of !  </s>
<s> member URIs of the collection by non-lock owners.  </s>
<s> As a consequence, when a principal issues a PUT or POST request to create a new resource under a URI which needs to be an internal member of a write locked collection to maintain HTTP namespace consistency, or issues a --- New Text --- Only dead properties and live properties defined to respect locks are guaranteed not to change while write locked.  </s>
<s> 7.5 Write Locks and Collections !  </s>
<s> A write lock on a collection prevents the addition or removal of !  </s>
<s> immediate member URIs of the collection by non-lock owners.  </s>
<s> As a consequence, when a principal issues a PUT or POST request to create a new resource under a URI which needs to be an internal member of a write locked collection to maintain HTTP namespace consistency, or issues a *** Original Text *** internal member URI of a write locked collection, this request MUST fail if the principal does not have a write lock on the collection.  </s>
<s> - However, if a write lock request is issued to a collection containing - member URIs identifying resources that are currently locked in a - manner which conflicts with the write lock, the request MUST fail - with a 423 (Locked) status code.  </s>
<s> - If a lock owner causes the URI of a resource to be added as an - internal member URI of a locked collection then the new resource MUST - be automatically added to the lock.  </s>
<s> This is the only mechanism that - allows a resource to be added to a write lock.  </s>
<s> Thus, for example, if - the collection /a/b/ is write locked and the resource /c is moved to - /a/b/c then resource /a/b/c will be added to the write lock.  </s>
<s> 7.6 Write Locks and the If Request Header If a user agent is not required to have knowledge about a lock when --- New Text --- internal member URI of a write locked collection, this request MUST fail if the principal does not have a write lock on the collection.  </s>
<s> 7.6 Write Locks and the If Request Header If a user agent is not required to have knowledge about a lock when *** Original Text *** 7.7 Write Locks and COPY/MOVE A COPY method invocation MUST NOT duplicate any write locks active on ! the source.  </s>
<s> However, as previously noted, if the COPY copies the !  </s>
<s> resource into a collection that is locked with "Depth: infinity", !  </s>
<s> then the resource will be added to the lock.  </s>
<s> !  </s>
<s> A successful MOVE request on a write locked resource MUST NOT move ! the write lock with the resource.  </s>
<s> However, the resource is subject to !  </s>
<s> being added to an existing lock at the destination, as specified in !  </s>
<s> section 7.5.  </s>
<s> For example, if the MOVE makes the resource a child of a !  </s>
<s> collection that is locked with "Depth: infinity", then the resource !  </s>
<s> will be added to that collection's lock.  </s>
<s> Additionally, if a resource !  </s>
<s> locked with "Depth: infinity" is moved to a destination that is !  </s>
<s> within the scope of the same lock (e.g., within the namespace tree !  </s>
<s> covered by the lock), the moved resource will again be a added to the !  </s>
<s> lock.  </s>
<s> In both these examples, as specified in section 7.6, an If !  </s>
<s> header must be submitted containing a lock token for both the source !  </s>
<s> and destination.  </s>
<s> 7.8 Refreshing Write Locks --- New Text --- 7.7 Write Locks and COPY/MOVE A COPY method invocation MUST NOT duplicate any write locks active on ! the source.  </s>
<s> !  </s>
<s> A successful MOVE request on a write locked resource MUST move ! the write lock with the resource.  </s>
<s> 7.8 Refreshing Write Locks *** Original Text *** - D:lockscope D:exclusive/ /D:lockscope - D:locktype D:write/ /D:locktype - /D:lockentry - D:lockentry - D:lockscope D:shared/ /D:lockscope --- New Text --- *** Original Text *** - D:lockscope D:exclusive/ /D:lockscope - D:locktype D:write/ /D:locktype - /D:lockentry - D:lockentry - D:lockscope D:shared/ /D:lockscope --- New Text --- *** Original Text *** specific properties assert that "container" was created on December 1, 1997, at 5:42:21PM, in a time zone 8 hours west of GMT (creationdate), has a name of "Example collection" (displayname), a !  </s>
<s> collection resource type (resourcetype), and supports exclusive write !  </s>
<s> and shared write locks (supportedlock).  </s>
<s> The resource http://www.foo.bar/container/front.html has nine properties defined on it: --- New Text --- specific properties assert that "container" was created on December 1, 1997, at 5:42:21PM, in a time zone 8 hours west of GMT (creationdate), has a name of "Example collection" (displayname), a !  </s>
<s> collection resource type (resourcetype), and supports write locks !  </s>
<s> (supportedlock).  </s>
<s> The resource http://www.foo.bar/container/front.html has nine properties defined on it: *** Original Text *** "text/html" (getcontenttype), an entity tag of "zzyzx" (getetag), was last modified on Monday, January 12, 1998, at 09:25:56 GMT (getlastmodified), has an empty resource type, meaning that it is not !  </s>
<s> a collection (resourcetype), and supports both exclusive write and !  </s>
<s> shared write locks (supportedlock).  </s>
<s> 8.1.3 Example - Using propname to Retrieve all Property Names --- New Text --- "text/html" (getcontenttype), an entity tag of "zzyzx" (getetag), was last modified on Monday, January 12, 1998, at 09:25:56 GMT (getlastmodified), has an empty resource type, meaning that it is not !  </s>
<s> a collection (resourcetype), and supports write !  </s>
<s> locks (supportedlock).  </s>
<s> 8.1.3 Example - Using propname to Retrieve all Property Names *** Original Text ***  </s>
<s> Request  </s>
<s> ! DELETE /container/ HTTP/1.1 Host: www.foo.bar  </s>
<s> Response  </s>
<s> --- New Text ---  </s>
<s> Request  </s>
<s> ! DELETE /container/resource3 HTTP/1.1 Host: www.foo.bar  </s>
<s> Response  </s>
<s> *** Original Text *** In this example the attempt to delete !  </s>
<s> and no lock token was submitted with the request.  </s>
<s> Consequently, the !  </s>
<s> attempt to delete http://www.foo.bar/container/ also failed.  </s>
<s> Thus the !  </s>
<s> client knows that the attempt to delete http://www.foo.bar/container/ !  </s>
<s> must have also failed since the parent can not be deleted unless its !  </s>
<s> child has also been deleted.  </s>
<s> Even though a Depth header has not been !  </s>
<s> included, a depth of infinity is assumed because the method is on a !  </s>
<s> collection.  </s>
<s> 8.8.5 COPY Status Codes --- New Text --- In this example the attempt to delete !  </s>
<s> and no lock token was submitted with the request.  </s>
<s> 8.8.5 COPY Status Codes *** Original Text *** resource MUST NOT succeed if can not be honored by all the URIs through which the resource is addressable.  </s>
<s> !  </s>
<s> 8.10.4  </s>
<s> Depth and Locking !  </s>
<s> The Depth header may be used with the LOCK method.  </s>
<s> Values other than !  </s>
<s> 0 or infinity MUST NOT be used with the Depth header on a LOCK !  </s>
<s> method.  </s>
<s> All resources that support the LOCK method MUST support the !  </s>
<s> Depth header.  </s>
<s> !  </s>
<s> A Depth header of value 0 means to just lock the resource specified !  </s>
<s> by the Request-URI.  </s>
<s> !  </s>
<s> If the Depth header is set to infinity then the resource specified in ! the Request-URI along with all its internal members, all the way down ! the hierarchy, are to be locked.  </s>
<s> A successful result MUST return a !  </s>
<s> single lock token which represents all the resources that have been !  </s>
<s> locked.  </s>
<s> If an UNLOCK is successfully executed on this token, all !  </s>
<s> associated resources are unlocked.  </s>
<s> If the lock cannot be granted to !  </s>
<s> all resources, a 409 (Conflict) status code MUST be returned with a !  </s>
<s> response entity body containing a multistatus XML element describing !  </s>
<s> which resource(s) prevented the lock from being granted.  </s>
<s> Hence, !  </s>
<s> partial success is not an option.  </s>
<s> Either the entire hierarchy is !  </s>
<s> locked or no resources are locked.  </s>
<s> !  </s>
<s> If no Depth header is submitted on a LOCK request then the request !  </s>
<s> MUST act as if a "Depth:infinity" had been submitted.  </s>
<s> !  </s>
<s> 8.10.5  </s>
<s> Interaction with other Methods !  </s>
<s> The interaction of a LOCK with various methods is dependent upon the !  </s>
<s> lock type.  </s>
<s> However, independent of lock type, a successful DELETE of !  </s>
<s> a resource MUST cause all of its locks to be removed.  </s>
<s> !  </s>
<s> 8.10.6  </s>
<s> Lock Compatibility Table !  </s>
<s> The table below describes the behavior that occurs when a lock !  </s>
<s> request is made on a resource.  </s>
<s> !  </s>
<s> Current lock state/ | Shared Lock | Exclusive !  </s>
<s> Lock request | | Lock !  </s>
<s> None | True | True !  </s>
<s> Shared Lock | True | False !  </s>
<s> Exclusive Lock | False | False* !  </s>
<s> Legend: True = lock may be granted.  </s>
<s> False = lock MUST NOT be !  </s>
<s> granted.  </s>
<s> *=It is illegal for a principal to request the same lock !  </s>
<s> twice.  </s>
<s> !  </s>
<s> The current lock state of a resource is given in the leftmost column, !  </s>
<s> and lock requests are listed in the first row.  </s>
<s> The intersection of a !  </s>
<s> row and column gives the result of a lock request.  </s>
<s> For example, if a !  </s>
<s> shared lock is held on a resource, and an exclusive lock is !  </s>
<s> requested, the table entry is "false", indicating the lock must not !  </s>
<s> be granted.  </s>
<s> 8.10.7  </s>
<s> Status Codes --- New Text --- resource MUST NOT succeed if can not be honored by all the URIs through which the resource is addressable.  </s>
<s> !  </s>
<s> 8.10.6  </s>
<s> Lock Compatibility !  </s>
<s> If a resource is locked, any attempt to lock that resource (other !  </s>
<s> than to refresh an existing lock) must fail.  </s>
<s> 8.10.7  </s>
<s> Status Codes *** Original Text *** - D:lockscope D:exclusive/ /D:lockscope --- New Text --- *** Original Text *** - D:lockscope D:exclusive/ /D:lockscope - D:depth Infinity /D:depth --- New Text --- *** Original Text *** !  </s>
<s> This example shows the successful creation of an exclusive write lock on resource http://webdav.sb.aol.com/workspace/webdav/proposal.doc.  </s>
<s> The resource http://www.ics.uci.edu/~ejw/contact.html  </s>
<s> contains contact information for the owner of the lock.  </s>
<s> The server has an --- New Text --- !  </s>
<s> This example shows the successful creation of a write lock on resource http://webdav.sb.aol.com/workspace/webdav/proposal.doc.  </s>
<s> The resource http://www.ics.uci.edu/~ejw/contact.html  </s>
<s> contains contact information for the owner of the lock.  </s>
<s> The server has an *** Original Text *** - D:lockscope D:exclusive/ /D:lockscope - D:depth Infinity /D:depth --- New Text --- *** Original Text *** opaque fields have not been calculated in the Authorization request header.  </s>
<s> - 8.10.10  </s>
<s> Example - Multi-Resource Lock Request -   Request - LOCK /webdav/ HTTP/1.1 - Host: webdav.sb.aol.com - Timeout: Infinite, Second-4100000000 - Depth: infinity - Content-Length: xxxx - realm="ejw@webdav.sb.aol.com", nonce="...", - uri="/workspace/webdav/proposal.doc", - response="...", opaque="..." - ?xml version="1.0"  </s>
<s> encoding="utf-8" ?  </s>
<s> - D:lockinfo xmlns:D="DAV:" - D:locktype D:write/ /D:locktype - D:lockscope D:exclusive/ /D:lockscope - D:owner - D:href http://www.ics.uci.edu/~ejw/contact.html  </s>
<s> /D:href - /D:owner - /D:lockinfo -   Response - HTTP/1.1 207 Multi-Status - Content-Length: xxxx - ?xml version="1.0"  </s>
<s> encoding="utf-8" ?  </s>
<s> - D:multistatus xmlns:D="DAV:" - D:response - D:href http://webdav.sb.aol.com/webdav/secret /D:href - D:status HTTP/1.1 403 Forbidden /D:status - /D:response - D:response - D:href http://webdav.sb.aol.com/webdav/ /D:href - D:propstat - D:prop D:lockdiscovery/ /D:prop - D:status HTTP/1.1 424 Failed Dependency /D:status - /D:propstat - /D:response - /D:multistatus - This example shows a request for an exclusive write lock on a - collection and all its children.  </s>
<s> In this request, the client has - specified that it desires an infinite length lock, if available, - otherwise a timeout of 4.1 billion seconds, if available.  </s>
<s> The request - entity body contains the contact information for the principal taking - out the lock, in this case a web page URL. - The error is a 403 (Forbidden) response on the resource - http://webdav.sb.aol.com/webdav/secret.  </s>
<s> Because this resource could - not be locked, none of the resources were locked.  </s>
<s> Note also that the - lockdiscovery property for the Request-URI has been included as - required.  </s>
<s> In this example the lockdiscovery property is empty which - means that there are no outstanding locks on the resource.  </s>
<s> - In this example, the nonce, response, and opaque fields have not been - calculated in the Authorization request header.  </s>
<s> 8.11 UNLOCK Method The UNLOCK method removes the lock identified by the lock token in --- New Text --- opaque fields have not been calculated in the Authorization request header.  </s>
<s> 8.11 UNLOCK Method The UNLOCK method removes the lock identified by the lock token in *** Original Text *** In this example, the lock identified by the lock token "opaquelocktoken:a515cfa4-5da4-22e1-f5b5-00a0451e6bf7" is successfully removed from the resource !  </s>
<s> http://webdav.sb.aol.com/workspace/webdav/info.doc.  </s>
<s> If this lock !  </s>
<s> included more than just one resource, the lock is removed from all !  </s>
<s> resources included in the lock.  </s>
<s> The 204 (No Content) status code is used instead of 200 (OK) because there is no response entity body.  </s>
<s> In this example, the nonce, response, and opaque fields have not been calculated in the Authorization request header.  </s>
<s> --- New Text --- In this example, the lock identified by the lock token "opaquelocktoken:a515cfa4-5da4-22e1-f5b5-00a0451e6bf7" is successfully removed from the resource !  </s>
<s> http://webdav.sb.aol.com/workspace/webdav/info.doc.  </s>
<s> !  </s>
<s> The 204 (No Content) status code is used instead of 200 (OK) because there is no response entity body.  </s>
<s> In this example, the nonce, response, and opaque fields have not been calculated in the Authorization request header.  </s>
<s> *** Original Text *** --- New Text --- 9.3 Target-Selector Header Target-Selector = The Target-Selector header specifies the URI of a lock token.  </s>
<s> When a Target-Selector header is present, the resource identifed by the request-URL will be the resource identified by that URL when the lock was issued, which may be different from resource currently identified by that URL. *** Original Text *** Namespace: DAV: Purpose: Describes a lock on a resource.  </s>
<s> !  </s>
<s> !ELEMENT activelock (lockscope, locktype, depth, owner?, timeout?, locktoken?) 12.1.2 locktoken XML Element --- New Text --- Namespace: DAV: Purpose: Describes a lock on a resource.  </s>
<s> !  </s>
<s> !ELEMENT activelock (locktype, owner?, timeout?, locktoken?) 12.1.2 locktoken XML Element *** Original Text *** Purpose: Defines the types of locks that can be used with the resource.  </s>
<s> !  </s>
<s> !ELEMENT lockentry (lockscope, locktype) 12.6 lockinfo XML Element --- New Text --- Purpose: Defines the types of locks that can be used with the resource.  </s>
<s> !  </s>
<s> !ELEMENT lockentry (locktype) 12.6 lockinfo XML Element *** Original Text *** Purpose: The lockinfo XML element is used with a LOCK method to specify the type of lock the client wishes to have created.  </s>
<s> !  </s>
<s> !ELEMENT lockinfo (lockscope, locktype, owner?) !  </s>
<s> 12.7 lockscope XML Element !  </s>
<s> Name: lockscope !  </s>
<s> Namespace: DAV: !  </s>
<s> Purpose: Specifies whether a lock is an exclusive lock, or a !  </s>
<s> shared lock.  </s>
<s> !  </s>
<s> !ELEMENT lockscope (exclusive | shared) !  </s>
<s> 12.7.1 exclusive XML Element !  </s>
<s> Name: exclusive !  </s>
<s> Namespace: DAV: !  </s>
<s> Purpose: Specifies an exclusive lock !  </s>
<s> !ELEMENT exclusive EMPTY !  </s>
<s> 12.7.2 shared XML Element !  </s>
<s> Name: shared !  </s>
<s> Namespace: DAV: !  </s>
<s> Purpose: Specifies a shared lock !  </s>
<s> !ELEMENT shared EMPTY 12.8 locktype XML Element --- New Text --- Purpose: The lockinfo XML element is used with a LOCK method to specify the type of lock the client wishes to have created.  </s>
<s> !  </s>
<s> !ELEMENT lockinfo (locktype, owner?) 12.8 locktype XML Element *** Original Text *** - D:lockscope D:exclusive/ /D:lockscope - D:depth 0 /D:depth --- New Text --- *** Original Text *** !  </s>
<s> This resource has a single exclusive write lock on it, with an infinite timeout.  </s>
<s> 13.11 supportedlock Property --- New Text --- !  </s>
<s> This resource has a write lock on it, with an infinite timeout.  </s>
<s> 13.11 supportedlock Property *** Original Text *** - D:lockscope D:exclusive/ /D:lockscope - D:lockscope D:shared/ /D:lockscope --- New Text ---  </s>
<s> gmc My non-proposal is as follows: Modify RFC-2518 to: gmc - remove depth locks, shared locks, and lock null resources gmc - add a Target-Selector header for reliable access to a locked resource gmc - make simple single resource locking mandantory.  </s>
<s> "Stop it ... You're getting me *hot*!  </s>
<s> :-)"  </s>
<s> -- Server implementers everywhere bill@carpenter.ORG  </s>
<s> (WJCarpenter) PGP bill@bubblegum.net  </s>
<s> 0x91865119 38 95 1B 69 C9 C6 3D 25 73 46 32 04 69 D6 ED F3  </s>
<s> Hello, I'm back again after being in hospital for some weeks.  </s>
<s> It seems there was a hot debate over my proposal which is over now but I still would like to add my $0.02.  </s>
<s> I think the cut is cool :-).  </s>
<s> You wanted a simpler standard Yaron, so how's this ?  </s>
<s> BTW, I'm trying to write a client for Oberon (http://www.oberon.ethz.ch)  </s>
<s> so my decisions aren't important for many people.  </s>
<s> Nevertheless, FYI I don't plan to spend time for the arcane features Geoff wants to drop (if I can avoid it).  </s>
<s> I don't think they are worth my time.  </s>
<s> Then I have a question.  </s>
<s> Why is a DELETE allowed ?  </s>
<s> Shouldn't be in my opinion (7.1 Methods Restricted by Write locks).  </s>
<s> Perhaps this should be clarified so that a DELETE for the locked binding is forbidden but an DELETE on other bindings is allowed.  </s>
<s> Here is a difference between DELETE and PUT,POST,... Now some global stuff :-) - I think that locks are here to stay in RFC2518, they are on the resource and move with the resource.  </s>
<s> - Now as a server administrator I absolutely want to be able to move locked resoures if it is necessary.  </s>
<s> - OTOH as a client I won't tolerate disappearing resources I have locked.  </s>
<s> - Therefore my proposal that an access to a moved resource (changed binding) with URL and locktoken must give me the new URL (not the resource).  </s>
<s> So the client can tell his user: Look this stuff has been moved !  </s>
<s> And after it is accessed one time the server can drop his note about the move.  </s>
<s> The client now knows where it has gone to.  </s>
<s> So I also see no problems with the following scenarios.  </s>
<s> - Multiple moves: the client only wants to know where it is now.  </s>
<s> He isn't interested in intermediate bindings.  </s>
<s> This also should work with inter server moves.  </s>
<s> A server only has to remember the URL on the other server it is moved to.  </s>
<s> If there are more moves it's the responsibility of the receiving server to remember.  </s>
<s> Now Yarons problems: - Being at work, taking a lock: If you want to work at home then you obviously have to remember the lock.  </s>
<s> Then you can access it at home without any problem with lock and old URL. - Editing HTML in Word, validiating in Netscape: If somebody moves the resource inbetween Netscape won't find it, oops !  </s>
<s> You go back to Word and e.g. try to reload the document.  </s>
<s> Word tells you that it has moved to another location.  </s>
<s> Then you just have to adapt the URL in Netscape.  </s>
<s> Not so complex I still think.  </s>
<s> Cheers, Edgar Edgar.Schwarz@de.bosch.com  </s>
<s> ON/EUE1, 07191/13-3382 Niklaus Wirth: Privat kann jeder soviel C programmieren oder Videos ansehen wie er mag.  </s>
<s> Albert Einstein: Mach es so einfach wie moeglich, aber nicht einfacher.  </s>

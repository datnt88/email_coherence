Hello to all, I'm implementing a piece of code doing XMLdsig tasks and encountered a problem. 
How to calculate the DigestValue over an Object URI? 
I used a sample xml-signature in XMLSec Library to test my thinking, but found no clue for such kind of DigestValue calculation. 
Let me explain my problem in detail, from this sample xml-signature called signature-enveloping-rsa.xml: CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20 010315" / SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" / ov3HOoPN0w71N3DdGNhN+dSzQm6NJFUB5qGKRp9Q986nVzMb8wCIVxCQu+x3vMtq p4/R3KEcPtEJSaoR+thGq++GPIh2mZXyWJs3xHy9P4xmoTVwli7/l7s8ebDSmnbZ 7xZU4Iy1BSMZSxGKnRG+Z/0GJIfTz8jhH6wCe3l03L4= q07hpxA5DGFfvJFZueFl/LI85XxQxrvqgVugL25V090A9MrlLBg5PmAsxFTe+G6a xvWJQwYOVHj/nuiCnNLa9a7uAtPFiTtW+v5H3wlLaY3ws4atRBNOQlYkIBp38sTf QBkk4i8PEU1GQ2M0CLIJq4/2Akfv1wxzSQ9+8oWkArc= AQAB its Reference URI is "object", so I used sha1 and base64 to calculate Object Id="object" some text /Object and got: /9WvFNJq0ILEJqk45gJOBnVEcs0= which is different from the DigestValue: 7/XTsHaBSOnJ/jXD5v0zL6VKYsk= Would you pleased tell me what's wrong with this DigestValue calculation? 
Another question is: does the Referenced element need a Canonicalization? 
For example, Will Object Id="object" some text /Object digest the same value with Object Id="object"  some text /Object  ? 
Thank you. 
John 
Hello John, I forward your request to our next XAdES plugtests participants (XMLDSIG developpers and service providers) If you think in coming too or if your curious about interop, have a look at I hope you'll get an answer from TC ESI/XAdES, W3C or IETF people Best Regards Patrick GUILLEMIN Plugtests Technical Coordinator tel +33(0)4 92 94 43 31 Hello to all, I'm implementing a piece of code doing XMLdsig tasks and encountered a problem. 
How to calculate the DigestValue over an Object URI? 
I used a sample xml-signature in XMLSec Library to test my thinking, but found no clue for such kind of DigestValue calculation. 
Let me explain my problem in detail, from this sample xml-signature called signature-enveloping-rsa.xml: CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20 010315" / SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" / ov3HOoPN0w71N3DdGNhN+dSzQm6NJFUB5qGKRp9Q986nVzMb8wCIVxCQu+x3vMtq p4/R3KEcPtEJSaoR+thGq++GPIh2mZXyWJs3xHy9P4xmoTVwli7/l7s8ebDSmnbZ 7xZU4Iy1BSMZSxGKnRG+Z/0GJIfTz8jhH6wCe3l03L4= q07hpxA5DGFfvJFZueFl/LI85XxQxrvqgVugL25V090A9MrlLBg5PmAsxFTe+G6a xvWJQwYOVHj/nuiCnNLa9a7uAtPFiTtW+v5H3wlLaY3ws4atRBNOQlYkIBp38sTf QBkk4i8PEU1GQ2M0CLIJq4/2Akfv1wxzSQ9+8oWkArc= AQAB its Reference URI is "object", so I used sha1 and base64 to calculate Object Id="object" some text /Object and got: /9WvFNJq0ILEJqk45gJOBnVEcs0= which is different from the DigestValue: 7/XTsHaBSOnJ/jXD5v0zL6VKYsk= Would you pleased tell me what's wrong with this DigestValue calculation? 
Another question is: does the Referenced element need a Canonicalization? 
For example, Will Object Id="object" some text /Object digest the same value with Object Id="object"  some text /Object  ? 
Thank you. 
John 
Hi John, Out of curiousity, are you canonicalizing the object before calculating the hash? 
When you said that you calculated the hash of Object Id="object" some text /Object , I noticed in particular that it is missing the default namespace node for the signature namespace. 
Hope this helps you. 
John Boyer, Ph.D. Senior Product Architect and Research Scientist PureEdge Solutions Inc. Hello to all, I'm implementing a piece of code doing XMLdsig tasks and encountered a problem. 
How to calculate the DigestValue over an Object URI? 
I used a sample xml-signature in XMLSec Library to test my thinking, but found no clue for such kind of DigestValue calculation. 
Let me explain my problem in detail, from this sample xml-signature called signature-enveloping-rsa.xml: CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20 010315" / SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" / ov3HOoPN0w71N3DdGNhN+dSzQm6NJFUB5qGKRp9Q986nVzMb8wCIVxCQu+x3vMtq p4/R3KEcPtEJSaoR+thGq++GPIh2mZXyWJs3xHy9P4xmoTVwli7/l7s8ebDSmnbZ 7xZU4Iy1BSMZSxGKnRG+Z/0GJIfTz8jhH6wCe3l03L4= q07hpxA5DGFfvJFZueFl/LI85XxQxrvqgVugL25V090A9MrlLBg5PmAsxFTe+G6a xvWJQwYOVHj/nuiCnNLa9a7uAtPFiTtW+v5H3wlLaY3ws4atRBNOQlYkIBp38sTf QBkk4i8PEU1GQ2M0CLIJq4/2Akfv1wxzSQ9+8oWkArc= AQAB its Reference URI is "object", so I used sha1 and base64 to calculate Object Id="object" some text /Object and got: /9WvFNJq0ILEJqk45gJOBnVEcs0= which is different from the DigestValue: 7/XTsHaBSOnJ/jXD5v0zL6VKYsk= Would you pleased tell me what's wrong with this DigestValue calculation? 
Another question is: does the Referenced element need a Canonicalization? 
For example, Will Object Id="object" some text /Object digest the same value with Object Id="object"  some text /Object  ? 
Thank you. 
John 
Dear John Boyer, Thank you for the answer, I think my problem should be that I applied a 'partial' C14N transforming before calculating the hash. 
Since my C14N implementation is lack of a 'document subsets transforming', the default namespace is not propagated onto the Object element. 
Therefore, when I tried a real C14N form which is: Object xmlns="http://www.w3.org/2000/09/xmldsig#" Id="object" some text /Object with sha1 and base64, I got: 7/XTsHaBSOnJ/jXD5v0zL6VKYsk= which is identical to the DigestValue. 
Thanks for your help. 
John major 

<s> Here is a draft of a merged requirements document.  </s>
<s> I tried not to make many substantive changes, since we seemed to have consensus on the content of the two original papers.  </s>
<s> Fabio Vitali provided lots of help and good advice in merging the two papers, although I did not follow his advice on all points.  </s>
<s> Comments from Fabio and me are marked *** in this draft.  </s>
<s> I have tried to mark points that conflict with the current specification or that seem to be subjects of controversy within the group.  </s>
<s> Please review this document and provide comments.  </s>
<s> If we are to meet our schedule, which calls for the requirements to be an Internet Draft by the end of February, we need to try to resolve outstanding issues by February 24.  </s>
<s> I'm also sending out a separate mailnote that summarizes what I take to be the areas where the requirements and the specification are in conflict, and areas that are controversial.  </s>
<s> Thanks for your help.  </s>
<s> --Judy WEBDAV Working GroupJ.A. Slein INTERNET-DRAFT Xerox Corporation E.J. Whitehead, Jr. U.C. Irvine D.G. Durand Boston University F. Vitali University of Bologna February 1997 Expires August 1997 Requirements on HTTP for Distributed Authoring and Versioning Status of this Memo This document is an Internet draft.  </s>
<s> Internet drafts are working documents of the Internet Engineering Task Force (IETF), its areas and its working groups.  </s>
<s> Note that other groups may also distribute working information as Internet drafts.  </s>
<s> Internet Drafts are draft documents valid for a maximum of six months and can be updated, replaced or obsoleted by other documents at any time.  </s>
<s> It is inappropriate to use Internet drafts as reference material or to cite them as other than as "work in progress".  </s>
<s> To learn the current status of any Internet draft please check the "lid-abstracts.txt"  </s>
<s> listing contained in the Internet drafts shadow directories on ftp.is.co.za (Africa), nic.nordu.net  </s>
<s> (Europe), munnari.oz.au (Pacific Rim), ds.internic.net  </s>
<s> (US East coast) or ftp.isi.edu (US West coast).  </s>
<s> Further information about the IETF can be found at URL: http://www.ietf.org/  </s>
<s> Distribution of this document is unlimited.  </s>
<s> Please send comments to the WWW Distributed Authoring and Versioning mailing list, w3c-dist-auth@w3.org , which may be joined by sending a message with subject "subscribe" to w3c-dist-auth-request@w3.org .  </s>
<s> Discussions are archived at URL: working group at http-wg@cuckoo.hpl.hp.com also discusses the HTTP protocol.  </s>
<s> Discussions of the HTTP working group are archived at URL: and the applications which use HTTP should take place on the www-talk@w3.org  </s>
<s> mailing list.  </s>
<s> Abstract The HyperText Transfer Protocol, version 1.1 (HTTP/1.1),  </s>
<s> provides simple support for applications which allow remote editing of typed data.  </s>
<s> In practice, the existing capabilities of HTTP/1.1 have proven inadequate to support efficient, scalable remote editing free of overwriting conflicts.  </s>
<s> This document presents a list of features in the form of requirements which, if implemented, would improve the efficiency of common remote editing operations, provide a locking mechanism to prevent overwrite conflicts, improve relationship management support between non-HTML data types, provide a simple attribute-value metadata facility, provide for the creation and reading of container data types, and integrate versioning into the WWW. 1. Introduction This document describes functionality which, if provided in the HyperText Transfer Protocol (HTTP) [4], would support the interoperability of tools which allow remote loading, editing and saving (publishing) of various media types using HTTP.  </s>
<s> As much as possible, this functionality is described without suggesting a proposed  </s>
<s> implementation, since there are many ways to perform the functionality  </s>
<s> within the HTTP framework.  </s>
<s> It is also possible that a single mechanism within HTTP could simultaneously satisfy several requirements.  </s>
<s> ***Fabio - Many of the versioning requirements call for extensions to URLs, not to HTTP.  </s>
<s> ***Judy - There is controversy in the group about whether we should be extending HTTP or defining a separate protocol.  </s>
<s> 2. Rationale The HTTP protocol contains functionality which enables the editing of web content at a remote location, without direct access to the storage media via an operating system.  </s>
<s> This capability is exploited by several existing HTML distributed authoring tools, and by a growing number of mainstream applications (e.g. word processors) which allow users to write (publish) their work to an HTTP server.  </s>
<s> To date, experience from the HTML authoring tools has shown they are unable to meet their users' needs using the facilities of the HTTP protocol.  </s>
<s> The consequence of this is either postponed introduction of distributed authoring capability, or the addition of nonstandard extensions to the HTTP protocol.  </s>
<s> These extensions, developed in isolation, are not interoperable.  </s>
<s> Other authoring applications have wanted to access document repositories or version control systems through Web gateways, and have been similarly frustrated.  </s>
<s> Where this access is available at all, it is through nonstandard extensions to HTTP that force clients to use a different interface for each vendor's service.  </s>
<s> This document describes requirements for a set of standard extensions to HTTP that would allow distributed Web authoring tools to provide the functionality their users need by means of the same standard syntax across all compliant servers.  </s>
<s> The broad categories of functionality that need to be standardized are: Attributes Relationships Locking Notification of Intent to Edit Retrieval of Unprocessed Source for Editing Partial Write Name Space Manipulation Collections Versioning 3. General Principles This section describes a set of general principles that the HTTP extensions should follow.  </s>
<s> These principles cut across categories of functionality.  </s>
<s> 3.1.  </s>
<s> User Agent Interoperability All clients should be able to work with any WebDAV-compliant HTTP  </s>
<s> server.  </s>
<s> It is acceptable for some client/server combinations to provide  </s>
<s> special features that are not universally available, but the protocol should be sufficient that a basic level of functionality will be universal.  </s>
<s> It should be possible for servers and clients to negotiate the use of optional features.  </s>
<s> 3.2.  </s>
<s> Legacy Client Support WebDAV-compliant servers should be able to interoperate with non-WebDAV clients.  </s>
<s> 3.3.  </s>
<s> Data Format Compatibility.  </s>
<s> WebDAV-compliant servers should be able to work with existing resources and URLs.  </s>
<s> Special additional information should not become a mandatory part of document formats.  </s>
<s> 3.4.  </s>
<s> HTTP Compatibility (new) Our aim is to make extended authoring capabilities available through HTTP.  </s>
<s> In extending HTTP, we are obligated to follow its design conventions and stay within its spirit.  </s>
<s> This means, for example, that methods should operate only on resources.  </s>
<s> It means that parameters should be communicated in headers.  </s>
<s> These and other conventions should be observed in the design of the extensions.  </s>
<s> 3.5.  </s>
<s> Replicated, Distributed Systems (new) Distribution and replication are at the heart of the Internet.  </s>
<s> All WebDAV extensions should be designed to allow for distribution and replication.  </s>
<s> Version trees should be able to be split across multiple servers.  </s>
<s> Collections may have members on different servers.  </s>
<s> Resources may have attributes on different servers.  </s>
<s> Any resources may be cached or replicated for mobile computing or other reasons.  </s>
<s> Consequently, we must keep these issues in mind through all our design efforts.  </s>
<s> 4. Requirements In the requirement descriptions below, the requirement will be stated, followed by its rationale.  </s>
<s> If any distributed authoring tools currently implement the requirement, this is also mentioned.  </s>
<s> It is assumed that "server" means "a program which receives and responds to HTTP requests," and that "distributed authoring tool" or "intranet enabled tool" means "a program which can retrieve a source entity via HTTP, allow editing of this entity, and then save/publish this entity to a server using HTTP."  </s>
<s> A "client" is "a program which issues HTTP requests and accepts responses."  </s>
<s> (Get rid of references to current tools altogether, or do more thorough research.) 4.1.  </s>
<s> Attributes Via HTTP, it should be possible to create, modify, query, read and delete arbitrary attributes on resources of any media type.  </s>
<s> ***Judy - Query is not supported in the specification.  </s>
<s> Attributes can be used to define fields such as author, title, subject, and organization, on resources of any media type.  </s>
<s> These attributes have many uses, such as supporting searches on attribute contents, and the creation of catalog entries as a placeholder for an object which is not available in electronic form, or which will be available later.  </s>
<s> 4.2.  </s>
<s> Relationships Via HTTP, it should be possible to create, query, and delete typed relationships between resources of any media type.  </s>
<s> A hypertext link is a relationship between resources which is browsable using a hypertext style point-and-click user interface.  </s>
<s> Relationships, whether they are browsable hypertext links, or simply a means of capturing a interrelation between resources, have many purposes.  </s>
<s> Relationships can support pushbutton printing of a multi-resource document in a prescribed order, jumping to the access control page for an resource, and quick browsing of related information, such as a table of contents, an index, a glossary, help pages, etc. While relationship support is provided by the HTML "LINK" element, this is limited only to HTML resources, and does not support bitmap image types, and other non-HTML media types.  </s>
<s> AOLpress from America Online [1] currently "allows pages to add toolbar buttons on the fly using the HTML 3.2 LINK REL.... tag.  </s>
<s> For example, your page can add toolbar buttons that link to a home page, table of contents, index, glossary, copyright page, next page, previous page, help page, higher level page, or a bookmark in the document."  </s>
<s> ***Fabio - The definition of locking here conflicts with the one that was used in the versioning requirements paper.  </s>
<s> More in a separate mail note.  </s>
<s> 4.3.  </s>
<s> Locking 4.3.1.  </s>
<s> General Principles 4.3.1.1.  </s>
<s> Independence of locks.  </s>
<s> It should be possible to lock a resource without re-reading the resource, and without committing to editing the resource.  </s>
<s> 4.3.1.2.  </s>
<s> Multi-Resource Locking.  </s>
<s> It should be possible to take out a lock on multiple resources in the same action, and this locking operation must be atomic across these resources.  </s>
<s> ***Judy - Multi-resource locking is not in the specification 4.3.1.3.  </s>
<s> Partial-Resource Locking.  </s>
<s> It should be possible to take out a lock on subsections of an resource.  </s>
<s> ***Judy - Controversy on this issue at Irvine.  </s>
<s> 4.3.1.4.  </s>
<s> Multi-Person Locking.  </s>
<s> It should be possible to assign a lock to a single person or to multiple persons with a single action.  </s>
<s> ***Judy - Multi-person locking is not in the specification.  </s>
<s> ***Fabio - Add a statement that support for locking is optional.  </s>
<s> Also say that systems that do not support locking should provide some other type of consistency management.  </s>
<s> 4.3.2.  </s>
<s> Functional Requirements 4.3.2.1.  </s>
<s> Write Locks.  </s>
<s> It should be possible, via HTTP, to restrict modification of a resource to a specific person, or list of persons.  </s>
<s> ***Fabio - The definition of a write lock should be this: A write lock states that no consistency problem will ever occur by changing the resource, not that no one else is allowed access to that resource.  </s>
<s> On the other hand, it can be said that access rights to successfully Unlocked resources should be allowed to all authorized users.  </s>
<s> 4.3.2.2.  </s>
<s> Read Locks.  </s>
<s> It should be possible, via HTTP, to indicate to the HTTP server that the contents of a resource should not be modified until the read lock is released.  </s>
<s> ***Judy - Read locks are not in the specification.  </s>
<s> 4.3.2.3.  </s>
<s> Lock Query.  </s>
<s> It should be possible to query for whether a given URL has any active modification restrictions, and if so, who currently has modification permission.  </s>
<s> ***Judy - Should add Unlock.  </s>
<s> 4.3.3.  </s>
<s> Rationale At present, HTTP provides limited support for preventing two or more people from overwriting each other's modifications when they save to a given URL.  </s>
<s> Furthermore, there is no way for people to discover if someone else is currently making modifications to a resource.  </s>
<s> This is known as the "lost update problem," or the "overwrite problem."  </s>
<s> Since there can be significant cost associated with discovering and repairing lost modifications, preventing this problem is crucial for supporting distributed authoring.  </s>
<s> A "write" lock ensures that only one person (or list of persons) may modify a resource, preventing overwrites.  </s>
<s> Furthermore, locking support is also a key component of many versioning schemes, a desirable capability for distributed authoring.  </s>
<s> An author may wish to lock an entire web of resources even though he is editing just a single resource, to keep the other resources from changing.  </s>
<s> In this way, an author can ensure that if a local hypertext web is consistent in his distributed authoring tool, it will then be  </s>
<s> consistent when he writes it to the server.  </s>
<s> Because of this, it should  </s>
<s> be possible to take out a lock without also causing transmission of the  </s>
<s> contents of a resource.  </s>
<s> Since it should not be assumed that because a  </s>
<s> resource is locked, that it will necessarily be modified, and since many people may wish to have simultaneous guarantees that a resource will not be modified, but still not want to modify the resource themselves, it is desirable to have a "read" lock capability.  </s>
<s> A read lock, by being less restrictive, provides better support than a write lock for providing a guarantee that a resource will not be modified.  </s>
<s> Put differently, a read lock states that the resource is guaranteed not to change for the duration of the lock.  </s>
<s> A write lock states that a resource is guaranteed not to change only if the owner of the lock  </s>
<s> does not change it, and only the owner of the lock may change it.  </s>
<s> It is often necessary to guarantee that a lock or unlock operation occurs at the same time across multiple resources, a feature which is supported by the multiple-resource locking requirement.  </s>
<s> This is useful for preventing a collision between two people trying to establish locks on the same set of resources, since with multi-resource locking, one of the two people will get a lock.  </s>
<s> If this same multiple-resource locking scenario was repeated by using atomic lock operations iterated across the resources, the result would be a splitting of the locks between the two people, based on resource ordering and race conditions.  </s>
<s> Partial resource locking provides support for collaborative editing applications, where multiple users may be editing the same resource simultaneously.  </s>
<s> Partial resource locking also allows multiple people to simultaneously work on a database type resource.  </s>
<s> 4.4.  </s>
<s> Notification of Intention to Edit.  </s>
<s> It should be possible to notify the HTTP server that a resource is about to be edited by a given person.  </s>
<s> It should be possible to query the HTTP server for the list of people who have notified the server of their intent to edit a resource.  </s>
<s> ***Judy - It should be possible to notify the server that one no longer intends to edit the resource.  </s>
<s> ***Judy - Support for notification of intent to edit is found in the specification only in the context of version management.  </s>
<s> The specification does not allow such notification for non-versioned resources.  </s>
<s> Experience from configuration management systems has shown that people need to know when they are about to enter a parallel editing situation.  </s>
<s> Once notified, they either decide not to edit in parallel with the other authors, or they use out-of-band communication (face-to-face, telephone, etc.) to coordinate their editing to minimize the difficulty of merging their results.  </s>
<s> Notification is separate from locking, since a write lock does not necessarily imply a resource will be edited, and a notification of intention to edit does not carry with it any access restrictions.  </s>
<s> This capability is supportive of versioning, since a check-out typically involves taking out a write lock, making a notification of intention to edit, and getting the resource to be edited.  </s>
<s> 4.5.  </s>
<s> Retrieval of Unprocessed Source for Editing The source of any given entity should be retrievable via HTTP.  </s>
<s> ***Judy - Not in the specification.  </s>
<s> There are many cases where the source stored on a server does not correspond to the actual entity transmitted in response to an HTTP GET.  </s>
<s> Current known cases are server side include directives, and Standard Generalized Markup Language (SGML) source which is converted on the fly to HyperText Markup Language (HTML) [2] output entities.  </s>
<s> There are many possible cases, such as automatic conversion of bitmap images into several variant bitmap media types (e.g. GIF, JPEG), and automatic conversion of an application's native media type into HTML.  </s>
<s> As an example of this last case, a word processor could store its native media type on a server which automatically converts it to HTML.  </s>
<s> A GET of this resource would retrieve the HTML.  </s>
<s> Retrieving the source would retrieve the word processor native format.  </s>
<s> This requirement should be met by a general mechanism which can handle both the "single-step" source processing described above, where the source is converted into the transmission entity via a single conversion step, as well as "multi-step" source processing, where there are one or more intermediary processing steps and outputs.  </s>
<s> An example of multi-step source processing is the relationship between an executable binary image, its object files, and its source language files.  </s>
<s> It should be noted that the relationship between source and transmission entity could be expressed using the relationship functionality described above in "4.2.  </s>
<s> Relationships."  </s>
<s> 4.6.  </s>
<s> Partial Write.  </s>
<s> After editing a resource, it should be possible, via HTTP, to write only the changes to the resource, rather than retransmitting the entire resource.  </s>
<s> ***Judy - Not in the specification.  </s>
<s> During distributed editing which occurs over wide geographic separations and/or over low bandwidth connections, it would be extremely inefficient (and frustrating) to rewrite a large resource after minor changes, such as a one-character spelling correction.  </s>
<s> Ideally, support will be provided for transmitting "insert" (e.g., add this sentence in the middle of a document) and "delete" (e.g. remove this paragraph from the middle of a document) style updates.  </s>
<s> Support for partial resource updates will make small edits more efficient, and allow distributed authoring tools to scale up for editing of large documents.  </s>
<s> 4.7.  </s>
<s> Name Space Manipulation ***Fabio - A general treatment of server's name space management from clients should be introduced here.  </s>
<s> ***Judy - Need more details of the semantics of copy and move, especially for collections, versioned resources, and resources with attributes.  </s>
<s> ***Judy - In the specification, but not mentioned here: Destroy, Undelete, CopyHead, MoveHead.  </s>
<s> 4.7.1.  </s>
<s> Copy.  </s>
<s> Via HTTP, it should be possible to make a byte-for-byte duplicate of a resource without a client loading, then resaving the resource.  </s>
<s> This copy should leave an audit trail.  </s>
<s> There are many reasons why a resource might need to be duplicated, such as change of ownership, a precursor to major modifications, or to make a backup.  </s>
<s> In combination with delete functionality, copy can be used to implement rename and move capabilities, by performing a copy to a new name, and a delete of the old name.  </s>
<s> Due to network costs associated with loading and saving a resource, it is far preferable to have a server perform a resource copy than a client.  </s>
<s> If a copied resource records which resource it is a copy of, then it would be possible for a cache to avoid loading the copied resource if it already locally stores the original.  </s>
<s> 4.7.2.  </s>
<s> Move/Rename.  </s>
<s> Via HTTP, it should be possible to change the URL of a resource without a client loading, then resaving the resource under a different name.  </s>
<s> It is often necessary to change the name of a resource, for example due to adoption of a new naming convention, or if a typing error was made entering the name originally.  </s>
<s> Due to network costs, it is undesirable to perform this operation by loading, then resaving the resource, followed by a delete of the old resource.  </s>
<s> Similarly, a single rename operation is more efficient than a copy followed by a delete operation.  </s>
<s> Ideally an HTTP server should record the move operation, and issue a "301 Moved Permanently" status code for requests on the old URL.  </s>
<s> A move operation, if implemented with attribute support, should also preserve most attributes across a move.  </s>
<s> Note that moving a resource is considered the same function as renaming a resource.  </s>
<s> 4.8.  </s>
<s> Collections 4.8.1.  </s>
<s> List Collection.  </s>
<s> A listing of all resources, along with their media type, and last modified date, which are located in a specific collection should be accessible via HTTP.  </s>
<s> ***Judy - Not in the specification.  </s>
<s> In [3] it states that, "some URL schemes (such as the ftp, http, and file schemes) contain names that can be considered hierarchical."  </s>
<s> Especially for HTTP servers which directly map all or part of their URL name space into a filesystem, it is very useful to get a listing of all resources located at a particular hierarchy level.  </s>
<s> This functionality supports "Save As..." dialog boxes, which provide a listing of the entities at a current hierarchy level, and allow navigation through the hierarchy.  </s>
<s> It also supports the creation of graphical visualizations (typically as a network) of the hypertext structure among the entities at a hierarchy level, or set of levels.  </s>
<s> It also supports a tree visualization of the entities and their hierarchy levels.  </s>
<s> In addition, document management systems may want to make their documents accessible through HTTP.  </s>
<s> They typically allow the organization of documents into collections, and so also want their users to be able to view the collection hierarchy through HTTP.  </s>
<s> There are many instances where there is not a strong correlation between a URL hierarchy level and the notion of a collection.  </s>
<s> One example is a server in which the URL hierarchy level maps to a computational process which performs some resolution on the name.  </s>
<s> In this case, the contents of the URL hierarchy level can vary depending on the input to the computation, and the number of resources accessible via the computation can be very large.  </s>
<s> It does not make sense to implement a directory feature for such a namespace.  </s>
<s> However, the utility of listing the contents of those URL hierarchy levels which do correspond to collections, such as the large number of HTTP servers which map their namespace to a filesystem, argue for the inclusion of this capability, despite not being meaningful in all cases.  </s>
<s> If listing the contents of a URL hierarchy level does not makes sense for a particular URL, then a "405 Method Not Allowed" status code could be issued.  </s>
<s> AOLpress from America Online currently supports "Save As..." dialog boxes, and graphical network visualization of a portion of a site's hypertext structure, which they term a "mini-web."  </s>
<s> FrontPage from Microsoft [6] also currently supports a graphical network visualization and additionally supports a tree visualization of a portion of a site's structure.  </s>
<s> 4.8.2.  </s>
<s> Make Collection.  </s>
<s> Via HTTP, it should be possible to create a new collection.  </s>
<s> The ability to create collections to hold related resources supports management of a name space by packaging its members into small, related clusters.  </s>
<s> The utility of this capability is demonstrated by the broad implementation of directories in recent operating systems.  </s>
<s> The ability to create a collection also supports the creation of "Save As..." dialog boxes with "New Level/Folder/Directory" capability, common in many applications.  </s>
<s> AOLpress from America Online currently supports this capability through their "Save As..." dialog box, and their custom MKDIR method.  </s>
<s> 4.9.  </s>
<s> Versioning In the following discussion, "versioned resource" means a resource that has the structure of a directed acyclic graph, each node of which is a version.  </s>
<s> "Version" means a node in this structure, which is itself a resource.  </s>
<s> Each version typically stands in a "derived from" relationship to its predecessor(s).  </s>
<s> ***Judy - new definitions 4.9.1.  </s>
<s> General Principles 4.9.1.1.  </s>
<s> Stableness of versions.  </s>
<s> Most versioning systems are intended to provide an accurate record of the history of evolution of a document.  </s>
<s> This accuracy is ensured by the fact that a version eventually becomes "frozen" and immutable.  </s>
<s> Once a version is frozen, further changes will create new versions rather than modifying the original.  </s>
<s> In order for caching and persistent references to be properly maintained, a client must be able to determine that a version has been frozen.  </s>
<s> We require that unlocked resource versions be frozen.  </s>
<s> This enables the common practice of keeping unfrozen "working versions".  </s>
<s> Any successful attempt to retrieve a frozen version of a resource will always retrieve exactly the same content, or return an error if that version (or the resource itself) are no longer available.  </s>
<s> Since URLs may be reassigned at a server's discretion this requirement applies only for that period of time during which a URL identifies the same resource.  </s>
<s> HTTP 1.1's Entity tags will need to be integrated into the versioning strategy in order for caching to work properly.  </s>
<s> ***Judy - Does the specification support this?  </s>
<s> 4.9.1.2.  </s>
<s> Policy-free Versioning.  </s>
<s> Haake and Hicks [5] have identified the notion of versioning styles (referred to here as versioning policies, to reflect the nature of client/server interaction) as one way to think about the different policies that versioning systems implement.  </s>
<s> Versioning policies include decisions on the shape of version histories (linear or branched), the granularity of change tracking, locking requirements made by a server, etc.  </s>
<s> The protocol should not unnecessarily restrict version management policies to any one paradigm.  </s>
<s> For instance, locking and version number assignment should be inter-operable across servers and clients, even if there are some differences in their preferred models.  </s>
<s> 4.9.1.3.  </s>
<s> Separation of resource retrieval and concurrency control.  </s>
<s> The protocol must separate the reservation and release of versioned resources from their access methods.  </s>
<s> Provided that consistency constraints are met before, during and after the modification of a versioned resource, no single policy for accessing a resource should be enforced by the protocol.  </s>
<s> For instance, a user may declare an intention to write before or after retrieving a resource via GET, may PUT a resource without releasing the lock, and might even request a lock via HTTP, but then retrieve the document using another communication channel such as FTP.  </s>
<s> ***Judy - The specification assumes that it's the server, not the user, that determines the policy -- order of operations and what operations are required.  </s>
<s> ***Judy - "Separation of resource retrieval and concurrency control" is supported by the Request-Lock, Request-Intent, and Request-Working-Loc parameters to the CheckOut method and the discovery mechanism.  </s>
<s> This is all embroiled in the controversy over how much latitude we want to give servers, how simple we want to make things for clients, whether we want to rely on the discovery mechanism, etc. 4.9.2.  </s>
<s> Functional Requirements ***Judy - In the specification, but not mentioned here: Diff/Merge, ServerMerge, UnVersion.  </s>
<s> 4.9.2.1.  </s>
<s> Access to specific versions via a URL.  </s>
<s> For each version of a resource, on a server, there should be a URL to refer to that version.  </s>
<s> That is, a version is itself a resource.  </s>
<s> This is required for version-specific linking, and for non-versioning client support.  </s>
<s> 4.9.2.2.  </s>
<s> A URL to denote a versioned resource itself, rather than specific versions of it.  </s>
<s> This identifier is needed for queries about the versioning status of a resource, that do not apply only to one version of that resource.  </s>
<s> It is also used to perform operations (such as adjusting attributes, changing locks, or reassigning URLs) that affect all versions of a resource, rather than any specific version.  </s>
<s> 4.9.2.3.  </s>
<s> Direct access to a server-defined "default", "current" or "tip" version of a resource.  </s>
<s> This is one of the simplest ways to guarantee non-versioning client compatibility.  </s>
<s> If no special version information is provided, the server will provide a default.  </s>
<s> This does not rule out the possibility of a server returning an error when no sensible default exists, but it does provide a standard way to support non-versioning clients, and one of the most common version access disciplines.  </s>
<s> 4.9.2.4.  </s>
<s> A way to access common related URLs from the URL of a particular version or of a versioned resource: o root version(s) of this document o predecessor version(s) of this document o successor version(s) of this document o default version of this document It must be possible in some way for a versioning client to access versions related to a resource whose URL it has.  </s>
<s> In particular, access to the "default" version of a resource is an extremely important operation, that a client should be able to perform at any time that a URL for a particular version or for a versioned resource is seen.  </s>
<s> ***Judy - Specification provides some, but not all, of these navigation paths.  </s>
<s> 4.9.2.5.  </s>
<s> A way to retrieve the complete version topology for a resource.  </s>
<s> There should be a way to retrieve information about all versions of a resource.  </s>
<s> The format for this information must be standardized so that the basic information can be used by all clients.  </s>
<s> Other specialized formats should be accomodated, for servers and clients that require information that cannot be included in the standard topology.  </s>
<s> 4.9.2.6.  </s>
<s> A way to determine whether a given URL points to a version of a versioned resource.  </s>
<s> ***Judy - Are we requiring that you be able to tell this just by examining the URL?  </s>
<s> 4.9.2.7.  </s>
<s> A way to distinguish, given a URL of a version, the part of the URL that identifies the version from the part that identifies the versioned resource.  </s>
<s> ***Judy - Do we really have to (want to) require that you be able to find out the URL of the versioned resource by examining the URL of the version?  </s>
<s> Is the requirement really just that there be some way to find out, for any version, the URL of its versioned resource?  </s>
<s> ***Judy - Specification does not provide a way to find out the URL of the versioned resource(s) to which a version belongs.  </s>
<s> Being able to determine the URL of the versioned resource makes it possible to implement browsing the version tree.  </s>
<s> It also supports some comparison operations: It makes it possible to determine whether two URLs designate versions of the same versioned resource.  </s>
<s> However, given the phenomenon of URL aliasing, it is insufficient to determine that they are not versions of the same resource.  </s>
<s> ***Judy - If 4.9.2.8 - 14 are intended to require separate operations for each of these functions, they conflict with the approach taken in the WEBDAV specification.  </s>
<s> 4.9.2.8.  </s>
<s> A way to request exclusive access to a version of a resource (Lock).  </s>
<s> (See Section 4.3 "Locking" above.)  </s>
<s> Since not all systems implement lock-based access, the protocol should not require clients to take out a lock before editing, nor should it require servers to support locking.  </s>
<s> 4.9.2.9.  </s>
<s> A way to release exclusive access to a resource (Unlock).  </s>
<s> This is the inverse of Lock.  </s>
<s> 4.9.2.10.  </s>
<s> A way for a client to declare an intention to modify a resource (Reserve).  </s>
<s> (See Section 4.4 "Notification of Intent to Edit" above.)  </s>
<s> This operation is required before any versioned update.  </s>
<s> Its effects may vary depending on server policy, from locking a resource, to forking a new variant, to a NOOP on servers that do not track sessions or restrict updates.  </s>
<s> If this operation returns a version number, the client is required to make sure that it uses a copy of the data associated with that version number of the resource for any update operations it carries out.  </s>
<s> Servers that wish to enforce a mandatory GET operation before update, should simply use a fresh version identifier on the return from this operation.  </s>
<s> 4.9.2.11.  </s>
<s> A way to declare the end of an intention to write a resource (Release).  </s>
<s> This is the inverse of Reserve.  </s>
<s> Typically, servers will commit updates at this time, and return a final version identifier if possible and if it was not already returned.  </s>
<s> 4.9.2.12.  </s>
<s> A way to submit a new version of a resource (PUT).  </s>
<s> The server should be able to attach it to the correct part of the version tree, based on the version number associated with the resource before its modification.  </s>
<s> 4.9.2.13.  </s>
<s> A way for a client to request a version identifier for a checked out version.  </s>
<s> Such an identifier will not be used by any other client in the meantime.  </s>
<s> The server may refuse the request.  </s>
<s> 4.9.2.14.  </s>
<s> A way for a client to propose a version identifier upon submitting a version of a resource.  </s>
<s> The server may refuse to to use the client's suggested version identifier.  </s>
<s> 4.9.2.15.  </s>
<s> A way for a client to supply metadata to be associated with a version.  </s>
<s> (See Section 4.1 "Attributes" above.)  </s>
<s> The kinds of data supplied here might be simple textual comments or more structured data.  </s>
<s> An ability to attach arbitrary fields and content is probably required, but a standard set of attributes that would enable interoperation would be useful.  </s>
<s> At a minimum, it must be possible to associate comments with a version, explaining what changes were made, when it is checked in.  </s>
<s> 4.9.2.16.  </s>
<s> A way for a server to provide a version identifier to be used for a resource in further operations.  </s>
<s> This identifier must accompany client requests to manipulate the resource.  </s>
<s> In particular, if a resource is being modified, the identifier must be used when submitting an update.  </s>
<s> This allows servers to track active sessions by assigning version identifiers when documents are retrieved, locked, or reserved.  </s>
<s> 4.9.2.17.  </s>
<s> A way to track resources that have been Reserved (Session Tracking).  </s>
<s> This allows the server to ensure that the user operating on a resource is the same one who Reserved it.  </s>
<s> ***Judy -- Not in the specification.  </s>
<s> ***Judy - Uncheckout is neither in the requirements nor in the specification.  </s>
<s> Do we need it?  </s>
<s> 4.9.3.  </s>
<s> Rationale Versioning in the context of the world-wide web offers a variety of benefits: It provides infrastructure for efficient and controlled management of large evolving web sites.  </s>
<s> Modern configuration management systems are built on some form of repository that can track the revision history of individual resources, and provide the higher-level tools to manage those saved versions.  </s>
<s> Basic versioning capabilities are required to support such systems.  </s>
<s> It allows parallel development and update of single resources.  </s>
<s> Since versioning systems register change by creating new objects, they enable simultaneous write access by allowing the creation of variant versions.  </s>
<s> Many also provide merge support to ease the reverse operation.  </s>
<s> It provides a framework for access control over resources.  </s>
<s> While specifics vary, most systems provide some method of controlling or tracking access to enable collaborative resource development.  </s>
<s> It allows browsing through past and alternative versions of a resource.  </s>
<s> Frequently the modification and authorship history of a resource is critical information in itself.  </s>
<s> It provides stable names that can support externally stored links for annotation and link-server support.  </s>
<s> Both annotation and link servers frequently need to store stable references to portions of resources that are not under their direct control.  </s>
<s> By providing stable states of resources, version control systems allow not only stable pointers into those resources, but also well-defined methods to determine the relationships of those states of a resource.  </s>
<s> It allows explicit semantic representation of single resources with multiple states.  </s>
<s> A versioning system directly represents the fact that a resource has an explicit history, and a persistent identity across the various states it has had during the course of that history. 5. Acknowledgements (Get current mailing list) Our understanding of these issues has emerged as the result of much thoughtful discussion, email, and assistance by many people, who deserve recognition for their effort.  </s>
<s> Martin Cagan, Continuus Software, Marty_Cagan@continuus.com  </s>
<s> Dan Connolly, World Wide Web Consortium, connolly@w3.org  </s>
<s> Ron Fein, Microsoft, ronfe@microsoft.com  </s>
<s> David Fiander, Mortice Kern Systems, davidf@mks.com  </s>
<s> Roy Fielding, U.C. Irvine, fielding@ics.uci.edu  </s>
<s> Yaron Goland, Microsoft, yarong@microsoft.com  </s>
<s> Phill Hallam-Baker, MIT, hallam@ai.mit.edu  </s>
<s> Dennis Hamilton, Xerox PARC, hamilton@parc.xerox.com  </s>
<s> Andre van der Hoek, University of Colorado, Boulder, andre@bigtime.cs.colorado.edu  </s>
<s> Gail Kaiser, Columbia University, kaiser@cs.columbia.edu  </s>
<s> Rohit Khare, World Wide Web Consortium, khare@w3.org  </s>
<s> Dave Long, America Online, dave@sb.aol.com  </s>
<s> Henrik Frystyk Nielsen, World Wide Web Consortium, frystyk@w3.org  </s>
<s> Ora Lassila, Nokia Research Center, ora.lassila@research.nokia.com  </s>
<s> Larry Masinter, Xerox PARC, masinter@parc.xerox.com  </s>
<s> Murray Maloney, SoftQuad, murray@sq.com  </s>
<s> Jim Miller, World Wide Web Consortium, jmiller@w3.org  </s>
<s> Andrew Schulert, Microsoft, andyschu@microsoft.com  </s>
<s> Christopher Seiwald, Perforce Software, seiwald@perforce.com  </s>
<s> Richard Taylor, U.C. Irvine, taylor@ics.uci.edu  </s>
<s> Robert Thau, MIT, rst@ai.mit.edu 6. References [1] America Online, "AOL Web Tools -- AOLpress 1.2 Features."  </s>
<s> WWW page.  </s>
<s> [2] T. Berners-Lee, D. Connolly.  </s>
<s> "HyperText Markup Language Specification - 2.0." RFC 1866, MIT/LCS, November 1995.  </s>
<s> [3] T. Berners-Lee, L. Masinter, M. McCahill.  </s>
<s> "Uniform Resource Locators (URL)."  </s>
<s> RFC 1738, CERN, Xerox PARC, University of Minnesota, December 1994.  </s>
<s> [4] R. Fielding, J. Gettys, J. C. Mogul, H. Frystyk, and T. Berners-Lee.  </s>
<s> "Hypertext Transfer Protocol -- HTTP/1.1." RFC 2068, U.C. Irvine, DEC, MIT/LCS, January 1997.  </s>
<s> [5] A. Haake, D. Hicks.  </s>
<s> "VerSE: Towards Hypertext Versioning Styles", Proc.  </s>
<s> Hypertext'96, the Seventh ACM Conference on Hypertext, 1996, pages 224-234.  </s>
<s> [6] Microsoft.  </s>
<s> "Microsoft FrontPage for Windows Data Sheet."  </s>
<s> WWW page.  </s>
<s> default.htm.  </s>
<s> [7] K. Osterbye.  </s>
<s> "Structural and Congitive Problems in Providing Version Control for Hypertext", Proceedings of the ACM Conference on Hypertext, Milano, Italy, 1992, pp 33-42.  </s>
<s> [8] "Version Control in Hypermedia Databases" Technical report TAMU-HRL-91-004, Hypertext Research Lab, Texas A&amp;M University.  </s>
<s> 1991.  </s>
<s> Authors' Addresses Judith Slein Xerox Corporation 800 Phillips Road 128-29E Webster, NY 14580 E. James Whitehead, Jr. Department of Information and Computer Science University of California Irvine, CA 92697-3425 David G. Durand Department of Computer Science Boston University Boston, MA Fabio Vitali Department of Computer Science University of Bologna ITALY Name:Judith A. Slein E-Mail:slein@wrc.xerox.com  </s>
<s> MailStop:128-29E  </s>
<s> Dear all,  </s>
<s> Some more comments about things that were opinions too personal to be put into the document.  </s>
<s> Ehm, yes.  </s>
<s> The URL does not contain enough information to be able to determine the position of the version in the version tree, but enough to be able to tell a versioned resource from an unversioned one.  </s>
<s> At least this is what we came in July, when we discussed about these things,I think.  </s>
<s> Well, the idea was to have the URL of a version to be "something more" than the URL of the whole resource, and that this "something more", although opaque to the client, could be easily separated from the rest of the URL, so that it was possible to find out the whole resource, given one version of it.  </s>
<s> They do not "conflict", per se, I think more or less they overlap (not counting the semantic of locks).  </s>
<s> That's why I am proposing a substantial reshuffle of things, as detailed below.  </s>
<s> I propose that * 4.9.2.8 (Lock) is replaced by 4.3.2.1 (Write Lock), but I am also proposing a discussion on the semantic of LOCK.  </s>
<s> * 4.9.2.9 (Unlock) should be added to section 4.3.2. * 4.9.2.10 (Reserve) is replaced by 4.4 (Notification of Intention to Edit) * 4.9.2.11 (Release) should be added to section 4.4 * 4.9.2.12 (Put) should be moved to a more appropriate section, for instance, 4.6 (Partial Write), letting it become therefore simply "Write".  </s>
<s> * 4.9.2.13 (request identifier) should be added to 4.4 * 4.9.2.14 (propose identifier) should be added to 4.4 * 4.9.2.15 (resource metadata) is replaced by 4.1 (Attributes) * 4.9.2.16 (provide identifier) should be added to 4.4 * 4.9.2.17 (track resources) should be added to 4.4  </s>
<s> I propose that we start considering the issue of a MIME type to contain partial update data, and that we start developing a common format.  </s>
<s> I also propose VTML as a basis for it.  </s>
<s> I will post the latest spec of VTML if there is interest in this.  </s>
<s> Fabio Vitali  </s>
<s> What is the rationale for wanting this capability?  </s>
<s> What user scenario does this support?  </s>
<s> I'm starting to think this might be a design decision (especially if you require version identifier information embedded in a URL), not a true requirement.  </s>
<s> Same issue.  </s>
<s> What capability are we really trying to support?  </s>
<s> Is the idea to provide the user a way to figure out from the name what version they're working with?  </s>
<s> Or is the consumer of this information software?  </s>
<s> Also, I fear that any URL decoration scheme will have an assumption of a non-replicated version store behind it.  </s>
<s> I'm also interested in how you propose to keep URL's opaque, yet still embed semantic information (in this case, a version identifier) in them.  </s>
<s> - Jim  </s>
<s> Well, no, actually...  </s>
<s> All the people who just do versioning thought that  </s>
<s> some URI-based scheme was the most sensible.  </s>
<s> The W3C position, strongly articulated by Dan Connolly, was that any interpretation of URLs was not acceptable.  </s>
<s> Without arguing the merits of that approach (I disagree that is it a useful  </s>
<s> restriction in this case), we said "a method" in order to allow the group to decide whether "URL-hacking" or new HTTP methods were the best implementation.  </s>
<s> So the function is required.  </s>
<s> The obvious implementation in  </s>
<s> terms of URLs can come up for discussion again.  </s>
<s> The early archives of the versioning discussion have a great deal of discussion of this point.  </s>
<s> As above, "URL-hacking" was a controversial approach that some were not willing to accept.  </s>
<s> The functionality is crucial, but if URLs cannot be interpreted new HTTP methods are needed, and a round-trip is required for certain obvious operations.  </s>
<s> I will add that VTML also contains facilities to send multiple versions of a document in a single reasonably organized package.  </s>
<s> This is essentially a simplification/generalization for general stream of the kind of information kept in a version repository.  </s>
<s> -- David David Durand dgd@cs.bu.edu \ david@dynamicDiagrams.com  </s>
<s> Boston University Computer Science \ Sr. Analyst --------------------------------------------\ http://dynamicDiagrams.com/ MAPA: mapping for the WWW \__________________________  </s>
<s> Just to be clear: That's certainly my position (and TimBLs and Henriks)... calling the W3C position might be overstating things a bit -- we aren't speaking for the members in this case.  </s>
<s> Huh? I don't think that conclusion follows: What's wrong with sending the version info along side the URL whenever you need it, in order to prevent round-trips?  </s>
<s> That's what protocol design is all about, right?  </s>
<s> That completely tells the relationship between XXX and YYY without URL-munging.  </s>
<s> If you're not familiar with the resource concept, please see: Actually, more folks seem to like the name about for this purpose.  </s>
<s> And other folks want to express the same thing in S-expressions.  </s>
<s> Stay tuned to see how it all comes out.  </s>
<s> The bottom line is: don't look in the name for this info.  </s>
<s> Put it somewhere else.  </s>
<s> Yup... that's what this group is doing: figuring out how to exchange data between version repositories.  </s>
<s> Dan  </s>
<s> Agreed, my explanation was worse than could have been.  </s>
<s> As David says,  </s>
<s> , which wasn't hinted to in no way in my "explanation", and for which I am deeply sorry.  </s>
<s> I probably went further and proposed some design consideration, which are not appropriate in a requirement document.  </s>
<s> Thus the generic wording ("a way to determine...") is appropriate there.  </s>
<s> Nonetheless, the issue of whether using URL mangling or additional HTTP methods has to be faced, sooner or later.  </s>
<s> Barred those cases of alias URLs (in which I can give a version of a resource an URL that doesn't show sign of beign a version of anything), my point is that those URLs that are used by some appropriate user agents to determine base URL and version identifier -- those that that specific form of URL form was created for -- well, them: it should be possible for every agent, not just the proper one, to distinguish in those URLs a part that could be called "base URL" and a part that could be called "version identifier".  </s>
<s> Now, as far as I am personally concerned, I would like to be able to require, simply and flatly, that a version identifier is an overspecificaton of a path in a URL: version 3.2 of could have the URL: http://host/resource.html/Einstein/Jim/3.2 or something like that.  </s>
<s> Since this is not deemed possible, we have to find other solutions, but, please, could there be a way, in the URL of something showing signs of being a version of something, to determine which is the base URL of the resource and which is the version identifier?  </s>
<s> No. Well, yes because we are calling them URLs instead of what they should be, URIs.  </s>
<s> But not otherwise.  </s>
<s> It's in the URI that you keep the information about the suite of hosts in which the resource is replicated, spreaded, or whatever.  </s>
<s> The issue, again, is whether we want to require an additional round-trip to determine information such as the base URL, or the default version, etc., or can we deduce it, in some way, from the URL alone, even if we don't agree on a format for version identifiers in URLs, etc.  </s>
<s> Now, the question is: is there a safe way, without imposing a format on version identifiers, to be able to deduce from URLs this basic information?  </s>
<s> If so, why bother generalizing?  </s>
<s> Couldn't we simply adopt that?  </s>
<s> Even if it means imposing a format on URLs?  </s>
<s> Having this information would be useful both for software AND for humans, very much like I and Netscape Navigator both know that the URLs same resource, even if the URLs are different.  </s>
<s> I don't believe the URL as a whole should be opaque.  </s>
<s> I believe it should be composed of two opaque parts, one being the opaque URL of the base resource, and the other the opaque string of the version identifier, just like http://host/application?parameter is composed of two opaque but easily identifiable parts, a base URL and some additional information.  </s>
<s> Maybe what I said is just stupid, and David hints that it has already been discussed before, I probably missed or forgot that.  </s>
<s> But the prohibition to interpret URLs is not complied to neither for locations (after #), nor for parameters (after ?). So this would be a (highly justifiable) case for another special decoration.  </s>
<s> Tough.  </s>
<s> But, the way I see it is that the alternative is *REQUIRING* an additional HTTP request for editors that are not of the same brand of the server, and therefore can't interpret the URL directly.  </s>
<s> This implies that the users using matched server and user agent may discover some information in one trip, while the users using a different user agent would require two.  </s>
<s> I can just see the comparisons and benchmarks of servers and clients on Byte.  </s>
<s> This is a GOOD excuse for information racism.  </s>
<s> Fabio Vitali  </s>
<s> It should not be possible to tell if a URL represents a versioned resource - Sign me up w/Connolly et all on this point.  </s>
<s> VTML - VTML is cool but given that no versioning system currently requires that sort of transfer functionality I have to wonder as to its utility.  </s>
<s> Still, we do need a mechanism to do partial writes.  </s>
<s> This is something to be considered as part of the implementation, not the requirements.  </s>
<s> Yaron  </s>
<s> # Maybe what I said is just stupid, and David hints that it has already been # discussed before, I probably missed or forgot that.  </s>
<s> But the prohibition to # interpret URLs is not complied to neither for locations (after #), nor for # parameters (after ?). So this would be a (highly justifiable) case for # another special decoration.  </s>
<s> Tough.  </s>
<s> I've been in the middle of the process of standardization of URLs for nearly five years now, and I can assure you that "Tough" is an understatement.  </s>
<s> Your "highly justifiable" is unjustified.  </s>
<s> The only justification you've given is that you think this will optimize the protocol involved in some (unspecified) versioning operations.  </s>
<s> On the other hand, the arguments against using any standard syntactic extension to URLs are pretty strong.  </s>
<s> As I see it, if you really examine the situations wher eyou think you're unnecessarily requiring an additional HTTP request, the additional request is necessary, since you'll actually need more information about the resource than just the URL of the root.  </s>
<s> # I can just see the comparisons and benchmarks of servers and clients on Byte.  </s>
<s> # This is a GOOD excuse for information racism.  </s>
<s> Useless hyperbole.  </s>
<s> Please desist.  </s>
<s> Regards, Larry  </s>

<s> Well, I bet everyone hoped that xml:base was over!  </s>
<s> It isn't.  </s>
<s> Summary issues: #1: (raised by Stuart Williams of the TAG).  </s>
<s> RFC2396 refers to same document references.  </s>
<s> rdf:ID is a same document reference.  </s>
<s> A close reading of the RFC suggests that xml:base *does not* apply to same document references.  </s>
<s> I do not believe that this was the intent of the WG, and have  </s>
<s> used a different algorithm (that in ARP) which *does* apply xml:base to same document references.  </s>
<s> #2: (first raised as an ARP defect, solved by There is a minor bug in the algorithm of RFC 2396 which I explicitly correct.  </s>
<s> I follow Mark Birbeck:  </s>
<s> #3: It is possible to construct an RDF/XML document which uses the same ID to represent two different URIs.  </s>
<s> I allow this.  </s>
<s> #4: The XML Base spec and RFC 2396 are silent about using a URI of non-generic syntax (e.g. a mailto or a urn) as the base.  </s>
<s> I think this is broken and have created test cases showing that.  </s>
<s> Contents Background.  </s>
<s> Issues.  </s>
<s> Test cases overview.  </s>
<s> Background RFC 2396 is primarily concerned with URLs in a web browser or web server.  </s>
<s> While the intent is to be more general, at times that intent is not fulfilled.  </s>
<s> RDF uses absolute URI refs as the labels on nodes in the RDF graph.  </s>
<s> The XML base standard assumes (incorrectly) that RFC 2396 is unproblematic.  </s>
<s> Issue #1 - Same Document References RFC 2396 section 4.2 defines same document references.  </s>
<s> These are URI references of the form "#foo" and "".  </s>
<s> The algorithm in section 5.2 terminates in step 2 for same document references.  </s>
<s> Since the base URI is only used from steps 3 onwards, RFC 2396 *does not* license the use of a base URI to resolve same document references.  </s>
<s> Since rdf:ID is a same document reference, and central to RDF, any use of xml:base within RDF requires it to apply to same document references.  </s>
<s> Impacts test cases 001, 004, 008, 014 Issue #2 - Minor bug when base has no path component.  </s>
<s> See: test case 011 and RFC 2396 section 5.2 does not insert a "/" when the base path is missing and the relative URI is a relative path.  </s>
<s> Issue #3 - Duplicate rdf:ID with different bases See test case 014.  </s>
<s> This is a straight call: is test case 014 legal or an error.  </s>
<s> I prefer legal primarily because it makes reification syntax easier.  </s>
<s> (I will expand on that if there is interest in this topic).  </s>
<s> Issue #4 - Non-generic syntax for base URI I have created the error cases that illustrate my beliefs.  </s>
<s> These are not backed up by any chapter and verse from RFC 2396 and/or XML Base.  </s>
<s> In particular RFC 2396 (appendix A) would permit a URI and hence provide a plausible meaning to error001 Test Case Overview The test cases are intended to be stored in: this impacts test005.nt  </s>
<s> Test cases 001 - 004 various RDF syntactic elements impacted by xml:base (rdf:ID, rdf:about, rdf:resource, rdf:ID for reification).  </s>
<s> Test case 005 - 006 scoping of xml:base Test case 007 - 013 examples of the combination of a base URI and a relative URI or same document reference, showing various different cases.  </s>
<s> Test case 014 - see issue #3 above Error cases - see issue #4 above.  </s>
<s> Jeremy  </s>
<s> Noting that rdf:ID is _not_ an XML ID-type attribute, can't we define rdf:ID not to be a same-document reference in the sense of RFC 2396?  </s>
<s> Then it can be defined as generating a URI relative to the current xml:base?  </s>
<s> Seems reasonable.  </s>
<s> Seems reasonable.  </s>
<s> I think I agree.  </s>
<s> I think one could conceivably follow RFC2396 to allow combination of a base URI scheme with an opaque_part path, but I can't see why that might be useful.  </s>
<s> #g Graham Klyne MIMEsweeper Group Strategic Research http://www.mimesweeper.com  </s>
<s> We have already defined it to be rdf:about="# Even if we somehow managed to fix rdf:ID the problem of rdf:about="#frag" would be with us.  </s>
<s> RFC 2396 is unfortunately clear that "#frag" is not an absolute URI or a relative URI but a same document reference.  </s>
<s> The algorithm in section 5.2 is equally clear, and feels inapplicable to me.  </s>
<s> Also the usage rdf:about="" is recommended by DAML, and this too is a same document reference in RFC 2396, and treated as one by the recommended algorithm.  </s>
<s> Jeremy  </s>
<s> OK, I withdraw my comment.  </s>
<s> #g  </s>
<s> Graham Klyne MIMEsweeper Group Strategic Research http://www.mimesweeper.com  </s>

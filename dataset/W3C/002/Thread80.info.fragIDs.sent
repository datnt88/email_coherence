<s> Rick Roth Biztro, Inc. rickr@biztro.com  </s>
<s> mailto:rickr@biztro.com  </s>
<s> ... well, he wrote nothing... ;-) but his question was: Is there any way to  </s>
<s> get TIDY to recursively tidy up a tree of files?  </s>
<s> I am currently working on a perl script to convert certain HTML files into XML files, it basically is called like "./html2xml.pl  </s>
<s> source_path/to/html_files target_path/to/xml_files". The path to the HTML sources is processed recursively, the XML files are written to the target directory (without recursivle re-creating the directory structure, but that should be a minor modification only).  </s>
<s> If I find some time next week, I'll have a go at it... for instance, you can take this piece of perl code and modify it to your needs.... push (@DirStack, $ARGV[0]); $XMLDir = $ARGV[1]; while ($DirCursor = pop @DirStack) { opendir TheDir, $DirCursor; @DirContent = readdir TheDir; foreach $Filename (@DirContent) { if (($Filename eq '.') || ($Filename eq '..')) { next; $FilePath = $DirCursor.'/'.$Filename; if (-d $FilePath) { push @DirStack, $FilePath; next;  </s>
<s> if ($FilePath =~ /.html?$/i)  </s>
<s> { open (INFILE, "  $FilePath") or die("ERROR: \'$FilePath\' not openable for reading!\n"); $FILE = join("", INFILE ); close (INFILE); $FILE = trim(retrieveVariables($FILE)); #printVariablesToScreen(); printXMLFile(); print "Parsed file: " .  </s>
<s> $FilePath .  </s>
<s> " - " .  </s>
<s> $XMLFilename .  </s>
<s> "\n"; closedir TheDir;  </s>
<s> Sebastian Lange Maybe the first chat site that validates as HTML 4.0 even though user input may contain HTML codes.  </s>
<s> Courtesy to Dave Raggett's HTML Tidy:  </s>
<s> Re: Is there any way to get TIDY to recursively tidy up a tree of files?  </s>
<s> He didn't specify his OS preference, but I can offer various solutions with the Mac OS versions of Tidy, that make it relatively easy to recursively tidy up a tree of files.  </s>
<s> Contact me directly for more info.  </s>
<s> Regards, Terry Teague  </s>
<s> ... well, he wrote nothing... ;-) but his question was: Is there any way to get TIDY to recursively tidy up a tree of files?  </s>
<s> We adopted a rather different approach, using a robot rather than a directory tree.  </s>
<s> This involved using htdig (www.htdig.org)  </s>
<s> to create a URL list, and then passed this list to htdig using JTidy as an external parser.  </s>
<s> It allows us to call other parsers for non HTML files transcluded in the HTML via a , embed , img , applet etc. Can I repeat a question I posed to the list (with no response; perhaps none exists).  </s>
<s> If one does use Tidy recursively,enforcing the cleaning up of tags to use CSS, how might one go about recursively uniquifying the resulting multiple stylesheets into a single one applicable to the entire document tree?  </s>
<s> Its non trivial, and I was wondering if anyone knew of a product, opensource or commercial that might undertake this?  </s>
<s> Is there perhaps another list this question might be posed to?  </s>
<s> Dept.  </s>
<s> Chemistry, Imperial College, London, SW7 2AY, UK.  </s>
<s> It is, indeed, not trivial...  </s>
<s> As a first approach, I would try the following: The freshly tidied HTML file would have to be processed once more by a perl script, which in a first step would have to turn the class definitions into unique definitions (I believe that tidy names classes like "c1", "c2" etc, thus "c1" may be a different definition for one document than for another), adjust the class attributes throughout the document accordingly, write the modified style definitions into the wanted external CSS document and replace the STYLE /STYLE with the appropriate LINK REL="..." .  </s>
<s> This should work, but the resulting CSS Document will be fairly large and quite ugly.  </s>
<s> Second idea then would be to reduce redundancy by checking first whether a class definition already exists before adding it to the CSS document...  </s>
<s> A well, Mr. Rzepa, a paid two weeks vacation in London does sound tempting... maybe my employer would even let me go... ;-) sebastian PS: did I make any sense at all?  </s>
<s> Cyperfection - agentur fuer neue medien GmbH Sebastian Lange Karl-Kraemer-Str. 4 D-67061 Ludwigshafen fon: +49-(0)621-587104-0 Anfahrt - http://www.cyperfection.de/Anfahrt/  </s>

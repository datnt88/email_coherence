<s> Dear all,  </s>
<s> I need to pick up the issue of temporal URI fragments again.  </s>
<s> Attached is  </s>
<s> another revision that addresses some of the previously stated issues.  </s>
<s> Now that we have sorted through all the other open issues, it is high time to resume the discussion on the one issue of temporal URI fragments that does not conform with the current URI standard specification.  </s>
<s> I would like to get this issue added to the issues list and sorted out before declaring the revision finished.  </s>
<s> I am still hopeful that we can come to a future-proof expert agreement on how to standardise uniform addressing of temporal and named offsets into time-continuous data through URIs.  </s>
<s> It will have large implications on the usefulness of the Web for digital online radio &amp; TV stations as well for the Web access of large volume (and I'm talking about terabytes of data) archives.  </s>
<s> Let me explain the issue in a sequence of statements: 1.) There is a need to standardise a specification for temporal URIs: - I have received comments from many different standards bodies (SMPTE, MPEG, Pro-MPEG) that supported this temporal addressing scheme - in MPEG-21, several different ways of specifying temporal references into resources are being proposed, such as #media_time(17:30) or #01:00:00:00; our suggestion is another one - all temporal Web resources share a need to identify temporal offsets and users should not have to learn and get confused by many different ways of specifying them in URIs when we can prescribe one standard way of doing so.  </s>
<s> 2.) Direct addressing of named highlights in time-continuous resources  </s>
<s> (such as audio &amp; video) as fragment identifiers is desirable:  </s>
<s> - time-continuous media on the Web is non-attractive because it is awkward and inefficient to use - one main reason being its inherent inaccessability: bits of interest cannot be addressed directly - just as it is useful and sensible for html resources to be able to address named anchors (i.e. named objects or offsets) through fragments, it is also useful and sensible for time-continuous resources to be able to address named objects through fragments.  </s>
<s> - many file formats of time-continuous data already have a way of specifying special objects/highlights by names (e.g. QuickTime chapters, WindowsMedia markers) - direct access to named highlights through use of the name in fragments is desirable 3.) There is a requirement for time-continuous resources to perform the retrieval action of subparts of media server-side: - time-continuous media has large volumes; just a 1 hour video will require 25 GB in DV format - a user who requests a interval of or a time offset into such a resource should not need to have to be made to wait while data that he has not requested is getting delivered 4.) The problem of using fragments for addressing offsets into time-continuous resources: - fragment identifiers are a natural and the prefered way of specification of temporal and named URI references by at least MPEG-21 and ourselves because fragments imply that the original resource is bascially unchanged and that only a subpart is referenced (as said in the new I-D: "identifying information that is selective within that resource") - forcing URI fragments into time-continuous resources to be interpreted client-side makes them nearly useless (see 3 above) - the proposal to use the query ("?") component instead of the fragment identifier for the specification of temporal URI references may be a solution for temporal URIs, but fails for named fragments and fails to address the point.  </s>
<s> If fragments are useful for anything more than small-size resources (such as html and pdf), then addressing of subparts of resources also needs to result in resources that represent that subpart.  </s>
<s> - while the current URI standard says that "fragment identifiers have a special role in information systems as the primary form of client-side indirect referencing", this is a prescription that is not technically necessary and only mirrors current use (as in html or pdf).  </s>
<s> Without limiting this current use, we can easily add the possibility to perform referencing on the server where needed.  </s>
<s> The simple summary to my rant is that people will build systems that use temporal URI fragment identifiers into time-continuous media no matter whether we support it or not.  </s>
<s> And they will not want to be restricted by having to perform the offset action client-side.  </s>
<s> RTP/RTSP already offer a way around this problem by specifying the temporal offset or interval in a protocol parameter.  </s>
<s> If a temporal URI fragment is used over RTSP, the effect will be that the user agent strips off the fragment and puts it into that protocol parameter and then retrieves for its user the subpart of the resource that was requested.  </s>
<s> This effectively contradicts the prescription of the current version of the URI standard of having to perform the offset action on the client side.  </s>
<s> We currently have the chance to foresee this usage and allow it under controlled conditions.  </s>
<s> I firmly believe that the alternative is that we will get back to another revision of this standard a few years down the track where we will have to incorporate this change under more uncontrolled conditions with many non-interoperable implementations around.  </s>
<s> Therefore, let's resolve it now.  </s>
<s> My proposal to resolve this problem is based on the fact that the "retrieved representation" of the resource on which the fragment offset gets performed is the same on the client as the one that is available at the server's side just before sending it off.  </s>
<s> I'd therefore like to argue that we could as well allow the application of the fragment offset on the server side as the very final step, in cases where this is more appropriate to the MIME type and the user's requirements.  </s>
<s> Best Regards, Silvia Pfeiffer.  </s>
<s> Network Working Group S. Pfeiffer Internet-Draft C. Parker Expires: December 6, 2003 CSIRO June 7, 2003 Syntax of temporal URI fragment specifications draft-pfeiffer-temporal-fragments-01 Status of this Memo This document is an Internet-Draft and is in full conformance with all provisions of Section 10 of RFC2026.  </s>
<s> Internet-Drafts are working documents of the Internet Engineering Task Force (IETF), its areas, and its working groups.  </s>
<s> Note that other groups may also distribute working documents as Internet-Drafts.  </s>
<s> Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  </s>
<s> It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."  </s>
<s> The list of current Internet-Drafts can be accessed at http:// www.ietf.org/ietf/1id-abstracts.txt.  </s>
<s> The list of Internet-Draft Shadow Directories can be accessed at This Internet-Draft will expire on December 6, 2003.  </s>
<s> Copyright Notice Copyright (C) The Internet Society (2003).  </s>
<s> All Rights Reserved.  </s>
<s> Abstract This document specifies a syntax for temporal offsets and intervals as URI fragments.  </s>
<s> Such fragment identifiers are useful to directly  </s>
<s> access temporal offset points and intervals in time-continuous  </s>
<s> resources such as audio and video.  </s>
<s> The URI fragment syntax specified  </s>
<s> in this document is comformant to the Generic URI Syntax as specified in RFC 2396 [2].  </s>
<s> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 [1].  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 1] Internet-Draft Temporal URI Fragments June 2003 Table of Contents 1. Introduction . . . . . . . . . . . . . . . . . . . . . . . . . 3 2. Temporal fragment specification .  </s>
<s> . . . . . . . . . . . . . . 4 3. Time schemes .  </s>
<s> . . . . . . . . . . . . . . . . . . . . . . . . 5 4. Intended usage .  </s>
<s> . . . . . . . . . . . . . . . . . . . . . . .  </s>
<s> 8 5. Security considerations .  </s>
<s> . . . . . . . . . . . . . . . . . .  </s>
<s> 9 6.  </s>
<s> Disucssion points to be resolved .  </s>
<s> . . . . . . . . . . . . . . 10 6.1 Interpretation of temporal fragments on server .  </s>
<s> . . . . . . . 10 7. ChangeLog . . . . . . . . . . . . . . . . . . . . . . . . . .  </s>
<s> 11 References . . . . . . . . . . . . . . . . . . . . . . . . . .  </s>
<s> 12 Authors' Addresses . . . . . . . . . . . . . . . . . . . . . .  </s>
<s> 12 A. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  </s>
<s> 13 Intellectual Property and Copyright Statements . . . . . . . .  </s>
<s> 14 Pfeiffer &amp; Parker Expires December 6, 2003 [Page 2] Internet-Draft Temporal URI Fragments June 2003 1. Introduction Many resources on the Internet are time-continuous data such as audio or video files or streams.  </s>
<s> This document describes a standard way of addressing temporal offsets into and temporal intervals of such resources through a temporal URI fragment syntax.  </s>
<s> In this way, points of interest and intervals in time-continuous files or streams can be directly accessed.  </s>
<s> The aim is to make it simple to incorporate infrastructure into the Web which supports the browsing and searching of time-continuous media.  </s>
<s> The interpretation of the  </s>
<s> temporal fragment is however dependent on the URI scheme in use and the content type of the resource referenced.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 3] Internet-Draft Temporal URI Fragments June 2003  </s>
<s> 2. Temporal fragment specification Fragments are generally specified in a URI after the crosshatch ("#") character.  </s>
<s> The format of fragment identifiers specified in this document is conformant to the URI RFC 2396 [2] for fragment identifiers, but retricts their use to an interpretation on the user agent only.  </s>
<s> See section 5 for a proposed alternative usage.  </s>
<s> Temporal fragments start with the reserved character "@", representing the time-continuous resource "at" a certain temporal offset.  </s>
<s> The "@" character is reserved and this specification is giving it a reserved purpose.  </s>
<s> Having the "@" character at the start simplifies parsing of a temporal fragment specification, helping to e.g. distinguish between a fragment given by name as "#smpte-25" and a fragment given as a temporal offset as "#@smpte-25=01:01:01:01".  </s>
<s> The specification of a temporal fragment offset itself is given as a  </s>
<s> name-value pair, where the name specifies a time scheme to use and the value is the time specification itself.  </s>
<s> The syntax is closely related to the specification of relative timestamps of the RTSP protocol parameters as given in RFC 2326 [3].  </s>
<s> Temporal intervals can be specified as well.  </s>
<s> This is achieved by adding the reserved character "-" and another time specification that adheres to the time scheme used for the specification of the first time point.  </s>
<s> The BNF for temporal fragment offsets and temporal intervals is: temporal-fragment = "@" [ timescheme "=" ] timespec ["-" timespec] timescheme = *unreserved timespec = *uric There are several time schemes that can be used.  </s>
<s> The default time scheme is "npt" (normal play time).  </s>
<s> The available time schemes and their specifications are described in the next section.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 4] Internet-Draft Temporal URI Fragments June 2003 3. Time schemes A time scheme is a short identifier for a type of time specification.  </s>
<s> The following general time schemes are specified in this document.  </s>
<s> Further time schemes are expected to emerge and should probably be registered through IANA (XXX this needs to be discussed XXX).  </s>
<s> o "npt" (Normal Play Time; base of seconds as used in the RTSTP standard [3]) o "smpte" (Society of Motion Picture and Television Engineers time codes as specified in the SMPTE time and control code standard [4]) o "utc" (Universal Time Code giving wall-clock time as specified in the ISO 8601 standard [5]).  </s>
<s> Thus, the available time schemes are: NPT time has a second or subsecond resolution.  </s>
<s> It is specified as H:M:S.h (npt-hhmmss) or S.h (npt-sec), where H=hours, M=minutes, S=second and h=fractions of a second.  </s>
<s> Negative values are not allowed.  </s>
<s> Specification as BNF: npt-spec = "npt=" npt-time npt-time = npt-sec | npt-hhmmss npt-sec = 1*DIGIT [ "." *DIGIT ] npt-hhmmss = npt-hh ":" npt-mm ":" npt-ss [ "." *DIGIT ] npt-hh = 1*DIGIT npt-mm = 1*2DIGIT npt-ss = 1*2DIGIT SMPTE time codes [4] are optimized for frame level accuracy.  </s>
<s> SMPTE is specified as HH:MM:SS:FF, where HH=hours, MM=minutes, SS=second, FF=frames.  </s>
<s> The drop-frame algorithms for calculating the exact times can be found in the references SMPTE standard.  </s>
<s> Negative values are not allowed.  </s>
<s> "smpte-24=" SMPTE time with a 24 fps basis "smpte-24-drop=" SMPTE time with a 24/1.001 fps basis "smpte-25=" SMPTE time with a 25 fps basis "smpte-30=" SMPTE time with a 30 fps basis Pfeiffer &amp; Parker Expires December 6, 2003 [Page 5] Internet-Draft Temporal URI Fragments June 2003 "smpte-30-drop=" SMPTE time with a 30/1.001 fps basis "smpte-50=" SMPTE time with a 50 fps basis "smpte-60=" SMPTE time with a 60 fps basis "smpte-60-drop=" SMPTE time with a 60/1.001 fps basis Specification as BNF: smpte-spec = smpte-type "=" smpte-time smpte-type = "smpte-24" | "smpte-24-drop" | "smpte-25" | "smpte-30" | "smpte-30-drop" | "smpte-50" | "smpte-60" | "smpte-60-drop" smpte-time = smpte-hh ":" smpte-mm ":" smpte-ss [ ":" *2DIGIT ] smpte-hh = 1*2DIGIT smpte-mm = 1*2DIGIT smpte-ss = 1*2DIGIT UTC time has a second or subsecond resolution.  </s>
<s> It is given as YYYYMMDDTHHmmss.hhZ, where Y=year, M=month, D=day, H=hour, m=minute, s=second, h=subseconds (one-hundredth of a second).  </s>
<s> Specification as BNF: utc-spec = "clock=" utc-time utc-time = utc-date "T" utc-hhmmss "Z" utc-date = 8DIGIT utc-hhmmss = 6DIGIT [ "." *DIGIT ] Examples for specifications of temporal fragment offsets are: (all four specify the same time point) rtp://www.foo.bar/matrix.mpg#@clock=20021107T173045.25Z (for Thu Jul 11 05:30:45 UTC 2002 and a quarter seconds) The semantic interpretation of time specifications given with any of the schemes depends on the resource.  </s>
<s> With every resource there are two associated timebases: a UTC timebase which may e.g. specify the creation time of the resource, and a playback timebase used for display in a user agent while viewing the resource.  </s>
<s> The playback timebase of a resource defaults to 0 seconds if the Pfeiffer &amp; Parker Expires December 6, 2003 [Page 6] Internet-Draft Temporal URI Fragments June 2003  </s>
<s> resource has no other timebase associated with it.  </s>
<s> For example, with  </s>
<s> professional video production, the first frame of video of a program normally refers to a SMPTE timebase of 01:00:00:00, not 00:00:00:00.  </s>
<s> This practice arose from the requirements of program production and analog videotape recording technology, and it has subsequently become a uniform, almost ironclad practice worldwide.  </s>
<s> Associating such a practice to a digital video resource requires a way to store that timebase with the resource, which may or may not be possible, depending on the content type of the resource.  </s>
<s> Examples: If a resource has an associated timebase of 3600 seconds, and the given temporal fragment offset is 4000 sec, a seek time 400 sec into the resource is requested.  </s>
<s> If the timebase is given as clock time 20001010T142211.23Z and the temporal offset specified is 20001010T145511.23Z, the time 33 minutes into the resource is requested.  </s>
<s> The UTC timebase of a resource defaults to non-specified.  </s>
<s> Associating such a UTC timebase with a resource requires a way to store that timebase with the resource.  </s>
<s> For example, for a resource that is a file on a server, it may be chosen to be the time of storage of that resource.  </s>
<s> Examples for specifications of temporal intervals are: (all four specify the same temporal interval) rtp://www.foo.bar/matrix.mpg#@clock=20021107T173045.25Z-20021107T173049.80Z The semantic interpretation of these temporal intervals depends on the time scheme.  </s>
<s> Unless specified differently, the temporal intervals given are closed intervals, i.e. they start at the first time point and finish at the second time point: [time_from;time_to].  </s>
<s> For SMPTE timecodes, however, it is conventional to express such temporal intervals as IN and OUT times for editing.  </s>
<s> Thus, the IN time specifies the first frame that is included in the interval and the OUT time specifies the first frame that is not included in the interval.  </s>
<s> Therefore, a SMPTE interval is specified as [time_from;time_to[, which explains the additional frame in the above example.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 7] Internet-Draft Temporal URI Fragments June 2003 4. Intended usage The temporal fragment specification scheme is intended to be used on time-continuous resources.  </s>
<s> An example of such resources are all resources of MIME types "audio/*" and "video/*".  </s>
<s> The protocol through which these resources are accessed are expected to be mainly http or rtp/rtsp, which are especially suited for such resources.  </s>
<s> It is RECOMMENDED that user agents do not strip off the temporal fragment from a given URI before forwarding it to a server.  </s>
<s> [XXX: This is contrary to the current prescription in the URI standard and needs to get resolved - see Section 6.] A retrieval action on a URI that includes a temporal fragment SHOULD result in a time-continuous resource that starts at the given temporal offset.  </s>
<s> As time-continuous resources often come with high bandwidth requirements, this avoids unnecessary network load.  </s>
<s> For example, a 1 hour Digital Video (DV format) requires about 25 GB (MPEG-2 reduces that to about 3 GB, but this format must be prepared for addressing high-quality, high-resolution time-continuous bitstreams of the future).  </s>
<s> Serving out only the requested interval of a resource also significantly reduces the delay for the user agent for receiving relevant data.  </s>
<s> Alternatively, the user agent MAY wait until the retrieval action has failed, then resend the URI with the fragment stripped off and perform the offset action locally on the retrieved resource.  </s>
<s> Servers that support the temporal fragment offset MUST implement a retrieval action of time-continuous resources with such fragment specifications by serving the requested resource from the temporal offset onwards.  </s>
<s> For many time-continuous resources - especially when in compressed format - this means that the server has to parse the structure of the resource and construct another valid resource from the original resource's header information and data frames.  </s>
<s> If a server cannot perform the fragment offset, it MUST return an error as otherwise the user agent cannot identify if the offset action was performed or not.  </s>
<s> It is expected that over time more servers and client applications understand and handle the temporal fragment offset and thus enable direct networked access to content in time-continuous resources.  </s>
<s> Also network proxies may begin to understand such temporal offsets and can exploit them for caching.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 8] Internet-Draft Temporal URI Fragments June 2003 5. Security considerations This specification does not create any new security issues beyond the ones already specified for URIs in RFC 2396 [2].  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 9] Internet-Draft Temporal URI Fragments June 2003 6. Disucssion points to be resolved 6.1 Interpretation of temporal fragments on server In the current version of the URI standard [2], it is prescribed that fragment specifications get interpreted by the user agent.  </s>
<s> Therefore, the intended use of fragments to retrieve only a temporal interval of the time-continuous data or the data from a certain offset point onwards is not generally allowed.  </s>
<s> However, there are ways to effectively get around this restriction by using (mis-using?) communication protocols.  </s>
<s> When using http, we can invent a new protocol parameter that gets filled by the user agent with the temporal fragment specification and that gets interpreted by the server.  </s>
<s> If we don't do that, we seriously defect http from being usable for time-continuous media in the future.  </s>
<s> When using rtp/rtsp, a client can strip off the fragment specification and map it onto the Range header field of the rtsp protocol, which will then tell the server which subpart of the time-continuous data bistream to serve out.  </s>
<s> A much cleaner way to resolve this problem would be to change the URI standard to allow for a server-side interpretation of fragment  </s>
<s> offsets after all other actions have been performed on the resource.  </s>
<s> This will make it independent of the protocol in use and it will enable intermediate proxies to store and forward parts of a media resource.  </s>
<s> It is then the user agent's choice whether or not to strip off the fragment offset and interpret it locally after the retrieval action or to forward it to the server with an expectation to receive only that subpart of the resource.  </s>
<s> Servers are not forced to implement that specification.  </s>
<s> It is however necessary to return an error if they cannot handle temporal fragment specifications to avoid a double offset action by both server and client.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 10] Internet-Draft Temporal URI Fragments June 2003 7. ChangeLog draft-pfeiffer-temporal-fragments-01: Extension of the number of available SMPTE time-schemes.  </s>
<s> Many thanks to Bill Miller and Oliver Morgan of the SMPTE for their input on these changes.  </s>
<s> Deleted "start" and "now" as time specification values.  </s>
<s> Extension of the temporal fragment addressing to also address temporal intervals, not only time points.  </s>
<s> Added section that includes some key points of discussion where the existing URI standard contradicts the use of fragments for time-continuous data.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 11] Internet-Draft Temporal URI Fragments June 2003 References [1] Bradner, S., "Key words for use in RFCs to Indicate Requirements Levels", RFC 2119, BCP 14, March 1997.  </s>
<s> [2] Berners-Lee, T., Fielding, R. and L. Masinter, "Uniform Resource Identifiers (URI): Generic Syntax", RFC 2396, August 1998.  </s>
<s> [3] Schulzrinne, H., Rao, A. and R. Lanphier, "Real Time Streaming Protocol (RTSP)", RFC 2326, April 1998.  </s>
<s> [4] The Society of Motion Picture and Television Engineers, "SMPTE STANDARD for Television, Audio and Film - Time and Control Code", ANSI 12M-1999, September 1999.  </s>
<s> [5] ISO, TC154., "Data elements and interchange formats -- Information interchange -- Representation of dates and times", ISO 8601, 2000.  </s>
<s> Authors' Addresses Silvia Pfeiffer Commonwealth Scientific and Industrial Research Organisation CSIRO, Australia Locked Bag 17 North Ryde, NSW 2113 Australia URI: http://www.cmis.csiro.au/Silvia.Pfeiffer/  </s>
<s> Conrad D. Parker Commonwealth Scientific and Industrial Research Organisation CSIRO, Australia Locked Bag 17 North Ryde, NSW 2113 Australia URI: http://www.cmis.csiro.au/Conrad.Parker/  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 12] Internet-Draft Temporal URI Fragments June 2003 Appendix A. Acknowledgements The authors greatly acknowledge the contributions of Andre Pang and Andrew Nesbit in developing this syntax.  </s>
<s> We also thank the SMPTE for their contributions and the URI discussion group at the W3C (uri@w3.org) for their many comments on this document.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 13] Internet-Draft Temporal URI Fragments June 2003 Intellectual Property Statement The IETF takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights.  </s>
<s> Information on the IETF's procedures with respect to rights in standards-track and standards-related documentation can be found in BCP-11.  </s>
<s> Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementors or users of this specification can be obtained from the IETF Secretariat.  </s>
<s> The IETF invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to practice this standard.  </s>
<s> Please address the information to the IETF Executive Director.  </s>
<s> Full Copyright Statement Copyright (C) The Internet Society (2003).  </s>
<s> All Rights Reserved.  </s>
<s> This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works.  </s>
<s> However, this document itself may not be modified in any way, such as by removing the copyright notice or references to the Internet Society or other Internet organizations, except as needed for the purpose of developing Internet standards in which case the procedures for copyrights defined in the Internet Standards process must be followed, or as required to translate it into languages other than English.  </s>
<s> The limited permissions granted above are perpetual and will not be revoked by the Internet Society or its successors or assignees.  </s>
<s> This document and the information contained herein is provided on an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION Pfeiffer &amp; Parker Expires December 6, 2003 [Page 14] Internet-Draft Temporal URI Fragments June 2003 HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  </s>
<s> Acknowledgement Funding for the RFC Editor function is currently provided by the Internet Society.  </s>
<s> Pfeiffer &amp; Parker Expires December 6, 2003 [Page 15]  </s>
<s> Your long message seems to mainly focus on the argument about why _some_ standard is needed, but I'm not sure  </s>
<s> you've addressed the objections raised about _this particular_ formulation.  </s>
<s> I have no trouble with individual media types defining temporal fragments.  </s>
<s> I think it would even be interesting to consider whether we might establish  </s>
<s> a policy (BCP) that audio/* and video/* media types  </s>
<s> should adopt such a temporal fragment.  </s>
<s> And I would  </s>
<s> imagine that one could point out that some protocols (and thus URI schemes) might have specific support for temporal fragments, while others (http, ftp, smb, nfs) might only support byte range (or offset) retrieval, leaving it up to the client to interpret the temporal fragments.  </s>
<s> But I don't think you can assume that these fragments can be implemented in general, without any other caveats, and get the expected behavior.  </s>
<s> I'm also dismayed by the complexity of all of the different smtpe time codes, which seems to make an unnecessary dependence on another complex external standard.  </s>
<s> RTSP (rfc 2326) section 3.6 seems to get by with a very simple time start and offset.  </s>
<s> Since the most widely used URI schemes will be 'rtsp', 'http' and (probably 'file'), and there's some question about the implementability of your proposal, perhaps you could point to some experience with an implementation of this specification?  </s>
<s> Larry  </s>
<s> Dear Larry,  </s>
<s> many thanks for taking the time to read through the document.  </s>
<s> Indeed, my main point was that we need _some_ standard.  </s>
<s> I'm not really too fuzzed about which way we do it, but our proposal seems the most advanced of all the ones I have seen.  </s>
<s> I've also discussed it with others such as people in MPEG-21, people at Apple, and SMPTE people and our proposal seemed to make sense to them, too.  </s>
<s> As you correctly point out, I have not addressed some of the objections about _this particular_ formulation, because I have already incorporated them into the document (namely: need for more SMPTE schemes, need for registration for other schemes, need for addressing of temporal intervals as well as time points).  </s>
<s> The main objection on this list was however that we should not go for "fragments" but rather for "queries".  </s>
<s> That's the main point I tried to address.  </s>
<s> Sorry for being unclear.  </s>
<s> Great!  </s>
<s> Hmmm...  </s>
<s> Our proposal was actually based on the RTSP standard that you're pointing out (rfc2326).  </s>
<s> RTSP uses all three classes that we provide for, too.  </s>
<s> The section you're pointing out describes the npt way of addressing.  </s>
<s> The smpte way of addressing is in section 3.5 and the utc way of addressing in section 3.7.  </s>
<s> After feedback from SMPTE, we've just  </s>
<s> made the SMPTE list more current.  </s>
<s> With registering schemes through IANA it is possible to extend it at any time.  </s>
<s> I fear it's a little like the MIME types registration.  </s>
<s> We just cannot foresee all required time addressing schemes right now.  </s>
<s> E.g. there may be some scheme for addressing pico-second resolutions in data of physics experiments.  </s>
<s> Therefore, I believe we need to be extensible.  </s>
<s> That's actually one of the reasons I've been quiet for a while.  </s>
<s> We have implemented a system that demonstrates the use of the temporal URI schemes.  </s>
<s> We've put descriptions up at http://www.annodex.net/ .  </s>
<s> There is no code yet, but the libraries are coming within the next week.  </s>
<s> An application should be up within 2 weeks.  </s>
<s> Silvia.  </s>
<s> I'm still bothered by putting 'extensibility' into the fragment identifiers.  </s>
<s> You can get away with having extensibility in a _protocol_ where, if one side doesn't understand the vocabulary, you can revert to a different vocabulary.  </s>
<s> But there is often not very much negotiation possible between the generator of the URI and the URI interpreter.  </s>
<s> Having lots of "options" isn't a good idea in such situations.  </s>
<s> For interoperability in the presence of options and without negotiation, everything that is optional for a sender must be mandatory for a receiver.  </s>
<s> ("without negotiation" = the receiver can't throttle back the options that a sender will communicate.  </s>
<s> When you send me a URL embedded in something, I generally don't have any control over the scheme you use or any  </s>
<s> of the features you might use in a fragment identifier.  </s>
<s> So having lots of SMTP options in the fragment identifier would mean that every receiver would have to implement them all.  </s>
<s> We've established that whether or not a URI interpreter must interpret the time fragment locally or can send it to the server for interpretation will depend not only on the scheme, but also on the implementation of the scheme.  </s>
<s> So putting in all of these SMTPE options puts a large burden on the implementations of URI interpreters and RTSP servers.  </s>
<s> This seems like really fragile design.  </s>
<s> I don't understand the use case for all of this 'time addressing' flexibility.  </s>
<s> What is the roll-out strategy for a new scheme?  </s>
<s> It's bad enough that no URI receivers will understand ANY time scheme right now (and will drop it on the floor), but what's the long-term deployment strategy?  </s>
<s> Perhaps you can address the upgrade/deployment strategy, then?  </s>
<s> Larry  </s>
<s> Larry,  </s>
<s> There is not much negotiation necessary: either the server understands the fragment and can return the requested data or it cannot in which case it returns an error (http: 404 not found).  </s>
<s> Yes, I agree.  </s>
<s> But why should that be a problem?  </s>
<s> The only difference between the SMPTE timestamp formats is their temporal resolution for the  </s>
<s> frames.  </s>
<s> Therefore, all the server has to know is what scheme has what temporal resolution.  </s>
<s> The server implements one function to parse a smpte with a framerate parameter [ala: "double parse_smpte(const char *str, double framerate)"] and when  </s>
<s> parsing the time schemes it checks the scheme and calls the function with the correct framerate [ala: if (strncmp(s, "smpte-24", i) == 0) { return parse_smpte(s+i+1, 24.0); } else if (strncmp(s, "smpte-24-drop", i) == 0) { return parse_smpte(s+i+1, 23.976); } else if (strncmp(s, "smpte-25", i) == 0) { return parse_smpte(s+i+1, 25.0); } else if (strncmp(s, "smpte-30", i) == 0) { return parse_smpte(s+i+1, 30.0); } else if (strncmp(s, "smpte-30-drop", i) == 0) { return parse_smpte(s+i+1, 29.97); } else if (strncmp(s, "smpte-50", i) == 0) { return parse_smpte(s+i+1, 50.0); } else if (strncmp(s, "smpte-60", i) == 0) { return parse_smpte(s+i+1, 60.0); } else if (strncmp(s, "smpte-60-drop", i) == 0) { return parse_smpte(s+i+1, 59.94); I don't think that this is asking for much from a server.  </s>
<s> Again, I'd like to point out the similarity to the mime types: the more time schemes get accepted as standards, the more get supported by the servers.  </s>
<s> At first, one cannot expect all installations of servers to support all new mime types that come out.  </s>
<s> If a server doesn't support one that is being asked for, it returns an error and the client has to deal with it.  </s>
<s> Oh, I'm sorry.  </s>
<s> I believe there is a misunderstanding.  </s>
<s> I am not asking to put the temporal URI fragment specification into the Generic URI Specification RFC.  </s>
<s> All I am asking for is to allow in RFC2396 that fragments can be interpreted at the server side after all other operations have been performed on the resource.  </s>
<s> I agree, at this stage, we cannot expect all servers to implement the temporal URI fragments.  </s>
<s> That's why I've put this suggestion into a different I-D to be used as a guide for technologies that want to provide this kind of addressing (such as MPEG-21 and our ANNODEX).  </s>
<s> This should help in getting consistent and interoperable temporal URI  </s>
<s> fragment usage instead of having many different and non-interoperable  </s>
<s> schemes.  </s>
<s> Once this temporal addressing scheme has established itself as the most useful way of addressing temporal resources, we can pursue the I-D (or a further worked out version of it) to a standards level.  </s>
<s> Why would that be any more fragile than the mime types?  </s>
<s> For audio and video there are probably no other time schemes that are  </s>
<s> needed.  </s>
<s> But there are many other time-continuously sampled data file types which we have no knowledge of, e.g. the above mentioned data of physics experiments.  </s>
<s> If somebody requires a time scheme that is useful for another type of time-continuous data and that does not exist yet, he/she would write another I-D that explains this time scheme and its resolution and asks for registration with IANA.  </s>
<s> If it gets accepted, servers will support that scheme over time.  </s>
<s> Regards, Silvia.  </s>
<s> In principle, what you want is the right thing to do.  </s>
<s> The definition of  </s>
<s> #fragment in the generic semantics should define the order of application  </s>
<s> of this information relative to other _transformation_ steps in the recovery of the resource [-slice or -fragment] but in a way which is orthogonal, purely agnostic, concerning order relative to _transportation_ steps in the process.  </s>
<s> Passing of data between network nodes or control between actors is not something that should be visible in the definition of "when to apply the #fragment to the elaboration of the citation."  </s>
<s> In principle.  </s>
<s> On the other hand, getting clients to actually forward the #fragment, once they have the permission, is something that may have a high quantum barrier associated with it.  </s>
<s> What can be done with SIP in this regard?  </s>
<s> Is there a RTCP?  </s>
<s> Could it be used?  </s>
<s> The need to express a stopTime as well as a startTime in the media object [slice] is one that is obvious already at this time.  </s>
<s> I do not yet understand that the current candidate syntax from CSIRO would afford this functionality.  </s>
<s> Alternate syntax with more capability would be to use XPointer syntax (which will be showing up in #fragments pertaining to resources whose recovery yields an XML document as a representation) to reference a virtual smil:ref element and use the slicing capability as for that element type.  </s>
<s> In other words, take smil:ref, map it to XQuery/XPath, and embed in #fragment using the conventions for using XPointer in #fragment.  </s>
<s> The object class that smil:ref provides syntax for has all the capability that we seek for defining a time-slice as a derived object from an arbitrary temporal-media object (including an open-ended stream).  </s>
<s> There may well be a well-annealed concept set for what you are trying to do available from the HyTime community.  </s>
<s> I am only starting from SMIL because I have some familiarity with it.  </s>
<s> Al  </s>
<s> With registering schemes through IANA it is possible to extend it at any time.  </s>
<s> I fear it's a little like the MIME types registration.  </s>
<s> We just cannot foresee all required time addressing schemes right now.  </s>
<s> E.g. there may be some scheme for addressing pico-second resolutions in data of physics experiments.  </s>
<s> Therefore, I believe we need to be extensible.  </s>
<s> I don't understand how this happens.  </s>
<s> The client gets the URI reference and is attempting to resolve it.  </s>
<s> It splits at the "#" and does something with the two sides.  </s>
<s> There's no way to guarantee that the client will send the fragment to the server except in extraordinary circumstances, though.  </s>
<s> If the URI is "file:", for example, there's no server to send it to.  </s>
<s> If the URI is "http:", there's no protocol in HTTP to send fragment identifiers.  </s>
<s> Maybe if the URI is "rtsp" and the actual data is temporal, you might be able to get a temporal fragment?  </s>
<s> Why not make the fragment identifier independent of the sample rate?  </s>
<s> Aren't there situations where you might want to send different sample rates depending on the bandwidth of the connection?  </s>
<s> Or situations where there is timed data that isn't 'sampled'?  </s>
<s> I'm not sure why 'seconds, in floating point, to any accuracy desired' isn't a better design as far as interoperability might go.  </s>
<s> Larry  </s>
<s> Hi Larry, all,  </s>
<s> Here's how it may happen: The client decides if it wants to split off the bit after "#" (as all existing Web browsers do) or not; if it splits it off, we have the existing situation where the server doesn't get the fragment and nothing is different (e.g. http://foo.bar/videoresource.mov#@npt=20  </s>
<s> gets turned into http://foo.bar/videoresource.mov).  </s>
<s> If the client sends the URI reference including the fragment to the server, the server deals with it, e.g. the appropriate apache module for the specific resource.  </s>
<s> This is ok as the generic URI specification requires fragment identifiers to be dependent on a content (or resource) type.  </s>
<s> Sending the URI including fragment to a server is already possible currently with e.g. telnet and apache, where it works for any scheme be that file, http or other.  </s>
<s> We have now some code up at you'll see how it works for a XML file where each tag has a time associated with it and you can ask for a subrange of tags based on that time.  </s>
<s> If set up, testing with a samle test.cmml  </s>
<s> file works with these commands: telnet localhost 80 GET http://localhost/test.cmml#npt=20-40  </s>
<s> HTTP/1.0  </s>
<s> This returns only those tags that belong into this time range.  </s>
<s> Every time-continuous data stream is sampled when getting digitised and is usually sampled at a constant sampling rate (e.g. 44100 Hz for  </s>
<s> audio).  </s>
<s> When it is encoded for transmission, this sampling rate is  </s>
<s> normally not touched.  </s>
<s> Instead, the bitrate is reduced through compression as much as necessary in order to accommodate for lower bandwidths.  </s>
<s> There are encoding algorithms that can produce variable  </s>
<s> bitrate, but the sampling rate of the file is usually still not touched.  </s>
<s> Now, for the fragment, the most generic way to identify a time offset is indeed 'seconds, in floating point, to any accuracy desired' and "npt" supports that.  </s>
<s> However, there are types of data for which people have found other ways for referencing temporal offsets.  </s>
<s> The SMPTE specification is such an example.  </s>
<s> It originated through the way in which analog video is produced, where picture frames follow each other and the correct playback speed identifies the framerate (which is the "sampling rate" for video).  </s>
<s> In the analog situation, it made more sense to count frames than to give temporal offsets and therefore the SMPTE label was invented.  </s>
<s> The whole video industry, even in the digital age, is still heavily using these time labels and therefore anything to do with digital video should be able to support these temporal  </s>
<s> specifications.  </s>
<s> The SMPTE fragment offsets are actually not dependent on the sampling rate of the digital video that they refer to, such that if there is a video sampled at e.g. 25 fps, you may still put a framgent  </s>
<s> offset of e.g. #@smpte-60=00:01:05.20 on it.  </s>
<s> Therefore, the fragemnt  </s>
<s> identifier is independent of the sampling rate of the data.  </s>
<s> Best Regards, Silvia.  </s>
<s> But there are time-continuous data streams that are not sampled.  </s>
<s> Animation (e.g. SMIL animation or SVG animation) is a typical example.  </s>
<s> Your XML example also doesn't need to have a fixed sampling rate.  </s>
<s> Of course there are other ways.  </s>
<s> But if there is one way that works in all cases, why make it unnecessarily complicated.  </s>
<s> By the way, Larry wrote 'seconds, in floating point'.  </s>
<s> I think this should just be a decimal notation, not including exponents.  </s>
<s> Why? Is there any difficulty for the server (or the client) to do the calculations?  </s>
<s> Also, the faster our computers get, the more we will probably move away from a few fixed sampling rates.  </s>
<s> Does that say it's sampled at 60 fps?  </s>
<s> or what?  </s>
<s> Regards, Martin.  </s>
<s> You're right.  </s>
<s> :) I was only thinking of time-continuous real-world signals that need digital conversions.  </s>
<s> I guess, we came from the rtp/rtsp example and there all were supported.  </s>
<s> Hmm. What if the precision of a specific rational number is required?  </s>
<s> Sorry, should have read: #@smpte-60=00:01:05 Yes, smpte-60 says that the time label is given as a label with 60 fps, i.e. the last number represents 5/60 seconds.  </s>
<s> This says nothing about the actual sampling rate of the video and only refers to the interpretation of the time format.  </s>
<s> Silvia.  </s>
<s> I think I now understand that most of this proposal is dependent on updating HTTP (RFC 2396) and RTSP (RFC 2326) to allow fragment identifiers in the request URI.  </s>
<s> I can see that they've managed to produce a demonstration where doing so "works" with a HTTP server, but I don't think it's a good idea.  </s>
<s> No matter what the syntax of the fragment identifier.  </s>
<s> Larry  </s>
<s> I agree with Larry.  </s>
<s> Regards, Martin.  </s>

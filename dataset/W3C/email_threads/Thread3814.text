I have committed the stuff I had on my mind for link checker 3.9.3.
Regarding the beta announcement, I would like to request feedback in
particular of the following (feel free to rephrase, comment, and add
items):
- Robots exclusion standard support in the link checker. Good or bad?
- Should the "Check linked documents recursively" checkbox be removed?
Recursion is implicit if there's anything in the "depth" field, so
the checkbox is sort of redundant.
Changelog since 3.9.2 is attached. The corresponding in-a-nutshell, or
NEWS-like list (excluding command line only changes) would be something
like:
- Support for the robots exclusion standard has been added.
- Sleep 1 second between requests to servers.
- Cookie handling logic is now more robust and predictable.
- Harmonized layout with the Markup Validator.
- Do not send an Accept-Language header at all if the client did not
send us one. Previously, "Accept-Language: *" was sent by default.
- Miscellaneous markup, layout, and documentation improvements, minor
bug fixes and warning cleanups.
2004-06-08 ville
* bin/checklink.pod: Document Doc_URI and Style_URI.
2004-06-08 ville
* docs/linkchecker.css: Remove some unused properties, and do a
gratuitous whitespace cleanup.
2004-06-08 ville
* bin/checklink, docs/linkchecker.css: Restore some lost CSS
properties, and selectively sync some of the new layout stuff from
the current markup validator.
2004-06-08 ville
* bin/checklink: Avoid warning when no realm is given in
WWW-Authenticate.
2004-06-08 ville
* docs/linkchecker.css: Use JPEG versions of header and footer
images.
2004-06-08 ville
* bin/checklink, docs/checklink.html, docs/linkchecker.css: Remove
the "Skip navigation" link as it is not too useful at the moment.
2004-06-02 ville
* bin/checklink, docs/checklink.html: Add/revise accesskeys.
(l=linkchecker,i=download/install,d=docs,m=markup validator,s=skip
navigation)
2004-06-02 ville
* bin/checklink: Switch to HTML 4.01 strict, and make related
adjustments and layout consistency improvements mainly to error
message views.
2004-06-02 ville
* bin/checklink: Work around a bug in URI::sip(s) in URI 1.22-1.30.
2004-06-01 ville
* bin/checklink: More markup improvements.
2004-06-01 ville
* bin/checklink: Avoid error log warning when no Content-Type is
received, improve markup.
2004-06-01 ville
* bin/checklink, bin/checklink.pod, etc/checklink.conf: Typo and
consistency fixes.
2004-06-01 ville
* bin/checklink: Apply parameters from cookie only when loading the
"front" page. Also, only load the cookie we set (not all possibly
sent to us), when deciding how to output the cookie options on the
front page. This should make the effect of the cookie more
predictable.
2004-06-01 ville
* bin/checklink: Avoid warning from invalid (non-numeric) recursion
depth.
2004-05-31 ot
* bin/checklink: fixing some silliness in my recent patches -
thanks Ville for the catch
2004-05-31 ot
* docs/linkchecker.css: adding style specific to linkchecker
results
2004-05-31 ot
* bin/checklink, docs/checklink.html, etc/checklink.conf: Changing
the layout of checklink (script) to math the one for the
documentation. - adding Style_URI configuration parameter - The
layout now uses default links pointing to the instance on v.w.o
2004-05-16 ville
* bin/checklink: HTML-escape given URI in the "you cannot check
such a URI" message.
2004-05-14 ot
* docs/checklink.html, docs/linkchecker.css: quick attempt at
styling link checker as the Markup Validator. Fr the actial
service, an idea would be to keep some of its inline style + a link
to the stylesheet in the repository.
2004-05-10 ville
* bin/checklink: Treat non-empty URI's "ok" again with JavaScript
implementations without String.search().
2004-05-10 ville
* bin/checklink: Tweak fieldset padding.
2004-05-10 ville
* bin/checklink: Don't send Content-Script-Type as a real HTTP
header, use meta http-equiv instead.Also make uriOk() focus the
URI field if it was not 'ok'.
2004-05-07 ville
* bin/checklink: Use relative self-referencing URL without the
query string for the form action.
2004-05-07 ville
* bin/checklink: Associate all labels explicitly with their
controls as recommended by WCAG 1.0. Thanks to Hugo Silveira da
Cunha for the heads up.
2004-05-03 ville
* bin/checklink.pod: Always point to
tweaks.
2004-04-28 ville
* bin/checklink: Set "self URI" to
Thanks to James Gallagher for the report.
2004-04-20 ville
* bin/checklink, docs/checklink.html, docs/linkchecker.css: Add
instructions how to allow us in /robots.txt, and include a link to
it in the results.
2004-04-19 ville
* bin/checklink: Implement "better" (yet somewhat hacky) handling
of non-HTTP error codes, currently used for "forbidden by
robots.txt" and "bad hostname" messages from LWP. While at it,
display "forbidden by robots.txt" with a light gray background (CVS
class "dubious") instead of screaming-red-403.
2004-04-17 ville
* t/00compile.t: Add a _very_ basic "test suite".
2004-04-12 ville
* bin/checklink: Fix broken fragment UI (was broken in revision
3.30).
2004-04-12 ville
* bin/checklink: Small wording improvements.
2004-04-11 ville
* bin/checklink: Use "(no message)" if for some reason we do not
receive a reason phrase in the response status line.
2004-04-11 ville
* docs/checklink.html: Redirect loops are no longer a problem with
the link checker and libwww-perl 5.76 (but redirects to file: URLs
still are).
2004-04-11 ville
* bin/checklink, bin/checklink.pod, docs/checklink.html: Make sleep
time between requests to each server configurable in command line
use (-S/--sleep, defaults to 1 second), remove old "sleep 3 seconds
between documents" feature, and show used settings in the results.
2004-04-11 ville
* bin/checklink: Fix typo in results CSS.
2004-04-11 ville
* bin/checklink: Reimplement/replace internal redirect tracking
logic using the response chaining feature of libwww-perl
(HTTP::Response- previous()). Should be more robust and
RobotUA-friendly now.
2004-04-10 ville
* bin/checklink: Code cleanups.
2004-04-10 ville
* bin/checklink: Eliminate a couple of recently introduced printf()
warnings.
2004-04-10 ville
* docs/checklink.html: RobotUA/RobotRules works for local files
from command line in LWP 5.66+, bump the required version.
2004-04-10 ville
* bin/checklink: Don't mask LWP's default redirect_ok()
functionality, remove some dead code.
2004-04-09 ville
* bin/checklink, etc/checklink.conf: New configuration parameter
(Doc_URI) to aid local doc installations.
2004-04-09 ville
* docs/checklink.html, docs/linkchecher.css, docs/linkchecker.css:
Rename the doc CSS once more (to linkchecker.css).
2004-04-08 ot
* docs/checklink.css, docs/linkchecher.css: changing name to avoid
conneg issues
2004-04-08 ville
* bin/checklink: Make sure default configuration options are set
also when there is no configuration file. D'oh! Thanks to Rafael
Gieschke for the report.
2004-04-07 ville
* bin/checklink, docs/checklink.html: Initial (partial)
implementation for support for robots exclusion standard. The UI
still needs some work: the results view should be fixed and some
new configuration options (admin address, minimum delay) should be
added.As a side effect, we now require libwww-perl  = 5.60.
2004-04-04 ville
* bin/checklink, bin/checklink.pod: Do not send any Accept-Language
header by default in command line mode, and don't default to "*" in
CGI mode either (but still use the client-supplied value if
present). In command line mode, -L auto now autodetects a value
from the environment, and the -n/--noacclanguage option is
deprecated and does nothing.
2004-04-03 ville
* bin/checklink: Usage message improvements.
2004-04-03 ville
* bin/checklink: Link to http://www.w3.org/2000/07/checklink for
docs again.
2004-04-03 ville
* bin/checklink, bin/checklink.pod: Improve the "Trusted" domain
documentation.
2004-04-03 ville
* bin/checklink: Compile trusted and exclude-docs regexps only
once.
2004-04-03 ville
* bin/checklink, bin/checklink.pod: New command line option
(--exclude-docs) for excluding checking links in documents whose
URIs match a regexp; thanks to Michael Ernst. Also, some
improvements to argument and configuration option checking and
error reporting.
2004-04-02 ville
* README.cvs: Fix link to the online version.
2004-04-01 ot
* README.cvs: adding download instructions
It would be good to announce in what way it supports it; as discussed,
there are apparently several approaches, like do you read the submitted
document if the robots.txt of that server does not allow it or will it
refuse to check any link in that case (as it does not download anything
but robots.txt). Without such information one would have to figure this
out by testing or looking at the code which is unlikely to yield in
much feedback.
The current behaviour is the "blunt" one, ie. nothing except /robots.txt
is fetched if /robots.txt disallows it. Oh, and the version of the
supported exclusion standard is the "original 1994 one" (for now, as
is not supported at all in this version.
This info should be included in the docs, BTW, not (only) the beta
announcement. Will take a look at improving the documentation tomorrow
unless someone beats me to it... ;)
Ok, done. http://qa-dev.w3.org/wlc/#bot
Ville,
Thanks for doing all that. I'm in the process of setting it up on
vwo:8001
I've used the opportunity for a minimal cleanup of the file structure.
Many checklink files still had to be within the validator tree, even
though they're not in CVS ther eany more.
What I have done:
* http://validator.w3.org:8001/checklink is now aliased as follows:
ScriptAlias /checklink
/usr/local/perl/modules/W3C/LinkChecker/bin/checklink
* Whereas http://validator.w3.org/checklink points to:
ScriptAlias /checklink /usr/local/bin/checklink
* removed symlinks and stale copies in httpd/cgi-bin/
* on both :80 and :8001 htdocs/docs/checklink.html and linkchecker.css
are symlinked to the docs in
/usr/local/perl/modules/W3C/LinkChecker/docs/
This should allow us to "make install" when we want to update :80 and
cvs-up when dealing with :8001. This seems reasonable, although there
might be @INC issues when we modularize. We may want to think of this
in advance.
I just noticed a small issue with the relative URIs for the images.
checklink.html tries to access images in ".". Maybe we could replicate
the directory structure of the validator and put images in images/,
docs in docs/ and have the docs refer to "../images/foo" ?
olivier
The feeback request (with the clarifications in your other mail), along
with the changelog, should be perfect to create the announcement. given
it's a beta and we mainly want feedback, there does not seem to be no
need for specific formality in the announcement.
depending on my time this afternoon I may send you a draft
announcement, but if I don't have the time, I'll take the material we
have already, with minor rewording maybe, tomorrow morning (my time).
olivier
A well-chosen "SetEnv PERL5LIB" in httpd.conf should work. OTOH it
needs to be checked whether that works with taint mode.
Maybe, but that would mean a bit of extra work for folks installing the
link checker (docs) locally, and the doc couldn't any more be installed
to /checklink.html (theoretically /../images might not "work"). Not big
issues, but before changing, we should be really sure that the new setup
is "correct" and that we don't have to change soon again.

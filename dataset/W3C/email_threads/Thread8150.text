All,
Dan and Lisa have suggested that we need to more clearly define either
the use of the lockowner field or that we need a way to identify the owner
of the lock.
says...
(Especially because the spec provides
no way to reliably determine who owns a lock.)
This is a good point -- and this is already a failing of WebDAV, with or
without UNLOCK_BY_NON_LOCK_OWNER. Clients that crash or miss the
response
from the server need to make sure that the lock is theirs before grabbing
the lock token using PROPFIND. Can lockowner be used for this purpose?
This should be a separate RFC2518 issue. How about
"HOW_TO_IDENTIFY_LOCK_OWNER".
Just as a point of information, I'd like to point out we have an issue on
the issues
list that is somewhat related: DEFINE_PRINCIPAL.
In that issue Mark D Anderson says:
The term "principal" is never defined in the WebDAV
specification, or the HTTP or Digest specifications.
It should be defined.
Lisa and Dan,
Could you define the requirement before we start the discussion? For
example, is it for the server or the client that we need to make the
clarification below? (I'll reference your clarfication from the issues
list.)
J.
From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
From: Clemm, Geoff
In general, the user will not map 1-1 with a "principal", but rather
a user will "match" one or more principals. Therefore I do not see
that it is feasible or desireable to try to identify a particular
principal for the current user.
I do not fully understand. There is always a principal for a request
(and be it {DAV:}anonymous), so it would be easy for a server to keep
this information with an active lock.
No, there are credentials for a request, but those credentials
can match a variety of principals in a variety of different
principal spaces relevant to the ACL on a resource.
When there is a ACL privilege {DAV:}can-unlock and this is granted
to a particular principal on the locked resource, the usualy ACL
matching of principals would apply.
It is not matching of principals that takes place, but rather the
matching of the client credentials against the principals identified
in the ACE of an ACL.
So, I do not see the problem with reporting a locking-principal
as part of an active lock. What am I missing? Servers without ACL?
I think the only thing being missed is that a client has credentials,
and that these credentials match a variety of principals, as opposed
to identifying the client as *being* a particular principal.
Cheers,
Geoff
From: Clemm, Geoff
In general, the user will not map 1-1 with a "principal", but rather
a user will "match" one or more principals. Therefore I do not see
that it is feasible or desireable to try to identify a particular
principal for the current user.
...scanning acl spec...done.
I see what you mean. There could be an ACL server which just has
"group" principals and no principals with one-one relation to users
(well it could even skip user credentials and just have credentials
matching groups).
As for identifying the owner of a lock this means one of the following:
a) the server has a "primary" principal and could report it as lock owner.
It may nevertheless choose not to do so, due to confidentiality reasons.
b) the server has no such thing and thus cannot report who owns a lock.
It only can tell if your credentials are sufficient to lock/unlock
a resource.
That leaves possible lock-owner information up to the client. Either it
provides something meaningful to others (e.g. mailto:) or it is silent.
Would that be a feasible way forward?
//Stefan
From: w3c-dist-auth-request@w3.org
[mailto:w3c-dist-auth-request@w3.org]On Behalf Of Stefan Eissing
Sent: Friday, January 11, 2002 3:06 PM
Subject: RE: HOW_TO_IDENTIFY_LOCK_OWNER
From: Clemm, Geoff
In general, the user will not map 1-1 with a "principal",
a user will "match" one or more principals. Therefore I do not see
that it is feasible or desireable to try to identify a particular
principal for the current user.
Well, if the set of principals with the ability to unlock the resource is
bigger than one, why not report all of them (or a subset whicht the server
thinks makes sense)?
That would still require that we define a format for this information (and
we would have to deice whether to put it into the lockowner or into a new
element).
Julian

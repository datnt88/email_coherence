In section 14.23 "Host", the statements
"A client MUST include a Host header field in all HTTP/1.1 request
messages on the Internet (i.e., on any message corresponding to a
request for a URL which includes an Internet host address for the
service being requested). If the Host field is not already
present, an HTTP/1.1 proxy MUST add a Host field to the request
message prior to forwarding it on the Internet. All Internet-based
HTTP/1.1 servers MUST respond with a 400 (Bad Request) status code
to any HTTP/1.1 request message which lacks a Host header field."
can be interpreted to relax the requirement when requests are not
transiting the public Internet (e.g., between a client and server on a
departmental LAN). I believe the intent is to make HOST a required
request header whenever TCP/IP is the vehicle for the HTTP conversation.
If so, these statements should be clarified.
Ross Patterson
VM Software Division
Sterling Software, Inc.
No, the existing wording is better because the requirement still holds
even if the use of HTTP is over UDP, T/TCP, or any other future transport
protocol. The requirement relates to the meaning of identifier components
and not to the transport protocol itself. The reason for the implied
relaxation is because it is possible to use HTTP on a transport that
has no concept of hostnames (like between a PDA and its base station)
and we don't want a separate specification of HTTP for every transport.
....Roy
Actually, Roy, I see Ross's point here: it says "on the Internet". Some
might misinterpret this on a LAN or intranet. I agree there should be
no reference to TCP or other transport protocols in this paragraph, of
course, for the reasons you give.
So I think striking the two phrases "on the Internet", and the word
"Internet-based" from the paragraph will reduce the wriggle room of
implementers to get it wrong. The result would be:
"A client MUST include a Host header field in all HTTP/1.1 request
messages (i.e., on any message corresponding to a
request for a URL which includes an Internet host address for the
service being requested). If the Host field is not already
present, an HTTP/1.1 proxy MUST add a Host field to the request
message prior to forwarding it. All
HTTP/1.1 servers MUST respond with a 400 (Bad Request) status code
to any HTTP/1.1 request message which lacks a Host header field."
I don't think that any arguments to allow the host header to be dropped
for PDA use are compelling enough to relax this requirement in this way.
If it is relaxed at all, it might be relaxed in the following way:
"A client MUST include a Host header field in all HTTP/1.1 request messages
on any message corresponding to a request for a URI which includes
an Internet host for the naming authority. All HTTP/1.1 servers MUST
respond with a 400 (Bad Request) status code to any such HTTP/1.1 request
message which lacks a Host header field. If the Host field is not already
present, an HTTP/1.1 proxy MUST add a Host field to such a request message
prior to forwarding it."
This would bring it in line with the draft standard URI specification
as well, and make it clear that for other URL schemes which might also
have a host name for the naming authority that we demand the host
information, while making it clearer that for schemes that don't have
a host name for a naming authority that we don't need a Host header.
What say you?
- Jim
That's exactly where I was going, although using "TCP/IP" was a poor
choice. (I meant something like "any protocol that flows data over a
network where said network understands the concept of a 'hostname'", but
that would have pegged the Obfusco-Meter). In the case of
HTTP-over-SNA, a Host header would look very different, if it could
exist at all. Certainly other transports could have similar issues.
My concern wasn't over the relaxation of the requirement when using
transports that don't have a "hostname" concept, but rather the way it
was written up. I also wasn't sure if this was an intentional
relaxation - the statement in section 9 "Method Definitions" is
unequivocal:
"The Host request-header field (section 14.23) MUST accompany
all HTTP/1.1 requests."
If the relaxation is intentional, then section 9 is in error.
Ross Patterson
VM Software Division
Sterling Software, Inc.
Right.
That's clearer, and jibes with the MUST in section 9.
Indeed, one could argue that a PDA if RF/infrared/whatever communication
with its base station should send Host headers if the URL includes a
host address for the base station (e.g., running IP-on-the-air ala
AMPRNet). By the same argument, if the URL requested by the PDA doesn't
include a host address, no Host header is required (although that
violates section 9).
Ross Patterson
VM Software Division
Sterling Software, Inc.
Yes, either that or
A client MUST include a Host header field in all HTTP/1.1 request
messages. If the requested URI does not include an Internet hostname
for the service being requested, then the Host header field MUST be
given with an empty value. An HTTP/1.1 proxy MUST ensure that any
request message it forwards does contain an appropriate Host header
field that identifies the service being requested by the proxy.
All Internet-based HTTP/1.1 servers MUST respond with a 400 (Bad Request)
status code to any HTTP/1.1 request message which lacks a Host
header field.
Both will give people doing things like name-to-location resolution via
HTTP some guidance.
....Roy

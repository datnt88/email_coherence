XQuery section 4.11 states:
If a variable declaration contains neither a type nor an expression, the
type and value of the variable must both be provided by the external
environment at evaluation time. The static type of such a variable is
considered to be xs:anyType.
I think that "xs:anyType" should read "item()*"
Michael Kay
I agree.
the
Michael,
I think I disagree with the text as written.
If we give the type of the external variable at runtime, it is a
little bit too late isn't it ? At that time it is useless.
I would say that the type is provided by the environment at compile time
and the value is provided by the environment at runtime. If no type is
provided by the environment at compile time then by default the static
type
of the variable should be item().
We strongly care for the ability to be able to set the types of
external variables
in the environment at compile time. If they are all considered to be of
type item()
then most queries with external variables of this kind will fail at
compilation time
with static type errors.
Best regards,
Dana
I was only trying to fix an obvious error...
I think that if you want to constrain the type of the supplied
parameter, the type declaration should go in the query. It seems odd to
me if you declare the existence of the parameter within the query, but
don't declare it's type.
While we're discussing global parameters, one XSLT feature which I
really miss in XQuery is the ability to specify a default value for the
parameter.
Michael Kay

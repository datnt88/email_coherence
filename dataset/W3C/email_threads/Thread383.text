This report is for the Tidy version of 13th January 2000.
When Tidy is asked to supply a DOCTYPE (e.g., with the configuration option
"doctype: strict"), it will supply one for HTML 4.0, which is obsolete.
The HTML 4.01 specification says, "This document obsoletes previous
versions of HTML 4.0...W3C recommends that user agents and authors (and in
particular, authoring tools) produce HTML 4.01 documents rather than HTML
4.0 documents." Therefore, Tidy should generate DOCTYPEs with the 4.01
version.
For example, given a "bug.html" file containing:
...then running:
tidy --doctype strict bug.html
...will produce a file with the HTML 4.0 DTD.
The error is in lexer.c, lines 51-67):
struct _vers
char *name;
char *voyager_name;
char *profile;
int code;
} W3C_Version[] =
{"HTML 2.0", "XHTML 1.0 Strict", voyager_strict, VERS_HTML20},
{"HTML 3.2", "XHTML 1.0 Transitional", voyager_loose, VERS_HTML32},
{"HTML 4.0", "XHTML 1.0 Strict", voyager_strict, VERS_HTML40_STRICT},
{"HTML 4.0 Transitional", "XHTML 1.0 Transitional", voyager_loose, VERS_HTML40_LOOSE},
{"HTML 4.0 Frameset", "XHTML 1.0 Frameset", voyager_frameset, VERS_FRAMES},
{"HTML 4.01", "XHTML 1.0 Strict", voyager_strict, VERS_HTML40_STRICT},
{"HTML 4.01 Transitional", "XHTML 1.0 Transitional", voyager_loose, VERS_HTML40_LOOSE},
{"HTML 4.01 Frameset", "XHTML 1.0 Frameset", voyager_frameset, VERS_FRAMES}
Because the HTML 4.0 and 4.01 DOCTYPE strings carry the same internal
version flags (e.g., VERS_HTML40_STRICT), Tidy uses the first string
encountered with the desired version flag when generating the requested
DOCTYPE. As the HTML 4.0 strings are first, they are used in preference to
the 4.01 strings. Placing the 4.01 strings ahead of the 4.0 strings solves
the problem.
-- Dave Bryan
Thanks for spotting this. I will reverse the order of the entries in
this table to correct this. I plan to make a new release within the
next 2 weeks.
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
Dave Raggett:
I plan to make a new release within the next 2 weeks.
Good news! I'm looking forward to it. I've started to use
Tidy a lot lately, and I've finally found a configuration
that works for me. It really is a brilliant program.
I do hope the bug that makes Tidy butcher XHTML Frameset
pages gets fixed in the next release. And then there's the
"xml:lang" attribute - or was that fixed already??
Bertilo Wennergren
Can you please remind me what the XHTML Frameset bug is?
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
You're welcome.
-- Dave
Dave Raggett:
It seems not to recognize frame elements whith a closing "/".
It actually removes them.
Tidy can produce XHTML Frameset docs, but when fed them back
again it cries foul.
I'm not sure which factors are involved. I just tried this
at CYAN, http://www.chamisplace.com/asp/hk.asp , checking
the following URL, and this time there was no frame problem:
Bertilo Wennergren
Thanks I will see if I can reproduce this problem.
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
Can you please remind me what the XHTML Frameset bug is?
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
You're welcome.
-- Dave
Dave Raggett:
I plan to make a new release within the next 2 weeks.
Good news! I'm looking forward to it. I've started to use
Tidy a lot lately, and I've finally found a configuration
that works for me. It really is a brilliant program.
I do hope the bug that makes Tidy butcher XHTML Frameset
pages gets fixed in the next release. And then there's the
"xml:lang" attribute - or was that fixed already??
Bertilo Wennergren
option
VERS_HTML40_STRICT},
VERS_HTML40_LOOSE},
VERS_FRAMES},
VERS_HTML40_STRICT},
VERS_HTML40_LOOSE},
VERS_FRAMES}
to
solves
Thanks for spotting this. I will reverse the order of the entries in
this table to correct this. I plan to make a new release within the
next 2 weeks.
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
Dave Raggett:
It seems not to recognize frame elements whith a closing "/".
It actually removes them.
Tidy can produce XHTML Frameset docs, but when fed them back
again it cries foul.
I'm not sure which factors are involved. I just tried this
at CYAN, http://www.chamisplace.com/asp/hk.asp , checking
the following URL, and this time there was no frame problem:
Bertilo Wennergren
Thanks I will see if I can reproduce this problem.
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)

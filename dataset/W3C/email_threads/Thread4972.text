According to the current spec (12 Nov 2003 public draft as well as 25 March
2004 internal draft) the following is a type error:
xs:yearMonthDuration("P2Y") * 2
Multiplication of a duration by a double is allowed, but not by an integer.
There is no rule anywhere that causes the integer to be promoted to an
xs:double in this situation.
This is clearly an oversight.
Michael Kay
Mike:
I made the same point in my mail
on 3/11. It seems to me that we need numeric promotion rules for
operators
just like we have for functions.
All the best, Ashok
[mailto:public-qt-comments-request@w3.org] On Behalf Of Michael Kay
According to the current spec (12 Nov 2003 public draft as well as 25
March
2004 internal draft) the following is a type error:
xs:yearMonthDuration("P2Y") * 2
Multiplication of a duration by a double is allowed, but not by an
integer.
There is no rule anywhere that causes the integer to be promoted to an
xs:double in this situation.
This is clearly an oversight.
Michael Kay
Doesn't the mapping to an op: function trigger the promotion rules?
Thanks
Michael
It would if it got that far. But the rules for arithmetic expressions in 3.4
reject this combination of operands during the process of searching for an
op: function, so it never gets as far as identifying a function to be
called, let alone calling it.
Michael Kay

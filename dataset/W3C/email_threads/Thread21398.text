Hi all,
I'm trying to figure out how to format the body of annotations for
annozilla, and there doesn't seem to be a standard in place. Right now,
Amaya 7.1 is creating annotation bodies that look like:
this sort of annotation 1) has no doctype and 2) has no namespace. as
such, when annotest.w3.org serves this document up with mimetype
"application/xhtml+xml", poor mozilla becomes utterly confused. seeing a
standards-compliant mimetype, it tries to render in standards compliance
mode. however, without a namespace and/or doctype, there's no styling
info, and the whole process gets hosed.
so, I suggest that we have our clients, especially amaya, put a namespace
and/or doctype in the body html.
what do you all think?
regards,
Doug
A doctype would presumably cause havoc when the annotation body is posted
along with the annotation information.
Perhaps if the annotation server used a MIME type of 'text/html' ?
Matthew
Yeah, a doctype would cause havoc. But a namespace, I think, would be
correct. In fact, if you look at the example in the protocols, the XHTML
namespace *is* provided on the html tag:
Doug
"Doug Daniels" rainking@rice.edu wrote in message
news:Pine.LNX.4.33.0301231519310.19069-100000@bunker.ece.rice.edu...
annotest gets the mime-type of the resource from the submission, the problem
is purely an Amaya problem of incorrectly submitting the mime-type as
application/xhtml+xml (well and a problem of embedding documents within
other documents in the xhtml world...)
amaya should simply not claim that the previous document is
application/xhtml+xml when it's not!
Jim.
Hello!
Thanks for your report. You're correct. The generated XHTML body
is not valid.
The procedure that Amaya uses to add a namespace was changed around
December. The annotation library was not updated at that time and this is
what was causing the problem. Previous to this modification (I suppose
before release 7.0), I believe that the namespace was being correctly
added.
I fixed the problem and commited the code to CVS. The namespace is now being
added to the HTML element. We're planning a new Amaya release for next
week so this fix will make it.
Another problem is that if I post an annotation with this modification
and then reload it from the server, the server is not retaining the
namespace. I'll ask Eric to take a look at this problem later on today
(when he wakes up). I'll ask him also if it's possible to add the missing
namespace to the annotations that were posted in the meantime and
stored in the database.
Thank you all for this report.
-jose

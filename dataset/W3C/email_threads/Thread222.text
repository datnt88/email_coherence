I would like to ask if anyone on this list has hacked tidy or
generated a patch in order to use tidy with PHP3 files.
Some previous attempts such as:
still mangle HTML code within the PHP tags.
For those unaware of PHP3, you may visit: http://www.php.net/
PHP is fastest-growing server-side scripting language used on the
web, currently in 500,000 web sites according to Netcraft.
Tidy is so useful for pure HTML files that I wish to use it with
PHP3 files also.
Justin Farnsworth
Eye Integrated Communications
106 East Victoria Court - Suite A
I've been using TIDY (as a plug-in for HTML Kit
now. I've found that you get less managing if you use a
tag for php elements that span more than one line
? ? can be used OK for simple element substitutions.
You're right though, it's still not perfect :-(
TIDY incorrectly mangles the following:
to
which breaks the PHP.
I also find it particularly annoying that TIDY re-indents ? ? tags each
time you tidy a document, but leaves script /script blocks alone.
Richard Allsebrook
Webmaster - Easysoft Limited
* No 3 the Embankments, Leeds LS1 4BJ, UK
*+44 0113 2220400
I would like to ask if anyone on this list has hacked tidy
or
generated a patch in order to use tidy with PHP3 files.
Some previous attempts such as:
still mangle HTML code within the PHP tags.
For those unaware of PHP3, you may visit:
PHP is fastest-growing server-side scripting language used
on the
web, currently in 500,000 web sites according to Netcraft.
Tidy is so useful for pure HTML files that I wish to use it
with
PHP3 files also.
Justin Farnsworth
Eye Integrated Communications
106 East Victoria Court - Suite A
It is exactly those situations that you point out that
are breaking the code, as much of the dynamic page generation
does not allow the luxury of using the
SCRIPT /SCRIPT tags as the small elements of dynamic changes
are "embedded" in the HTML, that is, not multi-line.
Ideally, in the parser, when tidy encounters an opening
?php tag, EVERYTHING is just saved on a node and printed
out verbatim until the closing ? tag. I would not want
tidy to decide upon how to format the server-side scripting
code.
Justin Farnsworth
Eye Integrated Communications
106 East Victoria Court - Suite A
I tried the example given on the PHP site:
It worked fine, so perhaps it's just a matter of using a recent
version of Tidy? On the other hand, perhaps Tidy still fails for
more complex examples of PHP3. One thing to note is that Tidy works
by building a clean parse tree and then pretty printing it out. This
means that if you PHP3 code generates HTML markup for the start tag
for some element, you should also include PHP3 code for the end tag,
as otherwise Tidy will be surprised by an unexpected end tag and
will delete it, most likely causing your page to fail. Tidy is only
software after all and not a mind reader.
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
I assume your example was supposed to have been:
Which indeed is currently tidied to:
I think the solution for PHP3 hackers is to add a new config option
to control whether  and  are mapped to  and  respectively
within attribute values or not. This would be in analogy to the
existing options for dealing with &amp; etc.
Note; your example lacked a trailing quote mark and as written
should cause Tidy to complain.
I don't understand this very well. Sometimes as in your example
it's better for the ? ? to be formatted inline, while in others
something similar to script and style elements would make sense.
How would Tidy be expected to know which processing instruction
should be printed inline and which outdented?
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
Oops, sorry for the typo - I was typing strait into the email.
My only specification for tidy and PHP is that tidy completely ignores ? ?
and ?php ? tags! No formatting, entity translation, indenting/pretty
printing - exactly the same as when it does when it encounters a
script /script block.
I am intrigued to your solution for the ? mapping to ? I use TIDY
exclusively though HTML-Kit and the documentation provided is non-existent
:-( Do you have any information on how TIDY is incorporated into HTML-Kit
and what files I need to change to include this option?
Thanks again for the ever excellent TIDY. I have no problems with its HTML
parsing (apart from it adding a cr/lf after a TD which breaks the
appearance of some tables) and I'd be the first to admit PHP integration is
a little strange.
I personal don't mind moving over to ?php ? for inline tags if it would
make the parsing simpler.
Richard Allsebrook
Webmaster - Easysoft Limited
* No 3 the Embankments, Leeds LS1 4BJ, UK
*+44 0113 2220400
This is tricky since ? ? is the syntax used for processing
instructions, and it is unlikely to be the correct thing to
format all processing instructions in the way you want.
Perhaps Tidy could look at the name immediately following the ?
to determine what rendering to apply?
Tidy is wrapped into a DLL for use in HTML Kit. I don't maintain
HTML Kit myself, so you need to contact "Chami" for further
information.
It would certainly be helpful to have a simply way for Tidy to know
which processing instructions should be formatted specially.
Regards,
-- Dave Raggett dsr@w3.org http://www.w3.org/People/Raggett
World Wide Web Consortium (on assignment from HP Labs)
I converted the following document from HTML to XHTML using Tidy...
appears as....
!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/strict.dtd"
Unfortunately, !-- ---- -- is not valid in XML. It seems that there
is code in there to prevent it, but it's not quite working. I'm
actually using jTIDY, but can reproduce this error in regular ol' TIDY.
Serge Knystautas
Loki Technologies

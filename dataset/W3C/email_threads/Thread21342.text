I tried creating an annotation on an SVG element inside an HTML document
using Amaya. When I looked at the XPointer produced, it was
(that should be all on one line).
Is that correct?
1. Shouldn't it have xmlns(svg=http://www.w3.org/2000/svg) somewhere
(XPointer 5.2.1, Namespace Initialisation)? Or is this not required because
SVG is declared as the default namespace for the SVG element? (I'm a bit
hazy on this part of XPointer.)
2. Shouldn't SVG be either svg or svg:svg?
3. Shouldn't line_ be line ?
Matthew Wilson
Hello Matthew,
Thanks for your comments.
SVG[1]/line_[1]
Can you email me the image you were trying to annotate? It is definitely
a bug to see line_ there.
The inclusiong of SVG inside HTML can only be done with the SVG keyword.
On XHTML, you can also do it with namespaces. However, the name should
be SVG.
Somehow, the function that should be converting Amaya's internal element
names into those of the DTD is not being called for SVG.
If the document was generated by Amaya, this is not a problem.
The XPointer Candidate Recommendation says that namespaces must be used
when there is a conflict between two identical element names coming from
two different namespaces (sec. 5.2.1). If the document was generated by
Amaya, this is not a problem, as we cannot yet produce or handle generic XML
documents (although this should be available in one or two release time).
I agree that it wouldn't harm to include a namespace, if you included the
fragment this way. The same section in the CR says how to include the
namespace, but it's not clear what will be the final shape of the XPointer.
I'll ask the question to Henry and answer back to the list when I have more
information.
For both above, I guess you're right. It seems like a bug in my Amaya
code. I'll look at it (I hope you can mail me your document and tell me what
you were annoating in it).
Cheers,
-jose
The annotation was on the solitary SVG item in the Amaya-generated page
Are you saying that the element called "svg" has to be converted to
capitals, "SVG", for inclusion in HTML?
Matthew Wilson
Hello Matthew,
Sorry it took me some time to get back to you.
Annotating the line in your SVG example:
Produces the following XPointer in the current Amaya (from CVS):
file:///home/kahan/svg-annot-test.html#xpointer(/html[1]/body[1]/svg[1]/line[1])
Although it doesn't include namespaces, it is correct by itself. Which
version of Amaya (and on which platform) were you using when you got the
XPointer:
xpointer(/html[1]/body[1]/SVG[1]/line_[1])
My guess is that it was a version previous than 5.3 which was missing the
convertion from the internal Amaya name to the external name, because
I was unable to reproduce it.
What I did was to copy your file locally, then select the line, annotate
it and open the index file that's stored locally. Did you use this same
procedure?
My previous comment was wrong:
I was completely confused by MathML. There is no SVG element that allows
you to include the SVG XML source inside HTML 4.x documents. You can only
include an SVG image thru the object element. Amaya allows to do the same
thing using the img element. However, the SVG tree is not visible then. You
can only make an XPointer that points to the element that includes the SVG
image.
For XHTML and other XML documents, you need to use namespaces to include
SVG.
For the outstanding question on how does an XPointer that includes namespaces
look like, I got the following example from Henry (I split the line at the
# char, but there is no space there):
href="http://www.w3.org/Team/thompson/w3c-home.xml#
xmlns(x=http//example.com/foo) xpointer(//x:a)"
Amaya is not able yet to handle this kind of XPointers. I'll try to
improve this situation.
Hope this answers (even if belatedly) your questions.
-jose
I was using Amaya 5.3 on Win98. Help- About Amaya says "amaya - 5.3 18
December 2001".
I checked the SVG XPointer using the interactive Web interface at
OK.
OK. I still have a few questions about the XPointers but I suppose I should
read the spec again first. 8-)
Matthew

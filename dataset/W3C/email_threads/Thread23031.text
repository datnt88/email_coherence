What happens with EventListener's that are registered on adopted Node's? Typically, these are not stored with the Node, but are stored in a Map in the Document. If they were to migrate with the
Node, typically an implementation would have to identify all listeners that listen to the adopted node or any child, register them on the new document and then remove them from the map of listeners on
the source document.
We should probably make that explicit, but the intent is that if adoptNode
work at all, it really does give you "the same node" with all associated
data. So yes, registered Event Listeners remain registered.
Implementation detail. Architecturally, they're registered on the
EventTarget -- which is the node. Yes, if you've stored them separately you
have to deal with transferring that information to the new document at the
same time that you transfer the node.
Or, if that's impractical, adoptNode() can fail. It's a bit odd in being a
"best-effort" function; it works when and where it happens to work...
Joe Kesselman / IBM Research
I guess the another weird twist is that one event group could participate in
two documents if you registered a listener on one node that was adopted and
another on a node that was not adopted.
Definitely think writing the tests for this one will be fun.

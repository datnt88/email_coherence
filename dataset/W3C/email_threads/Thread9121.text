Hi,
The answer to this question may be in the XML signature documentation, but I
could not find it.
I am a bit confused as to what parts of the signed document are exactly
canonicalised. Section 4.2.1 states that the "CanonicalizationMethod is a
required element that specifies the canonicalization algorithm applied to
the SignedInfo element prior to performing signature calculations".
But what about the method being applied to elements prior to digest
calculations. Would not a slight variation in the bits of these elements
(the reason for the canonical transform) produce different digests? Are the
elements, for which digests are calculated, also passed thru a canonical
transform prior to digest calculation?
Thanks,
Tarun.
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.493 / Virus Database: 292 - Release Date: 6/26/2003
Tarun,
That's correct. Canonicalizing SignedInfo is all the
CanonicalizationMethod is used for.
You need to read up on the data pipeline. Remember, the data retrieved
from the URL in the Reference is passed through any Transforms and, even
more important, subject to default transformations on its was to
becoming the octet stream that is digested. If the URL is, for example,
an "ftp://" URL or something else that returns an octet string, no
conversion is neede and the data just gets directly digested. On the
other hand, if you have a same document reference, like "#foo", then
that reference yields an XPATH node set which must be serialized into an
octet stream before it can be digested. This serialization process
defaults to using Canonical XML. If you want some other canonicalization
in this case, you need to specify it as a Transform.
Donald
Donald E. Eastlake 3rd dee3@torque.pothole.com
155 Beaver Street +1-508-634-2066(h) +1-508-851-8280(w)
Milford, MA 01757 USA Donald.Eastlake@motorola.com
When calculating digests, you may specify c14n in Transform/
element [1]:
Any canonicalization algorithm that can be used for
|CanonicalizationMethod|
(such as those in Canonicalization Algorithms
http://www.w3.org/TR/xmldsig-core/#sec-c14nAlg (section 6.5)) can be
used as
a |Transform|.
or the default c14n would be used [2]:
If the data object is a node-set and the next transform requires
octets,
the signature application MUST attempt to convert the node-set to
an octet stream using Canonical XML [XML-C14N
http://www.w3.org/TR/xmldsig-core/#ref-XML-C14N ].
Aleksey
[1] http://www.w3.org/TR/xmldsig-core/#sec-Canonicalization
[2] http://www.w3.org/TR/xmldsig-core/#sec-ReferenceProcessingModel

I was creating an XHTML 1.1 document. I saved it, and Amaya added the
following element to the document:
In other words: wrong.
Steven Pemberton
If Amaya generated that encoding it effectively saved the document with this
encoding. That generates of course an error if the server doesn't take care
of the information given when the document was saved and decides to serve it
with another encoding.
The point is not about encoding. If a user creates an XHTML 1.1 document
and saves it as 'application/xhtml+xml', Amaya MUST NOT say 'text/html'
with the meta element.
Regards,
Masayasu Ishikawa / mimasa@w3.org
W3C - World Wide Web Consortium
Well, when Amaya does that, the server refuses to save a document with the
MIME type
'application/xhtml+xml' because it was previously saved with the MIME type
"text/html'.
As you are aware about that, you can change the configuration parameter in
Special/Prefenrces/Publishing to set "Use the application/xhtml+xml MIME type
for XHTML documents".
document
type
Isn't there a way to say "Don't add a meta element that sets the mime type
for XHTML"? I want to the server to decide what media type is used. At the
moment the wrong thing is done. It is wrong to set the media type to
text/html for XHTML 1.1.
Thanks.
Steven Pemberton
We thought that the meta element was useful when documents loaded locally?
Amaya does coherent things: the mime type in the meta and the http put header
are the same.
If I understand your point of view, the author chooses to create a XHTML or
a HTML document but Amaya should not give information about the mime type.
The server is enough intelligent to determine it by itself.
That's easier to implement for us.
What about the encoding? Servers give self-decided encodings too and that
generates
errors when the document is saved in UTF-8 and served with ISO-8859-1.
type
the
Yes, but not if it wrong.
XHTML 1.1 should not be served as text/html (see
I create an XHTML 1.1 document with Amaya, it automatically adds a meta
for text/html.
header
I created a local file, and it still used text/html, even if the extension
was .xml.
or
No my opinion is that Amaya shouldn't give the *wrong* information about the
mime type.
Steven
Hi Steven,
All your problems will be solved if you switch the option
"Use the application/xhtml+xml MIME type for XHTML documents"
in Special/Preferences/Publishing
It's great to hear that something that simple can solve all my problems!
But seriously, my major problem is that Amaya is doing something wrong.
XHTML 1.1 should not be served with text/html, and so a W3C product in
particular should not do that, whatever the setting of user options!
This is a bug in Amaya, not an inconvenience.
Best wishes,
Steven
As you see we prepared all the stuff to publish XHTML documents with the right
MIME type, but as I explained before that doesn't work with current servers
as long as they don't accept to register this new MIME type.
I refuse to explain to all our users that they cannot save their documents
as long as their used server is not updated.
As soon as the new MIME type is accepted by servers Amaya will conform with
this
new recommendation.
From: "Irene Vatton" Irene.Vatton@inrialpes.fr
right
servers
It is nothing to do with servers, it is to do with documents. Amaya creates
XHTML 1.1 documents with a meta for text/html. This is broken. It is
incorrect.
What's the problem with leaving off the meta for XHTML 1.1? The character
encoding is given in the XML declaration and the mime type can be got from
the server or file extension.
Best wishes,
Steven
Please make the test with our server:
- Create a XHTML document with the right MIME type application/xhtml+xml
- Reload it - it's served with the MIME type text/html
- Make some additional edits
- Then try to save it - It fails
The second time Amaya uses the MIME type given by the server (text/html)
and the server refuses.
No problem for Amaya, I hope it's the same for other browsers.
Do you suggest to remove existing meta elements when documents are saved?
I propose to not generate
saved?
Yes exactly! Amaya adds it without being asked, and it adds the wrong
information. All I ask is that meta not be added in the incorrect cases!
Best wishes,
Steven

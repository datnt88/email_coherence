That's Level 1 behavior if the node is read-only. See
(I seem to remember that there may have been an erratum in earlier versions of the  DOM which failed to define this behavior, whcih might explain the
confusion...?)
Attr.value is not declared to raise any exceptions in the original DOM Level 1 Recommendation, http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-221662474 But was declared to raise
NO_MODIFICATION_ALLOWED_ERR in the DOM Level 1 errata (http://www.w3.org/DOM/updates/REC-DOM-Level-1-19981001-errata.html) and
DOM Level 1 Second Edition, http://www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-core.html#ID-221662474.
The DTD's and Schemas were generated from the original DOM Level 1 spec, so it did not recognize raising NO_MODIFICATION_ALLOWED_ERR as something to be expected from setting Attr.value.
I will move the test back to the DOM Level 1 set. The test (and only this test) will not validate against the DTD and Schema's generated from the DOM Level 1 Recommendation due to an erratum. The
test generation transform does not require that the test validate and so should properly convert this test using original recommendation sources.
There are a couple of options:
1) attrsetvaluenomodificationallowederr.xml could be explicitly excluded from the dom1-core-validate-tests task.
2) The DTD and schema building process could use the Second Edition working draft instead of the original recommendation.
My preference would be 1 since DOM Level 1 is still a working draft and other than failing to validate this one test there seem to be no negative consequences of continuing to use the original
recommendation.
However, I will attempt to build tasks for generating resources from the SE, at least as a check for the SE.
I'll double check our docs on this side --
it seems that several of the tests changed
as a result of some of the errata...
--Mary
That's Level 1 behavior if the node is read-only. See
D080
(I seem to remember that there may have been an erratum in earlier
versions of the  DOM which failed to define this behavior, whcih might
explain the
confusion...?)
Level 1 Recommendation,
was declared to raise
(http://www.w3.org/DOM/updates/REC-DOM-Level-1-19981001-errata.html) and
662474.
so it did not recognize raising NO_MODIFICATION_ALLOWED_ERR as something to
be expected from setting Attr.value.
test) will not validate against the DTD and Schema's generated from the DOM
Level 1 Recommendation due to an erratum. The
should properly convert this test using original recommendation sources.
from the dom1-core-validate-tests task.
working draft instead of the original recommendation.
other than failing to validate this one test there seem to be no negative
consequences of continuing to use the original
SE, at least as a check for the SE.
working draft
That's what I'd recommend. The whole point of releasing the Second Edition
was to correct known errata, and the testcases should incorporate those
corrections rather than perpetuating acknowledged mistakes in the first
release.
....I presume you mean "the testcase suite for DOM Level 1"... and for
that very reason I would recommend correcting this now while things are
still maximally flexible, rather than waiting and having people rediscover
the problem when the change occurs.
Joe Kesselman / IBM Research
We did add two more test cases as a result
of DOM Level 1, Second Edition:
documentCreateElementDefaultAttr
documentCreateEntityReferenceKnown
There were other changes, but just in wording for
the test purposes -- we already had tests that covered
these conditions.
I too would think that we would want the DOM Level 1
Test Suite to support Second Edition -- Is it really still
a Working Draft, as it states on the Technical Reports
Web Page?
--Mary
Definitely the test suite should verify the behavior as described in the recommendation and errata which also should be equivalent to DOM Level 1 Second Edition. I believe that my statement about
working draft was that DOM Level 1 SE was still at Working Draft. Definitely, the test suite is the most malleable component.
The only errata that appears to effect the markup language (as opposed to errata that would effect only the tests) is the addition of throws clause for Attr.value and the only place that this comes
into play is when DTD or Schema validating tests, roughly equivalent to using Lint on a program to check for warnings. Since there is only one test that it affects, my suggestion was just to turn
lint off for this test.
I'll investigate building DTD's and Schema's from the DOM 1 SE tonight and report to the list.
Sorry; I misread.
You're right, the second edition does still show as a Working Draft. Minor
errata are still trickling in, which is probably why it hasn't been
officially promoted... but it might indeed be time to nail it down and then
bring out a third edition if/when anything needs further work. Or maybe
just advance it to CR, as a promise that we won't change it unless we must.
Meanwhile... You're probably right; the conservative solution is to tell
folks not to validate that one test until this goes golden.
Joe Kesselman / IBM Research

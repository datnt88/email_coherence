Rick Roth
Biztro, Inc.
rickr@biztro.com mailto:rickr@biztro.com
... well, he wrote nothing... ;-) but his question was: Is there any way to
get TIDY to recursively tidy up a tree of files?
I am currently working on a perl script to convert certain HTML files into
XML files, it basically is called like "./html2xml.pl
source_path/to/html_files target_path/to/xml_files". The path to the HTML
sources is processed recursively, the XML files are written to the target
directory (without recursivle re-creating the directory structure, but that
should be a minor modification only).
If I find some time next week, I'll have a go at it... for instance, you
can take this piece of perl code and modify it to your needs....
push (@DirStack, $ARGV[0]);
$XMLDir = $ARGV[1];
while ($DirCursor = pop @DirStack) {
opendir TheDir, $DirCursor;
@DirContent = readdir TheDir;
foreach $Filename (@DirContent) {
if (($Filename eq '.') || ($Filename eq '..')) {
next;
$FilePath = $DirCursor.'/'.$Filename;
if (-d $FilePath) {
push @DirStack, $FilePath;
next;
if ($FilePath =~ /.html?$/i) {
open (INFILE, "  $FilePath") or
die("ERROR: \'$FilePath\' not openable for reading!\n");
$FILE = join("", INFILE );
close (INFILE);
$FILE = trim(retrieveVariables($FILE));
#printVariablesToScreen();
printXMLFile();
print "Parsed file: " . $FilePath . " - "
. $XMLFilename . "\n";
closedir TheDir;
Sebastian Lange
Maybe the first chat site that validates as HTML
4.0 even though user input may contain HTML codes.
Courtesy to Dave Raggett's HTML Tidy:
Re: Is there any way to get TIDY to recursively tidy up a tree of files?
He didn't specify his OS preference, but I can offer various solutions with
the Mac OS versions of Tidy, that make it relatively easy to recursively
tidy up a tree of files.
Contact me directly for more info.
Regards, Terry Teague
... well, he wrote nothing... ;-) but his question was: Is there any way to get TIDY to recursively tidy up a tree of files?
We adopted a rather different approach, using a robot rather than a directory tree.
This involved using htdig (www.htdig.org) to create a URL list, and then passed this
list to htdig using JTidy as an external parser. It allows us to call other parsers for
non HTML files transcluded in the HTML via a , embed , img , applet
etc.
Can I repeat a question I posed to the list (with no response; perhaps none exists).
If one does use Tidy recursively,enforcing the cleaning up of tags to use CSS,
how might one go about recursively uniquifying the resulting multiple stylesheets into
a single one applicable to the entire document tree? Its non trivial,
and I was wondering if anyone knew of a product, opensource or commercial
that might undertake this? Is there perhaps another list this question might be
posed to?
Dept. Chemistry, Imperial College, London, SW7 2AY, UK.
It is, indeed, not trivial...
As a first approach, I would try the following:
The freshly tidied HTML file would have to be processed once more by a perl
script, which in a first step would have to turn the class definitions into
unique definitions (I believe that tidy names classes like "c1", "c2" etc,
thus "c1" may be a different definition for one document than for another),
adjust the class attributes throughout the document accordingly, write the
modified style definitions into the wanted external CSS document and
replace the STYLE /STYLE with the appropriate LINK REL="..." .
This should work, but the resulting CSS Document will be fairly large and
quite ugly.
Second idea then would be to reduce redundancy by checking first whether a
class definition already exists before adding it to the CSS document...
A well, Mr. Rzepa, a paid two weeks vacation in London does sound
tempting... maybe my employer would even let me go... ;-)
sebastian
PS: did I make any sense at all?
Cyperfection - agentur fuer neue medien GmbH
Sebastian Lange
Karl-Kraemer-Str. 4
D-67061 Ludwigshafen
fon: +49-(0)621-587104-0
Anfahrt - http://www.cyperfection.de/Anfahrt/

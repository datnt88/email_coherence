This is a semi-official Software AG response to the "Last Call" for comments
on DOM Level 2: [I apologize to the WG for not raising this before the Last
Call draft, but we agreed at the August meeting to take this to e-mail to
figure out a solution for for Level 2; that discussion never happened, and
since I was travelling for most of the rest of August I did not notice.]
We believe that it is important to have a method in DOM Level 2 to get an
element by the value of its ID attribute. There is a getElementById()
method for HTML in DOM Level 1, and this is also needed by XML developers.
Several DOM implementations, including Microsoft's widely used one, have
such a method, and its lack in DOM Level 1 is often noted.
The DOM Working Group has considered this issue on several occasions; the
general feeling has always been that a) this could only work for XML
documents that have a DTD, and the DOM (like XML) does not require a DTD ;
so b) a more general mechanism that could be used to look up elements by ID
as a special case is preferred. Unfortunately, no such general mechanism
has been agreed upon.
Therefore, we strongly urge the WG to simply adopt the getElementById()
method in the HTML DOM as an XML method in Level 2 rather than waiting until
Level 3 for a "better" solution.
As for what to do when there is no DTD, or a DTD that does not define an ID
attribute, I suggest that it simply return null, just like the HTML DOM. I
could imagine that a DOMException could be thrown, but in the interest of
simplicity I would suggest making it identical to the HTML method.
So, I'm suggesting that to the Document interface, add the method
Element getElementById(in DOMString elementId)
"Returns the Element whose ID is given by elementId. If no such element
exists, return null. Behavior is not defined if more than one element has
the id."
So, do people on this list support this idea? Is returning null the right
solution for the situation where there is no ID defined *or* no element
matches the specified ID? Does it make *practical* sense to distinguish
these two situations? Is this an excessive burden on DOM implementors? ( I
really don't think so, especially in Java, since this is easily done with
java.util.Hashtable ....or am I missing something?).
Thanks,
Mike Champion
I don't see how IDs are more of a DTD issue than NOTATIONs.
Notations, at least, are isolated -- you can set them and query them and they
don't otherwise interact with anything else. IDs do need to so interact; to use
them you have to be able to set the type of an attribute, which requires
defining an attribute, which we don't currently do.
Default attributes, like IDs, currently have no place in the DOM to assert them.
They do, however, have defined behavior. Personally, I consider that an
unpleasant situation and I have no particular wish to exacerbate it. But I do
understand that folks want IDs -- and in fact all of DTDs -- yesterday if not
sooner.
Joe Kesselman / IBM Research
I'm not clear on the difficult part.
Looking up IDs is trivial.
Traversing an IDREF is just a matter of looking up an ID so that's
trivial too.
Setting an ID is just setting an attribute so that's trivial too.
Of course the underlying implementation needs to know that the attribute
is an ID attribute but that's not particularly difficult either.
Being able to change the DTD to make an attribute INTO an ID attribute
would be neat, but I think that that is a clearly separable problem: a
DTD problem instead of a document instance problem.
Paul PRescod

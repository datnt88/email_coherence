Hi,
To enable XIM for GTK-Amaya, 'ENABLE_MUTKIKEY' must be setted
to 'yes'. This problem has come from the fact that
'gtk_set_locale' is not called by the default.
I think almost all gtk-based programs, which care for I18N,
have called 'gtk_set_locale' by the default.
Is it a bad idea to call 'gtk_set_locale' by the default?
FYI, the current GTK-Amaya calls 'gtk_set_locale' in
'thotlib/dialogue/dialogapi.c' by checking the variable
'ENABLE_MUTKIKEY'.
I mean that how about commenting out following two lines?
ptr = TtaGetEnvString("ENABLE_MUKTIKEY");
if (ptr &amp;&amp; !strcasecmp (ptr, "yes"))
gtk_set_locale ();
Thanks,
ymnk
On Tue, 26 Nov 2002 11:16:47 +0900
AY Hi,
AY To enable XIM for GTK-Amaya, 'ENABLE_MUTKIKEY' must be setted
AY to 'yes'. This problem has come from the fact that
AY 'gtk_set_locale' is not called by the default.
AY I think almost all gtk-based programs, which care for I18N,
AY have called 'gtk_set_locale' by the default.
AY Is it a bad idea to call 'gtk_set_locale' by the default?
AY FYI, the current GTK-Amaya calls 'gtk_set_locale' in
AY 'thotlib/dialogue/dialogapi.c' by checking the variable
AY 'ENABLE_MUTKIKEY'.
AY I mean that how about commenting out following two lines?
AY /*
AY ptr = TtaGetEnvString("ENABLE_MUKTIKEY");
AY if (ptr &amp;&amp; !strcasecmp (ptr, "yes"))
AY */
AY gtk_set_locale ();
I think it's much better to rewrite this piece of code like so:
ptr = TtaGetEnvString("DISABLE_MUKTIKEY");
if (ptr &amp;&amp; !strcasecmp (ptr, "yes"))
setlocale(LC_ALL,"POSIX")
else
gtk_set_locale ();
where setlocale() it's a function from locale.h .
This call conforming to POSIX.1
IRC: irc.openprojects.net #asplinux Grigory Bakunov
ICQ: 51369901 http://www.asplinux.ru
-----BEGIN GEEK CODE BLOCK-----
GCS/MU d-(--) s:- a- C+++ ++$ UBLAVSX+++$ P+ L++++$ E++$ W++ N+ - o? K?
w-- O- M V-(--) PS+ PE+ !Y PGP+ ++++ t+ 5++ X+++ R+++ tv+ -- b+++ ?DI D+
G++ e ++$ h- r++ y+ z++(+++)
------END GEEK CODE BLOCK------
On Tue, 26 Nov 2002 10:45:09 +0300
I think Atsuhiko Yamanaka is right. The ENABLE_MUKTIKEY comes
from the Motif version and there is no reason in the GTK version
to test that variable.
Irene.
On Tue, 26 Nov 2002 17:28:59 +0100
IV I think Atsuhiko Yamanaka is right. The ENABLE_MUKTIKEY comes
IV from the Motif version and there is no reason in the GTK version
IV to test that variable.
As you wish :)
But i need to say what i send patch with setlocale call more than two years
ago. May be it's time to add setlocale or gtk_set_locale call at least ? :)
Sorry for my tone, i realy love amaya, just i bored to add gtk_set_locale
to each build of amaya :)
IRC: irc.openprojects.net #asplinux Grigory Bakunov
ICQ: 51369901 http://www.asplinux.ru
-----BEGIN GEEK CODE BLOCK-----
GCS/MU d-(--) s:- a- C+++ ++$ UBLAVSX+++$ P+ L++++$ E++$ W++ N+ - o? K?
w-- O- M V-(--) PS+ PE+ !Y PGP+ ++++ t+ 5++ X+++ R+++ tv+ -- b+++ ?DI D+
G++ e ++$ h- r++ y+ z++(+++)
------END GEEK CODE BLOCK------
On Wed, 27 Nov 2002 10:57:41 +0300
I guess your patch was integrated in the Motif version (we added a call to setlocale
in Amaya/thotlib/dialogue/interface.c) but there was a still confusion in the GTK
version.
We provided a support for multykey in Amaya long time ago because some
Unix platforms didn't provide it. This support lets the user enter the sequence
'e to generate a ?. If the user wanted to use that specific Amaya support
he had to define the variable ENABLE_MULTIKEY=yes.
As GTK provides a correct support for multykey, we don't develop a
specific support in the GTK version but the test of the ENABLE_MULTIKEY
was still there.
Now it will be fixed.
Irene.
On Wed, 27 Nov 2002 10:27:00 +0100
IV Now it will be fixed.
THANKS! You make a great job with amaya.
It's webdesign tool of new millenium!
IRC: irc.openprojects.net #asplinux Grigory Bakunov
ICQ: 51369901 http://www.asplinux.ru
-----BEGIN GEEK CODE BLOCK-----
GCS/MU d-(--) s:- a- C+++ ++$ UBLAVSX+++$ P+ L++++$ E++$ W++ N+ - o? K?
w-- O- M V-(--) PS+ PE+ !Y PGP+ ++++ t+ 5++ X+++ R+++ tv+ -- b+++ ?DI D+
G++ e ++$ h- r++ y+ z++(+++)
------END GEEK CODE BLOCK------

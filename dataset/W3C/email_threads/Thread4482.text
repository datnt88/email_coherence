Hi,
Some XSLT 2.0 constructs like xsl:for-each allow xsl:sort* in their
content model, it is however defined that no other xsl:* elements may
precede xsl:sort in these cases. It happens that you want to use sort
expression later in the body of the respective construct and would thus
like to assign it to a variable,
which is not allowed, which is rather counter-intuitive. Please allow
xsl:variable to precede xsl:sort in xsl:for-each and xsl:for-each-group
(maybe others I did not check whether it makes sense anywhere else too).
regards.
The semantics of this would be very complicated. It would imply that the
variable is computed with a context based on the unsorted sequence. How
would this extend to:
Would a call on position() in the second variable reflect the position of
the item after applying the first sort key and before applying the second?
I agree that there are cases in 1.0 where computing a sort key is difficult.
However, I think that XSLT 2.0 already provides adequate remedies:
(a) you can compute the sort key using a call to a stylesheet function
(xsl:function)
(b) you can compute the sort key using a sequence constructor
This is a personal response, but as the official public comment period is
closed, I'm not going to place this on the WG agenda unless another WG
member asks for it to be added. The XSL WG is currently happy to accept
comments that report problems in the spec, but not requests for new
features.
Regards,
Michael Kay
It would not, the content model would rather be variable*, sort*, ...
And as you said, the semantics would be the same as if the for-each
had no sort children. Doesn't really sound complicated to me. When
I authored the fragment above it's been the first time that my XSLT
processor correctly and surprisingly considered my transformation
malformed, hence this stroke me as counter-intuitive. I am not too
concerned about this though.
I am not sure I understand. The WG is required to formally address all
comments, the end of the LC review period just allows the WG to refuse
to make substantive changes in response to comments on procedural rather
than technical grounds. I guess I would accept such a response, but I
would nevertheless expect the WG to formally address my comment which
seems to require to put it on the WG's agenda.
Thanks.

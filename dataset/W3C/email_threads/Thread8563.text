You need to remove "(applied if this element is omitted)" because the
element MUST be present. So I think it should now read:
CanonicalizationMethod is a required element that specifies the
canonicalization algorithm applied to the SignedInfo element prior to
performing signature calculations. This element uses the general structure
for algorithms described in section 6.1: Algorithm Identifiers and
Implementation Requirements. The MANDATORY to implement canonicalization
algorithm
is Canonical XML [XML-C14N].
Alternatives, ...
--bal
Since CanonicalizationMethod is now a required element of SignedInfo, I
believe the last sentence of the first paragraph of 4.3.1 is incorrect.
That paragraph reads:
CanonicalizationMethod is a required element that specifies the
canonicalization algorithm applied to the SignedInfo element prior to
performing signature calculations. This element uses the general structure
for algorithms described in section 6.1: Algorithm Identifiers and
Implementation Requirements. The default canonicalization algorithm
(applied
if this element is omitted) is Canonical XML [XML-C14N].
Since the element is now required, I don't see why we need to specify a
default, and the "(applied if this element is omitted)" can never happen.
Noted, the last sentence is changed to:
/+The MANDATORY to implement canonicalization algorithm (applied if this
element is omitted) is Canonical XML [XML-C14N].+/ Alternatives, such as the
minimal canonicalization algorithm (the CRLF and charset normalization
specified in section 6.5.1: Minimal Canonicalization), may be explicitly
specified but are NOT REQUIRED....
Joseph Reagle Jr.
W3C Policy Analyst mailto:reagle@w3.org
IETF/W3C XML-Signature Co-Chair http://www.w3.org/People/Reagle/
In similar vein, CanonicalizationMethod is treated as optional in a few
other places:
(1) In section 2.0, the overall structure is outlined:
(CanonicalizationMethod)?
(SignatureMethod)
(Transforms)?
(DigestMethod)
(DigestValue)
( /Reference )+
(SignatureValue)
(KeyInfo)?
(Object)*
(2) In section 2.1, one annotation says:
[s03] The CanonicalizationMethod is the algorithm that is used to
canonicalize the SignedInfo element before it is digested as part
of the signature operation. In the absence of a
CanonicalizationMethod element, no canonicalization is done.
(3) The first step in section 3.1.2 says:
1. Create SignedInfo element with SignatureMethod,
CanonicalizationMethod if required, and Reference(s).
Thomas Maslen
maslen@pobox.com
Thanks! I've fixed it in my editors' copy and should be represented in the
next version.
Joseph Reagle Jr.
W3C Policy Analyst mailto:reagle@w3.org
IETF/W3C XML-Signature Co-Chair http://www.w3.org/People/Reagle/
One last vestige (I think) of the no-longer-optional CanonicalizationMethod
that I didn't notice last time around... in the editors' copy at
section "3.2.2 Signature Validation", item 3 says "(optionally canonicalized)".
Should it be just "(canonicalized)" now?
Also, step 1 of section 3.2.1 is exactly the same as step 1 of section 3.2.2.
I understand why it's in 3.2.2, and I'm willing to believe that it may also
be necessary in 3.2.1 to stave off some attack, but it looks for all the world
like a cut-and-paste error -- perhaps it needs some text in parentheses that
boils down to "yes, we really do mean this, and here's why"? (And, if this is
necessary, should it be hoisted above "For each Reference in SignedInfo:" ?).
Thomas Maslen
maslen@pobox.com
CanonicalizationMethod
canonicalized)".
Noted and fixed!
3.2.2.
world
that
this is
That's been mentioned before and I your recommendation is a good one:
Canonicalize the SignedInfo element based on the CanonicalizationMethod in
SignedInfo (so as to ensure the application Sees What is Signed, which is
the canonical form).
Joseph Reagle Jr.
W3C Policy Analyst mailto:reagle@w3.org
IETF/W3C XML-Signature Co-Chair http://www.w3.org/People/Reagle/

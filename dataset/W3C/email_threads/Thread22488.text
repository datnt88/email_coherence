DocumentFragment appears to be a placeholder for nodes or
node trees that can be in the process of being cut/pasted from
one document to another. During this phase it seems like the nodes
might not be attached to a particular document. This would be
very useful for creating templatized documents, for example,
where some commonly used document fragments are cached and
pasted into the document or rendered serially into an enclosing
document when converted to ascii in a web server.
However, the spec for Document clearly states that nodes may not
exist outside the context of a particular Document. This appears
to contradict the idea of DocumentFragments.
I apologize if I'm completely missing something here, but
any help clearing this up would be much appreciated!
I've built an HTML40 parser that builds up a DOM tree from
either a full document or valid document %block fragments.
It would be nice to not have to always have to create a
full Document object just for the fragments.
My template engine takes a top-level document and a hashtable
of named document fragments that are substituted into
the output stream whenever a SUBST tag is encountered.
This allows me to share document fragments with multiple
master template documents since the merging is done
at serialization time.
Also, just a comment on a possible future server-DOM, it
would be nice to be able to deprecate attributes like
Node.nextSibling, Node.previousSibling and Node.ownerDocument
that make the nodes completely encrusted into the collection
they reside in. This makes it very inefficient if some
of the nodes are remote objects and some are local.
And please bring iterators back!
Being able to mix and match nodes from different DOM
implementations would be very handy, especially for
distributed documents. As I understand it, the current
DOM forbids this.
Thanks,
- Claude Zervas
Claude,
Following restrictions are inplace for Level 1 of the DOM API:
1. DocumentFragment exists within the context of the Document which created
it.
2. ownerDocument attribute never changes.
3. DocumentFragment can not be used as a template because nodes will be
'moved' to the destination. Think of it as a 'laundry line' or a
'clipboard' for now.
4. Level 1 does not allow any movement of nodes between documents as well as
implementations.
Is this clear enough?
Don Park
Totally clear; what it means is that DOM Level 1 in its present form is
totally useless for anything but client-side scripting. It has been made
abundantly clear that client-side scripting is its only purpose, but it's
very unfortunate nonetheless.
Since I'm implementing a document processor, not an ECMAscript interpretor,
the present DOM is of little interest to me at this point. What I'm going
to do is continue implementing a version of the DOM API with all the
interfaces but without the semantic restrictions, and hope that they get
lifted in Level 2.
In the mean time, there's no hope of getting a useable DOM library from a
third party in the near future (not that I needed one), of interoperating
with anyone else's DOM implementation, or of using a DOM implementation as a
portability vehicle. Oh, well.
Stephen R. Savitzky Chief Software Scientist, Ricoh Silicon Valley, Inc.,
steve@rsv.ricoh.com California Research Center
home: steve@starport.com URL: http://www.starport.com/people/steve/
Well, that is the bad news. The good news is that Level 1 will arrive
sooner than it would have if we tried to address everything in Level 1.
Frankly, I am as frustrated as you are and hope to do my best to make sure
all the shortcomings are met in Level 2 and 3.
My understanding is that they will be either removed or loosened.
a
Docuverse DOM Server will solve that problem and many more when it is
released and I am sure there will be other DOM providers with similar
capabilities.
Regards,
Don Park
CTO/Docuverse

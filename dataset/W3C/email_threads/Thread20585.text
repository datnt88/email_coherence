According to rfc2616, section 14.14:

The value of Content-Location also defines the base URI for the
entity.
I tested that with Amaya, and it uses the request URI instead of the one
given in Content-Location.
See http://lists.w3.org/Archives/Public/www-qa/2002Sep/0043.html for a
better description.
(I can make a server configuration available, if needed).
Yves Lafon - W3C
"Baroula que barouleras, au ti?u toujou t'entourneras."
Normally, I fixed that bug in the last release 6.3.
I tested with amaya 6.3 windows and the problem is still there.
Yves Lafon - W3C
"Baroula que barouleras, au ti?u toujou t'entourneras."
Okay I read probably too quickly your message and we're not speaking about
the same use of Content-Location.
I have a resource available at "http://www.example.com/news/latest.html"
The server is smart enough to serve it with a Content-Location header with
a value of: "http://www.example.com/news/archived/2002/09/09/news.html"
The page is pointing to the previous news with a relative link of
According to RFC2616 [1] Section 14.14:

The value of Content-Location also defines the base URI for the
entity.
If I resume the suggested change:
- a relative link from that page should be resolved as relative to the
Content-Location
instead of the current URI.
- a Save of this page should use the Content-Location.
- a link from another page to that page should use also the Content-Location.
By example a link from http://www.example.com/D1.htm with the Content-Location
should generate the relative link "D2.htm"
In this case, why not forget the actual requested URI.
Yves,
This sounds quite problematic. I understand using Content-Location for
solving Content-Negotiation problems when publishing. However, using it
as a Base URI is akin to making an unexplicit redirection. This
sounds problematic for an editor, and even when following links.
In the case of an editor, which URL should you use then when making
a link? The one given in the Content-Location? If you do so, then you
may break Content-Negotiation (e.g., linking to image.svg intead of
image, if image exists in many formats).
When following links, you would then follow them relative to the
Content-Location. For example, if open a document at www.example.org
that has a content location value of www.w3.org/, then the
next relative URL you'd browse from there would be taken directly from
www.w3.org and that's the URL we would show in the address field, just
like with a redirection. This sounds confusing.
If the server is able to add a Content-Location header that points
elsewhere than where the document actually is, it may be as easy to
make a redirection to the actual location of the document.
Can you give us some specific examples where this may be useful?
Thanks!
-jose
Content-Location is indicating where the real resource is. In the case I
described, you have http://www.example.com/news.html that have the
semantic of "latest URI" and
"news of 9/9/2002", so it is not about solving conneg issues, it's a
matter of semantic of URI.
Regarding Base URI resolving, RFC2616 has authority on this and say that
the Base URI is the one given in the Content-Location. If it is relative,
it is then computed from the request URI and this relative URI.
When you create a link, you are already in the document, unless you want
to edit and follow links from the linked doc, you don't even have to
compute the real URI for it. But if you are creating a relative link, then
yes you should compute it according to the base URI (it can be displayed
in the "add link" box, to tell the user that it is not the same as the URI
displayed in the location box).
Well, it is not confusing, links are opaque, so linking to the new site
directly won't make any difference for the user.
No, a redirection does have the same semantic! See the example above for
an example of why Content-Location may be semantically important.
Thanks,
Yves Lafon - W3C
"Baroula que barouleras, au ti?u toujou t'entourneras."
Yes
Yes (as it will make easier the ETag checking also).
The fact that the other page is served with a Content-Location is
orthogonal.
If I take your example:
Content-Location=http://www.example.com/news/archived/2002/09/09/D1.htm
If you want to link http://www.example.com/D2.htm (that has a specific
semantic), the relative link from D1 to D2 should be
../../../../../D2.htm, regardless of the Content-Location of D2, as
semantic. So deferencing the targeted resource is not needed and only the
first two points should be implemented. In fact, just one thing needs to
be modified, the computation of the base URI of the document.
As explained in another email, the requested URI has a specific semantic
which may be different from the URI in the Content-Location.
Thanks,
Yves Lafon - W3C
"Baroula que barouleras, au ti?u toujou t'entourneras."
Yves,
Thanks for clearing this up. I just commited into CVS some new
code to use the Content-Location header for doing RFC2616
Base URI resolving inside Amaya.
We'll test it a bit more and see if it's ready for the forthcoming
release.
-jose

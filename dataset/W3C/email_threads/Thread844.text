Hi,
I've got a problem tidying a html document when trying to output as xml.
The problem is that a form is started in a table after the first tr but
before that tr 's first td . Hence the following errors and warning.
line 183 column 25 - Warning: missing /form before /td
line 427 column 17 - Error: discarding unexpected /form
line 498 column 9 - Error: discarding unexpected /form
The HTML snippet looks like this:
There are now several more tr s each with lots of td s and all of which
start and end correctly. Finally the problem bit ends with:
You will notice that form ends in apparently the correct position, that
being before the /tr which, in turn is correctly placed before the /table .
The problem seems to be the starting point of the form being before the
first td .
How can I make this get tidied. -- I am stuck!!
Thanks guys, regards,
..matthew
No, it isn't correct.
Move form to precede table and /form to follow /table
Thanks. I just worked this out a few minutes before your email arrived, but
my problem is that I need to Tidy a lot of these pages - too many to do
manually. Does anyone know how I can get HTML Tidy to tidy this without
having to change it manually? What options could I use? Or, since I don't
actually need any of the data in the forms, how I can remove them? Any
other ideas?
BTW: There are in fact 3 tables in the document that incorrectly have
form after the start of table .
Many thanks and regards,
..matthew
* Matthew Stanfield [Wed, 11/06/2003 at 15:41 +0100]
If your tags are on the same line, use sed
sed s! table form ! form table !g
else use awk.
You can even remove the breakline between end and begin tags and use
sed.
It is a bit "brute force", but it should work.
Jany
Thanks. I believe sed and awk are UNIX commands. I use HTML Tidy in some
screen scraping software I've written. The html is downloaded and tidied
into xml using tidied using Charles Reitzel's .net Wrapper for HTML Tidy,
then I run some xslt on the xml to extract the useful information. I don't
want to have to run an extra non-tidy routine to tidy my data. Is there no
way to achieve what I want from within Tidy?
Thanks guys and regards,
..matthew
Tidy does its best but it is too dangerous for it move the form
start and end tags arbitrarily. To do that would require a much
more in depth understanding of how a given page works.
This problem is why it makes sense to allow form fields to
directly reference the form rather than rely on being within
a form element. This is one of the benefits of XForms. We just
didn't realize the issue back in 1993 :-(
Dave Raggett dsr@w3.org W3C lead for voice and multimodal.
Thanks for the info. Dave.
One possible way around this problem for me would be to remove all form
tags, is there a way to tell Tidy to do this? All I really need is to get
valid xml outputted. So if I could simply tell Tidy not to process
form... and /form tags then I'd be sorted even if the input tags
remained making the output invalid html -- I just want valid xml. Is this
or something like it possible?
If not I'm going to have to write my own supplementary tidy routine to do
this. :-(
Many thanks for your help everyone, regards,
..matthew
PS. Dave -- Thanks for creating Tidy, it is very useful to me, and I
appreciate your placing it in the public domain a lot.
You could fairly easily modify Tidy to strip the form start and end
tags, but this isn't a feature of the current code base as is.
Dave Raggett dsr@w3.org W3C lead for voice and multimodal.
Concerning
there's a heuristic which sometimes help:
1. if there is a start-tag X inside an element E ...
and X is not allowed inside E
but E is allowed inside X
and X is allowed inside E's parent
then move X to just before E ...
2. if there is an end-tag /X inside an element E ...
and X is not allowed inside E -- these two conditions
but E is allowed inside X -- imply that X is not E
and X is (now) E's parent
then replace /X by /E /X E
and flag the new E as generated by Tidy.
3. if you find E /E where E was generated by Tidy,
quietly remove both E and /E .
In the table/form case, we get *
and rule 3 then quietly erases table /table
The Word-2000 option helps to tidy an htm file generated by Microsoft Word. Is there any way I can similarly clean up an Excel generated htm file?
Thanks,
Sailesh
Does `--force-output yes` help?
